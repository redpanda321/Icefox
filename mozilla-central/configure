#! /bin/sh






















































    









if test `uname -s | grep -c MINGW 2>/dev/null` != "0"; then
  msyshost=1
fi


# Read the user's .mozconfig script.  We can't do this in
# configure.in: autoconf puts the argument parsing code above anything
# expanded from configure.in, and we need to get the configure options
# from .mozconfig in place before that argument parsing code.
# Read in '.mozconfig' script to set the initial options.
# See the mozconfig2configure script for more details.
_AUTOCONF_TOOLS_DIR=`dirname $0`/./build/autoconf
. $_AUTOCONF_TOOLS_DIR/mozconfig2configure
# Guess values for system-dependent variables and create Makefiles.
# Generated automatically using autoconf version 2.13 
# Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
#
# This configure script is free software; the Free Software Foundation
# gives unlimited permission to copy, distribute and modify it.

# Defaults:
ac_help=
ac_default_prefix=/usr/local
# Any additions from configure.in:
ac_help="$ac_help
  --disable-compile-environment
                          Disable compiler/library checks."
ac_help="$ac_help
  --with-l10n-base=DIR    path to l10n repositories"
ac_help="$ac_help
  --with-gonk=DIR
               location of gonk dir"
ac_help="$ac_help
  --with-gonk-toolchain-prefix=DIR
                          prefix to gonk toolchain commands"
ac_help="$ac_help
  --with-android-ndk=DIR
                          location where the Android NDK can be found"
ac_help="$ac_help
  --with-android-toolchain=DIR
                          location of the android toolchain"
ac_help="$ac_help
  --with-android-gnu-compiler-version=VER
                          gnu compiler version to use, default 4.4.3"
ac_help="$ac_help
  --enable-android-libstdcxx
                          use GNU libstdc++ instead of STLPort"
ac_help="$ac_help
  --with-android-version=VER
                          android platform version, default 5 for arm, 9 for x86/mips"
ac_help="$ac_help
  --with-android-platform=DIR
                           location of platform dir"
ac_help="$ac_help
  --enable-metro           Enable Windows Metro build targets"
ac_help="$ac_help
  --with-windows-version=WINSDK_TARGETVER
                          Windows SDK version to target. Lowest version
                          currently allowed is 601 (Win7), highest is 602 (Win8)"
ac_help="$ac_help
  --with-system-ply       Use system installed python ply library"
ac_help="$ac_help
  --enable-macos-target=VER (default=10.6)
                          Set the minimum MacOS version needed at runtime"
ac_help="$ac_help
  --with-macos-sdk=dir    Location of platform SDK to use (Mac OS X only)"
ac_help="$ac_help
  --with-x                use the X Window System"
ac_help="$ac_help
  --with-arch=[[type|toolchain-default]]
                           Use specific CPU features (-march=type). Resets
                           thumb, fpu, float-abi, etc. defaults when set"
ac_help="$ac_help
  --with-thumb[[=yes|no|toolchain-default]]
                          Use Thumb instruction set (-mthumb)"
ac_help="$ac_help
  --with-thumb-interwork[[=yes|no|toolchain-default]]
                           Use Thumb/ARM instuctions interwork (-mthumb-interwork)"
ac_help="$ac_help
  --with-fpu=[[type|toolchain-default]]
                           Use specific FPU type (-mfpu=type)"
ac_help="$ac_help
  --with-float-abi=[[type|toolchain-default]]
                           Use specific arm float ABI (-mfloat-abi=type)"
ac_help="$ac_help
  --with-soft-float[[=yes|no|toolchain-default]]
                           Use soft float library (-msoft-float)"
ac_help="$ac_help
  --enable-address-sanitizer       Enable Address Sanitizer (default=no)"
ac_help="$ac_help
  --enable-llvm-hacks       Enable workarounds required for several LLVM instrumentations (default=no)"
ac_help="$ac_help
  --disable-os2-high-mem  Disable high-memory support on OS/2"
ac_help="$ac_help
  --enable-profiling      Set compile flags necessary for using sampling profilers (e.g. shark, perf)"
ac_help="$ac_help
  --disable-gcincremental Disable incremental GC"
ac_help="$ac_help
  --enable-gcgenerational Enable generational GC"
ac_help="$ac_help
  --enable-root-analysis  Enable moving GC stack root analysis"
ac_help="$ac_help
  --enable-exact-rooting  Enable use of exact stack roots for GC"
ac_help="$ac_help
  --enable-valgrind       Enable Valgrind integration hooks (default=no)"
ac_help="$ac_help
  --enable-dmdv           Enable DMDV; also disables jemalloc (default=no)"
ac_help="$ac_help
  --enable-jprof          Enable jprof profiling tool (needs mozilla/tools/jprof). Implies --enable-profiling."
ac_help="$ac_help
  --enable-shark          Enable shark remote profiling. Implies --enable-profiling."
ac_help="$ac_help
  --enable-callgrind      Enable callgrind profiling. Implies --enable-profiling."
ac_help="$ac_help
  --enable-vtune          Enable vtune profiling. Implies --enable-profiling."
ac_help="$ac_help
  --enable-cpp-rtti       Enable C++ RTTI "
ac_help="$ac_help
  --disable-icf          Disable Identical Code Folding"
ac_help="$ac_help
  --enable-dtrace         build with dtrace support if available (default=no)"
ac_help="$ac_help
  --with-linux-headers=DIR
                          location where the Linux kernel headers can be found"
ac_help="$ac_help
  --with-pthreads         Force use of system pthread library with NSPR "
ac_help="$ac_help
  --with-libxul-sdk=PFX   Use the libXUL SDK at <PFX>"
ac_help="$ac_help
  --with-system-libxul    Use system installed libxul SDK"
ac_help="$ac_help
  --with-system-nspr      Use system installed NSPR"
ac_help="$ac_help
  --with-nspr-prefix=PFX  Prefix where NSPR is installed"
ac_help="$ac_help
  --with-nspr-exec-prefix=PFX
                          Exec prefix where NSPR is installed"
ac_help="$ac_help
  --with-system-libevent[=PFX]
                          Use system libevent [installed at prefix PFX]"
ac_help="$ac_help
  --with-system-nss       Use system installed NSS"
ac_help="$ac_help
  --with-nss-prefix=PFX   Prefix where NSS is installed"
ac_help="$ac_help
  --with-nss-exec-prefix=PFX
                          Exec prefix where NSS is installed"
ac_help="$ac_help
  --with-system-jpeg[=PFX]
                          Use system libjpeg [installed at prefix PFX]"
ac_help="$ac_help
  --with-system-zlib[=PFX]
                          Use system libz [installed at prefix PFX]"
ac_help="$ac_help
  --with-system-bz2[=PFX]
                          Use system libbz2 [installed at prefix PFX]"
ac_help="$ac_help
  --with-system-png[=PFX]
                          Use system libpng [installed at prefix PFX]"
ac_help="$ac_help
  --enable-system-hunspell
                          Use system hunspell (located with pkgconfig)"
ac_help="$ac_help
  --enable-system-ffi       Use system libffi (located with pkgconfig)"
ac_help="$ac_help
  --with-java-bin-path=dir
                          Location of Java binaries (java, javac, jar)"
ac_help="$ac_help
  --enable-application=APP
                          Options include:
                            browser (Firefox)
                            xulrunner
                            tools/update-packaging (AUS-related packaging tools)"
ac_help="$ac_help
  --with-xulrunner-stub-name=appname   Create the xulrunner stub with the given name"
ac_help="$ac_help
  --enable-update-channel=CHANNEL
                          Select application update channel (default=default)"
ac_help="$ac_help
--with-app-name=APPNAME sets MOZ_APP_NAME to APPNAME"
ac_help="$ac_help
--with-app-basename=BASENAME sets MOZ_APP_BASENAME to BASENAME"
ac_help="$ac_help
  --with-android-sdk=DIR
                          location where the Android SDK can be found (base directory, e.g. .../android/platforms/android-6)"
ac_help="$ac_help
  --enable-default-toolkit=TK
                          Select default toolkit
                          Platform specific defaults:
                            Mac OS X - cairo-cocoa
                            OS/2 - cairo-os2
                            Win32 - cairo-windows
                            * - cairo-gtk2
                            * - cairo-qt"
ac_help="$ac_help
  --without-x              Build without X11"
ac_help="$ac_help
  --with-arm-kuser         Use kuser helpers (Linux/ARM only -- requires kernel 2.6.13 or later)"
ac_help="$ac_help
  --enable-startup-notification
                          Enable startup-notification support (default: disabled) "
ac_help="$ac_help
  --with-qtdir=\$dir       Specify Qt directory "
ac_help="$ac_help
  --enable-ui-locale=ab-CD
                          Select the user interface locale (default: en-US)"
ac_help="$ac_help
  --enable-official-branding
                          Enable Official mozilla.org Branding
                          Do not distribute builds with
                          --enable-official-branding unless you have
                          permission to use trademarks per
                          http://www.mozilla.org/foundation/trademarks/ ."
ac_help="$ac_help
  --with-branding=dir     Use branding from the specified directory."
ac_help="$ac_help
  --with-distribution-id=ID
                          Set distribution-specific id (default=org.mozilla)"
ac_help="$ac_help
  --disable-pango         Disable usage of Pango "
ac_help="$ac_help
  --enable-gnomevfs       Enable GnomeVFS support (default: disabled)"
ac_help="$ac_help
  --disable-gio           Disable GIO support"
ac_help="$ac_help
  --disable-gconf      Disable Gconf support "
ac_help="$ac_help
  --enable-libproxy         Enable libproxy support "
ac_help="$ac_help
  --enable-gnomeui        Enable libgnomeui instead of GIO & GTK for icon theme support "
ac_help="$ac_help
  --disable-dbus          Disable dbus support "
ac_help="$ac_help
  --disable-websms-backend
                           Disable WebSMS backend"
ac_help="$ac_help
  --disable-crypto        Disable crypto support (Personal Security Manager)"
ac_help="$ac_help
  --disable-jsd           Disable JavaScript debug library"
ac_help="$ac_help
  --enable-ipdl-tests     Enable expensive IPDL tests"
ac_help="$ac_help
  --enable-e10s-compat     Turns off code for e10s compat"
ac_help="$ac_help
  --disable-dbm           Disable building dbm"
ac_help="$ac_help
  --disable-accessibility Disable accessibility support"
ac_help="$ac_help
  --disable-printing      Disable printing support"
ac_help="$ac_help
  --disable-webrtc        Disable support for WebRTC"
ac_help="$ac_help
  --enable-raw           Enable support for RAW media"
ac_help="$ac_help
  --disable-ogg           Disable support for OGG media (Theora video and Vorbis audio)"
ac_help="$ac_help
  --disable-opus          Disable support for Opus audio"
ac_help="$ac_help
  --disable-webm          Disable support for WebM media (VP8 video and Vorbis audio)"
ac_help="$ac_help
  --disable-dash          Disable support for DASH-WebM"
ac_help="$ac_help
  --disable-wmf  Disable support for Windows Media Foundation"
ac_help="$ac_help
  --enable-media-plugins  Enable support for media plugins"
ac_help="$ac_help
  --enable-media-navigator  Enable support for getUserMedia"
ac_help="$ac_help
  --enable-omx-plugin      Enable building OMX plugin (B2G)"
ac_help="$ac_help
  --with-system-libvpx    Use system libvpx (located with pkgconfig)"
ac_help="$ac_help
  --disable-wave          Disable Wave decoder support"
ac_help="$ac_help
  --enable-alsa          Enable Alsa support (default on Linux)"
ac_help="$ac_help
  --enable-pulseaudio          Enable PulseAudio support (experimental)"
ac_help="$ac_help
  --enable-gstreamer           Enable GStreamer support"
ac_help="$ac_help
  --disable-permissions   Disable permissions (popup and cookie blocking)"
ac_help="$ac_help
  --disable-negotiateauth Disable GSS-API negotiation "
ac_help="$ac_help
  --disable-pref-extensions
                          Disable pref extensions such as autoconfig"
ac_help="$ac_help
  --disable-system-extension-dirs
                          Disable searching system- and account-global
                          directories for extensions of any kind; use
                          only profile-specific extension directories"
ac_help="$ac_help
  --disable-universalchardet
                          Disable universal encoding detection"
ac_help="$ac_help
  --disable-webgl     Disable building of the WebGL implementation"
ac_help="$ac_help
  --disable-crashreporter Disable breakpad crash reporting"
ac_help="$ac_help
  --with-crashreporter-enable-percent=NN
                          Enable sending crash reports by default on NN% of users. (default=100)"
ac_help="$ac_help
 --disable-libjpeg-turbo  Disable optimized jpeg decoding routines"
ac_help="$ac_help
  --enable-extensions     Enable extensions"
ac_help="$ac_help
  --enable-tree-freetype  Enable Tree FreeType"
ac_help="$ac_help
  --disable-webapp-runtime  Disable Web App Runtime"
ac_help="$ac_help
  --enable-maintenance-service       Enable building of maintenanceservice"
ac_help="$ac_help
  --enable-verify-mar     Enable verifying MAR signatures"
ac_help="$ac_help
  --enable-signmar     Enable building the signmar program"
ac_help="$ac_help
  --disable-updater       Disable building of updater"
ac_help="$ac_help
  --enable-update-packaging
                          Enable tools/update-packaging"
ac_help="$ac_help
  --disable-tests         Do not build test libraries & programs"
ac_help="$ac_help
  --disable-parental-controls
                          Do not build parental controls"
ac_help="$ac_help
  --disable-feeds         Disable feed handling and processing components"
ac_help="$ac_help
  --enable-system-sqlite  Use system sqlite (located with pkgconfig)"
ac_help="$ac_help
  --enable-safe-browsing  Enable safe browsing (anti-phishing) implementation"
ac_help="$ac_help
  --enable-url-classifier Enable url classifier module"
ac_help="$ac_help
  --disable-zipwriter     Disable zipwriter component"
ac_help="$ac_help
  --disable-libconic      Disable libconic"
ac_help="$ac_help
  --with-maemo-version=MAEMO_SDK_TARGET_VER
                          Maemo SDK Version"
ac_help="$ac_help
  --enable-meegocontentaction           Enable meegocontentaction support"
ac_help="$ac_help
  --enable-meegotouch  Enable meegotouch support"
ac_help="$ac_help
  --with-gl-provider=ID
                          Set GL provider backend type"
ac_help="$ac_help
  --enable-faststripe     Use faststripe theme"
ac_help="$ac_help
  --enable-debug[=DBG]    Enable building with developer debug info
                           (using compiler flags DBG)"
ac_help="$ac_help
  --with-debug-label=LABELS
                          Define DEBUG_<value> for each comma-separated
                          value given."
ac_help="$ac_help
  --enable-mobile-optimize
                          Enable mobile optimizations"
ac_help="$ac_help
  --disable-optimize      Disable compiler optimization
  --enable-optimize=[OPT] Specify compiler optimization flags [OPT=-O]"
ac_help="$ac_help
  --enable-debug-symbols[=DBG]
                          Enable debugging symbols (using compiler flags DBG)"
ac_help="$ac_help
  --enable-warnings-as-errors
                          Enable treating of warnings as errors"
ac_help="$ac_help
  --disable-logging       Disable logging facilities"
ac_help="$ac_help
  --enable-logrefcnt      Enable logging of refcounts (default=debug) "
ac_help="$ac_help
  --enable-dump-painting          Enable paint debugging."
ac_help="$ac_help
  --enable-trace-malloc   Enable malloc tracing; also disables DMD and jemalloc"
ac_help="$ac_help
  --enable-dmd            Enable DMD; also enables jemalloc and replace-malloc and disables DMDV"
ac_help="$ac_help
  --enable-jemalloc       Replace memory allocator with jemalloc"
ac_help="$ac_help
  --enable-replace-malloc   Enable ability to dynamically replace the malloc implementation"
ac_help="$ac_help
  --enable-wrap-malloc    Wrap malloc calls (gnu linker only)"
ac_help="$ac_help
  --with-wrap-malloc=DIR  Location of malloc wrapper library"
ac_help="$ac_help
  --enable-trace-jscalls  Enable JS call enter/exit callback (default=no)"
ac_help="$ac_help
  --disable-gcincremental Disable incremental GC"
ac_help="$ac_help
  --enable-ETW            Enable ETW (Event Tracing for Windows) event reporting"
ac_help="$ac_help
  --enable-gczeal         Enable zealous JavaScript GCing"
ac_help="$ac_help
  --enable-js-diagnostics
                          Enable JS diagnostic assertions and breakpad data"
ac_help="$ac_help
  --with-ccache[=path/to/ccache]
                          Enable compiling with ccache"
ac_help="$ac_help
  --with-static-checking=path/to/gcc_dehydra.so
                          Enable static checking of code using GCC-dehydra"
ac_help="$ac_help
  --enable-strip          Enable stripping of libs & executables "
ac_help="$ac_help
  --enable-install-strip  Enable stripping of libs & executables when packaging "
ac_help="$ac_help
  --enable-elf-dynstr-gc  Enable elf dynstr garbage collector (opt builds only)"
ac_help="$ac_help
  --disable-elf-hack      Disable elf hacks"
ac_help="$ac_help
  --enable-stdcxx-compat  Enable compatibility with older libstdc++"
ac_help="$ac_help
  --enable-visual-event-tracer   Enable visual event tracer instrumentation"
ac_help="$ac_help
  --enable-reflow-perf    Enable reflow performance tracing"
ac_help="$ac_help
  --enable-codesighs      Enable code size analysis tools"
ac_help="$ac_help
  --enable-b2g-ril      Set compile flags necessary for testing B2G Radio Interface Layer via network sockets "
ac_help="$ac_help
  --enable-b2g-bt      Set compile flags necessary for compiling Bluetooth API for B2G "
ac_help="$ac_help
  --enable-b2g-camera      Set compile flags necessary for compiling camera API for B2G "
ac_help="$ac_help
  --jitreport-granularity=N
                           Default granularity at which to report JIT code
                           to external tools
                             0 - no info
                             1 - code ranges for whole functions only
                             2 - per-line information
                             3 - per-op information"
ac_help="$ac_help
  --enable-xterm-updates  Update XTERM titles with current command."
ac_help="$ac_help
  --enable-chrome-format=jar|flat|both|symlink|omni
                          Select FORMAT of chrome files (default=jar)"
ac_help="$ac_help
  --with-default-mozilla-five-home
                          Set the default value for MOZILLA_FIVE_HOME"
ac_help="$ac_help
  --with-user-appdir=DIR  Set user-specific appdir (default=.mozilla)"
ac_help="$ac_help
  --with-doc-input-dirs=DIRS
                          Header/idl dirs to create docs from"
ac_help="$ac_help
  --with-doc-include-dirs=DIRS
                          Include dirs to preprocess doc headers"
ac_help="$ac_help
  --with-doc-output-dir=DIR
                          Dir to generate docs into"
ac_help="$ac_help
  --disable-pedantic      Issue all warnings demanded by strict ANSI C "
ac_help="$ac_help
  --enable-shared-js
                          Create a shared JavaScript library."
ac_help="$ac_help
  --enable-skia   Enable use of Skia"
ac_help="$ac_help
  --enable-system-cairo   Use system cairo (located with pkgconfig)"
ac_help="$ac_help
 --enable-system-pixman Use system pixman (located with pkgconfig)"
ac_help="$ac_help
  --disable-xul           Disable XUL"
ac_help="$ac_help
  --disable-profilelocking
                          Disable profile locking"
ac_help="$ac_help
  --enable-necko-protocols[={http,ftp,default,all,none}]
                          Enable/disable specific protocol handlers"
ac_help="$ac_help
  --disable-necko-wifi    Disable necko wifi scanner"
ac_help="$ac_help
  --disable-cookies       Disable cookie support"
ac_help="$ac_help
  --disable-ctypes        Disable js-ctypes"
ac_help="$ac_help
  --with-macbundlename-prefix=prefix
                          Prefix for MOZ_MACBUNDLE_NAME"

# Initialize some variables set by options.
# The variables have the same names as the options, with
# dashes changed to underlines.
build=NONE
cache_file=./config.cache
exec_prefix=NONE
host=NONE
no_create=
nonopt=NONE
no_recursion=
prefix=NONE
program_prefix=NONE
program_suffix=NONE
program_transform_name=s,x,x,
silent=
site=
srcdir=
target=NONE
verbose=
x_includes=NONE
x_libraries=NONE
bindir='${exec_prefix}/bin'
sbindir='${exec_prefix}/sbin'
libexecdir='${exec_prefix}/libexec'
datadir='${prefix}/share'
sysconfdir='${prefix}/etc'
sharedstatedir='${prefix}/com'
localstatedir='${prefix}/var'
libdir='${exec_prefix}/lib'
includedir='${prefix}/include'
oldincludedir='/usr/include'
infodir='${prefix}/info'
mandir='${prefix}/man'

# Initialize some other variables.
subdirs=
MFLAGS= MAKEFLAGS=
SHELL=${CONFIG_SHELL-/bin/sh}
# Maximum number of lines to put in a shell here document.
ac_max_here_lines=12

ac_prev=
for ac_option
do

  # If the previous option needs an argument, assign it.
  if test -n "$ac_prev"; then
    eval "$ac_prev=\$ac_option"
    ac_prev=
    continue
  fi

  case "$ac_option" in
  -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
  *) ac_optarg= ;;
  esac

  # Accept the important Cygnus configure options, so we can diagnose typos.

  case "$ac_option" in

  -bindir | --bindir | --bindi | --bind | --bin | --bi)
    ac_prev=bindir ;;
  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
    bindir="$ac_optarg" ;;

  -build | --build | --buil | --bui | --bu)
    ac_prev=build ;;
  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
    build="$ac_optarg" ;;

  -cache-file | --cache-file | --cache-fil | --cache-fi \
  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
    ac_prev=cache_file ;;
  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
    cache_file="$ac_optarg" ;;

  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
    ac_prev=datadir ;;
  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
  | --da=*)
    datadir="$ac_optarg" ;;

  -disable-* | --disable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    eval "enable_${ac_feature}=no" ;;

  -enable-* | --enable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "enable_${ac_feature}='$ac_optarg'" ;;

  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
  | --exec | --exe | --ex)
    ac_prev=exec_prefix ;;
  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
  | --exec=* | --exe=* | --ex=*)
    exec_prefix="$ac_optarg" ;;

  -gas | --gas | --ga | --g)
    # Obsolete; use --with-gas.
    with_gas=yes ;;

  -help | --help | --hel | --he)
    # Omit some internal or obsolete options to make the list less imposing.
    # This message is too long to be a string in the A/UX 3.1 sh.
    cat << EOF
Usage: configure [options] [host]
Options: [defaults in brackets after descriptions]
Configuration:
  --cache-file=FILE       cache test results in FILE
  --help                  print this message
  --no-create             do not create output files
  --quiet, --silent       do not print \`checking...' messages
  --version               print the version of autoconf that created configure
Directory and file names:
  --prefix=PREFIX         install architecture-independent files in PREFIX
                          [$ac_default_prefix]
  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
                          [same as prefix]
  --bindir=DIR            user executables in DIR [EPREFIX/bin]
  --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]
  --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]
  --datadir=DIR           read-only architecture-independent data in DIR
                          [PREFIX/share]
  --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]
  --sharedstatedir=DIR    modifiable architecture-independent data in DIR
                          [PREFIX/com]
  --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]
  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
  --includedir=DIR        C header files in DIR [PREFIX/include]
  --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]
  --infodir=DIR           info documentation in DIR [PREFIX/info]
  --mandir=DIR            man documentation in DIR [PREFIX/man]
  --srcdir=DIR            find the sources in DIR [configure dir or ..]
  --program-prefix=PREFIX prepend PREFIX to installed program names
  --program-suffix=SUFFIX append SUFFIX to installed program names
  --program-transform-name=PROGRAM
                          run sed PROGRAM on installed program names
EOF
    cat << EOF
Host type:
  --build=BUILD           configure for building on BUILD [BUILD=HOST]
  --host=HOST             configure for HOST [guessed]
  --target=TARGET         configure for TARGET [TARGET=HOST]
Features and packages:
  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
  --x-includes=DIR        X include files are in DIR
  --x-libraries=DIR       X library files are in DIR
EOF
    if test -n "$ac_help"; then
      echo "--enable and --with options recognized:$ac_help"
    fi
    exit 0 ;;

  -host | --host | --hos | --ho)
    ac_prev=host ;;
  -host=* | --host=* | --hos=* | --ho=*)
    host="$ac_optarg" ;;

  -includedir | --includedir | --includedi | --included | --include \
  | --includ | --inclu | --incl | --inc)
    ac_prev=includedir ;;
  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
  | --includ=* | --inclu=* | --incl=* | --inc=*)
    includedir="$ac_optarg" ;;

  -infodir | --infodir | --infodi | --infod | --info | --inf)
    ac_prev=infodir ;;
  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
    infodir="$ac_optarg" ;;

  -libdir | --libdir | --libdi | --libd)
    ac_prev=libdir ;;
  -libdir=* | --libdir=* | --libdi=* | --libd=*)
    libdir="$ac_optarg" ;;

  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
  | --libexe | --libex | --libe)
    ac_prev=libexecdir ;;
  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
  | --libexe=* | --libex=* | --libe=*)
    libexecdir="$ac_optarg" ;;

  -localstatedir | --localstatedir | --localstatedi | --localstated \
  | --localstate | --localstat | --localsta | --localst \
  | --locals | --local | --loca | --loc | --lo)
    ac_prev=localstatedir ;;
  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
  | --localstate=* | --localstat=* | --localsta=* | --localst=* \
  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
    localstatedir="$ac_optarg" ;;

  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
    ac_prev=mandir ;;
  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
    mandir="$ac_optarg" ;;

  -nfp | --nfp | --nf)
    # Obsolete; use --without-fp.
    with_fp=no ;;

  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c)
    no_create=yes ;;

  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
    no_recursion=yes ;;

  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
  | --oldin | --oldi | --old | --ol | --o)
    ac_prev=oldincludedir ;;
  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
    oldincludedir="$ac_optarg" ;;

  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
    ac_prev=prefix ;;
  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
    prefix="$ac_optarg" ;;

  -program-prefix | --program-prefix | --program-prefi | --program-pref \
  | --program-pre | --program-pr | --program-p)
    ac_prev=program_prefix ;;
  -program-prefix=* | --program-prefix=* | --program-prefi=* \
  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
    program_prefix="$ac_optarg" ;;

  -program-suffix | --program-suffix | --program-suffi | --program-suff \
  | --program-suf | --program-su | --program-s)
    ac_prev=program_suffix ;;
  -program-suffix=* | --program-suffix=* | --program-suffi=* \
  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
    program_suffix="$ac_optarg" ;;

  -program-transform-name | --program-transform-name \
  | --program-transform-nam | --program-transform-na \
  | --program-transform-n | --program-transform- \
  | --program-transform | --program-transfor \
  | --program-transfo | --program-transf \
  | --program-trans | --program-tran \
  | --progr-tra | --program-tr | --program-t)
    ac_prev=program_transform_name ;;
  -program-transform-name=* | --program-transform-name=* \
  | --program-transform-nam=* | --program-transform-na=* \
  | --program-transform-n=* | --program-transform-=* \
  | --program-transform=* | --program-transfor=* \
  | --program-transfo=* | --program-transf=* \
  | --program-trans=* | --program-tran=* \
  | --progr-tra=* | --program-tr=* | --program-t=*)
    program_transform_name="$ac_optarg" ;;

  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
  | -silent | --silent | --silen | --sile | --sil)
    silent=yes ;;

  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
    ac_prev=sbindir ;;
  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
  | --sbi=* | --sb=*)
    sbindir="$ac_optarg" ;;

  -sharedstatedir | --sharedstatedir | --sharedstatedi \
  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
  | --sharedst | --shareds | --shared | --share | --shar \
  | --sha | --sh)
    ac_prev=sharedstatedir ;;
  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
  | --sha=* | --sh=*)
    sharedstatedir="$ac_optarg" ;;

  -site | --site | --sit)
    ac_prev=site ;;
  -site=* | --site=* | --sit=*)
    site="$ac_optarg" ;;

  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
    ac_prev=srcdir ;;
  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
    srcdir="$ac_optarg" ;;

  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
  | --syscon | --sysco | --sysc | --sys | --sy)
    ac_prev=sysconfdir ;;
  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
    sysconfdir="$ac_optarg" ;;

  -target | --target | --targe | --targ | --tar | --ta | --t)
    ac_prev=target ;;
  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
    target="$ac_optarg" ;;

  -v | -verbose | --verbose | --verbos | --verbo | --verb)
    verbose=yes ;;

  -version | --version | --versio | --versi | --vers)
    echo "configure generated by autoconf version 2.13"
    exit 0 ;;

  -with-* | --with-*)
    ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "with_${ac_package}='$ac_optarg'" ;;

  -without-* | --without-*)
    ac_package=`echo $ac_option|sed -e 's/-*without-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    eval "with_${ac_package}=no" ;;

  --x)
    # Obsolete; use --with-x.
    with_x=yes ;;

  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
  | --x-incl | --x-inc | --x-in | --x-i)
    ac_prev=x_includes ;;
  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
    x_includes="$ac_optarg" ;;

  -x-libraries | --x-libraries | --x-librarie | --x-librari \
  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
    ac_prev=x_libraries ;;
  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
    x_libraries="$ac_optarg" ;;

  -*) { echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&2; exit 1; }
    ;;

  *)
    if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
      echo "configure: warning: $ac_option: invalid host type" 1>&2
    fi
    if test "x$nonopt" != xNONE; then
      { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; }
    fi
    nonopt="$ac_option"
    ;;

  esac
done

if test -n "$ac_prev"; then
  { echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&2; exit 1; }
fi

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

# File descriptor usage:
# 0 standard input
# 1 file creation
# 2 errors and warnings
# 3 some systems may open it to /dev/tty
# 4 used on the Kubota Titan
# 6 checking for... messages and results
# 5 compiler messages saved in config.log
if test "$silent" = yes; then
  exec 6>/dev/null
else
  exec 6>&1
fi
exec 5>./config.log

echo "\
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.
" 1>&5

# Strip out --no-create and --no-recursion so they do not pile up.
# Also quote any args containing shell metacharacters.
ac_configure_args=
for ac_arg
do
  case "$ac_arg" in
  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c) ;;
  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
  esac
done

# NLS nuisances.
# Only set these to C if already set.  These must not be set unconditionally
# because not all systems understand e.g. LANG=C (notably SCO).
# Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!
# Non-C LC_CTYPE values break the ctype check.
if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
if test "${LC_MESSAGES+set}" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi
if test "${LC_CTYPE+set}"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi

# confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -rf conftest* confdefs.h
# AIX cpp loses on an empty file, so make sure it contains at least a newline.
echo > confdefs.h

# A filename unique to this package, relative to the directory that
# configure is in, which we can look for to find out if srcdir is correct.
ac_unique_file=config/config.mk

# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then its parent.
  ac_prog=$0
  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
  srcdir=$ac_confdir
  if test ! -r $srcdir/$ac_unique_file; then
    srcdir=..
  fi
else
  ac_srcdir_defaulted=no
fi
if test ! -r $srcdir/$ac_unique_file; then
  if test "$ac_srcdir_defaulted" = yes; then
    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
  else
    { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
  fi
fi
srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`

# Prefer explicitly selected file to automatically selected ones.
if test -z "$CONFIG_SITE"; then
  if test "x$prefix" != xNONE; then
    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
  else
    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
  fi
fi
for ac_site_file in $CONFIG_SITE; do
  if test -r "$ac_site_file"; then
    echo "loading site script $ac_site_file"
    . "$ac_site_file"
  fi
done

if test -r "$cache_file"; then
  echo "loading cache $cache_file"
  . $cache_file
else
  echo "creating cache $cache_file"
  > $cache_file
fi

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

ac_exeext=
ac_objext=o
if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
    ac_n= ac_c='
' ac_t='	'
  else
    ac_n=-n ac_c= ac_t=
  fi
else
  ac_n= ac_c='\c' ac_t=
fi


ac_aux_dir=
for ac_dir in ${srcdir}/build/autoconf $srcdir/${srcdir}/build/autoconf; do
  if test -f $ac_dir/install-sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install-sh -c"
    break
  elif test -f $ac_dir/install.sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install.sh -c"
    break
  fi
done
if test -z "$ac_aux_dir"; then
  { echo "configure: error: can not find install-sh or install.sh in ${srcdir}/build/autoconf $srcdir/${srcdir}/build/autoconf" 1>&2; exit 1; }
fi
ac_config_guess=$ac_aux_dir/config.guess
ac_config_sub=$ac_aux_dir/config.sub
ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.


# Do some error checking and defaulting for the host and target type.
# The inputs are:
#    configure --host=HOST --target=TARGET --build=BUILD NONOPT
#
# The rules are:
# 1. You are not allowed to specify --host, --target, and nonopt at the
#    same time.
# 2. Host defaults to nonopt.
# 3. If nonopt is not specified, then host defaults to the current host,
#    as determined by config.guess.
# 4. Target and build default to nonopt.
# 5. If nonopt is not specified, then target and build default to host.

# The aliases save the names the user supplied, while $host etc.
# will get canonicalized.
case $host---$target---$nonopt in
NONE---*---* | *---NONE---* | *---*---NONE) ;;
*) { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; } ;;
esac


# Make sure we can run config.sub.
if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
fi

echo $ac_n "checking host system type""... $ac_c" 1>&6
echo "configure:1104: checking host system type" >&5

host_alias=$host
case "$host_alias" in
NONE)
  case $nonopt in
  NONE)
    if host_alias=`${CONFIG_SHELL-/bin/sh} $ac_config_guess`; then :
    else { echo "configure: error: can not guess host type; you must specify one" 1>&2; exit 1; }
    fi ;;
  *) host_alias=$nonopt ;;
  esac ;;
esac

host=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $host_alias`
host_cpu=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
host_vendor=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
host_os=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$host" 1>&6

echo $ac_n "checking target system type""... $ac_c" 1>&6
echo "configure:1125: checking target system type" >&5

target_alias=$target
case "$target_alias" in
NONE)
  case $nonopt in
  NONE) target_alias=$host_alias ;;
  *) target_alias=$nonopt ;;
  esac ;;
esac

target=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $target_alias`
target_cpu=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
target_vendor=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
target_os=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$target" 1>&6

echo $ac_n "checking build system type""... $ac_c" 1>&6
echo "configure:1143: checking build system type" >&5

build_alias=$build
case "$build_alias" in
NONE)
  case $nonopt in
  NONE) build_alias=$host_alias ;;
  *) build_alias=$nonopt ;;
  esac ;;
esac

build=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $build_alias`
build_cpu=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
build_vendor=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
build_os=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$build" 1>&6

test "$host_alias" != "$target_alias" &&
  test "$program_prefix$program_suffix$program_transform_name" = \
    NONENONEs,x,x, &&
  program_prefix=${target_alias}-

TARGET_CPU="${target_cpu}"
TARGET_VENDOR="${target_vendor}"
TARGET_OS="${target_os}"

MOZ_DEB_TIMESTAMP=`date +"%a, %d  %b %Y %T %z"   2>&1`


CFLAGS="${CFLAGS=}"
CPPFLAGS="${CPPFLAGS=}"
CXXFLAGS="${CXXFLAGS=}"
LDFLAGS="${LDFLAGS=}"
HOST_CFLAGS="${HOST_CFLAGS=}"
HOST_CXXFLAGS="${HOST_CXXFLAGS=}"
HOST_LDFLAGS="${HOST_LDFLAGS=}"

_SUBDIR_CC="$CC"
_SUBDIR_CXX="$CXX"
_SUBDIR_CFLAGS="$CFLAGS"
_SUBDIR_CPPFLAGS="$CPPFLAGS"
_SUBDIR_CXXFLAGS="$CXXFLAGS"
_SUBDIR_LDFLAGS="$LDFLAGS"
_SUBDIR_HOST_CC="$HOST_CC"
_SUBDIR_HOST_CFLAGS="$HOST_CFLAGS"
_SUBDIR_HOST_CXXFLAGS="$HOST_CXXFLAGS"
_SUBDIR_HOST_LDFLAGS="$HOST_LDFLAGS"
_SUBDIR_CONFIG_ARGS="$ac_configure_args"

MOZJPEG=62
MOZPNG=10513
NSPR_VERSION=4
NSS_VERSION=3

GLIB_VERSION=1.2.0
PERL_VERSION=5.006
CAIRO_VERSION=1.10
PANGO_VERSION=1.14.0
GTK2_VERSION=2.10.0
WINDRES_VERSION=2.14.90
W32API_VERSION=3.14
GNOMEVFS_VERSION=2.0
GNOMEUI_VERSION=2.2.0
GCONF_VERSION=1.2.1
GIO_VERSION=2.20
STARTUP_NOTIFICATION_VERSION=0.8
DBUS_VERSION=0.60
SQLITE_VERSION=3.7.14.1

MSMANIFEST_TOOL=

MISSING_X=
for ac_prog in mawk gawk nawk awk
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1220: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_AWK'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$AWK"; then
  ac_cv_prog_AWK="$AWK" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_AWK="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
AWK="$ac_cv_prog_AWK"
if test -n "$AWK"; then
  echo "$ac_t""$AWK" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AWK" && break
done


USE_PTHREADS=
_PTHREAD_LDFLAGS=""

_topsrcdir=`cd \`dirname $0\`; pwd`
_objdir=`pwd`

if test "$_topsrcdir" != "$_objdir"
then
  # Check for a couple representative files in the source tree
  _conflict_files=
  for file in $_topsrcdir/Makefile $_topsrcdir/config/autoconf.mk; do
    if test -f $file; then
      _conflict_files="$_conflict_files $file"
    fi
  done
  if test "$_conflict_files"; then
    echo "***"
    echo "*   Your source tree contains these files:"
    for file in $_conflict_files; do
      echo "*         $file"
    done
    cat 1>&2 <<-EOF
	*   This indicates that you previously built in the source tree.
	*   A source tree build can confuse the separate objdir build.
	*
	*   To clean up the source tree:
	*     1. cd $_topsrcdir
	*     2. gmake distclean
	***
	EOF
    exit 1
    break
  fi
fi
MOZ_BUILD_ROOT=`pwd`

if test -e $_objdir/CLOBBER; then
  if test $_topsrcdir/CLOBBER -nt $_objdir/CLOBBER; then
    echo "	***"
    echo "	*	CLOBBER has been modified indicating a clobber is required:"
    cat $_topsrcdir/CLOBBER | sed '/^#/d' | sed 's/^/	*	/'
    echo "	***"
    exit 1
    break;
  fi
else
  touch $_objdir/CLOBBER
fi

  for ac_prog in $PYTHON python2.7 python2.6 python2.5 python
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1304: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PYTHON'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PYTHON" in
  /*)
  ac_cv_path_PYTHON="$PYTHON" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PYTHON="$PYTHON" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PYTHON="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
PYTHON="$ac_cv_path_PYTHON"
if test -n "$PYTHON"; then
  echo "$ac_t""$PYTHON" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$PYTHON" && break
done

  if test "$msyshost"; then
    case "$PYTHON" in
    /*)
      tmp_DIRNAME=`dirname "$PYTHON"`
      tmp_BASENAME=`basename "$PYTHON"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      PYTHON="$tmp_PWD/$tmp_BASENAME"
      if test -e "$PYTHON.exe"; then
        PYTHON="$PYTHON.exe"
      fi
    esac
  fi

if test -z "$PYTHON"; then
    { echo "configure: error: python was not found in \$PATH" 1>&2; exit 1; }
fi

echo "$ac_t""Creating Python environment" 1>&6
$PYTHON $_topsrcdir/build/virtualenv/populate_virtualenv.py \
    $_topsrcdir $MOZ_BUILD_ROOT/_virtualenv || exit 1

case "$host_os" in
mingw*)
    PYTHON=`cd $MOZ_BUILD_ROOT && pwd -W`/_virtualenv/Scripts/python.exe
    ;;
*)
    PYTHON=$MOZ_BUILD_ROOT/_virtualenv/bin/python
    ;;
esac




if test -z "$CROSS_COMPILE"; then
case "$target" in
*-mingw*)
    if test -z "$CC"; then CC=cl; fi
    if test -z "$CXX"; then CXX=cl; fi
    if test -z "$CPP"; then CPP="cl -E -nologo"; fi
    if test -z "$CXXCPP"; then CXXCPP="cl -TP -E -nologo"; ac_cv_prog_CXXCPP="$CXXCPP"; fi
    if test -z "$LD"; then LD=link; fi
    if test -z "$AS"; then
        case "${target_cpu}" in
        i*86)
            AS=ml;
            ;;
        x86_64)
            AS=ml64;
            ;;
        esac
    fi
    if test -z "$MIDL"; then MIDL=midl; fi

    # need override this flag since we don't use $(LDFLAGS) for this.
    if test -z "$HOST_LDFLAGS" ; then
        HOST_LDFLAGS=" "
    fi
    ;;
*-darwin*)
    # GCC on darwin is based on gcc 4.2 and we don't support it anymore.
    if test -z "$CC"; then
          for ac_prog in clang
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1405: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$CC" in
  /*)
  ac_cv_path_CC="$CC" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_CC="$CC" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_CC="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
CC="$ac_cv_path_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CC" && break
done

  if test "$msyshost"; then
    case "$CC" in
    /*)
      tmp_DIRNAME=`dirname "$CC"`
      tmp_BASENAME=`basename "$CC"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      CC="$tmp_PWD/$tmp_BASENAME"
      if test -e "$CC.exe"; then
        CC="$CC.exe"
      fi
    esac
  fi

    fi
    if test -z "$CXX"; then
          for ac_prog in clang++
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1460: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$CXX" in
  /*)
  ac_cv_path_CXX="$CXX" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_CXX="$CXX" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_CXX="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
CXX="$ac_cv_path_CXX"
if test -n "$CXX"; then
  echo "$ac_t""$CXX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CXX" && break
done

  if test "$msyshost"; then
    case "$CXX" in
    /*)
      tmp_DIRNAME=`dirname "$CXX"`
      tmp_BASENAME=`basename "$CXX"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      CXX="$tmp_PWD/$tmp_BASENAME"
      if test -e "$CXX.exe"; then
        CXX="$CXX.exe"
      fi
    esac
  fi

    fi
    IS_GCC=$($CC -v 2>&1 | grep gcc)
    if test -n "$IS_GCC"
    then
      echo gcc is known to be broken on OS X, please use clang.
      echo see http://developer.mozilla.org/en-US/docs/Developer_Guide/Build_Instructions/Mac_OS_X_Prerequisites
      echo for more information.
      exit 1
    fi
    ;;
esac
fi


COMPILE_ENVIRONMENT=1
# Check whether --enable-compile-environment or --disable-compile-environment was given.
if test "${enable_compile_environment+set}" = set; then
  enableval="$enable_compile_environment"
  if test "$enableval" = "no"; then
    COMPILE_ENVIRONMENT= 
  elif test "$enableval" = "yes"; then
    :
  else
    { echo "configure: error: Option, compile-environment, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi



# Check whether --with-l10n-base or --without-l10n-base was given.
if test "${with_l10n_base+set}" = set; then
  withval="$with_l10n_base"
  L10NBASEDIR=$withval
fi

if test -n "$L10NBASEDIR"; then
    if test "$L10NBASEDIR" = "yes" -o "$L10NBASEDIR" = "no"; then
        { echo "configure: error: --with-l10n-base must specify a path" 1>&2; exit 1; }
    elif test -d "$L10NBASEDIR"; then
        L10NBASEDIR=`cd "$L10NBASEDIR" && pwd`
    else
        { echo "configure: error: Invalid value --with-l10n-base, $L10NBASEDIR doesn't exist" 1>&2; exit 1; }
    fi
fi


  for ac_prog in $PERL perl5 perl 
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1559: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PERL'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PERL" in
  /*)
  ac_cv_path_PERL="$PERL" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PERL="$PERL" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PERL="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
PERL="$ac_cv_path_PERL"
if test -n "$PERL"; then
  echo "$ac_t""$PERL" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$PERL" && break
done

  if test "$msyshost"; then
    case "$PERL" in
    /*)
      tmp_DIRNAME=`dirname "$PERL"`
      tmp_BASENAME=`basename "$PERL"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      PERL="$tmp_PWD/$tmp_BASENAME"
      if test -e "$PERL.exe"; then
        PERL="$PERL.exe"
      fi
    esac
  fi

if test -z "$PERL" -o "$PERL" = ":"; then
    { echo "configure: error: perl not found in \$PATH" 1>&2; exit 1; }
fi


if test -n "$GAIADIR" ; then
    cat >> confdefs.pytmp <<\EOF
    (''' PACKAGE_GAIA ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define PACKAGE_GAIA 1
EOF

fi

# Check whether --with-gonk or --without-gonk was given.
if test "${with_gonk+set}" = set; then
  withval="$with_gonk"
  gonkdir=$withval
fi


# Check whether --with-gonk-toolchain-prefix or --without-gonk-toolchain-prefix was given.
if test "${with_gonk_toolchain_prefix+set}" = set; then
  withval="$with_gonk_toolchain_prefix"
  gonk_toolchain_prefix=$withval
fi


if test -n "$gonkdir" ; then
    kernel_name=`uname -s | tr "[:upper:]" "[:lower:]"`
    android_source="$gonkdir"
    ANDROID_SOURCE="$android_source"
    ANDROID_NDK="${ANDROID_SOURCE}/ndk"

        TOOLCHAIN_PREFIX="$gonk_toolchain_prefix"
    AS="$gonk_toolchain_prefix"as
    CC="$gonk_toolchain_prefix"gcc
    CXX="$gonk_toolchain_prefix"g++
    CPP="$gonk_toolchain_prefix"cpp
    LD="$gonk_toolchain_prefix"ld
    AR="$gonk_toolchain_prefix"ar
    RANLIB="$gonk_toolchain_prefix"ranlib
    STRIP="$gonk_toolchain_prefix"strip
    OBJCOPY="$gonk_toolchain_prefix"objcopy

    STLPORT_CPPFLAGS="-I$gonkdir/ndk/sources/cxx-stl/stlport/stlport/ -I$gonkdir/external/stlport/stlport/"
    STLPORT_LIBS="-lstlport"

    case "$target_cpu" in
    arm)
        ARCH_DIR=arch-arm
        ;;
    i?86)
        ARCH_DIR=arch-x86
        ;;
    esac

    CPPFLAGS="-DANDROID -isystem $gonkdir/bionic/libc/$ARCH_DIR/include -isystem $gonkdir/bionic/libc/include/ -isystem $gonkdir/bionic/libc/kernel/common -isystem $gonkdir/bionic/libc/kernel/$ARCH_DIR -isystem $gonkdir/bionic/libm/include -I$gonkdir/frameworks/base/opengl/include -I$gonkdir/frameworks/base/native/include -I$gonkdir/hardware/libhardware/include -I$gonkdir/hardware/libhardware_legacy/include -I$gonkdir/system -I$gonkdir/system/core/include -isystem $gonkdir/bionic -I$gonkdir/frameworks/base/include -I$gonkdir/external/dbus -I$gonkdir/external/bluetooth/bluez/lib $CPPFLAGS -I$gonkdir/frameworks/base/services/sensorservice -I$gonkdir/frameworks/base/services/camera -I$gonkdir/system/media/wilhelm/include -I$gonkdir/frameworks/base/include/media/stagefright -I$gonkdir/frameworks/base/include/media/stagefright/openmax -I$gonkdir/frameworks/base/media/libstagefright/rtsp -I$gonkdir/frameworks/base/media/libstagefright/include -I$gonkdir/dalvik/libnativehelper/include/nativehelper"
    CFLAGS="-mandroid -fno-short-enums -fno-exceptions $CFLAGS"
    CXXFLAGS="-mandroid -fno-short-enums -fno-exceptions -Wno-psabi $CXXFLAGS $STLPORT_CPPFLAGS"
        LIBS="$LIBS -llog $STLPORT_LIBS"

    LDFLAGS="-mandroid -L$gonkdir/out/target/product/$GONK_PRODUCT/obj/lib -Wl,-rpath-link=$gonkdir/out/target/product/$GONK_PRODUCT/obj/lib --sysroot=$gonkdir/out/target/product/$GONK_PRODUCT/obj/ $LDFLAGS"

        if test -z "$HOST_CPPFLAGS" ; then
        HOST_CPPFLAGS=" "
    fi
    if test -z "$HOST_CFLAGS" ; then
        HOST_CFLAGS=" "
    fi
    if test -z "$HOST_CXXFLAGS" ; then
        HOST_CXXFLAGS=" "
    fi
    if test -z "$HOST_LDFLAGS" ; then
        HOST_LDFLAGS=" "
    fi

    cat >> confdefs.pytmp <<\EOF
    (''' ANDROID ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define ANDROID 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SYS_UIO_H ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SYS_UIO_H 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_PTHREADS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_PTHREADS 1
EOF

    CROSS_COMPILE=1
    MOZ_CHROME_FILE_FORMAT=omni
    direct_nspr_config=1
else
    

# Check whether --with-android-ndk or --without-android-ndk was given.
if test "${with_android_ndk+set}" = set; then
  withval="$with_android_ndk"
  android_ndk=$withval
fi


# Check whether --with-android-toolchain or --without-android-toolchain was given.
if test "${with_android_toolchain+set}" = set; then
  withval="$with_android_toolchain"
  android_toolchain=$withval
fi


android_gnu_compiler_version=4.4.3

# Check whether --with-android-gnu-compiler-version or --without-android-gnu-compiler-version was given.
if test "${with_android_gnu_compiler_version+set}" = set; then
  withval="$with_android_gnu_compiler_version"
  android_gnu_compiler_version=$withval
fi


# Check whether --enable-android-libstdcxx or --disable-android-libstdcxx was given.
if test "${enable_android_libstdcxx+set}" = set; then
  enableval="$enable_android_libstdcxx"
  if test "$enableval" = "yes"; then
    MOZ_ANDROID_LIBSTDCXX=1
  elif test "$enableval" = "no"; then
    MOZ_ANDROID_LIBSTDCXX= 
  else
    { echo "configure: error: Option, android-libstdcxx, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


case "$target_cpu" in
arm)
    android_version=5
    ;;
i?86|mipsel)
    android_version=9
    ;;
esac

# Check whether --with-android-version or --without-android-version was given.
if test "${with_android_version+set}" = set; then
  withval="$with_android_version"
  android_version=$withval
fi


# Check whether --with-android-platform or --without-android-platform was given.
if test "${with_android_platform+set}" = set; then
  withval="$with_android_platform"
  android_platform=$withval
fi


case "$target" in
arm-linux*-android*|*-linuxandroid*)
    android_tool_prefix="arm-linux-androideabi"
    ;;
i?86-*android*)
    android_tool_prefix="i686-linux-android"
    ;;
mipsel-*android*)
    android_tool_prefix="mipsel-linux-android"
    ;;
*)
    android_tool_prefix="$target_os"
    ;;
esac

case "$target" in
*-android*|*-linuxandroid*)
    if test -z "$android_ndk" ; then
        { echo "configure: error: You must specify --with-android-ndk=/path/to/ndk when targeting Android." 1>&2; exit 1; }
    fi

    if test -z "$android_toolchain" ; then
        echo $ac_n "checking for android toolchain directory""... $ac_c" 1>&6
echo "configure:1794: checking for android toolchain directory" >&5

        kernel_name=`uname -s | tr "[:upper:]" "[:lower:]"`

        case "$target_cpu" in
        arm)
            target_name=arm-linux-androideabi-$android_gnu_compiler_version
            ;;
        i?86)
            target_name=x86-$android_gnu_compiler_version
            ;;
        mipsel)
            target_name=mipsel-linux-android-$android_gnu_compiler_version
            ;;
        esac
        android_toolchain="$android_ndk"/toolchains/$target_name/prebuilt/$kernel_name-x86

        if test -d "$android_toolchain" ; then
            echo "$ac_t""$android_toolchain" 1>&6
        else
            { echo "configure: error: not found. You have to specify --with-android-toolchain=/path/to/ndk/toolchain." 1>&2; exit 1; }
        fi
    fi

    if test -z "$android_platform" ; then
        echo $ac_n "checking for android platform directory""... $ac_c" 1>&6
echo "configure:1820: checking for android platform directory" >&5

        case "$target_cpu" in
        arm)
            target_name=arm
            ;;
        i?86)
            target_name=x86
            ;;
        mipsel)
            target_name=mips
            ;;
        esac

        android_platform="$android_ndk"/platforms/android-"$android_version"/arch-"$target_name"

        if test -d "$android_platform" ; then
            echo "$ac_t""$android_platform" 1>&6
        else
            { echo "configure: error: not found. You have to specify --with-android-platform=/path/to/ndk/platform." 1>&2; exit 1; }
        fi
    fi

            case "$target_cpu" in
    i?86)
        if ! test -e "$android_toolchain"/bin/"$android_tool_prefix"-gcc; then
                        android_tool_prefix="i686-android-linux"
        fi
        ;;
    esac

        TOOLCHAIN_PREFIX="$android_toolchain/bin/$android_tool_prefix-"
    AS="$android_toolchain"/bin/"$android_tool_prefix"-as
    CC="$android_toolchain"/bin/"$android_tool_prefix"-gcc
    CXX="$android_toolchain"/bin/"$android_tool_prefix"-g++
    CPP="$android_toolchain"/bin/"$android_tool_prefix"-cpp
    LD="$android_toolchain"/bin/"$android_tool_prefix"-ld
    AR="$android_toolchain"/bin/"$android_tool_prefix"-ar
    RANLIB="$android_toolchain"/bin/"$android_tool_prefix"-ranlib
    STRIP="$android_toolchain"/bin/"$android_tool_prefix"-strip
    OBJCOPY="$android_toolchain"/bin/"$android_tool_prefix"-objcopy

    CPPFLAGS="-isystem $android_platform/usr/include $CPPFLAGS"
    CFLAGS="-mandroid -fno-short-enums -fno-exceptions $CFLAGS"
    CXXFLAGS="-mandroid -fno-short-enums -fno-exceptions -Wno-psabi $CXXFLAGS"
    ASFLAGS="-isystem $android_platform/usr/include -DANDROID $ASFLAGS"

                    LDFLAGS="-mandroid -L$android_platform/usr/lib -Wl,-rpath-link=$android_platform/usr/lib --sysroot=$android_platform -llog -Wl,--allow-shlib-undefined $LDFLAGS"
        if test -z "$HOST_CPPFLAGS" ; then
        HOST_CPPFLAGS=" "
    fi
    if test -z "$HOST_CFLAGS" ; then
        HOST_CFLAGS=" "
    fi
    if test -z "$HOST_CXXFLAGS" ; then
        HOST_CXXFLAGS=" "
    fi
    if test -z "$HOST_LDFLAGS" ; then
        HOST_LDFLAGS=" "
    fi

    ANDROID_NDK="${android_ndk}"
    ANDROID_TOOLCHAIN="${android_toolchain}"
    ANDROID_PLATFORM="${android_platform}"
    ANDROID_VERSION="${android_version}"

    cat >> confdefs.pytmp <<\EOF
    (''' ANDROID ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define ANDROID 1
EOF

    cat >> confdefs.pytmp <<EOF
    (''' ANDROID_VERSION ''', r''' $android_version ''')
EOF
cat >> confdefs.h <<EOF
#define ANDROID_VERSION $android_version
EOF

    
    CROSS_COMPILE=1
    
    
    

    ;;
esac



    case "$target" in
    *-android*|*-linuxandroid*)
        if test -z "$ANDROID_PACKAGE_NAME" ; then
            ANDROID_PACKAGE_NAME='org.mozilla.$(MOZ_APP_NAME)'
        fi
        MOZ_CHROME_FILE_FORMAT=omni
        ZLIB_DIR=yes
        ;;
    *-linux*)
        # Extract the first word of "objcopy", so it can be a program name with args.
set dummy objcopy; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1923: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_OBJCOPY'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$OBJCOPY" in
  /*)
  ac_cv_path_OBJCOPY="$OBJCOPY" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_OBJCOPY="$OBJCOPY" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_OBJCOPY="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
OBJCOPY="$ac_cv_path_OBJCOPY"
if test -n "$OBJCOPY"; then
  echo "$ac_t""$OBJCOPY" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

        ;;
    esac
fi






AR_FLAGS='cr $@'

if test "$COMPILE_ENVIRONMENT"; then

if test -n "$CROSS_COMPILE" -a "$target" != "$host"; then
    echo "cross compiling from $host to $target"
    cross_compiling=yes

    _SAVE_CC="$CC"
    _SAVE_CFLAGS="$CFLAGS"
    _SAVE_LDFLAGS="$LDFLAGS"

    echo $ac_n "checking for host c compiler""... $ac_c" 1>&6
echo "configure:1977: checking for host c compiler" >&5
    for ac_prog in $HOST_CC gcc cc /usr/ucb/cc cl icc
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1983: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_HOST_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$HOST_CC"; then
  ac_cv_prog_HOST_CC="$HOST_CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_HOST_CC="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
HOST_CC="$ac_cv_prog_HOST_CC"
if test -n "$HOST_CC"; then
  echo "$ac_t""$HOST_CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$HOST_CC" && break
done
test -n "$HOST_CC" || HOST_CC=""""

    if test -z "$HOST_CC"; then
        { echo "configure: error: no acceptable c compiler found in \$PATH" 1>&2; exit 1; }
    fi
    echo "$ac_t""$HOST_CC" 1>&6
    echo $ac_n "checking for host c++ compiler""... $ac_c" 1>&6
echo "configure:2018: checking for host c++ compiler" >&5
    for ac_prog in $HOST_CXX $CCC c++ g++ gcc CC cxx cc++ cl icc
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2024: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_HOST_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$HOST_CXX"; then
  ac_cv_prog_HOST_CXX="$HOST_CXX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_HOST_CXX="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
HOST_CXX="$ac_cv_prog_HOST_CXX"
if test -n "$HOST_CXX"; then
  echo "$ac_t""$HOST_CXX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$HOST_CXX" && break
done
test -n "$HOST_CXX" || HOST_CXX=""""

    if test -z "$HOST_CXX"; then
        { echo "configure: error: no acceptable c++ compiler found in \$PATH" 1>&2; exit 1; }
    fi
    echo "$ac_t""$HOST_CXX" 1>&6

    if test -z "$HOST_CFLAGS"; then
        HOST_CFLAGS="$CFLAGS"
    fi
    if test -z "$HOST_CXXFLAGS"; then
        HOST_CXXFLAGS="$CXXFLAGS"
    fi
    if test -z "$HOST_LDFLAGS"; then
        HOST_LDFLAGS="$LDFLAGS"
    fi
    if test -z "$HOST_AR_FLAGS"; then
        HOST_AR_FLAGS="$AR_FLAGS"
    fi
    for ac_prog in $HOST_RANLIB ranlib
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2076: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_HOST_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$HOST_RANLIB"; then
  ac_cv_prog_HOST_RANLIB="$HOST_RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy=":"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_HOST_RANLIB="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
HOST_RANLIB="$ac_cv_prog_HOST_RANLIB"
if test -n "$HOST_RANLIB"; then
  echo "$ac_t""$HOST_RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$HOST_RANLIB" && break
done
test -n "$HOST_RANLIB" || HOST_RANLIB="ranlib"

    for ac_prog in $HOST_AR ar
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2111: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_HOST_AR'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$HOST_AR"; then
  ac_cv_prog_HOST_AR="$HOST_AR" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy=":"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_HOST_AR="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
HOST_AR="$ac_cv_prog_HOST_AR"
if test -n "$HOST_AR"; then
  echo "$ac_t""$HOST_AR" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$HOST_AR" && break
done
test -n "$HOST_AR" || HOST_AR="ar"

    CC="$HOST_CC"
    CFLAGS="$HOST_CFLAGS"
    LDFLAGS="$HOST_LDFLAGS"

    echo $ac_n "checking whether the host c compiler ($HOST_CC $HOST_CFLAGS $HOST_LDFLAGS) works""... $ac_c" 1>&6
echo "configure:2146: checking whether the host c compiler ($HOST_CC $HOST_CFLAGS $HOST_LDFLAGS) works" >&5
    cat > conftest.$ac_ext <<EOF
#line 2148 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:2155: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_prog_hostcc_works=1 echo "$ac_t""yes" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: installation or configuration problem: host compiler $HOST_CC cannot create executables." 1>&2; exit 1; } 
fi
rm -f conftest*

    CC="$HOST_CXX"
    CFLAGS="$HOST_CXXFLAGS"

    echo $ac_n "checking whether the host c++ compiler ($HOST_CXX $HOST_CXXFLAGS $HOST_LDFLAGS) works""... $ac_c" 1>&6
echo "configure:2170: checking whether the host c++ compiler ($HOST_CXX $HOST_CXXFLAGS $HOST_LDFLAGS) works" >&5
    cat > conftest.$ac_ext <<EOF
#line 2172 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:2179: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_prog_hostcxx_works=1 echo "$ac_t""yes" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: installation or configuration problem: host compiler $HOST_CXX cannot create executables." 1>&2; exit 1; } 
fi
rm -f conftest*

    CC=$_SAVE_CC
    CFLAGS=$_SAVE_CFLAGS
    LDFLAGS=$_SAVE_LDFLAGS

    for ac_prog in $CC "${target_alias}-gcc" "${target}-gcc"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2199: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CC" && break
done
test -n "$CC" || CC=":"

    unset ac_cv_prog_CC
    # Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2233: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2263: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_prog_rejected=no
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test -z "$CC"; then
    case "`uname -s`" in
    *win32* | *WIN32*)
      # Extract the first word of "cl", so it can be a program name with args.
set dummy cl; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2314: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="cl"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
 ;;
    esac
  fi
  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:2346: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

cat > conftest.$ac_ext << EOF

#line 2357 "configure"
#include "confdefs.h"

main(){return(0);}
EOF
if { (eval echo configure:2362: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:2388: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:2393: checking whether we are using GNU C" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:2402: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
else
  GCC=
fi

ac_test_CFLAGS="${CFLAGS+set}"
ac_save_CFLAGS="$CFLAGS"
CFLAGS=
echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:2421: checking whether ${CC-cc} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
if test "$ac_test_CFLAGS" = set; then
  CFLAGS="$ac_save_CFLAGS"
elif test $ac_cv_prog_cc_g = yes; then
  if test "$GCC" = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-g"
  fi
else
  if test "$GCC" = yes; then
    CFLAGS="-O2"
  else
    CFLAGS=
  fi
fi

    for ac_prog in $CXX "${target_alias}-g++" "${target}-g++"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2457: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CXX"; then
  ac_cv_prog_CXX="$CXX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CXX="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CXX="$ac_cv_prog_CXX"
if test -n "$CXX"; then
  echo "$ac_t""$CXX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CXX" && break
done
test -n "$CXX" || CXX=":"

    unset ac_cv_prog_CXX
    for ac_prog in $CCC c++ g++ gcc CC cxx cc++ cl
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2493: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CXX"; then
  ac_cv_prog_CXX="$CXX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CXX="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CXX="$ac_cv_prog_CXX"
if test -n "$CXX"; then
  echo "$ac_t""$CXX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CXX" && break
done
test -n "$CXX" || CXX="gcc"


echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:2525: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

cat > conftest.$ac_ext << EOF

#line 2536 "configure"
#include "confdefs.h"

int main(){return(0);}
EOF
if { (eval echo configure:2541: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cxx_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cxx_cross=no
  else
    ac_cv_prog_cxx_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cxx_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cxx_works" 1>&6
if test $ac_cv_prog_cxx_works = no; then
  { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:2567: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cxx_cross" 1>&6
cross_compiling=$ac_cv_prog_cxx_cross

echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
echo "configure:2572: checking whether we are using GNU C++" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.C <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:2581: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gxx=yes
else
  ac_cv_prog_gxx=no
fi
fi

echo "$ac_t""$ac_cv_prog_gxx" 1>&6

if test $ac_cv_prog_gxx = yes; then
  GXX=yes
else
  GXX=
fi

ac_test_CXXFLAGS="${CXXFLAGS+set}"
ac_save_CXXFLAGS="$CXXFLAGS"
CXXFLAGS=
echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
echo "configure:2600: checking whether ${CXX-g++} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.cc
if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
  ac_cv_prog_cxx_g=yes
else
  ac_cv_prog_cxx_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cxx_g" 1>&6
if test "$ac_test_CXXFLAGS" = set; then
  CXXFLAGS="$ac_save_CXXFLAGS"
elif test $ac_cv_prog_cxx_g = yes; then
  if test "$GXX" = yes; then
    CXXFLAGS="-g -O2"
  else
    CXXFLAGS="-g"
  fi
else
  if test "$GXX" = yes; then
    CXXFLAGS="-O2"
  else
    CXXFLAGS=
  fi
fi


    for ac_prog in $RANLIB "${target_alias}-ranlib" "${target}-ranlib"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2637: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$RANLIB" && break
done
test -n "$RANLIB" || RANLIB=":"

    for ac_prog in $AR "${target_alias}-ar" "${target}-ar"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2672: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$AR"; then
  ac_cv_prog_AR="$AR" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_AR="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
AR="$ac_cv_prog_AR"
if test -n "$AR"; then
  echo "$ac_t""$AR" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AR" && break
done
test -n "$AR" || AR=":"

      for ac_prog in $AS "${target_alias}-as" "${target}-as"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2707: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_AS'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$AS" in
  /*)
  ac_cv_path_AS="$AS" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_AS="$AS" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_AS="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
AS="$ac_cv_path_AS"
if test -n "$AS"; then
  echo "$ac_t""$AS" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AS" && break
done
test -n "$AS" || AS=":"

  if test "$msyshost"; then
    case "$AS" in
    /*)
      tmp_DIRNAME=`dirname "$AS"`
      tmp_BASENAME=`basename "$AS"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      AS="$tmp_PWD/$tmp_BASENAME"
      if test -e "$AS.exe"; then
        AS="$AS.exe"
      fi
    esac
  fi

    for ac_prog in $LD "${target_alias}-ld" "${target}-ld"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2761: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LD"; then
  ac_cv_prog_LD="$LD" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LD="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
LD="$ac_cv_prog_LD"
if test -n "$LD"; then
  echo "$ac_t""$LD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$LD" && break
done
test -n "$LD" || LD=":"

    for ac_prog in $STRIP "${target_alias}-strip" "${target}-strip"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2796: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$STRIP"; then
  ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_STRIP="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
STRIP="$ac_cv_prog_STRIP"
if test -n "$STRIP"; then
  echo "$ac_t""$STRIP" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$STRIP" && break
done
test -n "$STRIP" || STRIP=":"

    for ac_prog in $WINDRES "${target_alias}-windres" "${target}-windres"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2831: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$WINDRES"; then
  ac_cv_prog_WINDRES="$WINDRES" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_WINDRES="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
WINDRES="$ac_cv_prog_WINDRES"
if test -n "$WINDRES"; then
  echo "$ac_t""$WINDRES" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$WINDRES" && break
done
test -n "$WINDRES" || WINDRES=":"

    cat >> confdefs.pytmp <<\EOF
    (''' CROSS_COMPILE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define CROSS_COMPILE 1
EOF

    cross_compiling=yes
else
    # Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2873: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2903: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_prog_rejected=no
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test -z "$CC"; then
    case "`uname -s`" in
    *win32* | *WIN32*)
      # Extract the first word of "cl", so it can be a program name with args.
set dummy cl; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2954: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="cl"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
 ;;
    esac
  fi
  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:2986: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

cat > conftest.$ac_ext << EOF

#line 2997 "configure"
#include "confdefs.h"

main(){return(0);}
EOF
if { (eval echo configure:3002: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:3028: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:3033: checking whether we are using GNU C" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:3042: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
else
  GCC=
fi

ac_test_CFLAGS="${CFLAGS+set}"
ac_save_CFLAGS="$CFLAGS"
CFLAGS=
echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:3061: checking whether ${CC-cc} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
if test "$ac_test_CFLAGS" = set; then
  CFLAGS="$ac_save_CFLAGS"
elif test $ac_cv_prog_cc_g = yes; then
  if test "$GCC" = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-g"
  fi
else
  if test "$GCC" = yes; then
    CFLAGS="-O2"
  else
    CFLAGS=
  fi
fi

    case "$target" in
    *-mingw*)
      # Work around the conftest.exe access problem on Windows
      sleep 2
    esac
    for ac_prog in $CCC c++ g++ gcc CC cxx cc++ cl
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3102: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CXX"; then
  ac_cv_prog_CXX="$CXX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CXX="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CXX="$ac_cv_prog_CXX"
if test -n "$CXX"; then
  echo "$ac_t""$CXX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CXX" && break
done
test -n "$CXX" || CXX="gcc"


echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:3134: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

cat > conftest.$ac_ext << EOF

#line 3145 "configure"
#include "confdefs.h"

int main(){return(0);}
EOF
if { (eval echo configure:3150: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cxx_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cxx_cross=no
  else
    ac_cv_prog_cxx_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cxx_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cxx_works" 1>&6
if test $ac_cv_prog_cxx_works = no; then
  { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:3176: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cxx_cross" 1>&6
cross_compiling=$ac_cv_prog_cxx_cross

echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
echo "configure:3181: checking whether we are using GNU C++" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.C <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:3190: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gxx=yes
else
  ac_cv_prog_gxx=no
fi
fi

echo "$ac_t""$ac_cv_prog_gxx" 1>&6

if test $ac_cv_prog_gxx = yes; then
  GXX=yes
else
  GXX=
fi

ac_test_CXXFLAGS="${CXXFLAGS+set}"
ac_save_CXXFLAGS="$CXXFLAGS"
CXXFLAGS=
echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
echo "configure:3209: checking whether ${CXX-g++} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.cc
if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
  ac_cv_prog_cxx_g=yes
else
  ac_cv_prog_cxx_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cxx_g" 1>&6
if test "$ac_test_CXXFLAGS" = set; then
  CXXFLAGS="$ac_save_CXXFLAGS"
elif test $ac_cv_prog_cxx_g = yes; then
  if test "$GXX" = yes; then
    CXXFLAGS="-g -O2"
  else
    CXXFLAGS="-g"
  fi
else
  if test "$GXX" = yes; then
    CXXFLAGS="-O2"
  else
    CXXFLAGS=
  fi
fi

    # Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3243: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

      for ac_prog in $AS as
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3275: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_AS'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$AS" in
  /*)
  ac_cv_path_AS="$AS" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_AS="$AS" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_AS="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
AS="$ac_cv_path_AS"
if test -n "$AS"; then
  echo "$ac_t""$AS" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AS" && break
done
test -n "$AS" || AS="$CC"

  if test "$msyshost"; then
    case "$AS" in
    /*)
      tmp_DIRNAME=`dirname "$AS"`
      tmp_BASENAME=`basename "$AS"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      AS="$tmp_PWD/$tmp_BASENAME"
      if test -e "$AS.exe"; then
        AS="$AS.exe"
      fi
    esac
  fi

    for ac_prog in ar
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3329: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$AR"; then
  ac_cv_prog_AR="$AR" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_AR="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
AR="$ac_cv_prog_AR"
if test -n "$AR"; then
  echo "$ac_t""$AR" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AR" && break
done
test -n "$AR" || AR=":"

    for ac_prog in ld
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3364: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LD"; then
  ac_cv_prog_LD="$LD" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LD="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
LD="$ac_cv_prog_LD"
if test -n "$LD"; then
  echo "$ac_t""$LD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$LD" && break
done
test -n "$LD" || LD=":"

    for ac_prog in strip
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3399: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$STRIP"; then
  ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_STRIP="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
STRIP="$ac_cv_prog_STRIP"
if test -n "$STRIP"; then
  echo "$ac_t""$STRIP" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$STRIP" && break
done
test -n "$STRIP" || STRIP=":"

    for ac_prog in windres
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3434: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$WINDRES"; then
  ac_cv_prog_WINDRES="$WINDRES" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_WINDRES="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
WINDRES="$ac_cv_prog_WINDRES"
if test -n "$WINDRES"; then
  echo "$ac_t""$WINDRES" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$WINDRES" && break
done
test -n "$WINDRES" || WINDRES=":"

    if test -z "$HOST_CC"; then
        HOST_CC="$CC"
    fi
    if test -z "$HOST_CFLAGS"; then
        HOST_CFLAGS="$CFLAGS"
    fi
    if test -z "$HOST_CXX"; then
        HOST_CXX="$CXX"
    fi
    if test -z "$HOST_CXXFLAGS"; then
        HOST_CXXFLAGS="$CXXFLAGS"
    fi
    if test -z "$HOST_LDFLAGS"; then
        HOST_LDFLAGS="$LDFLAGS"
    fi
    if test -z "$HOST_RANLIB"; then
        HOST_RANLIB="$RANLIB"
    fi
    if test -z "$HOST_AR"; then
        HOST_AR="$AR"
    fi
    if test -z "$HOST_AR_FLAGS"; then
        HOST_AR_FLAGS="$AR_FLAGS"
    fi
fi

if test -n "$MOZ_WINCONSOLE"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WINCONSOLE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WINCONSOLE 1
EOF

fi


GNU_AS=
GNU_LD=
GNU_CC=
GNU_CXX=
CC_VERSION='N/A'
CXX_VERSION='N/A'
if test "$GCC" = "yes"; then
    GNU_CC=1
    CC_VERSION=`$CC -v 2>&1 | grep 'gcc version'`
fi
if test "$GXX" = "yes"; then
    GNU_CXX=1
    CXX_VERSION=`$CXX -v 2>&1 | grep 'gcc version'`
fi
if test "`echo | $AS -o conftest.out -v 2>&1 | grep -c GNU`" != "0"; then
    GNU_AS=1
fi
rm -f conftest.out
if test "`echo | $LD -v 2>&1 | grep -c GNU`" != "0"; then
    GNU_LD=1
fi
if test "$GNU_CC"; then
    if `$CC -print-prog-name=ld` -v 2>&1 | grep -c GNU >/dev/null; then
        GCC_USE_GNU_LD=1
    fi
fi

INTEL_CC=
INTEL_CXX=
if test "$GCC" = yes; then
   if test "`$CC -help 2>&1 | grep -c 'Intel(R) C++ Compiler'`" != "0"; then
     INTEL_CC=1
   fi
fi

if test "$GXX" = yes; then
   if test "`$CXX -help 2>&1 | grep -c 'Intel(R) C++ Compiler'`" != "0"; then
     INTEL_CXX=1
   fi
fi

CLANG_CC=
CLANG_CXX=
if test "$GCC" = yes; then
   if test "`$CC -v 2>&1 | grep -c 'clang version'`" != "0"; then
     CLANG_CC=1
   fi
fi

if test "$GXX" = yes; then
   if test "`$CXX -v 2>&1 | grep -c 'clang version'`" != "0"; then
     CLANG_CXX=1
   fi
fi




# Check whether --enable-metro or --disable-metro was given.
if test "${enable_metro+set}" = set; then
  enableval="$enable_metro"
  if test "$enableval" = "yes"; then
    MOZ_METRO=1
  elif test "$enableval" = "no"; then
    MOZ_METRO=
  else
    { echo "configure: error: Option, metro, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_METRO"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_METRO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_METRO 1
EOF

    # Target the Windows 8 Kit
    WINSDK_TARGETVER=602
    WINVER=502
    # toolkit/library/makefile.in needs these, see nsDllMain.
    CRTDLLVERSION=110
    CRTEXPDLLVERSION=1-1-0
else
    # Target the Windows 7 SDK by default
    WINSDK_TARGETVER=601
    WINVER=502
fi




if test -n "$MOZ_METRO"; then
  case "$target" in
  *-mingw*)
    ;;
  *)
    { echo "configure: error: Metro builds only valid on the windows platform." 1>&2; exit 1; };
    ;;
  esac
fi

# Check whether --with-windows-version or --without-windows-version was given.
if test "${with_windows_version+set}" = set; then
  withval="$with_windows_version"
  WINSDK_TARGETVER=$withval
fi


# Currently only two sdk versions allowed, 601 and 602
case "$WINSDK_TARGETVER" in
601|602)
    MOZ_WINSDK_TARGETVER=0${WINSDK_TARGETVER}0000
    ;;

*)
    { echo "configure: error: Invalid value for --with-windows-version ($WINSDK_TARGETVER)" 1>&2; exit 1; };
    ;;
esac

case "$target" in
*-mingw*)
    if test "$GCC" != "yes"; then
        # Check to see if we are really running in a msvc environemnt
        _WIN32_MSVC=1
        for ac_prog in midl
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3632: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_MIDL'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$MIDL"; then
  ac_cv_prog_MIDL="$MIDL" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_MIDL="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
MIDL="$ac_cv_prog_MIDL"
if test -n "$MIDL"; then
  echo "$ac_t""$MIDL" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$MIDL" && break
done


        # Make sure compilers are valid
        CFLAGS="$CFLAGS -TC -nologo"
        CXXFLAGS="$CXXFLAGS -TP -nologo"
        
        ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        cat > conftest.$ac_ext <<EOF
#line 3674 "configure"
#include "confdefs.h"
#include <stdio.h>
int main() {
 printf("Hello World\n"); 
; return 0; }
EOF
if { (eval echo configure:3681: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: \$(CC) test failed.  You must have MS VC++ in your path to build." 1>&2; exit 1; } 
fi
rm -f conftest*

        ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

        cat > conftest.$ac_ext <<EOF
#line 3699 "configure"
#include "confdefs.h"
#include <new.h>
int main() {
 unsigned *test = new unsigned(42); 
; return 0; }
EOF
if { (eval echo configure:3706: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: \$(CXX) test failed.  You must have MS VC++ in your path to build." 1>&2; exit 1; } 
fi
rm -f conftest*
        ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


        
        _MSVC_VER_FILTER='s|.*[^!-~]([0-9]+\.[0-9]+\.[0-9]+(\.[0-9]+)?).*|\1|p'
        

        # Determine compiler version
        CC_VERSION=`"${CC}" -v 2>&1 | sed -nre "$_MSVC_VER_FILTER"`
        _CC_MAJOR_VERSION=`echo ${CC_VERSION} | $AWK -F\. '{ print $1 }'`
        _CC_MINOR_VERSION=`echo ${CC_VERSION} | $AWK -F\. '{ print $2 }'`
        _CC_RELEASE=`echo ${CC_VERSION} | $AWK -F\. '{ print $3 }'`
        _CC_BUILD=`echo ${CC_VERSION} | $AWK -F\. '{ print $4 }'`
        _MSC_VER=${_CC_MAJOR_VERSION}${_CC_MINOR_VERSION}

        CXX_VERSION=`"${CXX}" -v 2>&1 | sed -nre "$_MSVC_VER_FILTER"`
        _CXX_MAJOR_VERSION=`echo ${CXX_VERSION} | $AWK -F\. '{ print $1 }'`

        if test "$_CC_MAJOR_VERSION" != "$_CXX_MAJOR_VERSION"; then
            { echo "configure: error: The major versions of \$CC and \$CXX do not match." 1>&2; exit 1; }
        fi

        if test "$_CC_MAJOR_VERSION" = "14"; then
                                    if test "$_CC_RELEASE" -lt 50727 -o \
                    \( "$_CC_RELEASE" -eq 50727 -a "$_CC_BUILD" -lt 762 \); then
              { echo "configure: error: This version ($CC_VERSION) of the MSVC compiler is unsupported. You probably need to install Service Pack 1 of Visual Studio 2005. See https://developer.mozilla.org/en/Windows_Build_Prerequisites." 1>&2; exit 1; }
            fi

            _CC_SUITE=8
            _MSVS_VERSION=2005
            cat >> confdefs.pytmp <<\EOF
    (''' _CRT_SECURE_NO_DEPRECATE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _CRT_SECURE_NO_DEPRECATE 1
EOF

            cat >> confdefs.pytmp <<\EOF
    (''' _CRT_NONSTDC_NO_DEPRECATE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _CRT_NONSTDC_NO_DEPRECATE 1
EOF

        elif test "$_CC_MAJOR_VERSION" = "15"; then
            _CC_SUITE=9
            _MSVS_VERSION=2008
            cat >> confdefs.pytmp <<\EOF
    (''' _CRT_SECURE_NO_WARNINGS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _CRT_SECURE_NO_WARNINGS 1
EOF

            cat >> confdefs.pytmp <<\EOF
    (''' _CRT_NONSTDC_NO_WARNINGS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _CRT_NONSTDC_NO_WARNINGS 1
EOF

        elif test "$_CC_MAJOR_VERSION" = "16"; then
            _CC_SUITE=10
            _MSVS_VERSION=2010
            cat >> confdefs.pytmp <<\EOF
    (''' _CRT_SECURE_NO_WARNINGS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _CRT_SECURE_NO_WARNINGS 1
EOF

            cat >> confdefs.pytmp <<\EOF
    (''' _CRT_NONSTDC_NO_WARNINGS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _CRT_NONSTDC_NO_WARNINGS 1
EOF

        elif test "$_CC_MAJOR_VERSION" = "17"; then
            _CC_SUITE=11
            _MSVS_VERSION=2012
            cat >> confdefs.pytmp <<\EOF
    (''' _CRT_SECURE_NO_WARNINGS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _CRT_SECURE_NO_WARNINGS 1
EOF

            cat >> confdefs.pytmp <<\EOF
    (''' _CRT_NONSTDC_NO_WARNINGS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _CRT_NONSTDC_NO_WARNINGS 1
EOF

        else
            { echo "configure: error: This version ($CC_VERSION) of the MSVC compiler is unsupported. See https://developer.mozilla.org/en/Windows_Build_Prerequisites." 1>&2; exit 1; }
        fi

        cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SEH_EXCEPTIONS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SEH_EXCEPTIONS 1
EOF


        if test -n "$WIN32_REDIST_DIR"; then
          if test ! -d "$WIN32_REDIST_DIR"; then
            { echo "configure: error: Invalid Win32 Redist directory: ${WIN32_REDIST_DIR}" 1>&2; exit 1; }
          fi
          WIN32_REDIST_DIR=`cd "$WIN32_REDIST_DIR" && pwd`
        fi

                if test -n "$MOZ_METRO"; then
          echo $ac_n "checking for makepri""... $ac_c" 1>&6
echo "configure:3836: checking for makepri" >&5
          for ac_prog in makepri
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3842: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_MAKEPRI'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$MAKEPRI"; then
  ac_cv_prog_MAKEPRI="$MAKEPRI" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_MAKEPRI="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
MAKEPRI="$ac_cv_prog_MAKEPRI"
if test -n "$MAKEPRI"; then
  echo "$ac_t""$MAKEPRI" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$MAKEPRI" && break
done
test -n "$MAKEPRI" || MAKEPRI=""""

          if test -z "MAKEPRI" ; then
              { echo "configure: error: makepri.exe is required for generating metro browser install components. It should be in the Win8 SDK." 1>&2; exit 1; }
          fi
          
        fi

                        MSMT_TOOL=`mt 2>&1|grep 'Microsoft (R) Manifest Tool'`
        if test -z "$MSMT_TOOL"; then
          { echo "configure: error: Microsoft (R) Manifest Tool must be in your \$PATH." 1>&2; exit 1; }
        fi

        
        _MSMT_VER_FILTER='s|.*[^!-~]\([0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*\).*|\1|p'
        
        MSMANIFEST_TOOL_VERSION=`echo ${MSMT_TOOL}|sed -ne "$_MSMT_VER_FILTER"`
        if test -z "$MSMANIFEST_TOOL_VERSION"; then
          echo "configure: warning: Unknown version of the Microsoft (R) Manifest Tool." 1>&2
        fi

        MSMANIFEST_TOOL=1
        unset MSMT_TOOL

        # Check linker version
        _LD_FULL_VERSION=`"${LD}" -v 2>&1 | sed -nre "$_MSVC_VER_FILTER"`
        _LD_MAJOR_VERSION=`echo ${_LD_FULL_VERSION} | $AWK -F\. '{ print $1 }'`
        if test "$_LD_MAJOR_VERSION" != "$_CC_SUITE"; then
            { echo "configure: error: The linker major version, $_LD_FULL_VERSION,  does not match the compiler suite version, $_CC_SUITE." 1>&2; exit 1; }
        fi

        INCREMENTAL_LINKER=1

        # Check midl version
        _MIDL_FULL_VERSION=`"${MIDL}" -v 2>&1 | sed -nre "$_MSVC_VER_FILTER"`
        _MIDL_MAJOR_VERSION=`echo ${_MIDL_FULL_VERSION} | $AWK -F\. '{ print $1 }'`
        _MIDL_MINOR_VERSION=`echo ${_MIDL_FULL_VERSION} | $AWK -F\. '{ print $2 }'`
        _MIDL_REV_VERSION=`echo ${_MIDL_FULL_VERSION} | $AWK -F\. '{ print $3 }'`
        # Add flags if necessary
        echo $ac_n "checking for midl flags""... $ac_c" 1>&6
echo "configure:3910: checking for midl flags" >&5
        case "$target" in
        i*86-*)
            if test \( "$_MIDL_MAJOR_VERSION" = "7" -a "$_MIDL_MINOR_VERSION" = "00" -a "$_MIDL_REV_VERSION" = "0499" \); then
                # MIDL version 7.00.0499 defaults /env win64 on x64 platforms.
                # MIDL version 7.00.0500 or later has no problem.
                MIDL_FLAGS="${MIDL_FLAGS} -env win32"
                echo "$ac_t""need -env win32" 1>&6
            else
                echo "$ac_t""none needed" 1>&6
            fi
            ;;
        x86_64-*)
            MIDL_FLAGS="${MIDL_FLAGS} -env x64"
            ;;
        *)
            echo "$ac_t""none needed" 1>&6
            ;;
        esac

        # Identify which version of the SDK we're building with
        # Windows Server 2008 and newer SDKs have WinSDKVer.h, get the version
        # from there
         for ac_hdr in winsdkver.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:3937: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 3942 "configure"
#include "confdefs.h"

#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:3950: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    
  fi

  done

        if test "$ac_cv_header_winsdkver_h" = "yes"; then
            # Get the highest _WIN32_WINNT and NTDDI versions supported
            # Take the higher of the two
            # This is done because the Windows 7 beta SDK reports its
            # NTDDI_MAXVER to be 0x06000100 instead of 0x06010000, as it should
            echo $ac_n "checking for highest Windows version supported by this SDK""... $ac_c" 1>&6
echo "configure:3985: checking for highest Windows version supported by this SDK" >&5
if eval "test \"`echo '$''{'ac_cv_winsdk_maxver'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.h <<EOF
#include <winsdkver.h>
#include <sdkddkver.h>

#if (NTDDI_VERSION_FROM_WIN32_WINNT(_WIN32_WINNT_MAXVER) > NTDDI_MAXVER)
#define WINSDK_MAXVER NTDDI_VERSION_FROM_WIN32_WINNT(_WIN32_WINNT_MAXVER)
#else
#define WINSDK_MAXVER NTDDI_MAXVER
#endif

WINSDK_MAXVER
EOF
                            ac_cv_winsdk_maxver=`$CPP conftest.h 2>/dev/null | tail -n1`
                            rm -f conftest.h
                           
fi

echo "$ac_t""$ac_cv_winsdk_maxver" 1>&6
            MOZ_WINSDK_MAXVER=${ac_cv_winsdk_maxver}
        else
            # Any SDK which doesn't have WinSDKVer.h is too old.
            { echo "configure: error: Your SDK does not have WinSDKVer.h. It is probably too old. Please upgrade to a newer SDK or try running the Windows SDK Configuration Tool and selecting a newer SDK. See https://developer.mozilla.org/En/Windows_SDK_versions for more details on fixing this." 1>&2; exit 1; }
        fi

        unset _MSVC_VER_FILTER

        echo $ac_n "checking for std::_Throw""... $ac_c" 1>&6
echo "configure:4016: checking for std::_Throw" >&5
if eval "test \"`echo '$''{'ac_cv_have_std__Throw'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
                
                ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

                _SAVE_CXXFLAGS="$CXXFLAGS"
                CXXFLAGS="${CXXFLAGS} -D_HAS_EXCEPTIONS=0"
                cat > conftest.$ac_ext <<EOF
#line 4032 "configure"
#include "confdefs.h"
#include <exception>
int main() {
std::_Throw(std::exception()); return 0;
; return 0; }
EOF
if { (eval echo configure:4039: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_have_std__Throw="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have_std__Throw="no"
fi
rm -f conftest*
                CXXFLAGS="$_SAVE_CXXFLAGS"
                ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

            
fi

echo "$ac_t""$ac_cv_have_std__Throw" 1>&6

        if test "$ac_cv_have_std__Throw" = "yes"; then
            echo $ac_n "checking for |class __declspec(dllimport) exception| bug""... $ac_c" 1>&6
echo "configure:4064: checking for |class __declspec(dllimport) exception| bug" >&5
if eval "test \"`echo '$''{'ac_cv_have_dllimport_exception_bug'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
                    
                    ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

                    _SAVE_CXXFLAGS="$CXXFLAGS"
                    CXXFLAGS="${CXXFLAGS} -D_HAS_EXCEPTIONS=0"
                    cat > conftest.$ac_ext <<EOF
#line 4080 "configure"
#include "confdefs.h"
#include <vector>
int main() {
std::vector<int> v; return v.at(1);
; return 0; }
EOF
if { (eval echo configure:4087: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_have_dllimport_exception_bug="no"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have_dllimport_exception_bug="yes"
fi
rm -f conftest*
                    CXXFLAGS="$_SAVE_CXXFLAGS"
                    ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

                
fi

echo "$ac_t""$ac_cv_have_dllimport_exception_bug" 1>&6
            if test "$ac_cv_have_dllimport_exception_bug" = "no"; then
                WRAP_STL_INCLUDES=1
                MOZ_MSVC_STL_WRAP__Throw=1
                cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MSVC_STL_WRAP__Throw ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MSVC_STL_WRAP__Throw 1
EOF

            fi
        else
            echo $ac_n "checking for overridable _RAISE""... $ac_c" 1>&6
echo "configure:4122: checking for overridable _RAISE" >&5
if eval "test \"`echo '$''{'ac_cv_have__RAISE'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
                    
                    ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

                    _SAVE_CXXFLAGS="$CXXFLAGS"
                    CXXFLAGS="${CXXFLAGS} -D_HAS_EXCEPTIONS=0"
                    cat > conftest.$ac_ext <<EOF
#line 4138 "configure"
#include "confdefs.h"
#include <xstddef>
                                    #undef _RAISE
                                    #define _RAISE(x) externallyDefinedFunction((x).what())
                                    #include <vector>
                                   
int main() {
std::vector<int> v; return v.at(1);
; return 0; }
EOF
if { (eval echo configure:4149: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_have__RAISE="no"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have__RAISE="yes"
fi
rm -f conftest*
                    CXXFLAGS="$_SAVE_CXXFLAGS"
                    ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

                
fi

echo "$ac_t""$ac_cv_have__RAISE" 1>&6
            if test "$ac_cv_have__RAISE" = "yes"; then
                WRAP_STL_INCLUDES=1
                MOZ_MSVC_STL_WRAP__RAISE=1
                cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MSVC_STL_WRAP__RAISE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MSVC_STL_WRAP__RAISE 1
EOF

            else
                { echo "configure: error: Gecko exception wrapping doesn't understand your your MSVC/SDK.  Please file a bug describing this error and your build configuration." 1>&2; exit 1; }
            fi
        fi

        if test "$WRAP_STL_INCLUDES" = "1"; then
            STL_FLAGS='-D_HAS_EXCEPTIONS=0 -I$(DIST)/stl_wrappers'
        fi
    else
        # Check w32api version
        _W32API_MAJOR_VERSION=`echo $W32API_VERSION | $AWK -F\. '{ print $1 }'`
        _W32API_MINOR_VERSION=`echo $W32API_VERSION | $AWK -F\. '{ print $2 }'`
        echo $ac_n "checking for w32api version >= $W32API_VERSION""... $ac_c" 1>&6
echo "configure:4194: checking for w32api version >= $W32API_VERSION" >&5
        cat > conftest.$ac_ext <<EOF
#line 4196 "configure"
#include "confdefs.h"
#include <w32api.h>
int main() {
#if (__W32API_MAJOR_VERSION < $_W32API_MAJOR_VERSION) || \
                (__W32API_MAJOR_VERSION == $_W32API_MAJOR_VERSION && \
                 __W32API_MINOR_VERSION < $_W32API_MINOR_VERSION)
                #error "test failed."
            #endif
            
; return 0; }
EOF
if { (eval echo configure:4208: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
   res=yes 
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
   res=no 
fi
rm -f conftest*
        echo "$ac_t""$res" 1>&6
        if test "$res" != "yes"; then
            { echo "configure: error: w32api version $W32API_VERSION or higher required." 1>&2; exit 1; }
        fi
        # Check windres version
        echo $ac_n "checking for windres version >= $WINDRES_VERSION""... $ac_c" 1>&6
echo "configure:4224: checking for windres version >= $WINDRES_VERSION" >&5
        _WINDRES_VERSION=`${WINDRES} --version 2>&1 | grep -i windres 2>/dev/null | $AWK '{ print $3 }'`
        echo "$ac_t""$_WINDRES_VERSION" 1>&6
        _WINDRES_MAJOR_VERSION=`echo $_WINDRES_VERSION | $AWK -F\. '{ print $1 }'`
        _WINDRES_MINOR_VERSION=`echo $_WINDRES_VERSION | $AWK -F\. '{ print $2 }'`
        _WINDRES_RELEASE_VERSION=`echo $_WINDRES_VERSION | $AWK -F\. '{ print $3 }'`
        WINDRES_MAJOR_VERSION=`echo $WINDRES_VERSION | $AWK -F\. '{ print $1 }'`
        WINDRES_MINOR_VERSION=`echo $WINDRES_VERSION | $AWK -F\. '{ print $2 }'`
        WINDRES_RELEASE_VERSION=`echo $WINDRES_VERSION | $AWK -F\. '{ print $3 }'`
        if test "$_WINDRES_MAJOR_VERSION" -lt "$WINDRES_MAJOR_VERSION" -o \
                "$_WINDRES_MAJOR_VERSION" -eq "$WINDRES_MAJOR_VERSION" -a \
                "$_WINDRES_MINOR_VERSION" -lt "$WINDRES_MINOR_VERSION" -o \
                "$_WINDRES_MAJOR_VERSION" -eq "$WINDRES_MAJOR_VERSION" -a \
                "$_WINDRES_MINOR_VERSION" -eq "$WINDRES_MINOR_VERSION" -a \
                "$_WINDRES_RELEASE_VERSION" -lt "$WINDRES_RELEASE_VERSION"
        then
            { echo "configure: error: windres version $WINDRES_VERSION or higher is required to build." 1>&2; exit 1; }
        fi

        for ac_prog in $target-widl widl
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4248: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_MIDL'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$MIDL"; then
  ac_cv_prog_MIDL="$MIDL" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_MIDL="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
MIDL="$ac_cv_prog_MIDL"
if test -n "$MIDL"; then
  echo "$ac_t""$MIDL" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$MIDL" && break
done

        if test -n "$MIDL"; then
            case "$target" in
            i*86-*)
                MIDL_FLAGS="$MIDL_FLAGS --win32 -m32"
                ;;
            x86_64-*)
                MIDL_FLAGS="$MIDL_FLAGS --win64 -m64"
                ;;
            esac
        fi

        MOZ_WINSDK_MAXVER=0x06020000
    fi # !GNU_CC

    cat >> confdefs.pytmp <<EOF
    (''' WINVER ''', r''' 0x$WINVER ''')
EOF
cat >> confdefs.h <<EOF
#define WINVER 0x$WINVER
EOF

    cat >> confdefs.pytmp <<EOF
    (''' _WIN32_WINNT ''', r''' 0x$WINVER ''')
EOF
cat >> confdefs.h <<EOF
#define _WIN32_WINNT 0x$WINVER
EOF

    # Require OS features provided by IE 6.0 SP2 (XP SP2)
    cat >> confdefs.pytmp <<EOF
    (''' _WIN32_IE ''', r''' 0x0603 ''')
EOF
cat >> confdefs.h <<EOF
#define _WIN32_IE 0x0603
EOF


    # If the maximum version supported by this SDK is lower than the target
    # version, error out
    echo $ac_n "checking for Windows SDK being recent enough""... $ac_c" 1>&6
echo "configure:4317: checking for Windows SDK being recent enough" >&5
    if $PERL -e "exit(0x$MOZ_WINSDK_TARGETVER > $MOZ_WINSDK_MAXVER)"; then
        echo "$ac_t"""yes"" 1>&6
    else
        echo "$ac_t"""no"" 1>&6
        { echo "configure: error: You are targeting Windows version 0x$MOZ_WINSDK_TARGETVER, but your SDK only supports up to version $MOZ_WINSDK_MAXVER. Install and use an updated SDK, or target a lower version using --with-windows-version. Alternatively, try running the Windows SDK Configuration Tool and selecting a newer SDK. See https://developer.mozilla.org/En/Windows_SDK_versions for more details on fixing this." 1>&2; exit 1; }
    fi
    
    cat >> confdefs.pytmp <<EOF
    (''' MOZ_WINSDK_TARGETVER ''', r''' 0x$MOZ_WINSDK_TARGETVER ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_WINSDK_TARGETVER 0x$MOZ_WINSDK_TARGETVER
EOF

    # Definitions matching sdkddkver.h
    cat >> confdefs.pytmp <<EOF
    (''' MOZ_NTDDI_WIN7 ''', r''' 0x06010000 ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_NTDDI_WIN7 0x06010000
EOF

    ;;
esac

echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
echo "configure:4344: checking how to run the C preprocessor" >&5
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and "${CC-cc}" will confuse make.
  CPP="${CC-cc} -E"
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp.
  cat > conftest.$ac_ext <<EOF
#line 4359 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:4365: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > conftest.$ac_ext <<EOF
#line 4376 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:4382: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -nologo -E"
  cat > conftest.$ac_ext <<EOF
#line 4393 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:4399: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP=/lib/cpp
fi
rm -f conftest*
fi
rm -f conftest*
fi
rm -f conftest*
  ac_cv_prog_CPP="$CPP"
fi
  CPP="$ac_cv_prog_CPP"
else
  ac_cv_prog_CPP="$CPP"
fi
echo "$ac_t""$CPP" 1>&6

echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
echo "configure:4424: checking how to run the C++ preprocessor" >&5
if test -z "$CXXCPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross
  CXXCPP="${CXX-g++} -E"
  cat > conftest.$ac_ext <<EOF
#line 4437 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:4442: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CXXCPP=/lib/cpp
fi
rm -f conftest*
  ac_cv_prog_CXXCPP="$CXXCPP"
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross
fi
fi
CXXCPP="$ac_cv_prog_CXXCPP"
echo "$ac_t""$CXXCPP" 1>&6


if test -n "$_WIN32_MSVC"; then
    SKIP_PATH_CHECKS=1
    SKIP_COMPILER_CHECKS=1
    SKIP_LIBRARY_CHECKS=1

    # Since we're skipping compiler and library checks, hard-code
    # some facts here.
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_IO_H ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_IO_H 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SETBUF ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SETBUF 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_ISATTY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ISATTY 1
EOF

fi

fi # COMPILE_ENVIRONMENT
















# Find a good install program.  We prefer a C program (faster),
# so one script is as good as another.  But avoid the broken or
# incompatible versions:
# SysV /etc/install, /usr/sbin/install
# SunOS /usr/etc/install
# IRIX /sbin/install
# AIX /bin/install
# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
# AFS /usr/afsws/bin/install, which mishandles nonexistent args
# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
# ./install, which can be erroneously created by make from ./install.sh.
echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
echo "configure:4526: checking for a BSD compatible install" >&5
if test -z "$INSTALL"; then
if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
  for ac_dir in $PATH; do
    # Account for people who put trailing slashes in PATH elements.
    case "$ac_dir/" in
    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
    *)
      # OSF1 and SCO ODT 3.0 have their own names for install.
      # Don't use installbsd from OSF since it installs stuff as root
      # by default.
      for ac_prog in ginstall scoinst install; do
        if test -f $ac_dir/$ac_prog; then
	  if test $ac_prog = install &&
            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
	    # AIX install.  It has an incompatible calling convention.
	    :
	  else
	    ac_cv_path_install="$ac_dir/$ac_prog -c"
	    break 2
	  fi
	fi
      done
      ;;
    esac
  done
  IFS="$ac_save_IFS"

fi
  if test "${ac_cv_path_install+set}" = set; then
    INSTALL="$ac_cv_path_install"
  else
    # As a last resort, use the slow shell script.  We don't cache a
    # path for INSTALL within a source directory, because that will
    # break other packages using the cache if that directory is
    # removed, or if the path is relative.
    INSTALL="$ac_install_sh"
  fi
fi
echo "$ac_t""$INSTALL" 1>&6

# Use test -z because SunOS4 sh mishandles braces in ${var-val}.
# It thinks the first close brace ends the variable substitution.
test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'

test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'

test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'

echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
echo "configure:4579: checking whether ln -s works" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  rm -f conftestdata
if ln -s X conftestdata 2>/dev/null
then
  rm -f conftestdata
  ac_cv_prog_LN_S="ln -s"
else
  ac_cv_prog_LN_S=ln
fi
fi
LN_S="$ac_cv_prog_LN_S"
if test "$ac_cv_prog_LN_S" = "ln -s"; then
  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


if test -z "$TINDERBOX_SKIP_PERL_VERSION_CHECK"; then
echo $ac_n "checking for minimum required perl version >= $PERL_VERSION""... $ac_c" 1>&6
echo "configure:4602: checking for minimum required perl version >= $PERL_VERSION" >&5
_perl_version=`PERL_VERSION=$PERL_VERSION $PERL -e 'print "$]"; if ($] >= $ENV{PERL_VERSION}) { exit(0); } else { exit(1); }' 2>&5`
_perl_res=$?
echo "$ac_t""$_perl_version" 1>&6

if test "$_perl_res" != 0; then
    { echo "configure: error: Perl $PERL_VERSION or higher is required." 1>&2; exit 1; }
fi
fi

echo $ac_n "checking for full perl installation""... $ac_c" 1>&6
echo "configure:4613: checking for full perl installation" >&5
_perl_archlib=`$PERL -e 'use Config; if ( -d $Config{archlib} ) { exit(0); } else { exit(1); }' 2>&5`
_perl_res=$?
if test "$_perl_res" != 0; then
    echo "$ac_t""no" 1>&6
    { echo "configure: error: Cannot find Config.pm or \$Config{archlib}.  A full perl installation is required." 1>&2; exit 1; }
else
    echo "$ac_t""yes" 1>&6
fi

# Check whether --with-system-ply or --without-system-ply was given.
if test "${with_system_ply+set}" = set; then
  withval="$with_system_ply"
  if test "$withval" = "yes"; then
    if $PYTHON -c 'import ply' 2>&5; then
         MOZ_SYSTEM_PLY=1
     else
         { echo "configure: error: python ply library is not found but --with-system-ply was requested" 1>&2; exit 1; }
     fi
  elif test "$withval" = "no"; then
    :
  else
    { echo "configure: error: Option, system-ply, does not take an argument ($withval)." 1>&2; exit 1; }
  fi
fi




if test -z "$COMPILE_ENVIRONMENT"; then
    NSINSTALL_BIN='$(PYTHON) $(topsrcdir)/config/nsinstall.py'
fi


 # Extract the first word of "doxygen", so it can be a program name with args.
set dummy doxygen; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4650: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_DOXYGEN'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$DOXYGEN" in
  /*)
  ac_cv_path_DOXYGEN="$DOXYGEN" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_DOXYGEN="$DOXYGEN" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_DOXYGEN="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_DOXYGEN" && ac_cv_path_DOXYGEN=":"
  ;;
esac
fi
DOXYGEN="$ac_cv_path_DOXYGEN"
if test -n "$DOXYGEN"; then
  echo "$ac_t""$DOXYGEN" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$msyshost"; then
    case "$DOXYGEN" in
    /*)
      tmp_DIRNAME=`dirname "$DOXYGEN"`
      tmp_BASENAME=`basename "$DOXYGEN"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      DOXYGEN="$tmp_PWD/$tmp_BASENAME"
      if test -e "$DOXYGEN.exe"; then
        DOXYGEN="$DOXYGEN.exe"
      fi
    esac
  fi

 # Extract the first word of "autoconf", so it can be a program name with args.
set dummy autoconf; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4699: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_AUTOCONF'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$AUTOCONF" in
  /*)
  ac_cv_path_AUTOCONF="$AUTOCONF" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_AUTOCONF="$AUTOCONF" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_AUTOCONF="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_AUTOCONF" && ac_cv_path_AUTOCONF=":"
  ;;
esac
fi
AUTOCONF="$ac_cv_path_AUTOCONF"
if test -n "$AUTOCONF"; then
  echo "$ac_t""$AUTOCONF" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$msyshost"; then
    case "$AUTOCONF" in
    /*)
      tmp_DIRNAME=`dirname "$AUTOCONF"`
      tmp_BASENAME=`basename "$AUTOCONF"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      AUTOCONF="$tmp_PWD/$tmp_BASENAME"
      if test -e "$AUTOCONF.exe"; then
        AUTOCONF="$AUTOCONF.exe"
      fi
    esac
  fi

  for ac_prog in unzip
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4750: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_UNZIP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$UNZIP" in
  /*)
  ac_cv_path_UNZIP="$UNZIP" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_UNZIP="$UNZIP" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_UNZIP="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
UNZIP="$ac_cv_path_UNZIP"
if test -n "$UNZIP"; then
  echo "$ac_t""$UNZIP" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$UNZIP" && break
done

  if test "$msyshost"; then
    case "$UNZIP" in
    /*)
      tmp_DIRNAME=`dirname "$UNZIP"`
      tmp_BASENAME=`basename "$UNZIP"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      UNZIP="$tmp_PWD/$tmp_BASENAME"
      if test -e "$UNZIP.exe"; then
        UNZIP="$UNZIP.exe"
      fi
    esac
  fi

if test -z "$UNZIP" -o "$UNZIP" = ":"; then
    { echo "configure: error: unzip not found in \$PATH" 1>&2; exit 1; }
fi
  for ac_prog in zip
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4806: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_ZIP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$ZIP" in
  /*)
  ac_cv_path_ZIP="$ZIP" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_ZIP="$ZIP" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_ZIP="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
ZIP="$ac_cv_path_ZIP"
if test -n "$ZIP"; then
  echo "$ac_t""$ZIP" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$ZIP" && break
done

  if test "$msyshost"; then
    case "$ZIP" in
    /*)
      tmp_DIRNAME=`dirname "$ZIP"`
      tmp_BASENAME=`basename "$ZIP"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      ZIP="$tmp_PWD/$tmp_BASENAME"
      if test -e "$ZIP.exe"; then
        ZIP="$ZIP.exe"
      fi
    esac
  fi

if test -z "$ZIP" -o "$ZIP" = ":"; then
    { echo "configure: error: zip not found in \$PATH" 1>&2; exit 1; }
fi
 # Extract the first word of "xargs", so it can be a program name with args.
set dummy xargs; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4860: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_XARGS'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$XARGS" in
  /*)
  ac_cv_path_XARGS="$XARGS" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_XARGS="$XARGS" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_XARGS="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
XARGS="$ac_cv_path_XARGS"
if test -n "$XARGS"; then
  echo "$ac_t""$XARGS" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$msyshost"; then
    case "$XARGS" in
    /*)
      tmp_DIRNAME=`dirname "$XARGS"`
      tmp_BASENAME=`basename "$XARGS"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      XARGS="$tmp_PWD/$tmp_BASENAME"
      if test -e "$XARGS.exe"; then
        XARGS="$XARGS.exe"
      fi
    esac
  fi

if test -z "$XARGS" -o "$XARGS" = ":"; then
    { echo "configure: error: xargs not found in \$PATH ." 1>&2; exit 1; }
fi

 # Extract the first word of "rpmbuild", so it can be a program name with args.
set dummy rpmbuild; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4912: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_RPMBUILD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$RPMBUILD" in
  /*)
  ac_cv_path_RPMBUILD="$RPMBUILD" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_RPMBUILD="$RPMBUILD" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_RPMBUILD="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_RPMBUILD" && ac_cv_path_RPMBUILD=":"
  ;;
esac
fi
RPMBUILD="$ac_cv_path_RPMBUILD"
if test -n "$RPMBUILD"; then
  echo "$ac_t""$RPMBUILD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$msyshost"; then
    case "$RPMBUILD" in
    /*)
      tmp_DIRNAME=`dirname "$RPMBUILD"`
      tmp_BASENAME=`basename "$RPMBUILD"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      RPMBUILD="$tmp_PWD/$tmp_BASENAME"
      if test -e "$RPMBUILD.exe"; then
        RPMBUILD="$RPMBUILD.exe"
      fi
    esac
  fi



if test "$COMPILE_ENVIRONMENT"; then


case "$target_os" in
darwin*)
                    
    GCC_VERSION_FULL=`echo $CXX_VERSION | $PERL -pe 's/^.*gcc version ([^ ]*).*/$1/'`
    GCC_VERSION=`echo $GCC_VERSION_FULL | $PERL -pe '(split(/\./))[0]>=4&&s/(^\d*\.\d*).*/$1/;'`
    
    if test "$GCC_VERSION_FULL" = "4.0.0" ; then
                        
        GCC_BUILD=`echo $CXX_VERSION | $PERL -pe 's/^.*build ([^ )]*).*/$1/'`
        
        if test "$GCC_BUILD" = "4061" ; then
            { echo "configure: error: You are attempting to use Apple gcc 4.0 build 4061.
This compiler was supplied with Xcode 2.0, and contains bugs that prevent it
from building Mozilla. Upgrade to Xcode 2.1 or later." 1>&2; exit 1; }
        fi
    fi

                  for ac_prog in pbbuild xcodebuild pbxbuild
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4985: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PBBUILD_BIN'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PBBUILD_BIN" in
  /*)
  ac_cv_path_PBBUILD_BIN="$PBBUILD_BIN" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PBBUILD_BIN="$PBBUILD_BIN" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PBBUILD_BIN="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
PBBUILD_BIN="$ac_cv_path_PBBUILD_BIN"
if test -n "$PBBUILD_BIN"; then
  echo "$ac_t""$PBBUILD_BIN" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$PBBUILD_BIN" && break
done

  if test "$msyshost"; then
    case "$PBBUILD_BIN" in
    /*)
      tmp_DIRNAME=`dirname "$PBBUILD_BIN"`
      tmp_BASENAME=`basename "$PBBUILD_BIN"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      PBBUILD_BIN="$tmp_PWD/$tmp_BASENAME"
      if test -e "$PBBUILD_BIN.exe"; then
        PBBUILD_BIN="$PBBUILD_BIN.exe"
      fi
    esac
  fi


             # Extract the first word of "sdp", so it can be a program name with args.
set dummy sdp; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:5037: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_SDP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$SDP" in
  /*)
  ac_cv_path_SDP="$SDP" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_SDP="$SDP" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH:/usr/bin:/Developer/Tools"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_SDP="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_SDP" && ac_cv_path_SDP=":"
  ;;
esac
fi
SDP="$ac_cv_path_SDP"
if test -n "$SDP"; then
  echo "$ac_t""$SDP" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$msyshost"; then
    case "$SDP" in
    /*)
      tmp_DIRNAME=`dirname "$SDP"`
      tmp_BASENAME=`basename "$SDP"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      SDP="$tmp_PWD/$tmp_BASENAME"
      if test -e "$SDP.exe"; then
        SDP="$SDP.exe"
      fi
    esac
  fi

    ;;
esac







# Check whether --enable-macos-target or --disable-macos-target was given.
if test "${enable_macos_target+set}" = set; then
  enableval="$enable_macos_target"
  _MACOSX_DEPLOYMENT_TARGET=$enableval
fi


case "$target" in
*-darwin*)
    if test -n "$_MACOSX_DEPLOYMENT_TARGET" ; then
                export MACOSX_DEPLOYMENT_TARGET=$_MACOSX_DEPLOYMENT_TARGET
    else
                        export MACOSX_DEPLOYMENT_TARGET=10.6
    fi
    ;;
esac



MACOS_SDK_DIR=
NEXT_ROOT=
# Check whether --with-macos-sdk or --without-macos-sdk was given.
if test "${with_macos_sdk+set}" = set; then
  withval="$with_macos_sdk"
  MACOS_SDK_DIR=$withval
fi





if test "$MACOS_SDK_DIR"; then
      
  if test ! -d "$MACOS_SDK_DIR"; then
    { echo "configure: error: SDK not found.  When using --with-macos-sdk, you must
specify a valid SDK.  SDKs are installed when the optional cross-development
tools are selected during the Xcode/Developer Tools installation." 1>&2; exit 1; }
  fi

  GCC_VERSION_MAJOR=`echo $GCC_VERSION_FULL | $PERL -pe 's/(^\d*).*/$1/;'`
  if test "$GCC_VERSION_MAJOR" -lt "4" ; then
    { echo "configure: error: You need to upgrade the compiler version to 4.x" 1>&2; exit 1; }
  else
    CFLAGS="$CFLAGS -isysroot ${MACOS_SDK_DIR}"
    CXXFLAGS="$CXXFLAGS -isysroot ${MACOS_SDK_DIR}"

        CPP="$CPP -isysroot ${MACOS_SDK_DIR}"
    CXXCPP="$CXXCPP -isysroot ${MACOS_SDK_DIR}"

    if test "$GCC_VERSION_FULL" = "4.0.0" ; then
                                    LDFLAGS="$LDFLAGS -Wl,-syslibroot,${MACOS_SDK_DIR}"
    fi
  fi

  
  echo $ac_n "checking for valid compiler/Mac OS X SDK combination""... $ac_c" 1>&6
echo "configure:5148: checking for valid compiler/Mac OS X SDK combination" >&5
  ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

  cat > conftest.$ac_ext <<EOF
#line 5157 "configure"
#include "confdefs.h"
#include <new>
int main() {

; return 0; }
EOF
if { (eval echo configure:5164: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  result=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  result=no
fi
rm -f conftest*
  ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

  echo "$ac_t""$result" 1>&6

  if test "$result" = "no" ; then
    { echo "configure: error: The selected compiler and Mac OS X SDK are incompatible." 1>&2; exit 1; }
  fi
fi

fi # COMPILE_ENVIRONMENT

echo $ac_n "checking compiler version""... $ac_c" 1>&6
echo "configure:5191: checking compiler version" >&5
# Just print it so it shows up in the logs.
cc_version=$($CC --version)
echo "$ac_t""$cc_version" 1>&6

if test -n "$MAKE"; then
  if test `echo $MAKE | grep -c make.py` != 1; then
     NOT_PYMAKE=$MAKE
  fi
fi

case "$host_os" in
mingw*)
      for ac_prog in $GMAKE $NOT_PYMAKE make gmake
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:5209: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_GMAKE'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$GMAKE" in
  /*)
  ac_cv_path_GMAKE="$GMAKE" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_GMAKE="$GMAKE" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_GMAKE="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
GMAKE="$ac_cv_path_GMAKE"
if test -n "$GMAKE"; then
  echo "$ac_t""$GMAKE" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$GMAKE" && break
done
test -n "$GMAKE" || GMAKE=":"

  if test "$msyshost"; then
    case "$GMAKE" in
    /*)
      tmp_DIRNAME=`dirname "$GMAKE"`
      tmp_BASENAME=`basename "$GMAKE"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      GMAKE="$tmp_PWD/$tmp_BASENAME"
      if test -e "$GMAKE.exe"; then
        GMAKE="$GMAKE.exe"
      fi
    esac
  fi

    ;;
*)
      for ac_prog in $GMAKE $NOT_PYMAKE gmake make
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:5265: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_GMAKE'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$GMAKE" in
  /*)
  ac_cv_path_GMAKE="$GMAKE" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_GMAKE="$GMAKE" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_GMAKE="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
GMAKE="$ac_cv_path_GMAKE"
if test -n "$GMAKE"; then
  echo "$ac_t""$GMAKE" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$GMAKE" && break
done
test -n "$GMAKE" || GMAKE=":"

  if test "$msyshost"; then
    case "$GMAKE" in
    /*)
      tmp_DIRNAME=`dirname "$GMAKE"`
      tmp_BASENAME=`basename "$GMAKE"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      GMAKE="$tmp_PWD/$tmp_BASENAME"
      if test -e "$GMAKE.exe"; then
        GMAKE="$GMAKE.exe"
      fi
    esac
  fi

    ;;
esac
if test "$GMAKE" = ":"; then
   { echo "configure: error: GNU make not found" 1>&2; exit 1; }
fi


if test -z "$MAKE"; then
  MAKE=$GMAKE
fi

if test "$COMPILE_ENVIRONMENT"; then

# If we find X, set shell vars x_includes and x_libraries to the
# paths, otherwise set no_x=yes.
# Uses ac_ vars as temps to allow command line to override cache and checks.
# --without-x overrides everything else, but does not touch the cache.
echo $ac_n "checking for X""... $ac_c" 1>&6
echo "configure:5332: checking for X" >&5

# Check whether --with-x or --without-x was given.
if test "${with_x+set}" = set; then
  withval="$with_x"
  :
fi

# $have_x is `yes', `no', `disabled', or empty when we do not yet know.
if test "x$with_x" = xno; then
  # The user explicitly disabled X.
  have_x=disabled
else
  if test "x$x_includes" != xNONE && test "x$x_libraries" != xNONE; then
    # Both variables are already set.
    have_x=yes
  else
if eval "test \"`echo '$''{'ac_cv_have_x'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # One or both of the vars are not set, and there is no cached value.
ac_x_includes=NO ac_x_libraries=NO
rm -fr conftestdir
if mkdir conftestdir; then
  cd conftestdir
  # Make sure to not put "make" in the Imakefile rules, since we grep it out.
  cat > Imakefile <<'EOF'
acfindx:
	@echo 'ac_im_incroot="${INCROOT}"; ac_im_usrlibdir="${USRLIBDIR}"; ac_im_libdir="${LIBDIR}"'
EOF
  if (xmkmf) >/dev/null 2>/dev/null && test -f Makefile; then
    # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
    eval `${MAKE-make} acfindx 2>/dev/null | grep -v make`
    # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
    for ac_extension in a so sl; do
      if test ! -f $ac_im_usrlibdir/libX11.$ac_extension &&
        test -f $ac_im_libdir/libX11.$ac_extension; then
        ac_im_usrlibdir=$ac_im_libdir; break
      fi
    done
    # Screen out bogus values from the imake configuration.  They are
    # bogus both because they are the default anyway, and because
    # using them would break gcc on systems where it needs fixed includes.
    case "$ac_im_incroot" in
	/usr/include) ;;
	*) test -f "$ac_im_incroot/X11/Xos.h" && ac_x_includes="$ac_im_incroot" ;;
    esac
    case "$ac_im_usrlibdir" in
	/usr/lib | /lib) ;;
	*) test -d "$ac_im_usrlibdir" && ac_x_libraries="$ac_im_usrlibdir" ;;
    esac
  fi
  cd ..
  rm -fr conftestdir
fi

if test "$ac_x_includes" = NO; then
  # Guess where to find include files, by looking for this one X11 .h file.
  test -z "$x_direct_test_include" && x_direct_test_include=X11/Intrinsic.h

  # First, try using that file with no special directory specified.
cat > conftest.$ac_ext <<EOF
#line 5394 "configure"
#include "confdefs.h"
#include <$x_direct_test_include>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5399: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  # We can compile using X headers with no special include directory.
ac_x_includes=
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  # Look for the header file in a standard set of common directories.
# Check X11 before X11Rn because it is often a symlink to the current release.
  for ac_dir in               \
    /usr/X11/include          \
    /usr/X11R6/include        \
    /usr/X11R5/include        \
    /usr/X11R4/include        \
                              \
    /usr/include/X11          \
    /usr/include/X11R6        \
    /usr/include/X11R5        \
    /usr/include/X11R4        \
                              \
    /usr/local/X11/include    \
    /usr/local/X11R6/include  \
    /usr/local/X11R5/include  \
    /usr/local/X11R4/include  \
                              \
    /usr/local/include/X11    \
    /usr/local/include/X11R6  \
    /usr/local/include/X11R5  \
    /usr/local/include/X11R4  \
                              \
    /usr/X386/include         \
    /usr/x386/include         \
    /usr/XFree86/include/X11  \
                              \
    /usr/include              \
    /usr/local/include        \
    /usr/unsupported/include  \
    /usr/athena/include       \
    /usr/local/x11r5/include  \
    /usr/lpp/Xamples/include  \
                              \
    /usr/openwin/include      \
    /usr/openwin/share/include \
    ; \
  do
    if test -r "$ac_dir/$x_direct_test_include"; then
      ac_x_includes=$ac_dir
      break
    fi
  done
fi
rm -f conftest*
fi # $ac_x_includes = NO

if test "$ac_x_libraries" = NO; then
  # Check for the libraries.

  test -z "$x_direct_test_library" && x_direct_test_library=Xt
  test -z "$x_direct_test_function" && x_direct_test_function=XtMalloc

  # See if we find them without any special options.
  # Don't add to $LIBS permanently.
  ac_save_LIBS="$LIBS"
  LIBS="-l$x_direct_test_library $LIBS"
cat > conftest.$ac_ext <<EOF
#line 5468 "configure"
#include "confdefs.h"

int main() {
${x_direct_test_function}()
; return 0; }
EOF
if { (eval echo configure:5475: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  LIBS="$ac_save_LIBS"
# We can link X programs with no special library path.
ac_x_libraries=
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  LIBS="$ac_save_LIBS"
# First see if replacing the include by lib works.
# Check X11 before X11Rn because it is often a symlink to the current release.
for ac_dir in `echo "$ac_x_includes" | sed s/include/lib/` \
    /usr/X11/lib          \
    /usr/X11R6/lib        \
    /usr/X11R5/lib        \
    /usr/X11R4/lib        \
                          \
    /usr/lib/X11          \
    /usr/lib/X11R6        \
    /usr/lib/X11R5        \
    /usr/lib/X11R4        \
                          \
    /usr/local/X11/lib    \
    /usr/local/X11R6/lib  \
    /usr/local/X11R5/lib  \
    /usr/local/X11R4/lib  \
                          \
    /usr/local/lib/X11    \
    /usr/local/lib/X11R6  \
    /usr/local/lib/X11R5  \
    /usr/local/lib/X11R4  \
                          \
    /usr/X386/lib         \
    /usr/x386/lib         \
    /usr/XFree86/lib/X11  \
                          \
    /usr/lib              \
    /usr/local/lib        \
    /usr/unsupported/lib  \
    /usr/athena/lib       \
    /usr/local/x11r5/lib  \
    /usr/lpp/Xamples/lib  \
    /lib/usr/lib/X11	  \
                          \
    /usr/openwin/lib      \
    /usr/openwin/share/lib \
    ; \
do
  for ac_extension in a so sl; do
    if test -r $ac_dir/lib${x_direct_test_library}.$ac_extension; then
      ac_x_libraries=$ac_dir
      break 2
    fi
  done
done
fi
rm -f conftest*
fi # $ac_x_libraries = NO

if test "$ac_x_includes" = NO || test "$ac_x_libraries" = NO; then
  # Didn't find X anywhere.  Cache the known absence of X.
  ac_cv_have_x="have_x=no"
else
  # Record where we found X for the cache.
  ac_cv_have_x="have_x=yes \
	        ac_x_includes=$ac_x_includes ac_x_libraries=$ac_x_libraries"
fi
fi
  fi
  eval "$ac_cv_have_x"
fi # $with_x != no

if test "$have_x" != yes; then
  echo "$ac_t""$have_x" 1>&6
  no_x=yes
else
  # If each of the values was on the command line, it overrides each guess.
  test "x$x_includes" = xNONE && x_includes=$ac_x_includes
  test "x$x_libraries" = xNONE && x_libraries=$ac_x_libraries
  # Update the cache value to reflect the command line values.
  ac_cv_have_x="have_x=yes \
		ac_x_includes=$x_includes ac_x_libraries=$x_libraries"
  echo "$ac_t""libraries $x_libraries, headers $x_includes" 1>&6
fi

if test "$no_x" = yes; then
  # Not all programs may use this symbol, but it does not hurt to define it.
  cat >> confdefs.pytmp <<\EOF
    (''' X_DISPLAY_MISSING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define X_DISPLAY_MISSING 1
EOF

  X_CFLAGS= X_PRE_LIBS= X_LIBS= X_EXTRA_LIBS=
else
  if test -n "$x_includes"; then
    X_CFLAGS="$X_CFLAGS -I$x_includes"
  fi

  # It would also be nice to do this for all -L options, not just this one.
  if test -n "$x_libraries"; then
    X_LIBS="$X_LIBS -L$x_libraries"
    # For Solaris; some versions of Sun CC require a space after -R and
    # others require no space.  Words are not sufficient . . . .
    case "`(uname -sr) 2>/dev/null`" in
    "SunOS 5"*)
      echo $ac_n "checking whether -R must be followed by a space""... $ac_c" 1>&6
echo "configure:5584: checking whether -R must be followed by a space" >&5
      ac_xsave_LIBS="$LIBS"; LIBS="$LIBS -R$x_libraries"
      cat > conftest.$ac_ext <<EOF
#line 5587 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:5594: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_R_nospace=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_R_nospace=no
fi
rm -f conftest*
      if test $ac_R_nospace = yes; then
	echo "$ac_t""no" 1>&6
	X_LIBS="$X_LIBS -R$x_libraries"
      else
	LIBS="$ac_xsave_LIBS -R $x_libraries"
	cat > conftest.$ac_ext <<EOF
#line 5610 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:5617: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_R_space=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_R_space=no
fi
rm -f conftest*
	if test $ac_R_space = yes; then
	  echo "$ac_t""yes" 1>&6
	  X_LIBS="$X_LIBS -R $x_libraries"
	else
	  echo "$ac_t""neither works" 1>&6
	fi
      fi
      LIBS="$ac_xsave_LIBS"
    esac
  fi

  # Check for system-dependent libraries X programs must link with.
  # Do this before checking for the system-independent R6 libraries
  # (-lICE), since we may need -lsocket or whatever for X linking.

  if test "$ISC" = yes; then
    X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl_s -linet"
  else
    # Martyn.Johnson@cl.cam.ac.uk says this is needed for Ultrix, if the X
    # libraries were built with DECnet support.  And karl@cs.umb.edu says
    # the Alpha needs dnet_stub (dnet does not exist).
    echo $ac_n "checking for dnet_ntoa in -ldnet""... $ac_c" 1>&6
echo "configure:5649: checking for dnet_ntoa in -ldnet" >&5
ac_lib_var=`echo dnet'_'dnet_ntoa | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldnet  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 5657 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_ntoa();

int main() {
dnet_ntoa()
; return 0; }
EOF
if { (eval echo configure:5668: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_lib_dnet_dnet_ntoa = no; then
      echo $ac_n "checking for dnet_ntoa in -ldnet_stub""... $ac_c" 1>&6
echo "configure:5690: checking for dnet_ntoa in -ldnet_stub" >&5
ac_lib_var=`echo dnet_stub'_'dnet_ntoa | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldnet_stub  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 5698 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_ntoa();

int main() {
dnet_ntoa()
; return 0; }
EOF
if { (eval echo configure:5709: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet_stub"
else
  echo "$ac_t""no" 1>&6
fi

    fi

    # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
    # to get the SysV transport functions.
    # chad@anasazi.com says the Pyramis MIS-ES running DC/OSx (SVR4)
    # needs -lnsl.
    # The nsl library prevents programs from opening the X display
    # on Irix 5.2, according to dickey@clark.net.
    echo $ac_n "checking for gethostbyname""... $ac_c" 1>&6
echo "configure:5738: checking for gethostbyname" >&5
if eval "test \"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5743 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char gethostbyname(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_gethostbyname) || defined (__stub___gethostbyname)
choke me
#else
gethostbyname();
#endif

; return 0; }
EOF
if { (eval echo configure:5766: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_gethostbyname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_gethostbyname=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'gethostbyname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_gethostbyname = no; then
      echo $ac_n "checking for gethostbyname in -lnsl""... $ac_c" 1>&6
echo "configure:5787: checking for gethostbyname in -lnsl" >&5
ac_lib_var=`echo nsl'_'gethostbyname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 5795 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname();

int main() {
gethostbyname()
; return 0; }
EOF
if { (eval echo configure:5806: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl"
else
  echo "$ac_t""no" 1>&6
fi

    fi

    # lieder@skyler.mavd.honeywell.com says without -lsocket,
    # socket/setsockopt and other routines are undefined under SCO ODT
    # 2.0.  But -lsocket is broken on IRIX 5.2 (and is not necessary
    # on later versions), says simon@lia.di.epfl.ch: it contains
    # gethostby* variants that don't use the nameserver (or something).
    # -lsocket must be given before -lnsl if both are needed.
    # We assume that if connect needs -lnsl, so does gethostbyname.
    echo $ac_n "checking for connect""... $ac_c" 1>&6
echo "configure:5836: checking for connect" >&5
if eval "test \"`echo '$''{'ac_cv_func_connect'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5841 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char connect(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char connect();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_connect) || defined (__stub___connect)
choke me
#else
connect();
#endif

; return 0; }
EOF
if { (eval echo configure:5864: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_connect=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_connect=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'connect`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_connect = no; then
      echo $ac_n "checking for connect in -lsocket""... $ac_c" 1>&6
echo "configure:5885: checking for connect in -lsocket" >&5
ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket $X_EXTRA_LIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 5893 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char connect();

int main() {
connect()
; return 0; }
EOF
if { (eval echo configure:5904: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="-lsocket $X_EXTRA_LIBS"
else
  echo "$ac_t""no" 1>&6
fi

    fi

    # gomez@mi.uni-erlangen.de says -lposix is necessary on A/UX.
    echo $ac_n "checking for remove""... $ac_c" 1>&6
echo "configure:5928: checking for remove" >&5
if eval "test \"`echo '$''{'ac_cv_func_remove'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5933 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char remove(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char remove();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_remove) || defined (__stub___remove)
choke me
#else
remove();
#endif

; return 0; }
EOF
if { (eval echo configure:5956: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_remove=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_remove=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'remove`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_remove = no; then
      echo $ac_n "checking for remove in -lposix""... $ac_c" 1>&6
echo "configure:5977: checking for remove in -lposix" >&5
ac_lib_var=`echo posix'_'remove | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lposix  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 5985 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char remove();

int main() {
remove()
; return 0; }
EOF
if { (eval echo configure:5996: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lposix"
else
  echo "$ac_t""no" 1>&6
fi

    fi

    # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
    echo $ac_n "checking for shmat""... $ac_c" 1>&6
echo "configure:6020: checking for shmat" >&5
if eval "test \"`echo '$''{'ac_cv_func_shmat'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6025 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char shmat(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shmat();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_shmat) || defined (__stub___shmat)
choke me
#else
shmat();
#endif

; return 0; }
EOF
if { (eval echo configure:6048: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_shmat=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_shmat=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'shmat`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_shmat = no; then
      echo $ac_n "checking for shmat in -lipc""... $ac_c" 1>&6
echo "configure:6069: checking for shmat in -lipc" >&5
ac_lib_var=`echo ipc'_'shmat | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lipc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 6077 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shmat();

int main() {
shmat()
; return 0; }
EOF
if { (eval echo configure:6088: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lipc"
else
  echo "$ac_t""no" 1>&6
fi

    fi
  fi

  # Check for libraries that X11R6 Xt/Xaw programs need.
  ac_save_LDFLAGS="$LDFLAGS"
  test -n "$x_libraries" && LDFLAGS="$LDFLAGS -L$x_libraries"
  # SM needs ICE to (dynamically) link under SunOS 4.x (so we have to
  # check for ICE first), but we must link in the order -lSM -lICE or
  # we get undefined symbols.  So assume we have SM if we have ICE.
  # These have to be linked with before -lX11, unlike the other
  # libraries we check for below, so use a different variable.
  #  --interran@uluru.Stanford.EDU, kb@cs.umb.edu.
  echo $ac_n "checking for IceConnectionNumber in -lICE""... $ac_c" 1>&6
echo "configure:6121: checking for IceConnectionNumber in -lICE" >&5
ac_lib_var=`echo ICE'_'IceConnectionNumber | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lICE $X_EXTRA_LIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 6129 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char IceConnectionNumber();

int main() {
IceConnectionNumber()
; return 0; }
EOF
if { (eval echo configure:6140: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_PRE_LIBS="$X_PRE_LIBS -lSM -lICE"
else
  echo "$ac_t""no" 1>&6
fi

  LDFLAGS="$ac_save_LDFLAGS"

fi


XCFLAGS="$X_CFLAGS"

fi # COMPILE_ENVIRONMENT

AS_BIN=$AS
AR_LIST='$(AR) t'
AR_EXTRACT='$(AR) x'
AR_DELETE='$(AR) d'
AS='$(CC)'
AS_DASH_C_FLAG='-c'
DLL_PREFIX=lib
LIB_PREFIX=lib
DLL_SUFFIX=.so
OBJ_SUFFIX=o
LIB_SUFFIX=a
ASM_SUFFIX=s
IMPORT_LIB_SUFFIX=
TARGET_MD_ARCH=unix
DIRENT_INO=d_ino
MOZ_USER_DIR=".mozilla"

MOZ_JPEG_CFLAGS=
MOZ_JPEG_LIBS='$(call EXPAND_LIBNAME_PATH,mozjpeg,$(DEPTH)/media/libjpeg)'
MOZ_BZ2_CFLAGS=
MOZ_BZ2_LIBS='$(call EXPAND_LIBNAME_PATH,bz2,$(DEPTH)/modules/libbz2/src)'
MOZ_PNG_CFLAGS=
MOZ_PNG_LIBS='$(call EXPAND_LIBNAME_PATH,mozpng,$(DEPTH)/media/libpng)'

MOZ_JS_STATIC_LIBS='$(call EXPAND_LIBNAME_PATH,js_static,$(LIBXUL_DIST)/lib)'
MOZ_JS_SHARED_LIBS='$(call EXPAND_LIBNAME_PATH,mozjs,$(LIBXUL_DIST)/lib)'
DYNAMIC_XPCOM_LIBS='-L$(LIBXUL_DIST)/bin -lxpcom -lxpcom_core -lmozalloc'
MOZ_FIX_LINK_PATHS='-Wl,-rpath-link,$(LIBXUL_DIST)/bin -Wl,-rpath-link,$(prefix)/lib'
XPCOM_FROZEN_LDOPTS='-L$(LIBXUL_DIST)/bin -lxpcom -lmozalloc'
LIBXUL_LIBS='$(XPCOM_FROZEN_LDOPTS) -lxul'
XPCOM_GLUE_LDOPTS='$(LIBXUL_DIST)/lib/$(LIB_PREFIX)xpcomglue_s.$(LIB_SUFFIX) $(XPCOM_FROZEN_LDOPTS)'
XPCOM_STANDALONE_GLUE_LDOPTS='$(LIBXUL_DIST)/lib/$(LIB_PREFIX)xpcomglue.$(LIB_SUFFIX)'

# These are specially defined on Windows only
case "$target" in
*-mingw*)
  XPCOM_STATICRUNTIME_GLUE_LDOPTS='$(LIBXUL_DIST)/lib/$(LIB_PREFIX)xpcomglue_staticruntime_s.$(LIB_SUFFIX) $(XPCOM_FROZEN_LDOPTS)'
  XPCOM_STANDALONE_STATICRUNTIME_GLUE_LDOPTS='$(LIBXUL_DIST)/lib/$(LIB_PREFIX)xpcomglue_staticruntime.$(LIB_SUFFIX)'
  ;;
*)
  XPCOM_STATICRUNTIME_GLUE_LDOPTS=$XPCOM_GLUE_LDOPTS
  XPCOM_STANDALONE_STATICRUNTIME_GLUE_LDOPTS=$XPCOM_STANDALONE_GLUE_LDOPTS
  ;;
esac

MOZ_FS_LAYOUT=unix

MOZ_COMPONENT_NSPR_LIBS='-L$(LIBXUL_DIST)/bin $(NSPR_LIBS)'

USE_DEPENDENT_LIBS=1

_PLATFORM_DEFAULT_TOOLKIT=cairo-gtk2

if test -n "$CROSS_COMPILE"; then
    OS_TARGET="${target_os}"
    OS_ARCH=`echo $target_os | sed -e 's|/|_|g'`
    OS_RELEASE=
    case "${target_os}" in
        linux*)       OS_ARCH=Linux OS_TARGET=Linux ;;
        kfreebsd*-gnu) OS_ARCH=GNU_kFreeBSD OS_TARGET=GNU_kFreeBSD ;;
        gnu*)         OS_ARCH=GNU ;;
        solaris*)     OS_ARCH=SunOS OS_RELEASE=5 ;;
        mingw*)       OS_ARCH=WINNT OS_TARGET=WINNT ;;
        darwin*)      OS_ARCH=Darwin OS_TARGET=Darwin ;;
    esac
    case "${target}" in
        *-android*|*-linuxandroid*) OS_ARCH=Linux OS_TARGET=Android ;;
    esac
else
    OS_TARGET=`uname -s`
    OS_ARCH=`uname -s | sed -e 's|/|_|g'`
    OS_RELEASE=`uname -r`
fi

# Before this used `uname -m` when not cross compiling
# but that breaks when you have a 64 bit kernel with a 32 bit userland.
OS_TEST="${target_cpu}"

HOST_OS_ARCH=`echo $host_os | sed -e 's|/|_|g'`

#######################################################################
# Master "Core Components" macros for getting the OS target           #
#######################################################################

#
# If OS_TARGET is not specified, it defaults to $(OS_ARCH), i.e., no
# cross-compilation.
#

#
# Define and override various archtecture-specific variables, including
# HOST_OS_ARCH
# OS_ARCH
# OS_TEST
# OS_TARGET
# OS_RELEASE
# OS_MINOR_RELEASE
#

case "$HOST_OS_ARCH" in
mingw*)
    HOST_OS_ARCH=WINNT
    ;;
darwin*)
    HOST_OS_ARCH=Darwin
    ;;
linux*)
    HOST_OS_ARCH=Linux
    ;;
solaris*)
    HOST_OS_ARCH=SunOS
    SOLARIS_SUNPRO_CC=
    SOLARIS_SUNPRO_CXX=
    if test -z "$GNU_CC"; then
        if test "`$CC -V 2>&1 | egrep -c 'Sun.*C '`" != "0"; then
            SOLARIS_SUNPRO_CC=1
       fi
    fi

    if test -z "$GNU_CXX"; then
       if test "`$CXX -V 2>&1 | egrep -c 'Sun.*C\+\+ '`" != "0"; then
           SOLARIS_SUNPRO_CXX=1
       fi
    fi
    
    
    ;;
OS_2)
    HOST_OS_ARCH=OS2
    ;;
esac

case "$OS_ARCH" in
WINNT)
    if test -z "$CROSS_COMPILE" ; then
        OS_TEST=`uname -p`
    fi
    ;;
Windows_NT)
#
# If uname -s returns "Windows_NT", we assume that we are using
# the uname.exe in MKS toolkit.
#
# The -r option of MKS uname only returns the major version number.
# So we need to use its -v option to get the minor version number.
# Moreover, it doesn't have the -p option, so we need to use uname -m.
#
    OS_ARCH=WINNT
    OS_TARGET=WINNT
    OS_MINOR_RELEASE=`uname -v`
    if test "$OS_MINOR_RELEASE" = "00"; then
        OS_MINOR_RELEASE=0
    fi
    OS_RELEASE="${OS_RELEASE}.${OS_MINOR_RELEASE}"
    ;;
MINGW*_NT*)
#
# If uname -s returns MINGW32_NT-5.1, we assume that we are using
# the uname.exe in the MSYS tools.
#
    OS_RELEASE=`expr $OS_ARCH : '.*NT-\(.*\)'`
    OS_ARCH=WINNT
    OS_TARGET=WINNT
    ;;
AIX)
    OS_RELEASE=`uname -v`.`uname -r`
    OS_TEST=${target_cpu}
    ;;
OS_2)
    OS_ARCH=OS2
    OS_TARGET=OS2
    OS_RELEASE=`uname -v`
    ;;
Darwin)
    case "${target_cpu}" in
    powerpc*)
        OS_TEST=ppc
        ;;
    i*86*)
        OS_TEST=i386
        ;;
    x86_64)
        OS_TEST=x86_64
        ;;
    *)
        if test -z "$CROSS_COMPILE" ; then
            OS_TEST=`uname -p`
        fi
        ;;
    esac
    ;;
esac

# Only set CPU_ARCH if we recognize the value of OS_TEST

case "$OS_TEST" in
*86 | i86pc)
    CPU_ARCH=x86
    ;;

powerpc64 | ppc64)
    CPU_ARCH=ppc64
    ;;

powerpc | ppc | rs6000)
    CPU_ARCH=ppc
    ;;

Alpha | alpha | ALPHA)
    CPU_ARCH=Alpha
    ;;

s390)
    CPU_ARCH=s390
    ;;

s390x)
    CPU_ARCH=s390x
    ;;

hppa* | parisc)
    CPU_ARCH=hppa
    ;;

sun4u | sparc*)
    CPU_ARCH=sparc
    ;;

x86_64 | ia64)
    CPU_ARCH="$OS_TEST"
    ;;

arm*)
    CPU_ARCH=arm
    ;;

mips|mipsel)
    CPU_ARCH="mips"
    ;;
esac

if test -z "$OS_TARGET"; then
    OS_TARGET=$OS_ARCH
fi
OS_CONFIG="${OS_TARGET}${OS_RELEASE}"

INTEL_ARCHITECTURE=
case "$OS_TEST" in
    x86_64|i?86)
      INTEL_ARCHITECTURE=1
esac




MOZ_THUMB=toolchain-default
MOZ_THUMB_INTERWORK=toolchain-default
MOZ_FPU=toolchain-default
MOZ_FLOAT_ABI=toolchain-default
MOZ_SOFT_FLOAT=toolchain-default

# Check whether --with-arch or --without-arch was given.
if test "${with_arch+set}" = set; then
  withval="$with_arch"
  if test -z "$GNU_CC"; then
        { echo "configure: error: --with-arch is not supported on non-GNU toolchains" 1>&2; exit 1; }
    fi
    MOZ_ARCH=$withval
fi


if test -z "$MOZ_ARCH"; then
        case "${CPU_ARCH}-${OS_TARGET}" in
    arm-Android)
        MOZ_THUMB=yes
        MOZ_ARCH=armv7-a
        MOZ_FPU=vfp
        MOZ_FLOAT_ABI=softfp
        ;;
    arm-Darwin)
        MOZ_ARCH=toolchain-default
        MOZ_THUMB=yes
        ;;
    arm-*)
        if test -n "$MOZ_PLATFORM_MAEMO"; then
            MOZ_THUMB=no
            MOZ_ARCH=armv7-a
            MOZ_FLOAT_ABI=softfp
        fi
        if test "$MOZ_PLATFORM_MAEMO" = 6; then
            MOZ_THUMB=yes
        fi
        ;;
    esac
fi

if test "$MOZ_ARCH" = "armv6" -a "$OS_TARGET" = "Android"; then
   MOZ_FPU=vfp
fi

# Check whether --with-thumb or --without-thumb was given.
if test "${with_thumb+set}" = set; then
  withval="$with_thumb"
  if test -z "$GNU_CC"; then
        { echo "configure: error: --with-thumb is not supported on non-GNU toolchains" 1>&2; exit 1; }
    fi
    MOZ_THUMB=$withval
fi


# Check whether --with-thumb-interwork or --without-thumb-interwork was given.
if test "${with_thumb_interwork+set}" = set; then
  withval="$with_thumb_interwork"
  if test -z "$GNU_CC"; then
        { echo "configure: error: --with-thumb-interwork is not supported on non-GNU toolchains" 1>&2; exit 1; }
    fi
    MOZ_THUMB_INTERWORK=$withval
fi


# Check whether --with-fpu or --without-fpu was given.
if test "${with_fpu+set}" = set; then
  withval="$with_fpu"
  if test -z "$GNU_CC"; then
        { echo "configure: error: --with-fpu is not supported on non-GNU toolchains" 1>&2; exit 1; }
    fi
    MOZ_FPU=$withval
fi


# Check whether --with-float-abi or --without-float-abi was given.
if test "${with_float_abi+set}" = set; then
  withval="$with_float_abi"
  if test -z "$GNU_CC"; then
        { echo "configure: error: --with-float-abi is not supported on non-GNU toolchains" 1>&2; exit 1; }
    fi
    MOZ_FLOAT_ABI=$withval
fi


# Check whether --with-soft-float or --without-soft-float was given.
if test "${with_soft_float+set}" = set; then
  withval="$with_soft_float"
  if test -z "$GNU_CC"; then
        { echo "configure: error: --with-soft-float is not supported on non-GNU toolchains" 1>&2; exit 1; }
    fi
    MOZ_SOFT_FLOAT=$withval
fi


case "$MOZ_ARCH" in
toolchain-default|"")
    arch_flag=""
    ;;
*)
    arch_flag="-march=$MOZ_ARCH"
    ;;
esac

case "$MOZ_THUMB" in
yes)
    MOZ_THUMB2=1
    thumb_flag="-mthumb"
    ;;
no)
    MOZ_THUMB2=
    thumb_flag="-marm"
    ;;
*)
    _SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$arch_flag"
    cat > conftest.$ac_ext <<EOF
#line 6541 "configure"
#include "confdefs.h"

int main() {
return sizeof(__thumb2__);
; return 0; }
EOF
if { (eval echo configure:6548: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  MOZ_THUMB2=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  MOZ_THUMB2=
fi
rm -f conftest*
    CFLAGS="$_SAVE_CFLAGS"
    thumb_flag=""
    ;;
esac

if test "$MOZ_THUMB2" = 1; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_THUMB2 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_THUMB2 1
EOF

fi

case "$MOZ_THUMB_INTERWORK" in
yes)
    thumb_interwork_flag="-mthumb-interwork"
    ;;
no)
    thumb_interwork_flag="-mno-thumb-interwork"
    ;;
*) # toolchain-default
    thumb_interwork_flag=""
    ;;
esac

case "$MOZ_FPU" in
toolchain-default|"")
    fpu_flag=""
    ;;
*)
    fpu_flag="-mfpu=$MOZ_FPU"
    ;;
esac

case "$MOZ_FLOAT_ABI" in
toolchain-default|"")
    float_abi_flag=""
    ;;
*)
    float_abi_flag="-mfloat-abi=$MOZ_FLOAT_ABI"
    ;;
esac

case "$MOZ_SOFT_FLOAT" in
yes)
    soft_float_flag="-msoft-float"
    ;;
no)
    soft_float_flag="-mno-soft-float"
    ;;
*) # toolchain-default
    soft_float_flag=""
    ;;
esac

all_flags=`echo $arch_flag $thumb_flag $thumb_interwork_flag $fpu_flag $float_abi_flag $soft_float_flag`
if test -n "$all_flags"; then
    _SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$all_flags"
    echo $ac_n "checking whether the chosen combination of compiler flags ($all_flags) works""... $ac_c" 1>&6
echo "configure:6620: checking whether the chosen combination of compiler flags ($all_flags) works" >&5
    cat > conftest.$ac_ext <<EOF
#line 6622 "configure"
#include "confdefs.h"

int main() {
return 0;
; return 0; }
EOF
if { (eval echo configure:6629: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: no" 1>&2; exit 1; }
fi
rm -f conftest*

    CFLAGS="$_SAVE_CFLAGS $all_flags"
    CXXFLAGS="$CXXFLAGS $all_flags"
    ASFLAGS="$ASFLAGS $all_flags"
    if test -n "$thumb_flag"; then
        LDFLAGS="$LDFLAGS $thumb_flag"
    fi
fi



if test "$CPU_ARCH" = "arm"; then
  echo $ac_n "checking for ARM SIMD support in compiler""... $ac_c" 1>&6
echo "configure:6652: checking for ARM SIMD support in compiler" >&5
  # We try to link so that this also fails when
  # building with LTO.
  cat > conftest.$ac_ext <<EOF
#line 6656 "configure"
#include "confdefs.h"

int main() {
asm("uqadd8 r1, r1, r2");
; return 0; }
EOF
if { (eval echo configure:6663: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  result="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  result="no"
fi
rm -f conftest*
  echo "$ac_t"""$result"" 1>&6
  if test "$result" = "yes"; then
      cat >> confdefs.pytmp <<\EOF
    (''' HAVE_ARM_SIMD ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ARM_SIMD 1
EOF

      HAVE_ARM_SIMD=1
  fi

  echo $ac_n "checking for ARM NEON support in compiler""... $ac_c" 1>&6
echo "configure:6686: checking for ARM NEON support in compiler" >&5
  # We try to link so that this also fails when
  # building with LTO.
  cat > conftest.$ac_ext <<EOF
#line 6690 "configure"
#include "confdefs.h"

int main() {
asm(".fpu neon\n vadd.i8 d0, d0, d0");
; return 0; }
EOF
if { (eval echo configure:6697: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  result="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  result="no"
fi
rm -f conftest*
  echo "$ac_t"""$result"" 1>&6
  if test "$result" = "yes"; then
      cat >> confdefs.pytmp <<\EOF
    (''' HAVE_ARM_NEON ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ARM_NEON 1
EOF

      HAVE_ARM_NEON=1
  fi
fi # CPU_ARCH = arm




if test -n "$MOZ_ARCH"; then
  NSPR_CONFIGURE_ARGS="$NSPR_CONFIGURE_ARGS --with-arch=$MOZ_ARCH"
  NSPR_CONFIGURE_ARGS="$NSPR_CONFIGURE_ARGS --with-thumb=$MOZ_THUMB"
  NSPR_CONFIGURE_ARGS="$NSPR_CONFIGURE_ARGS --with-thumb-interwork=$MOZ_THUMB_INTERWORK"
  NSPR_CONFIGURE_ARGS="$NSPR_CONFIGURE_ARGS --with-fpu=$MOZ_FPU"
  NSPR_CONFIGURE_ARGS="$NSPR_CONFIGURE_ARGS --with-float-abi=$MOZ_FLOAT_ABI"
  NSPR_CONFIGURE_ARGS="$NSPR_CONFIGURE_ARGS --with-soft-float=$MOZ_SOFT_FLOAT"
fi



if test "$COMPILE_ENVIRONMENT"; then
configure_static_assert_macros='
#define CONFIGURE_STATIC_ASSERT(condition) CONFIGURE_STATIC_ASSERT_IMPL(condition, __LINE__)
#define CONFIGURE_STATIC_ASSERT_IMPL(condition, line) CONFIGURE_STATIC_ASSERT_IMPL2(condition, line)
#define CONFIGURE_STATIC_ASSERT_IMPL2(condition, line) typedef int static_assert_line_##line[(condition) ? 1 : -1]
'

echo $ac_n "checking that static assertion macros used in autoconf tests work""... $ac_c" 1>&6
echo "configure:6742: checking that static assertion macros used in autoconf tests work" >&5
if eval "test \"`echo '$''{'ac_cv_static_assertion_macros_work'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

  ac_cv_static_assertion_macros_work="yes"
  cat > conftest.$ac_ext <<EOF
#line 6756 "configure"
#include "confdefs.h"
$configure_static_assert_macros
int main() {
CONFIGURE_STATIC_ASSERT(1)
; return 0; }
EOF
if { (eval echo configure:6763: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_static_assertion_macros_work="no"
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 6773 "configure"
#include "confdefs.h"
$configure_static_assert_macros
int main() {
CONFIGURE_STATIC_ASSERT(0)
; return 0; }
EOF
if { (eval echo configure:6780: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_static_assertion_macros_work="no"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
  ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

  cat > conftest.$ac_ext <<EOF
#line 6796 "configure"
#include "confdefs.h"
$configure_static_assert_macros
int main() {
CONFIGURE_STATIC_ASSERT(1)
; return 0; }
EOF
if { (eval echo configure:6803: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_static_assertion_macros_work="no"
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 6813 "configure"
#include "confdefs.h"
$configure_static_assert_macros
int main() {
CONFIGURE_STATIC_ASSERT(0)
; return 0; }
EOF
if { (eval echo configure:6820: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_static_assertion_macros_work="no"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
  ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

 
fi

echo "$ac_t"""$ac_cv_static_assertion_macros_work"" 1>&6
if test "$ac_cv_static_assertion_macros_work" = "no"; then
    { echo "configure: error: Compiler cannot compile macros used in autoconf tests." 1>&2; exit 1; }
fi
fi # COMPILE_ENVIRONMENT




if test "$OS_TARGET" = "Android" -a -z "$gonkdir"; then
    case "${CPU_ARCH}-${MOZ_ARCH}" in
    arm-armv7*)
        ANDROID_CPU_ARCH=armeabi-v7a
        ;;
    arm-*)
        ANDROID_CPU_ARCH=armeabi
        ;;
    x86-*)
        ANDROID_CPU_ARCH=x86
        ;;
    mips-*) # When target_cpu is mipsel, CPU_ARCH is mips
        ANDROID_CPU_ARCH=mips
        ;;
    esac

    

    if test -z "$STLPORT_CPPFLAGS$STLPORT_LDFLAGS$STLPORT_LIBS"; then
        if test -n "$MOZ_ANDROID_LIBSTDCXX" ; then
            if test -e "$android_ndk/sources/cxx-stl/gnu-libstdc++/$android_gnu_compiler_version/libs/$ANDROID_CPU_ARCH/libgnustl_static.a"; then
                # android-ndk-r8b
                STLPORT_LDFLAGS="-L$android_ndk/sources/cxx-stl/gnu-libstdc++/$android_gnu_compiler_version/libs/$ANDROID_CPU_ARCH/"
                STLPORT_CPPFLAGS="-I$android_ndk/sources/cxx-stl/gnu-libstdc++/$android_gnu_compiler_version/include -I$android_ndk/sources/cxx-stl/gnu-libstdc++/$android_gnu_compiler_version/libs/$ANDROID_CPU_ARCH/include"
                STLPORT_LIBS="-lgnustl_static"
            elif test -e "$android_ndk/sources/cxx-stl/gnu-libstdc++/libs/$ANDROID_CPU_ARCH/libgnustl_static.a"; then
                # android-ndk-r7, android-ndk-r7b, android-ndk-r8
                STLPORT_LDFLAGS="-L$android_ndk/sources/cxx-stl/gnu-libstdc++/libs/$ANDROID_CPU_ARCH/"
                STLPORT_CPPFLAGS="-I$android_ndk/sources/cxx-stl/gnu-libstdc++/include -I$android_ndk/sources/cxx-stl/gnu-libstdc++/libs/$ANDROID_CPU_ARCH/include"
                STLPORT_LIBS="-lgnustl_static"
            elif test -e "$android_ndk/sources/cxx-stl/gnu-libstdc++/libs/$ANDROID_CPU_ARCH/libstdc++.a"; then
                # android-ndk-r5c, android-ndk-r6, android-ndk-r6b
                STLPORT_CPPFLAGS="-I$android_ndk/sources/cxx-stl/gnu-libstdc++/include -I$android_ndk/sources/cxx-stl/gnu-libstdc++/libs/$ANDROID_CPU_ARCH/include"
                STLPORT_LDFLAGS="-L$android_ndk/sources/cxx-stl/gnu-libstdc++/libs/$ANDROID_CPU_ARCH/"
                STLPORT_LIBS="-lstdc++"
            else
                { echo "configure: error: Couldn't find path to gnu-libstdc++ in the android ndk" 1>&2; exit 1; }
            fi
        elif test -e "$android_ndk/sources/cxx-stl/stlport/src/iostream.cpp" ; then
            if test -e "$android_ndk/sources/cxx-stl/stlport/libs/$ANDROID_CPU_ARCH/libstlport_static.a"; then
                STLPORT_LDFLAGS="-L$_objdir/build/stlport -L$android_ndk/sources/cxx-stl/stlport/libs/$ANDROID_CPU_ARCH/"
            elif test -e "$android_ndk/tmp/ndk-digit/build/install/sources/cxx-stl/stlport/libs/$ANDROID_CPU_ARCH/libstlport_static.a"; then
                STLPORT_LDFLAGS="-L$_objdir/build/stlport -L$android_ndk/tmp/ndk-digit/build/install/sources/cxx-stl/stlport/libs/$ANDROID_CPU_ARCH/"
            else
                { echo "configure: error: Couldn't find path to stlport in the android ndk" 1>&2; exit 1; }
            fi
            STLPORT_SOURCES="$android_ndk/sources/cxx-stl/stlport"
            STLPORT_CPPFLAGS="-I$_objdir/build/stlport -I$android_ndk/sources/cxx-stl/stlport/stlport"
            STLPORT_LIBS="-lstlport_static"
        elif test "$target" != "arm-android-eabi"; then
                        { echo "configure: error: Couldn't find path to stlport in the android ndk" 1>&2; exit 1; }
        fi
    fi
    CXXFLAGS="$CXXFLAGS $STLPORT_CPPFLAGS"
    LDFLAGS="$LDFLAGS $STLPORT_LDFLAGS"
    LIBS="$LIBS $STLPORT_LIBS"
fi




if test -n "$CLANG_CC"; then
    _WARNINGS_CFLAGS="-Qunused-arguments ${_WARNINGS_CFLAGS}"
    CPPFLAGS="-Qunused-arguments ${CPPFLAGS}"
fi
if test -n "$CLANG_CXX"; then
    _WARNINGS_CXXFLAGS="-Qunused-arguments ${_WARNINGS_CXXFLAGS}"
fi

# Check whether --enable-address-sanitizer or --disable-address-sanitizer was given.
if test "${enable_address_sanitizer+set}" = set; then
  enableval="$enable_address_sanitizer"
  if test "$enableval" = "yes"; then
    MOZ_ASAN=1
  elif test "$enableval" = "no"; then
    MOZ_ASAN= 
  else
    { echo "configure: error: Option, address-sanitizer, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_ASAN"; then
    MOZ_LLVM_HACKS=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ASAN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ASAN 1
EOF

fi


# Check whether --enable-llvm-hacks or --disable-llvm-hacks was given.
if test "${enable_llvm_hacks+set}" = set; then
  enableval="$enable_llvm_hacks"
  if test "$enableval" = "yes"; then
    MOZ_LLVM_HACKS=1
  elif test "$enableval" = "no"; then
    MOZ_LLVM_HACKS= 
  else
    { echo "configure: error: Option, llvm-hacks, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_LLVM_HACKS"; then
    MOZ_NO_WLZDEFS=1
    MOZ_CFLAGS_NSS=1
fi



if test "$GNU_CC"; then
    # FIXME: Let us build with strict aliasing. bug 414641.
    CFLAGS="$CFLAGS -fno-strict-aliasing"
    MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-h,$@ -o $@'
    MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-h,$@ -o $@'
    DSO_LDOPTS='-shared'
    if test "$GCC_USE_GNU_LD"; then
        # Some tools like ASan use a runtime library that is only
        # linked against executables, so we must allow undefined
        # symbols for shared objects in some cases.
        if test -z "$MOZ_NO_WLZDEFS"; then
            # Don't allow undefined symbols in libraries
            DSO_LDOPTS="$DSO_LDOPTS -Wl,-z,defs"
        fi
    fi
    WARNINGS_AS_ERRORS='-Werror -Wno-error=uninitialized'
    DSO_CFLAGS=''
    DSO_PIC_CFLAGS='-fPIC'
    ASFLAGS="$ASFLAGS -fPIC"
    echo $ac_n "checking for --noexecstack option to as""... $ac_c" 1>&6
echo "configure:6979: checking for --noexecstack option to as" >&5
    _SAVE_CFLAGS=$CFLAGS
    CFLAGS="$CFLAGS -Wa,--noexecstack"
    cat > conftest.$ac_ext <<EOF
#line 6983 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:6990: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                     ASFLAGS="$ASFLAGS -Wa,--noexecstack"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
    CFLAGS=$_SAVE_CFLAGS
    echo $ac_n "checking for -z noexecstack option to ld""... $ac_c" 1>&6
echo "configure:7003: checking for -z noexecstack option to ld" >&5
    _SAVE_LDFLAGS=$LDFLAGS
    LDFLAGS="$LDFLAGS -Wl,-z,noexecstack"
    cat > conftest.$ac_ext <<EOF
#line 7007 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:7014: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
                  LDFLAGS=$_SAVE_LDFLAGS
fi
rm -f conftest*
    echo $ac_n "checking for --build-id option to ld""... $ac_c" 1>&6
echo "configure:7026: checking for --build-id option to ld" >&5
    _SAVE_LDFLAGS=$LDFLAGS
    LDFLAGS="$LDFLAGS -Wl,--build-id"
    cat > conftest.$ac_ext <<EOF
#line 7030 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:7037: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                  NSPR_LDFLAGS="$NSPR_LDFLAGS -Wl,--build-id"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
                  LDFLAGS=$_SAVE_LDFLAGS
fi
rm -f conftest*


    # Check for -mssse3 on $CC
    echo $ac_n "checking if toolchain supports -mssse3 option""... $ac_c" 1>&6
echo "configure:7053: checking if toolchain supports -mssse3 option" >&5
    HAVE_TOOLCHAIN_SUPPORT_MSSSE3=
    _SAVE_CFLAGS=$CFLAGS
    CFLAGS="$CFLAGS -mssse3"
    cat > conftest.$ac_ext <<EOF
#line 7058 "configure"
#include "confdefs.h"
asm ("pmaddubsw %xmm2,%xmm3");
int main() {

; return 0; }
EOF
if { (eval echo configure:7065: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                     HAVE_TOOLCHAIN_SUPPORT_MSSSE3=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
    CFLAGS=$_SAVE_CFLAGS
    

    # Turn on GNU-specific warnings:
    # -Wall - turn on a lot of warnings
    # -pedantic - this is turned on below
    # -Wpointer-arith - enabled with -pedantic, but good to have even if not
    # -Wdeclaration-after-statement - MSVC doesn't like these
    # -Werror=return-type - catches missing returns, zero false positives
    # -Wtype-limits - catches overflow bugs, few false positives
    # -Wempty-body - catches bugs, e.g. "if (c); foo();", few false positives
    #
    _WARNINGS_CFLAGS="${_WARNINGS_CFLAGS} -Wall -Wpointer-arith -Wdeclaration-after-statement"
    
    echo $ac_n "checking whether the C compiler supports -Werror=return-type""... $ac_c" 1>&6
echo "configure:7091: checking whether the C compiler supports -Werror=return-type" >&5
if eval "test \"`echo '$''{'ac_c_has_werror_return_type'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

            _SAVE_CFLAGS="$CFLAGS"
            CFLAGS="$CFLAGS -Werror -Werror=return-type"
            cat > conftest.$ac_ext <<EOF
#line 7107 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:7114: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_c_has_werror_return_type="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_c_has_werror_return_type="no"
fi
rm -f conftest*
            CFLAGS="$_SAVE_CFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_c_has_werror_return_type" 1>&6
    if test "${ac_c_has_werror_return_type}" = "yes"; then
        _WARNINGS_CFLAGS="${_WARNINGS_CFLAGS} -Werror=return-type"
    fi

    
    echo $ac_n "checking whether the C compiler supports -Wtype-limits""... $ac_c" 1>&6
echo "configure:7142: checking whether the C compiler supports -Wtype-limits" >&5
if eval "test \"`echo '$''{'ac_c_has_wtype_limits'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

            _SAVE_CFLAGS="$CFLAGS"
            CFLAGS="$CFLAGS -Werror -Wtype-limits"
            cat > conftest.$ac_ext <<EOF
#line 7158 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:7165: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_c_has_wtype_limits="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_c_has_wtype_limits="no"
fi
rm -f conftest*
            CFLAGS="$_SAVE_CFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_c_has_wtype_limits" 1>&6
    if test "${ac_c_has_wtype_limits}" = "yes"; then
        _WARNINGS_CFLAGS="${_WARNINGS_CFLAGS} -Wtype-limits"
    fi

    
    echo $ac_n "checking whether the C compiler supports -Wempty-body""... $ac_c" 1>&6
echo "configure:7193: checking whether the C compiler supports -Wempty-body" >&5
if eval "test \"`echo '$''{'ac_c_has_wempty_body'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

            _SAVE_CFLAGS="$CFLAGS"
            CFLAGS="$CFLAGS -Werror -Wempty-body"
            cat > conftest.$ac_ext <<EOF
#line 7209 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:7216: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_c_has_wempty_body="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_c_has_wempty_body="no"
fi
rm -f conftest*
            CFLAGS="$_SAVE_CFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_c_has_wempty_body" 1>&6
    if test "${ac_c_has_wempty_body}" = "yes"; then
        _WARNINGS_CFLAGS="${_WARNINGS_CFLAGS} -Wempty-body"
    fi

    
    # Turn off the following warnings that -Wall/-pedantic turn on:
    # -Wno-unused - lots of violations in third-party code
    # -Wno-overlength-strings - we exceed the minimum maximum length frequently
    #
    _WARNINGS_CFLAGS="${_WARNINGS_CFLAGS} -Wno-unused"
    
    echo $ac_n "checking whether the C compiler supports -Wno-overlength-strings""... $ac_c" 1>&6
echo "configure:7250: checking whether the C compiler supports -Wno-overlength-strings" >&5
if eval "test \"`echo '$''{'ac_c_has_wno_overlength_strings'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

            _SAVE_CFLAGS="$CFLAGS"
            CFLAGS="$CFLAGS -Werror -Woverlength-strings"
            cat > conftest.$ac_ext <<EOF
#line 7266 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:7273: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_c_has_wno_overlength_strings="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_c_has_wno_overlength_strings="no"
fi
rm -f conftest*
            CFLAGS="$_SAVE_CFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_c_has_wno_overlength_strings" 1>&6
    if test "${ac_c_has_wno_overlength_strings}" = "yes"; then
        _WARNINGS_CFLAGS="${_WARNINGS_CFLAGS} -Wno-overlength-strings"
    fi


    if test -z "$INTEL_CC" -a -z "$CLANG_CC"; then
       # Don't use -Wcast-align with ICC or clang
       case "$CPU_ARCH" in
           # And don't use it on hppa, ia64, sparc, arm, since it's noisy there
           hppa | ia64 | sparc | arm)
           ;;
           *)
        _WARNINGS_CFLAGS="${_WARNINGS_CFLAGS} -Wcast-align"
           ;;
       esac
    fi

        _PEDANTIC=1

    _DEFINES_CFLAGS='-include $(DEPTH)/mozilla-config.h -DMOZILLA_CLIENT'
    _USE_CPP_INCLUDE_FLAG=1

elif test "$SOLARIS_SUNPRO_CC"; then
    DSO_CFLAGS=''
    if test "$CPU_ARCH" = "sparc"; then
        # for Sun Studio on Solaris/SPARC
        DSO_PIC_CFLAGS='-xcode=pic32'
    else
        DSO_PIC_CFLAGS='-KPIC'
    fi
    _DEFINES_CFLAGS='$(ACDEFINES) -D_MOZILLA_CONFIG_H_ -DMOZILLA_CLIENT'
else
    MKSHLIB='$(LD) $(DSO_LDOPTS) -h $@ -o $@'
    MKCSHLIB='$(LD) $(DSO_LDOPTS) -h $@ -o $@'

    DSO_LDOPTS='-shared'
    if test "$GNU_LD"; then
        # Don't allow undefined symbols in libraries
        DSO_LDOPTS="$DSO_LDOPTS -z defs"
    fi

    DSO_CFLAGS=''
    DSO_PIC_CFLAGS='-KPIC'
    _DEFINES_CFLAGS='$(ACDEFINES) -D_MOZILLA_CONFIG_H_ -DMOZILLA_CLIENT'
fi

if test "$GNU_CXX"; then
    # FIXME: Let us build with strict aliasing. bug 414641.
    CXXFLAGS="$CXXFLAGS -fno-exceptions -fno-strict-aliasing"

    # Turn on GNU-specific warnings:
    # -Wall - turn on a lot of warnings
    # -pedantic - this is turned on below
    # -Wpointer-arith - enabled with -pedantic, but good to have even if not
    # -Woverloaded-virtual - ???
    # -Werror=return-type - catches missing returns, zero false positives
    # -Wtype-limits - catches overflow bugs, few false positives
    # -Wempty-body - catches bugs, e.g. "if (c); foo();", few false positives
    #
    _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wall -Wpointer-arith -Woverloaded-virtual"
    
    echo $ac_n "checking whether the C++ compiler supports -Werror=return-type""... $ac_c" 1>&6
echo "configure:7357: checking whether the C++ compiler supports -Werror=return-type" >&5
if eval "test \"`echo '$''{'ac_cxx_has_werror_return_type'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

            _SAVE_CXXFLAGS="$CXXFLAGS"
            CXXFLAGS="$CXXFLAGS -Werror -Werror=return-type"
            cat > conftest.$ac_ext <<EOF
#line 7373 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:7380: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cxx_has_werror_return_type="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cxx_has_werror_return_type="no"
fi
rm -f conftest*
            CXXFLAGS="$_SAVE_CXXFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_cxx_has_werror_return_type" 1>&6
    if test "${ac_cxx_has_werror_return_type}" = "yes"; then
        _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Werror=return-type"
    fi

    
    echo $ac_n "checking whether the C++ compiler supports -Wtype-limits""... $ac_c" 1>&6
echo "configure:7408: checking whether the C++ compiler supports -Wtype-limits" >&5
if eval "test \"`echo '$''{'ac_cxx_has_wtype_limits'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

            _SAVE_CXXFLAGS="$CXXFLAGS"
            CXXFLAGS="$CXXFLAGS -Werror -Wtype-limits"
            cat > conftest.$ac_ext <<EOF
#line 7424 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:7431: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cxx_has_wtype_limits="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cxx_has_wtype_limits="no"
fi
rm -f conftest*
            CXXFLAGS="$_SAVE_CXXFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_cxx_has_wtype_limits" 1>&6
    if test "${ac_cxx_has_wtype_limits}" = "yes"; then
        _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wtype-limits"
    fi

    
    echo $ac_n "checking whether the C++ compiler supports -Wempty-body""... $ac_c" 1>&6
echo "configure:7459: checking whether the C++ compiler supports -Wempty-body" >&5
if eval "test \"`echo '$''{'ac_cxx_has_wempty_body'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

            _SAVE_CXXFLAGS="$CXXFLAGS"
            CXXFLAGS="$CXXFLAGS -Werror -Wempty-body"
            cat > conftest.$ac_ext <<EOF
#line 7475 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:7482: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cxx_has_wempty_body="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cxx_has_wempty_body="no"
fi
rm -f conftest*
            CXXFLAGS="$_SAVE_CXXFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_cxx_has_wempty_body" 1>&6
    if test "${ac_cxx_has_wempty_body}" = "yes"; then
        _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wempty-body"
    fi


    # Turn off the following warnings that -Wall/-pedantic turn on:
    # -Wno-ctor-dtor-privacy - ???
    # -Wno-overlength-strings - we exceed the minimum maximum length frequently 
    # -Wno-invalid-offsetof - we use offsetof on non-POD types frequently
    # -Wno-variadic-macros - ???
    #
    _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wno-ctor-dtor-privacy"
    
    echo $ac_n "checking whether the C++ compiler supports -Wno-overlength-strings""... $ac_c" 1>&6
echo "configure:7518: checking whether the C++ compiler supports -Wno-overlength-strings" >&5
if eval "test \"`echo '$''{'ac_cxx_has_wno_overlength_strings'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

            _SAVE_CXXFLAGS="$CXXFLAGS"
            CXXFLAGS="$CXXFLAGS -Werror -Woverlength-strings"
            cat > conftest.$ac_ext <<EOF
#line 7534 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:7541: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cxx_has_wno_overlength_strings="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cxx_has_wno_overlength_strings="no"
fi
rm -f conftest*
            CXXFLAGS="$_SAVE_CXXFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_cxx_has_wno_overlength_strings" 1>&6
    if test "${ac_cxx_has_wno_overlength_strings}" = "yes"; then
        _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wno-overlength-strings"
    fi

    
    echo $ac_n "checking whether the C++ compiler supports -Wno-invalid-offsetof""... $ac_c" 1>&6
echo "configure:7569: checking whether the C++ compiler supports -Wno-invalid-offsetof" >&5
if eval "test \"`echo '$''{'ac_cxx_has_wno_invalid_offsetof'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

            _SAVE_CXXFLAGS="$CXXFLAGS"
            CXXFLAGS="$CXXFLAGS -Werror -Winvalid-offsetof"
            cat > conftest.$ac_ext <<EOF
#line 7585 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:7592: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cxx_has_wno_invalid_offsetof="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cxx_has_wno_invalid_offsetof="no"
fi
rm -f conftest*
            CXXFLAGS="$_SAVE_CXXFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_cxx_has_wno_invalid_offsetof" 1>&6
    if test "${ac_cxx_has_wno_invalid_offsetof}" = "yes"; then
        _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wno-invalid-offsetof"
    fi

    
    echo $ac_n "checking whether the C++ compiler supports -Wno-variadic-macros""... $ac_c" 1>&6
echo "configure:7620: checking whether the C++ compiler supports -Wno-variadic-macros" >&5
if eval "test \"`echo '$''{'ac_cxx_has_wno_variadic_macros'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

            _SAVE_CXXFLAGS="$CXXFLAGS"
            CXXFLAGS="$CXXFLAGS -Werror -Wvariadic-macros"
            cat > conftest.$ac_ext <<EOF
#line 7636 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:7643: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cxx_has_wno_variadic_macros="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cxx_has_wno_variadic_macros="no"
fi
rm -f conftest*
            CXXFLAGS="$_SAVE_CXXFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_cxx_has_wno_variadic_macros" 1>&6
    if test "${ac_cxx_has_wno_variadic_macros}" = "yes"; then
        _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wno-variadic-macros"
    fi


    if test -z "$INTEL_CXX" -a -z "$CLANG_CXX"; then
       # Don't use -Wcast-align with ICC or clang
       case "$CPU_ARCH" in
           # And don't use it on hppa, ia64, sparc, arm, since it's noisy there
           hppa | ia64 | sparc | arm)
           ;;
           *)
        _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wcast-align"
           ;;
       esac
    fi

    _DEFINES_CXXFLAGS='-DMOZILLA_CLIENT -include $(DEPTH)/mozilla-config.h'
    _USE_CPP_INCLUDE_FLAG=1

    # Recent clang and gcc support C++11 deleted functions without warnings if
    # compiling with -std=c++0x or -std=gnu++0x (or c++11 or gnu++11 in very new
    # versions).  We can't use -std=c++0x yet, so gcc's support must remain
    # unused.  But clang's warning can be disabled, so when compiling with clang
    # we use it to opt out of the warning, enabling (macro-encapsulated) use of
    # deleted function syntax.
    if test "$CLANG_CXX"; then
        _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wno-c++0x-extensions"
        
    echo $ac_n "checking whether the C++ compiler supports -Wno-extended-offsetof""... $ac_c" 1>&6
echo "configure:7695: checking whether the C++ compiler supports -Wno-extended-offsetof" >&5
if eval "test \"`echo '$''{'ac_cxx_has_wno_extended_offsetof'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

            _SAVE_CXXFLAGS="$CXXFLAGS"
            CXXFLAGS="$CXXFLAGS -Werror -Wextended-offsetof"
            cat > conftest.$ac_ext <<EOF
#line 7711 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:7718: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cxx_has_wno_extended_offsetof="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cxx_has_wno_extended_offsetof="no"
fi
rm -f conftest*
            CXXFLAGS="$_SAVE_CXXFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_cxx_has_wno_extended_offsetof" 1>&6
    if test "${ac_cxx_has_wno_extended_offsetof}" = "yes"; then
        _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wno-extended-offsetof"
    fi

    fi

else
    _DEFINES_CXXFLAGS='-DMOZILLA_CLIENT -D_MOZILLA_CONFIG_H_ $(ACDEFINES)'
fi

MKSHLIB_FORCE_ALL=
MKSHLIB_UNFORCE_ALL=

if test "$COMPILE_ENVIRONMENT"; then
if test "$GNU_CC"; then
  echo $ac_n "checking whether ld has archive extraction flags""... $ac_c" 1>&6
echo "configure:7756: checking whether ld has archive extraction flags" >&5
  if eval "test \"`echo '$''{'ac_cv_mkshlib_force_and_unforce'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  _SAVE_LDFLAGS=$LDFLAGS; _SAVE_LIBS=$LIBS
    ac_cv_mkshlib_force_and_unforce="no"
    exec 3<&0 <<LOOP_INPUT
	force="-Wl,--whole-archive";   unforce="-Wl,--no-whole-archive"
	force="-Wl,-z -Wl,allextract"; unforce="-Wl,-z -Wl,defaultextract"
	force="-Wl,-all";              unforce="-Wl,-none"
LOOP_INPUT
    while read line
    do
      eval $line
      LDFLAGS=$force
      LIBS=$unforce
      cat > conftest.$ac_ext <<EOF
#line 7773 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:7780: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_mkshlib_force_and_unforce=$line; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
    done
    exec 0<&3 3<&-
    LDFLAGS=$_SAVE_LDFLAGS; LIBS=$_SAVE_LIBS
   
fi

  if test "$ac_cv_mkshlib_force_and_unforce" = "no"; then
    echo "$ac_t""no" 1>&6
  else
    echo "$ac_t""yes" 1>&6
    eval $ac_cv_mkshlib_force_and_unforce
    MKSHLIB_FORCE_ALL=$force
    MKSHLIB_UNFORCE_ALL=$unforce
  fi
fi # GNU_CC
fi # COMPILE_ENVIRONMENT

if test "$COMPILE_ENVIRONMENT"; then

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking for 64-bit OS""... $ac_c" 1>&6
echo "configure:7815: checking for 64-bit OS" >&5
cat > conftest.$ac_ext <<EOF
#line 7817 "configure"
#include "confdefs.h"
$configure_static_assert_macros
int main() {
CONFIGURE_STATIC_ASSERT(sizeof(void*) == 8)
; return 0; }
EOF
if { (eval echo configure:7824: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  result="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  result="no"
fi
rm -f conftest*
echo "$ac_t"""$result"" 1>&6
if test "$result" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_64BIT_OS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_64BIT_OS 1
EOF

    HAVE_64BIT_OS=1
fi

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

fi # COMPILE_ENVIRONMENT

MOZ_OS2_HIGH_MEMORY=1
# Check whether --enable-os2-high-mem or --disable-os2-high-mem was given.
if test "${enable_os2_high_mem+set}" = set; then
  enableval="$enable_os2_high_mem"
  if test "$enableval" = "no"; then
    MOZ_OS2_HIGH_MEMORY=
  elif test "$enableval" = "yes"; then
    MOZ_OS2_HIGH_MEMORY=1 
  else
    { echo "configure: error: Option, os2-high-mem, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi



# Check whether --enable-profiling or --disable-profiling was given.
if test "${enable_profiling+set}" = set; then
  enableval="$enable_profiling"
  if test "$enableval" = "yes"; then
    MOZ_PROFILING=1
  elif test "$enableval" = "no"; then
    MOZ_PROFILING= 
  else
    { echo "configure: error: Option, profiling, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


# For profiling builds keep the symbol information
if test "$MOZ_PROFILING" -a -z "$STRIP_FLAGS"; then
    case "$OS_TARGET" in
    Linux|DragonFly|FreeBSD|NetBSD|OpenBSD)
        STRIP_FLAGS="--strip-debug"
        ;;
    esac
fi

JSGC_INCREMENTAL=1
# Check whether --enable-gcincremental or --disable-gcincremental was given.
if test "${enable_gcincremental+set}" = set; then
  enableval="$enable_gcincremental"
  if test "$enableval" = "no"; then
    JSGC_INCREMENTAL= 
  elif test "$enableval" = "yes"; then
    :
  else
    { echo "configure: error: Option, gcincremental, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$JSGC_INCREMENTAL"; then
    cat >> confdefs.pytmp <<\EOF
    (''' JSGC_INCREMENTAL ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define JSGC_INCREMENTAL 1
EOF

fi

# Check whether --enable-gcgenerational or --disable-gcgenerational was given.
if test "${enable_gcgenerational+set}" = set; then
  enableval="$enable_gcgenerational"
  if test "$enableval" = "yes"; then
    JSGC_GENERATIONAL=1
  elif test "$enableval" = "no"; then
    JSGC_GENERATIONAL= 
  else
    { echo "configure: error: Option, gcgenerational, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$JSGC_GENERATIONAL"; then
    cat >> confdefs.pytmp <<\EOF
    (''' JSGC_GENERATIONAL ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define JSGC_GENERATIONAL 1
EOF

fi

# Check whether --enable-root-analysis or --disable-root-analysis was given.
if test "${enable_root_analysis+set}" = set; then
  enableval="$enable_root_analysis"
  if test "$enableval" = "yes"; then
    JSGC_ROOT_ANALYSIS=1
  elif test "$enableval" = "no"; then
    JSGC_ROOT_ANALYSIS= 
  else
    { echo "configure: error: Option, root-analysis, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$JSGC_ROOT_ANALYSIS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' JSGC_ROOT_ANALYSIS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define JSGC_ROOT_ANALYSIS 1
EOF

fi

# Check whether --enable-exact-rooting or --disable-exact-rooting was given.
if test "${enable_exact_rooting+set}" = set; then
  enableval="$enable_exact_rooting"
  if test "$enableval" = "yes"; then
    JSGC_USE_EXACT_ROOTING=1
  elif test "$enableval" = "no"; then
    JSGC_USE_EXACT_ROOTING= 
  else
    { echo "configure: error: Option, exact-rooting, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$JSGC_USE_EXACT_ROOTING"; then
    cat >> confdefs.pytmp <<\EOF
    (''' JSGC_USE_EXACT_ROOTING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define JSGC_USE_EXACT_ROOTING 1
EOF

fi

# Check whether --enable-valgrind or --disable-valgrind was given.
if test "${enable_valgrind+set}" = set; then
  enableval="$enable_valgrind"
  if test "$enableval" = "yes"; then
    MOZ_VALGRIND=1
  elif test "$enableval" = "no"; then
    MOZ_VALGRIND= 
  else
    { echo "configure: error: Option, valgrind, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_VALGRIND"; then
       ac_safe=`echo "valgrind/valgrind.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for valgrind/valgrind.h""... $ac_c" 1>&6
echo "configure:7996: checking for valgrind/valgrind.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 8001 "configure"
#include "confdefs.h"

#include <valgrind/valgrind.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:8009: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    :
  else
    echo "$ac_t""no" 1>&6
    { echo "configure: error: --enable-valgrind specified but Valgrind is not installed" 1>&2; exit 1; }
  fi

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VALGRIND ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VALGRIND 1
EOF

fi


# Check whether --enable-dmdv or --disable-dmdv was given.
if test "${enable_dmdv+set}" = set; then
  enableval="$enable_dmdv"
  if test "$enableval" = "yes"; then
    MOZ_DMDV=1
  elif test "$enableval" = "no"; then
    MOZ_DMDV= 
  else
    { echo "configure: error: Option, dmdv, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_DMDV"; then
       ac_safe=`echo "valgrind/valgrind.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for valgrind/valgrind.h""... $ac_c" 1>&6
echo "configure:8054: checking for valgrind/valgrind.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 8059 "configure"
#include "confdefs.h"

#include <valgrind/valgrind.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:8067: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    :
  else
    echo "$ac_t""no" 1>&6
    { echo "configure: error: --enable-dmdv specified but Valgrind is not installed" 1>&2; exit 1; }
  fi

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DMDV ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DMDV 1
EOF

fi


# Check whether --enable-jprof or --disable-jprof was given.
if test "${enable_jprof+set}" = set; then
  enableval="$enable_jprof"
  if test "$enableval" = "yes"; then
    MOZ_JPROF=1
  elif test "$enableval" = "no"; then
    MOZ_JPROF= 
  else
    { echo "configure: error: Option, jprof, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_JPROF"; then
    MOZ_PROFILING=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_JPROF ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_JPROF 1
EOF

fi

#MOZ_ENABLE_PROFILER_SPS=1

case "${OS_TARGET}" in
Android)
    case "${CPU_ARCH}" in
    x86 | arm) ;;
    *)
        MOZ_ENABLE_PROFILER_SPS=
    esac
    ;;
Linux)
    case "${CPU_ARCH}" in
    x86 | x86_64) ;;
    *)
        MOZ_ENABLE_PROFILER_SPS=
    esac
    ;;
WINNT|Darwin) ;;
*)
    MOZ_ENABLE_PROFILER_SPS=
    ;;
esac

if test -n "$MOZ_ENABLE_PROFILER_SPS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_PROFILER_SPS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_PROFILER_SPS 1
EOF

fi

# Check whether --enable-shark or --disable-shark was given.
if test "${enable_shark+set}" = set; then
  enableval="$enable_shark"
  if test "$enableval" = "yes"; then
    MOZ_SHARK=1
  elif test "$enableval" = "no"; then
    MOZ_SHARK= 
  else
    { echo "configure: error: Option, shark, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_SHARK"; then
    MOZ_PROFILING=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SHARK ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SHARK 1
EOF

fi

# Check whether --enable-callgrind or --disable-callgrind was given.
if test "${enable_callgrind+set}" = set; then
  enableval="$enable_callgrind"
  if test "$enableval" = "yes"; then
    MOZ_CALLGRIND=1
  elif test "$enableval" = "no"; then
    MOZ_CALLGRIND= 
  else
    { echo "configure: error: Option, callgrind, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_CALLGRIND"; then
    MOZ_PROFILING=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CALLGRIND ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CALLGRIND 1
EOF

fi

# Check whether --enable-vtune or --disable-vtune was given.
if test "${enable_vtune+set}" = set; then
  enableval="$enable_vtune"
  if test "$enableval" = "yes"; then
    MOZ_VTUNE=1
  elif test "$enableval" = "no"; then
    MOZ_VTUNE= 
  else
    { echo "configure: error: Option, vtune, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_VTUNE"; then
    MOZ_PROFILING=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VTUNE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VTUNE 1
EOF

fi

if test -n "$MOZ_PROFILING"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PROFILING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PROFILING 1
EOF

fi

case "$host" in
*mingw*)
    if test -n "$_WIN32_MSVC"; then
        HOST_AR=lib
        HOST_AR_FLAGS='-NOLOGO -OUT:"$@"'
        HOST_CFLAGS="$HOST_CFLAGS -TC -nologo -Fd\$(HOST_PDBFILE)"
        HOST_RANLIB='echo ranlib'
    else
        HOST_CFLAGS="$HOST_CFLAGS -mwindows"
    fi
    HOST_CFLAGS="$HOST_CFLAGS -DXP_WIN32 -DXP_WIN -DWIN32 -D_WIN32 -DNO_X11 -D_CRT_SECURE_NO_WARNINGS"
    HOST_NSPR_MDCPUCFG='\"md/_winnt.cfg\"'
    HOST_OPTIMIZE_FLAGS="${HOST_OPTIMIZE_FLAGS=-O2}"
    HOST_BIN_SUFFIX=.exe
    case "$host" in
    *mingw*)
        PERL="/bin/sh ${_topsrcdir}/build/msys-perl-wrapper"
        ;;
    esac

    case "${host_cpu}" in
    i*86)
        if test -n "$_WIN32_MSVC"; then
            HOST_LDFLAGS="$HOST_LDFLAGS -MACHINE:X86"
        fi
        ;;
    x86_64)
        if test -n "$_WIN32_MSVC"; then
            HOST_LDFLAGS="$HOST_LDFLAGS -MACHINE:X64"
        fi
        HOST_CFLAGS="$HOST_CFLAGS -D_AMD64_"
        ;;
    esac
    ;;

*-darwin*)
    HOST_CFLAGS="$HOST_CFLAGS -DXP_UNIX -DXP_MACOSX -DNO_X11"
    HOST_NSPR_MDCPUCFG='\"md/_darwin.cfg\"'
    HOST_OPTIMIZE_FLAGS="${HOST_OPTIMIZE_FLAGS=-O3}"
    ;;

*-linux*|*-kfreebsd*-gnu|*-gnu*)
    HOST_CFLAGS="$HOST_CFLAGS -DXP_UNIX"
    HOST_NSPR_MDCPUCFG='\"md/_linux.cfg\"'
    HOST_OPTIMIZE_FLAGS="${HOST_OPTIMIZE_FLAGS=-O3}"
    ;;

*os2*)
    HOST_CFLAGS="$HOST_CFLAGS -DXP_OS2 -DNO_X11 -Zomf"
    HOST_NSPR_MDCPUCFG='\"md/_os2.cfg\"'
    HOST_OPTIMIZE_FLAGS="${HOST_OPTIMIZE_FLAGS=-O2}"
    HOST_BIN_SUFFIX=.exe
    MOZ_FIX_LINK_PATHS=
    ;;

*)
    HOST_CFLAGS="$HOST_CFLAGS -DXP_UNIX"
    HOST_OPTIMIZE_FLAGS="${HOST_OPTIMIZE_FLAGS=-O2}"
    ;;
esac

echo $ac_n "checking for custom <stdint.h> implementation""... $ac_c" 1>&6
echo "configure:8294: checking for custom <stdint.h> implementation" >&5
if test "$MOZ_CUSTOM_STDINT_H"; then
  cat >> confdefs.pytmp <<EOF
    (''' MOZ_CUSTOM_STDINT_H ''', r''' "$MOZ_CUSTOM_STDINT_H" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_CUSTOM_STDINT_H "$MOZ_CUSTOM_STDINT_H"
EOF

  echo "$ac_t""using $MOZ_CUSTOM_STDINT_H" 1>&6
else
  echo "$ac_t""none specified" 1>&6
fi

MOZILLA_VERSION=`$PERL $srcdir/config/milestone.pl -topsrcdir $srcdir`
MOZILLA_UAVERSION=`$PERL $srcdir/config/milestone.pl -topsrcdir $srcdir -uaversion`

FIREFOX_VERSION=`cat $_topsrcdir/browser/config/version.txt`

if test -z "$FIREFOX_VERSION"; then
    { echo "configure: error: FIREFOX_VERSION is unexpectedly blank." 1>&2; exit 1; }
fi

cat >> confdefs.pytmp <<EOF
    (''' MOZILLA_VERSION ''', r''' "$MOZILLA_VERSION" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZILLA_VERSION "$MOZILLA_VERSION"
EOF

cat >> confdefs.pytmp <<EOF
    (''' MOZILLA_VERSION_U ''', r''' $MOZILLA_VERSION ''')
EOF
cat >> confdefs.h <<EOF
#define MOZILLA_VERSION_U $MOZILLA_VERSION
EOF

cat >> confdefs.pytmp <<EOF
    (''' MOZILLA_UAVERSION ''', r''' "$MOZILLA_UAVERSION" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZILLA_UAVERSION "$MOZILLA_UAVERSION"
EOF



  cat > conftest.c <<EOF
                  int foo = 1;
EOF
  lto_is_enabled=no
  if ${CC-cc} ${CFLAGS} -S conftest.c -o conftest.s >/dev/null 2>&1; then
    if grep '^target triple =' conftest.s; then
      lto_is_enabled=yes
    fi
  fi
  rm -f conftest.cs



case "$target" in
*-aix*)
    cat >> confdefs.pytmp <<\EOF
    (''' AIX ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define AIX 1
EOF

    if test ! "$GNU_CC"; then
        if test ! "$HAVE_64BIT_OS"; then
            # Compiling with Visual Age C++ object model compat is the
            # default. To compile with object model ibm, add
            # AIX_OBJMODEL=ibm to .mozconfig.
            if test "$AIX_OBJMODEL" = "ibm"; then
                CXXFLAGS="$CXXFLAGS -qobjmodel=ibm"
            else
                AIX_OBJMODEL=compat
            fi
        else
            AIX_OBJMODEL=compat
        fi
        
        DSO_LDOPTS='-qmkshrobj=1'
        DSO_CFLAGS='-qflag=w:w'
        DSO_PIC_CFLAGS=
        LDFLAGS="$LDFLAGS -Wl,-brtl -blibpath:/usr/lib:/lib"
        MOZ_FIX_LINK_PATHS=
        MKSHLIB='$(CXX) $(DSO_LDOPTS) -o $@'
        MKCSHLIB='$(CC) $(DSO_LDOPTS) -o $@'
        if test "$COMPILE_ENVIRONMENT"; then
            
            ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

            echo $ac_n "checking for IBM XLC/C++ compiler version >= 9.0.0.7""... $ac_c" 1>&6
echo "configure:8393: checking for IBM XLC/C++ compiler version >= 9.0.0.7" >&5
            cat > conftest.$ac_ext <<EOF
#line 8395 "configure"
#include "confdefs.h"

int main() {
#if (__IBMCPP__ < 900)
                 #error "Bad compiler"
                 #endif
; return 0; }
EOF
if { (eval echo configure:8404: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  _BAD_COMPILER=
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _BAD_COMPILER=1
fi
rm -f conftest*
            if test -n "$_BAD_COMPILER"; then
                echo "$ac_t""no" 1>&6
                { echo "configure: error: IBM XLC/C++ 9.0.0.7 or higher is required to build." 1>&2; exit 1; }
            else
                echo "$ac_t""yes" 1>&6
            fi
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

            TARGET_COMPILER_ABI="ibmc"
            CC_VERSION=`lslpp -Lcq vac.C 2>/dev/null | awk -F: '{ print $3 }'`
            CXX_VERSION=`lslpp -Lcq vacpp.cmp.core 2>/dev/null | awk -F: '{ print $3 }'`
        fi
    fi
    case "${target_os}" in
    aix4.1*)
        DLL_SUFFIX='_shr.a'
        ;;
    esac
    if test "$COMPILE_ENVIRONMENT"; then
         for ac_hdr in sys/inttypes.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:8442: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 8447 "configure"
#include "confdefs.h"

#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:8455: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    
  fi

  done

    fi
    cat >> confdefs.pytmp <<\EOF
    (''' NSCAP_DISABLE_DEBUG_PTR_TYPES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NSCAP_DISABLE_DEBUG_PTR_TYPES 1
EOF

    ;;

*-darwin*)
    MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -o $@'
    MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -o $@'
    MOZ_OPTIMIZE_FLAGS="-O3"
    _PEDANTIC=
    # Statically disable jemalloc on 10.5 and 32-bit 10.6.  See bug 702250.
    if test "$HAVE_64BIT_OS"; then
        MOZ_MEMORY=1
    fi
    DLL_SUFFIX=".dylib"
    DSO_LDOPTS=''
    STRIP_FLAGS="$STRIP_FLAGS -x -S"
    # Check whether we're targeting OS X or iOS
    echo $ac_n "checking for iOS target""... $ac_c" 1>&6
echo "configure:8508: checking for iOS target" >&5
if eval "test \"`echo '$''{'ac_cv_ios_target'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8513 "configure"
#include "confdefs.h"
#include <TargetConditionals.h>
#if !(TARGET_OS_IPHONE || TARGET_IPHONE_SIMULATOR)
#error not iOS
#endif
int main() {

; return 0; }
EOF
if { (eval echo configure:8523: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_ios_target="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_ios_target="no"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_ios_target" 1>&6
    if test "$ac_cv_ios_target" = "yes"; then
        cat >> confdefs.pytmp <<\EOF
    (''' XP_IOS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define XP_IOS 1
EOF

        cat >> confdefs.pytmp <<\EOF
    (''' XP_DARWIN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define XP_DARWIN 1
EOF

        _PLATFORM_DEFAULT_TOOLKIT='cairo-uikit'
    else
        cat >> confdefs.pytmp <<\EOF
    (''' XP_MACOSX ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define XP_MACOSX 1
EOF

        cat >> confdefs.pytmp <<\EOF
    (''' XP_DARWIN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define XP_DARWIN 1
EOF

        _PLATFORM_DEFAULT_TOOLKIT='cairo-cocoa'
        # The ExceptionHandling framework is needed for Objective-C exception
        # logging code in nsObjCExceptions.h. Currently we only use that in debug
        # builds.
        MOZ_DEBUG_LDFLAGS="$MOZ_DEBUG_LDFLAGS -framework ExceptionHandling";
    fi
    TARGET_NSPR_MDCPUCFG='\"md/_darwin.cfg\"'


    if test "x$lto_is_enabled" = "xyes"; then
        echo "Skipping -dead_strip because lto is enabled."
            elif test "x$enable_dtrace" = "xyes"; then
        echo "Skipping -dead_strip because DTrace is enabled. See bug 403132."
    else
                echo $ac_n "checking for -dead_strip option to ld""... $ac_c" 1>&6
echo "configure:8582: checking for -dead_strip option to ld" >&5
        _SAVE_LDFLAGS=$LDFLAGS
        LDFLAGS="$LDFLAGS -Wl,-dead_strip"
        cat > conftest.$ac_ext <<EOF
#line 8586 "configure"
#include "confdefs.h"

int main() {
return 0;
; return 0; }
EOF
if { (eval echo configure:8593: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  _HAVE_DEAD_STRIP=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _HAVE_DEAD_STRIP=
fi
rm -f conftest*
        if test -n "$_HAVE_DEAD_STRIP" ; then
            echo "$ac_t""yes" 1>&6
            MOZ_OPTIMIZE_LDFLAGS="-Wl,-dead_strip"
        else
            echo "$ac_t""no" 1>&6
        fi

        LDFLAGS=$_SAVE_LDFLAGS
    fi

            echo $ac_n "checking for -allow_heap_execute option to ld""... $ac_c" 1>&6
echo "configure:8614: checking for -allow_heap_execute option to ld" >&5
    _SAVE_LDFLAGS=$LDFLAGS
    LDFLAGS="$LDFLAGS -Wl,-allow_heap_execute"
    cat > conftest.$ac_ext <<EOF
#line 8618 "configure"
#include "confdefs.h"

int main() {
return 0;
; return 0; }
EOF
if { (eval echo configure:8625: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  _HAVE_ALLOW_HEAP_EXECUTE=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _HAVE_ALLOW_HEAP_EXECUTE=
fi
rm -f conftest*
    if test -n "$_HAVE_ALLOW_HEAP_EXECUTE" ; then
        echo "$ac_t""yes" 1>&6
        MOZ_ALLOW_HEAP_EXECUTE_FLAGS="-Wl,-allow_heap_execute"
    else
        echo "$ac_t""no" 1>&6
    fi
    LDFLAGS=$_SAVE_LDFLAGS

    MOZ_FIX_LINK_PATHS='-Wl,-executable_path,$(LIBXUL_DIST)/bin'
    ;;

ia64*-hpux*)
    DLL_SUFFIX=".so"
    if test ! "$GNU_CC"; then
       DSO_LDOPTS='-b'
       DSO_CFLAGS=""
       DSO_PIC_CFLAGS=
       MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_LDOPTS) -o $@'
       MKCSHLIB='$(CC) $(CFLAGS) $(DSO_LDOPTS) -o $@'
       CXXFLAGS="$CXXFLAGS -Wc,-ansi_for_scope,on"
    else
       DSO_LDOPTS='-b -E'
       MKSHLIB='$(LD) $(DSO_LDOPTS) -o $@'
       MKCSHLIB='$(LD) $(DSO_LDOPTS) -o $@'
    fi
    MOZ_FIX_LINK_PATHS=
    cat >> confdefs.pytmp <<\EOF
    (''' NSCAP_DISABLE_DEBUG_PTR_TYPES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NSCAP_DISABLE_DEBUG_PTR_TYPES 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' _LARGEFILE64_SOURCE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _LARGEFILE64_SOURCE 1
EOF

    ;;

*-hpux*)
    DLL_SUFFIX=".sl"
    if test ! "$GNU_CC"; then
    	DSO_LDOPTS='-b -Wl,+s'
    	DSO_CFLAGS=""
    	DSO_PIC_CFLAGS="+Z"
    	MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_LDOPTS) -L$(LIBXUL_DIST)/bin -o $@'
    	MKCSHLIB='$(LD) -b +s -L$(LIBXUL_DIST)/bin -o $@'
        CXXFLAGS="$CXXFLAGS -Wc,-ansi_for_scope,on"
    else
        DSO_LDOPTS='-b -E +s'
        MKSHLIB='$(LD) $(DSO_LDOPTS) -L$(LIBXUL_DIST)/bin -L$(LIBXUL_DIST)/lib -o $@'
        MKCSHLIB='$(LD) $(DSO_LDOPTS) -L$(LIBXUL_DIST)/bin -L$(LIBXUL_DIST)/lib -o $@'
    fi
    MOZ_POST_PROGRAM_COMMAND='chatr +s enable'
    cat >> confdefs.pytmp <<\EOF
    (''' NSCAP_DISABLE_DEBUG_PTR_TYPES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NSCAP_DISABLE_DEBUG_PTR_TYPES 1
EOF

    ;;

*-android*|*-linuxandroid*)
    cat >> confdefs.pytmp <<\EOF
    (''' NO_PW_GECOS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NO_PW_GECOS 1
EOF

    no_x=yes
    if test -n "$gonkdir"; then
        _PLATFORM_DEFAULT_TOOLKIT=cairo-gonk
        MOZ_B2G_RIL=1
        MOZ_B2G_BT=1
        MOZ_B2G_FM=1
    else
        _PLATFORM_DEFAULT_TOOLKIT=cairo-android
        MOZ_LINKER=1
    fi
    TARGET_NSPR_MDCPUCFG='\"md/_linux.cfg\"'

    MOZ_GFX_OPTIMIZE_MOBILE=1
    MOZ_OPTIMIZE_FLAGS="-Os -freorder-blocks -fno-reorder-functions"
    ;;

*-*linux*)
    # Note: both GNU_CC and INTEL_CC are set when using Intel's C compiler.
    # Similarly for GNU_CXX and INTEL_CXX.
    if test "$INTEL_CC" -o "$INTEL_CXX"; then
        # -Os has been broken on Intel's C/C++ compilers for quite a
        # while; Intel recommends against using it.
        MOZ_OPTIMIZE_FLAGS="-O2"
        MOZ_DEBUG_FLAGS="-g"
    elif test "$GNU_CC" -o "$GNU_CXX"; then
        GCC_VERSION=`$CC -v 2>&1 | awk '/^gcc version/ { print $3 }'`
        case $GCC_VERSION in
        4.1.*|4.2.*|4.5.*)
            # -Os is broken on gcc 4.1.x 4.2.x, 4.5.x we need to tweak it to get good results.
            MOZ_OPTIMIZE_SIZE_TWEAK="-finline-limit=50"
        esac
        MOZ_PGO_OPTIMIZE_FLAGS="-O3"
        MOZ_OPTIMIZE_FLAGS="-Os -freorder-blocks $MOZ_OPTIMIZE_SIZE_TWEAK"
        MOZ_DEBUG_FLAGS="-g"
    fi

    TARGET_NSPR_MDCPUCFG='\"md/_linux.cfg\"'

    MOZ_MEMORY=1

    case "${target_cpu}" in
    alpha*)
    	CFLAGS="$CFLAGS -mieee"
    	CXXFLAGS="$CXXFLAGS -mieee"
    ;;
    i*86)
    	USE_ELF_DYNSTR_GC=1
    ;;
    mips*)
        MOZ_DEBUG_FLAGS="-g" # We want inlining
    ;;
    esac

    if test -z "$MC"; then
        MC=mc.exe
    fi
    ;;
*-mingw*)
    DSO_CFLAGS=
    DSO_PIC_CFLAGS=
    DLL_SUFFIX=.dll
    RC=rc.exe
    MC=mc.exe
    # certain versions of cygwin's makedepend barf on the
    # #include <string> vs -I./dist/include/string issue so don't use it
    if test -n "$GNU_CC"; then
        CC="$CC -mwindows"
        CXX="$CXX -mwindows"
        CPP="$CPP -mwindows"
        CFLAGS="$CFLAGS -mms-bitfields"
        CXXFLAGS="$CXXFLAGS -mms-bitfields"
        DSO_LDOPTS='-shared'
        MKSHLIB='$(CXX) $(DSO_LDOPTS) -o $@'
        MKCSHLIB='$(CC) $(DSO_LDOPTS) -o $@'
        RC='$(WINDRES)'
        # Use temp file for windres (bug 213281)
        RCFLAGS='-O coff --use-temp-file'
        # mingw doesn't require kernel32, user32, and advapi32 explicitly
        LIBS="$LIBS -luuid -lgdi32 -lwinmm -lwsock32 -luserenv -lsecur32 -lnetapi32"
        MOZ_FIX_LINK_PATHS=
        DYNAMIC_XPCOM_LIBS='-L$(LIBXUL_DIST)/lib -lxpcom -lxpcom_core -lmozalloc'
        XPCOM_FROZEN_LDOPTS='-L$(LIBXUL_DIST)/lib -lxpcom -lmozalloc'
        DLL_PREFIX=
        IMPORT_LIB_SUFFIX=dll.a
        GCC_VERSION=`$CC -v 2>&1 | awk '/^gcc version/ { print $3 }'`

        # We use mix of both POSIX and Win32 printf format across the tree, so format
        # warnings are useless on mingw.
        
    echo $ac_n "checking whether the C compiler supports -Wno-format""... $ac_c" 1>&6
echo "configure:8799: checking whether the C compiler supports -Wno-format" >&5
if eval "test \"`echo '$''{'ac_c_has_wno_format'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

            _SAVE_CFLAGS="$CFLAGS"
            CFLAGS="$CFLAGS -Werror -Wformat"
            cat > conftest.$ac_ext <<EOF
#line 8815 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:8822: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_c_has_wno_format="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_c_has_wno_format="no"
fi
rm -f conftest*
            CFLAGS="$_SAVE_CFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_c_has_wno_format" 1>&6
    if test "${ac_c_has_wno_format}" = "yes"; then
        _WARNINGS_CFLAGS="${_WARNINGS_CFLAGS} -Wno-format"
    fi

        
    echo $ac_n "checking whether the C++ compiler supports -Wno-format""... $ac_c" 1>&6
echo "configure:8850: checking whether the C++ compiler supports -Wno-format" >&5
if eval "test \"`echo '$''{'ac_cxx_has_wno_format'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

            _SAVE_CXXFLAGS="$CXXFLAGS"
            CXXFLAGS="$CXXFLAGS -Werror -Wformat"
            cat > conftest.$ac_ext <<EOF
#line 8866 "configure"
#include "confdefs.h"

int main() {
return(0);
; return 0; }
EOF
if { (eval echo configure:8873: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cxx_has_wno_format="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cxx_has_wno_format="no"
fi
rm -f conftest*
            CXXFLAGS="$_SAVE_CXXFLAGS"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_cxx_has_wno_format" 1>&6
    if test "${ac_cxx_has_wno_format}" = "yes"; then
        _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wno-format"
    fi

    else
        TARGET_COMPILER_ABI=msvc
        HOST_CC='$(CC)'
        HOST_CXX='$(CXX)'
        HOST_LD='$(LD)'
        if test "$AS_BIN"; then
            AS="$(basename "$AS_BIN")"
        fi
        AR='lib'
        AR_FLAGS='-NOLOGO -OUT:"$@"'
        AR_EXTRACT=
        RANLIB='echo not_ranlib'
        STRIP='echo not_strip'
        PKG_SKIP_STRIP=1
        XARGS=xargs
        ZIP=zip
        UNZIP=unzip
        DOXYGEN=:
        ASM_SUFFIX=asm
        OBJ_SUFFIX=obj
        LIB_SUFFIX=lib
        DLL_PREFIX=
        LIB_PREFIX=
        IMPORT_LIB_SUFFIX=lib
        MKSHLIB='$(LD) -NOLOGO -DLL -OUT:$@ -PDB:$(LINK_PDBFILE) $(DSO_LDOPTS)'
        MKCSHLIB='$(LD) -NOLOGO -DLL -OUT:$@ -PDB:$(LINK_PDBFILE) $(DSO_LDOPTS)'
        MKSHLIB_FORCE_ALL=
        MKSHLIB_UNFORCE_ALL=
        DSO_LDOPTS=-SUBSYSTEM:WINDOWS
        _USE_CPP_INCLUDE_FLAG=1
        _DEFINES_CFLAGS='-FI $(DEPTH)/dist/include/mozilla-config.h -DMOZILLA_CLIENT'
        _DEFINES_CXXFLAGS='-FI $(DEPTH)/dist/include/mozilla-config.h -DMOZILLA_CLIENT'
        CFLAGS="$CFLAGS -W3 -Gy -Fd\$(COMPILE_PDBFILE)"
        CXXFLAGS="$CXXFLAGS -W3 -Gy -Fd\$(COMPILE_PDBFILE)"
        # MSVC warning C4345 warns of newly conformant behavior as of VS2003.
        # MSVC warning C4351 warns of newly conformant behavior as of VS2005.
        # MSVC warning C4800 warns when a value is implicitly cast to bool,
        # because this also forces narrowing to a single byte, which can be a
        # perf hit.  But this matters so little in practice (and often we want
        # that behavior) that it's better to turn it off.
        CXXFLAGS="$CXXFLAGS -wd4345 -wd4351 -wd4800"
        # make 'foo == bar;' error out
        CFLAGS="$CFLAGS -we4553"
        CXXFLAGS="$CXXFLAGS -we4553"
        LIBS="$LIBS kernel32.lib user32.lib gdi32.lib winmm.lib wsock32.lib advapi32.lib secur32.lib netapi32.lib"
        MOZ_DEBUG_FLAGS='-Zi'
        MOZ_DEBUG_LDFLAGS='-DEBUG -DEBUGTYPE:CV'
        WARNINGS_AS_ERRORS='-WX'
        MOZ_OPTIMIZE_FLAGS='-O1'
        MOZ_FIX_LINK_PATHS=
        DYNAMIC_XPCOM_LIBS='$(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xpcom_core.lib $(LIBXUL_DIST)/lib/mozalloc.lib'
        XPCOM_FROZEN_LDOPTS='$(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/mozalloc.lib'
        LIBXUL_LIBS='$(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xul.lib $(LIBXUL_DIST)/lib/mozalloc.lib'
        MOZ_COMPONENT_NSPR_LIBS='$(NSPR_LIBS)'
        LDFLAGS="$LDFLAGS -LARGEADDRESSAWARE -NXCOMPAT"
                PROFILE_GEN_CFLAGS="-GL"
        PROFILE_GEN_LDFLAGS="-LTCG:PGINSTRUMENT"
                                                                PROFILE_USE_CFLAGS="-GL -wd4624 -wd4952"
                        PROFILE_USE_LDFLAGS="-LTCG:PGUPDATE"
        LDFLAGS="$LDFLAGS -DYNAMICBASE"
    fi
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SNPRINTF ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SNPRINTF 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' _WINDOWS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _WINDOWS 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' WIN32 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define WIN32 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' XP_WIN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define XP_WIN 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' XP_WIN32 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define XP_WIN32 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' HW_THREADS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HW_THREADS 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' STDC_HEADERS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' NEW_H ''', r''' <new> ''')
EOF
cat >> confdefs.h <<\EOF
#define NEW_H <new>
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' WIN32_LEAN_AND_MEAN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define WIN32_LEAN_AND_MEAN 1
EOF

    TARGET_MD_ARCH=win32
    _PLATFORM_DEFAULT_TOOLKIT='cairo-windows'
    BIN_SUFFIX='.exe'
    MOZ_USER_DIR="Mozilla"

        TARGET_NSPR_MDCPUCFG='\"md/_win95.cfg\"'

        no_x=yes
    cat >> confdefs.pytmp <<\EOF
    (''' NO_X11 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NO_X11 1
EOF


    case "$host" in
    *-mingw*)
        MOZ_BUILD_ROOT=`cd $MOZ_BUILD_ROOT && pwd -W`
        L10NBASEDIR=`cd $L10NBASEDIR && pwd -W`
        ;;
    esac

    case "$host" in
    *-mingw*)
        if test -z "$MOZ_TOOLS"; then
            { echo "configure: error: MOZ_TOOLS is not set" 1>&2; exit 1; }
        fi
        MOZ_TOOLS_DIR=`cd $MOZ_TOOLS && pwd -W`
        if test "$?" != "0" -o -z "$MOZ_TOOLS_DIR"; then
            { echo "configure: error: cd \$MOZ_TOOLS failed. MOZ_TOOLS ==? $MOZ_TOOLS" 1>&2; exit 1; }
        fi
        MOZ_TOOLS_BIN_DIR="$(cd "$MOZ_TOOLS_DIR/bin" && pwd)"
        if test `echo ${PATH}: | grep -ic "$MOZ_TOOLS_BINDIR:"` = 0; then
            { echo "configure: error: \$MOZ_TOOLS\\bin must be in your path." 1>&2; exit 1; }
        fi
        ;;
    esac

    case "$host_os" in
    cygwin*|msvc*|mks*)
        { echo "configure: error: Using a Cygwin build environment is unsupported. Configure cannot check for presence of necessary headers. Please upgrade to MozillaBuild; see https://developer.mozilla.org/en/Windows_Build_Prerequisites." 1>&2; exit 1; }
        ;;
    esac

    case "$target" in
    i*86-*)
        if test "$HAVE_64BIT_OS"; then
            { echo "configure: error: You are targeting i386 but using the 64-bit compiler." 1>&2; exit 1; }
        fi

        if test -n "$GNU_CC"; then
            CFLAGS="$CFLAGS -mstackrealign -fno-keep-inline-dllexport"
            CXXFLAGS="$CXXFLAGS -mstackrealign -fno-keep-inline-dllexport"
            LDFLAGS="$LDFLAGS -Wl,--enable-stdcall-fixup"
        else
            cat >> confdefs.pytmp <<\EOF
    (''' HAVE_STDCALL ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_STDCALL 1
EOF

            DSO_LDOPTS="$DSO_LDOPTS -MACHINE:X86"
            LDFLAGS="$LDFLAGS -SAFESEH"
        fi

    	cat >> confdefs.pytmp <<\EOF
    (''' _X86_ ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _X86_ 1
EOF

	;;
    x86_64-*)
        if test -n "$_WIN32_MSVC"; then
            DSO_LDOPTS="$DSO_LDOPTS -MACHINE:X64"
        fi
        cat >> confdefs.pytmp <<\EOF
    (''' _AMD64_ ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _AMD64_ 1
EOF

        ;;
    *)
    	cat >> confdefs.pytmp <<\EOF
    (''' _CPU_ARCH_NOT_DEFINED ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _CPU_ARCH_NOT_DEFINED 1
EOF

	;;
    esac

    if test "$HAVE_64BIT_OS"; then
    	cat >> confdefs.pytmp <<\EOF
    (''' _WIN64 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _WIN64 1
EOF

    fi
    ;;

*-netbsd*)
    DSO_CFLAGS=''
    CFLAGS="$CFLAGS -Dunix"
    CXXFLAGS="$CXXFLAGS -Dunix"
    if $CC -E - -dM </dev/null | grep __ELF__ >/dev/null; then
        DLL_SUFFIX=".so"
        DSO_PIC_CFLAGS='-fPIC -DPIC'
        DSO_LDOPTS='-shared'
	BIN_FLAGS='-Wl,--export-dynamic'
    else
    	DSO_PIC_CFLAGS='-fPIC -DPIC'
    	DLL_SUFFIX=".so.1.0"
    	DSO_LDOPTS='-shared'
    fi
    # This will fail on a.out systems prior to 1.5.1_ALPHA.
    MKSHLIB_FORCE_ALL='-Wl,--whole-archive'
    MKSHLIB_UNFORCE_ALL='-Wl,--no-whole-archive'
    if test "$LIBRUNPATH"; then
	DSO_LDOPTS="-Wl,-R$LIBRUNPATH $DSO_LDOPTS"
    fi
    MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-soname,lib$(LIBRARY_NAME)$(DLL_SUFFIX) -o $@'
    MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-soname,lib$(LIBRARY_NAME)$(DLL_SUFFIX) -o $@'
    ;;

*-openbsd*)
    if test "$SO_VERSION"; then
        DLL_SUFFIX=".so.$SO_VERSION"
    else
        DLL_SUFFIX=".so.1.0"
    fi
    MOZ_FIX_LINK_PATHS='-Wl,-rpath-link,$(LIBXUL_DIST)/bin -Wl,-rpath-link,$(prefix)/lib -Wl,-rpath-link,$(if $(X11BASE),$(X11BASE),/usr/X11R6)/lib'
    DSO_CFLAGS=''
    DSO_PIC_CFLAGS='-fPIC'
    DSO_LDOPTS='-shared -fPIC'
    if test "$LIBRUNPATH"; then
	DSO_LDOPTS="-R$LIBRUNPATH $DSO_LDOPTS"
    fi
    ;;

*-os2*)
    MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -o $@'
    MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -o $@'
    cat >> confdefs.pytmp <<\EOF
    (''' OS2 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define OS2 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' XP_OS2 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define XP_OS2 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' OS2EMX_PLAIN_CHAR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define OS2EMX_PLAIN_CHAR 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' TCPV40HDRS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define TCPV40HDRS 1
EOF

    DLL_PREFIX=
    LIB_PREFIX=
    LIB_SUFFIX=lib
    BIN_SUFFIX=".exe"
    DLL_SUFFIX=".dll"
    IMPORT_LIB_SUFFIX=lib
    DSO_PIC_CFLAGS=
    AR=emxomfar
    AR_FLAGS='r $@'
    CFLAGS="$CFLAGS -Zomf"
    CXXFLAGS="$CXXFLAGS -Zomf"
    DSO_LDOPTS='-Zdll'
    BIN_FLAGS='-Zlinker /ST:0x100000'
    IMPLIB='emximp -o'
    FILTER='true'
    LDFLAGS='-Zmap'
    WARNINGS_AS_ERRORS='-Werror'
    MOZ_DEBUG_FLAGS="-g -fno-inline"
    MOZ_OPTIMIZE_FLAGS="-O2"
    MOZ_OPTIMIZE_LDFLAGS="-s -Zlinker /EXEPACK:2 -Zlinker /PACKCODE -Zlinker /PACKDATA"
    DYNAMIC_XPCOM_LIBS='-L$(LIBXUL_DIST)/lib $(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xpcom_core.lib $(LIBXUL_DIST)/lib/mozalloc.lib'
    LIBXUL_LIBS='-L$(LIBXUL_DIST)/lib $(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xul.lib $(LIBXUL_DIST)/lib/mozalloc.lib'
    TARGET_MD_ARCH=os2
    _PLATFORM_DEFAULT_TOOLKIT="cairo-os2"
    RC=rc.exe
    MC=mc.exe
    RCFLAGS='-n'
    MOZ_USER_DIR="Mozilla"
    ZIP="$ZIP -X"

    if test "$MOZTOOLS"; then
        MOZ_TOOLS_DIR=`echo $MOZTOOLS | sed -e 's|\\\\|/|g'`
    else
        { echo "configure: error: MOZTOOLS is not set" 1>&2; exit 1; }
    fi
    if test -n "$MOZ_OS2_HIGH_MEMORY"; then
        DSO_LDOPTS="$DSO_LDOPTS -Zhigh-mem"
        LDFLAGS="$LDFLAGS -Zhigh-mem"
        MOZ_OPTIMIZE_LDFLAGS="$MOZ_OPTIMIZE_LDFLAGS -Zhigh-mem"
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_OS2_HIGH_MEMORY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_OS2_HIGH_MEMORY 1
EOF

    fi

    # GCC for OS/2 currently predefines these, but we don't want them
    _DEFINES_CFLAGS="$_DEFINES_CFLAGS -Uunix -U__unix -U__unix__"
    _DEFINES_CXXFLAGS="$_DEFINES_CXXFLAGS -Uunix -U__unix -U__unix__"

    echo $ac_n "checking for __declspec(dllexport)""... $ac_c" 1>&6
echo "configure:9255: checking for __declspec(dllexport)" >&5
if eval "test \"`echo '$''{'ac_os2_declspec'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9260 "configure"
#include "confdefs.h"
__declspec(dllexport) void ac_os2_declspec(void) {}
int main() {
return 0;
; return 0; }
EOF
if { (eval echo configure:9267: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_os2_declspec="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_os2_declspec="no"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_os2_declspec" 1>&6
    if test "$ac_os2_declspec" != "yes"; then
        { echo "configure: error: Compiler does not support __declspec(dllexport), install GCC-4.3.2 or newer" 1>&2; exit 1; }
    fi
    ;;

*-solaris*)
    cat >> confdefs.pytmp <<\EOF
    (''' SOLARIS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define SOLARIS 1
EOF

    TARGET_NSPR_MDCPUCFG='\"md/_solaris.cfg\"'
    MOZ_FIX_LINK_PATHS=
    # $ORIGIN/.. is for shared libraries under components/ to locate shared
    # libraries one level up (e.g. libnspr4.so)
    if test "$SOLARIS_SUNPRO_CC"; then
       LDFLAGS="$LDFLAGS -z ignore -R '\$\$ORIGIN:\$\$ORIGIN/..' -z lazyload -z combreloc -z muldefs"
       LIBS="-lCrun -lCstd -lc $LIBS"
       cat >> confdefs.pytmp <<\EOF
    (''' NSCAP_DISABLE_DEBUG_PTR_TYPES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NSCAP_DISABLE_DEBUG_PTR_TYPES 1
EOF

       CFLAGS="$CFLAGS -xlibmieee -xstrconst -xbuiltin=%all -D__FUNCTION__=__func__"
       CXXFLAGS="$CXXFLAGS -xlibmieee -xbuiltin=%all -features=tmplife,tmplrefstatic,extensions,no%except -norunpath -D__FUNCTION__=__func__ -template=no%extdef"
       LDFLAGS="-xildoff $LDFLAGS"
       if test -z "$CROSS_COMPILE" -a -f /usr/lib/ld/map.noexstk; then
           _SAVE_LDFLAGS=$LDFLAGS
           LDFLAGS="-M /usr/lib/ld/map.noexstk $LDFLAGS"
           cat > conftest.$ac_ext <<EOF
#line 9314 "configure"
#include "confdefs.h"
#include <stdio.h>
int main() {
printf("Hello World\n");
; return 0; }
EOF
if { (eval echo configure:9321: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  LDFLAGS=$_SAVE_LDFLAGS
fi
rm -f conftest*
       fi
       MOZ_OPTIMIZE_FLAGS="-xO4"
       MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_FLAGS) $(DSO_LDOPTS) -h $@ -o $@'
       MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_FLAGS) $(DSO_LDOPTS) -h $@ -o $@'
       MKSHLIB_FORCE_ALL='-z allextract'
       MKSHLIB_UNFORCE_ALL='-z defaultextract'
       DSO_LDOPTS='-G'
       AR_LIST="$AR t"
       AR_EXTRACT="$AR x"
       AR_DELETE="$AR d"
       AR='$(CXX) -xar'
       AR_FLAGS='-o $@'
       AS='/usr/ccs/bin/as'
       ASFLAGS="$ASFLAGS -K PIC -L -P -D_ASM -D__STDC__=0"
       AS_DASH_C_FLAG=''
       TARGET_COMPILER_ABI="sunc"
       CC_VERSION=`$CC -V 2>&1 | grep '^cc:' 2>/dev/null | $AWK -F\: '{ print $2 }'`
       CXX_VERSION=`$CXX -V 2>&1 | grep '^CC:' 2>/dev/null | $AWK -F\: '{ print $2 }'`
       echo $ac_n "checking for Sun C++ compiler version >= 5.9""... $ac_c" 1>&6
echo "configure:9349: checking for Sun C++ compiler version >= 5.9" >&5
       
       ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

       cat > conftest.$ac_ext <<EOF
#line 9359 "configure"
#include "confdefs.h"

int main() {
#if (__SUNPRO_CC < 0x590)
           #error "Denied"
           #endif
; return 0; }
EOF
if { (eval echo configure:9368: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  _BAD_COMPILER=
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _BAD_COMPILER=1
fi
rm -f conftest*
       if test -n "$_BAD_COMPILER"; then
           _res="no"
           { echo "configure: error: Sun C++ 5.9 (Sun Studio 12) or higher is required to build. Your compiler version is $CXX_VERSION ." 1>&2; exit 1; }
       else
           _res="yes"
       fi
       cat > conftest.$ac_ext <<EOF
#line 9385 "configure"
#include "confdefs.h"

int main() {
#if (__SUNPRO_CC >= 0x5100)
           #error "Sun C++ 5.10 or above"
           #endif
; return 0; }
EOF
if { (eval echo configure:9394: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  _ABOVE_SS12U1=
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _ABOVE_SS12U1=1
fi
rm -f conftest*
       if test "$_ABOVE_SS12U1"; then
           # disable xannotate
           CXXFLAGS="$CXXFLAGS -xannotate=no"
       fi
       echo "$ac_t""$_res" 1>&6
       ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

    else
       LDFLAGS="$LDFLAGS -Wl,-z,ignore -Wl,-R,'\$\$ORIGIN:\$\$ORIGIN/..' -Wl,-z,lazyload -Wl,-z,combreloc -Wl,-z,muldefs"
       LIBS="-lc $LIBS"
       MKSHLIB_FORCE_ALL='-Wl,-z -Wl,allextract'
       MKSHLIB_UNFORCE_ALL='-Wl,-z -Wl,defaultextract'
       ASFLAGS="$ASFLAGS -fPIC"
       DSO_LDOPTS='-shared'
       WARNINGS_AS_ERRORS='-Werror'
       _WARNINGS_CFLAGS=''
       _WARNINGS_CXXFLAGS=''
       if test "$OS_RELEASE" = "5.3"; then
           cat >> confdefs.pytmp <<\EOF
    (''' MUST_UNDEF_HAVE_BOOLEAN_AFTER_INCLUDES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MUST_UNDEF_HAVE_BOOLEAN_AFTER_INCLUDES 1
EOF

       fi
    fi
    if test "$OS_RELEASE" = "5.5.1"; then
        cat >> confdefs.pytmp <<\EOF
    (''' NEED_USLEEP_PROTOTYPE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NEED_USLEEP_PROTOTYPE 1
EOF

    fi
    ;;

*-sunos*)
    DSO_LDOPTS='-Bdynamic'
    MKSHLIB='-$(LD) $(DSO_LDOPTS) -o $@'
    MKCSHLIB='-$(LD) $(DSO_LDOPTS) -o $@'
    cat >> confdefs.pytmp <<\EOF
    (''' SUNOS4 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define SUNOS4 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' SPRINTF_RETURNS_STRING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define SPRINTF_RETURNS_STRING 1
EOF

    case "$(target_os)" in
    sunos4.1*)
        DLL_SUFFIX='.so.1.0'
        ;;
    esac
    ;;

*-os2*)
    HOST_NSPR_MDCPUCFG='\"md/_os2.cfg\"'
    ;;

esac


if test -n "$MOZ_LINKER"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_LINKER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_LINKER 1
EOF

fi


cat >> confdefs.pytmp <<EOF
    (''' D_INO ''', r''' $DIRENT_INO ''')
EOF
cat >> confdefs.h <<EOF
#define D_INO $DIRENT_INO
EOF


NO_LD_ARCHIVE_FLAGS=
if test -z "$MKSHLIB_FORCE_ALL" -o -z "$MKSHLIB_UNFORCE_ALL"; then
    NO_LD_ARCHIVE_FLAGS=1
fi
case "$target" in
*-os2*)
    NO_LD_ARCHIVE_FLAGS=
    ;;
*-aix4.3*|*-aix5*)
    NO_LD_ARCHIVE_FLAGS=
    ;;
*-mingw*)
    if test -z "$GNU_CC"; then
        NO_LD_ARCHIVE_FLAGS=
    fi
    ;;
esac


case "$target" in
    *-linux*|*-kfreebsd*-gnu|*-gnu*)
        MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script -Wl,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'
        ;;
    *-solaris*)
        if test -z "$GNU_CC"; then
         MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-M $(BUILD_TOOLS)/gnu-ld-scripts/components-mapfile'
        else
         if test -z "$GCC_USE_GNU_LD"; then
          MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,-M -Wl,$(BUILD_TOOLS)/gnu-ld-scripts/components-mapfile'
         else
          MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script -Wl,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'
         fi
        fi
        ;;
    *-darwin*)
        MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,-exported_symbols_list -Wl,$(BUILD_TOOLS)/gnu-ld-scripts/components-export-list'
        ;;
    *-mingw*)
        if test -n "$GNU_CC"; then
           MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'
        fi
        ;;
esac

if test -z "$COMPILE_ENVIRONMENT"; then
    SKIP_COMPILER_CHECKS=1
    SKIP_LIBRARY_CHECKS=1
fi


  
# Check whether --enable-cpp-rtti or --disable-cpp-rtti was given.
if test "${enable_cpp_rtti+set}" = set; then
  enableval="$enable_cpp_rtti"
  if test "$enableval" = "yes"; then
     _MOZ_USE_RTTI=1 
  elif test "$enableval" = "no"; then
     _MOZ_USE_RTTI= 
  else
    { echo "configure: error: Option, cpp-rtti, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -z "$_MOZ_USE_RTTI"; then
    if test "$GNU_CC"; then
        CXXFLAGS="$CXXFLAGS -fno-rtti"
    else
        case "$target" in
        *-mingw*)
            CXXFLAGS="$CXXFLAGS -GR-"
        esac
    fi
fi

if test "$CLANG_CXX"; then
    ## We disable return-type-c-linkage because jsval is defined as a C++ type but is
    ## returned by C functions. This is possible because we use knowledge about the ABI
    ## to typedef it to a C type with the same layout when the headers are included
    ## from C.
    ##
    ## mismatched-tags is disabled (bug 780474) mostly because it's useless.
    ## Worse, it's not supported by gcc, so it will cause tryserver bustage
    ## without any easy way for non-Clang users to check for it.
    _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wno-unknown-warning-option -Wno-return-type-c-linkage -Wno-mismatched-tags"
fi

if test "$GNU_CC"; then
    CFLAGS="$CFLAGS -ffunction-sections -fdata-sections"
    CXXFLAGS="$CXXFLAGS -ffunction-sections -fdata-sections -fno-exceptions"
fi


# Check whether --enable-icf or --disable-icf was given.
if test "${enable_icf+set}" = set; then
  enableval="$enable_icf"
  if test "$enableval" = "no"; then
    MOZ_DISABLE_ICF=1
  elif test "$enableval" = "yes"; then
    MOZ_DISABLE_ICF= 
  else
    { echo "configure: error: Option, icf, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test "$GNU_CC" -a "$GCC_USE_GNU_LD" -a -z "$MOZ_DISABLE_ICF"; then
    echo $ac_n "checking whether the linker supports Identical Code Folding""... $ac_c" 1>&6
echo "configure:9606: checking whether the linker supports Identical Code Folding" >&5
if eval "test \"`echo '$''{'LD_SUPPORTS_ICF'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'int foo() {return 42;}' \
              'int bar() {return 42;}' \
              'int main() {return foo() - bar();}' > conftest.${ac_ext}
        # If the linker supports ICF, foo and bar symbols will have
        # the same address
        if { ac_try='${CC-cc} -o conftest${ac_exeext} $LDFLAGS -Wl,--icf=safe -ffunction-sections conftest.${ac_ext} $LIBS 1>&2'; { (eval echo configure:9615: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } &&
           test -s conftest${ac_exeext} &&
           objdump -t conftest${ac_exeext} | awk '{a[$6] = $1} END {if (a["foo"] && (a["foo"] != a["bar"])) { exit 1 }}'; then
            LD_SUPPORTS_ICF=yes
        else
            LD_SUPPORTS_ICF=no
        fi
        rm -rf conftest*
fi

echo "$ac_t""$LD_SUPPORTS_ICF" 1>&6
    if test "$LD_SUPPORTS_ICF" = yes; then
        _SAVE_LDFLAGS="$LDFLAGS -Wl,--icf=safe"
        LDFLAGS="$LDFLAGS -Wl,--icf=safe -Wl,--print-icf-sections"
        cat > conftest.$ac_ext <<EOF
#line 9630 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:9637: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  LD_PRINT_ICF_SECTIONS=-Wl,--print-icf-sections
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  LD_PRINT_ICF_SECTIONS=
fi
rm -f conftest*
        
        LDFLAGS="$_SAVE_LDFLAGS"
    fi
fi


if test "$GNU_CC" -a "$GCC_USE_GNU_LD" -a -n "$MOZ_DEBUG_FLAGS"; then
      echo $ac_n "checking whether removing dead symbols breaks debugging""... $ac_c" 1>&6
echo "configure:9655: checking whether removing dead symbols breaks debugging" >&5
if eval "test \"`echo '$''{'GC_SECTIONS_BREAKS_DEBUG_RANGES'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'int foo() {return 42;}' \
             'int bar() {return 1;}' \
             'int main() {return foo();}' > conftest.${ac_ext}
        if { ac_try='${CC-cc} -o conftest.${ac_objext} $CFLAGS $MOZ_DEBUG_FLAGS -c conftest.${ac_ext} 1>&2'; { (eval echo configure:9662: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } &&
           { ac_try='${CC-cc} -o conftest${ac_exeext} $LDFLAGS $MOZ_DEBUG_FLAGS -Wl,--gc-sections conftest.${ac_objext} $LIBS 1>&2'; { (eval echo configure:9663: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } &&
           test -s conftest${ac_exeext} -a -s conftest.${ac_objext}; then
            if test "`$PYTHON "$_topsrcdir"/build/autoconf/check_debug_ranges.py conftest.${ac_objext} conftest.${ac_ext}`" = \
                    "`$PYTHON "$_topsrcdir"/build/autoconf/check_debug_ranges.py conftest${ac_exeext} conftest.${ac_ext}`"; then
                GC_SECTIONS_BREAKS_DEBUG_RANGES=no
            else
                GC_SECTIONS_BREAKS_DEBUG_RANGES=yes
            fi
        else
                          GC_SECTIONS_BREAKS_DEBUG_RANGES="no, but it's broken in some other way"
        fi
        rm -rf conftest*
fi

echo "$ac_t""$GC_SECTIONS_BREAKS_DEBUG_RANGES" 1>&6
    if test "$GC_SECTIONS_BREAKS_DEBUG_RANGES" = no; then
        DSO_LDOPTS="$DSO_LDOPTS -Wl,--gc-sections"
    fi
fi


if test -z "$SKIP_COMPILER_CHECKS"; then
echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:9686: checking for ANSI C header files" >&5
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9691 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9699: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 9716 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 9734 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
  cat > conftest.$ac_ext <<EOF
#line 9755 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:9766: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> confdefs.pytmp <<\EOF
    (''' STDC_HEADERS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi

echo $ac_n "checking for working const""... $ac_c" 1>&6
echo "configure:9793: checking for working const" >&5
if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9798 "configure"
#include "confdefs.h"

int main() {

/* Ultrix mips cc rejects this.  */
typedef int charset[2]; const charset x;
/* SunOS 4.1.1 cc rejects this.  */
char const *const *ccp;
char **p;
/* NEC SVR4.0.2 mips cc rejects this.  */
struct point {int x, y;};
static struct point const zero = {0,0};
/* AIX XL C 1.02.0.0 rejects this.
   It does not let you subtract one const X* pointer from another in an arm
   of an if-expression whose if-part is not a constant expression */
const char *g = "string";
ccp = &g + (g ? g-g : 0);
/* HPUX 7.0 cc rejects these. */
++ccp;
p = (char**) ccp;
ccp = (char const *const *) p;
{ /* SCO 3.2v4 cc rejects this.  */
  char *t;
  char const *s = 0 ? (char *) 0 : (char const *) 0;

  *t++ = 0;
}
{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
  int x[] = {25, 17};
  const int *foo = &x[0];
  ++foo;
}
{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
  typedef const int *iptr;
  iptr p = 0;
  ++p;
}
{ /* AIX XL C 1.02.0.0 rejects this saying
     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
  struct s { int j; const int *ap[3]; };
  struct s *b; b->j = 5;
}
{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
  const int foo = 10;
}

; return 0; }
EOF
if { (eval echo configure:9847: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_const=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_const=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_c_const" 1>&6
if test $ac_cv_c_const = no; then
  cat >> confdefs.pytmp <<\EOF
    (''' const ''', r'''  ''')
EOF
cat >> confdefs.h <<\EOF
#define const 
EOF

fi

echo $ac_n "checking for mode_t""... $ac_c" 1>&6
echo "configure:9871: checking for mode_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_mode_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9876 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])mode_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_mode_t=yes
else
  rm -rf conftest*
  ac_cv_type_mode_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_mode_t" 1>&6
if test $ac_cv_type_mode_t = no; then
  cat >> confdefs.pytmp <<\EOF
    (''' mode_t ''', r''' int ''')
EOF
cat >> confdefs.h <<\EOF
#define mode_t int
EOF

fi

echo $ac_n "checking for off_t""... $ac_c" 1>&6
echo "configure:9907: checking for off_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_off_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9912 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])off_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_off_t=yes
else
  rm -rf conftest*
  ac_cv_type_off_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_off_t" 1>&6
if test $ac_cv_type_off_t = no; then
  cat >> confdefs.pytmp <<\EOF
    (''' off_t ''', r''' long ''')
EOF
cat >> confdefs.h <<\EOF
#define off_t long
EOF

fi

echo $ac_n "checking for pid_t""... $ac_c" 1>&6
echo "configure:9943: checking for pid_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_pid_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9948 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])pid_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_pid_t=yes
else
  rm -rf conftest*
  ac_cv_type_pid_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_pid_t" 1>&6
if test $ac_cv_type_pid_t = no; then
  cat >> confdefs.pytmp <<\EOF
    (''' pid_t ''', r''' int ''')
EOF
cat >> confdefs.h <<\EOF
#define pid_t int
EOF

fi

echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:9979: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9984 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.pytmp <<\EOF
    (''' size_t ''', r''' unsigned ''')
EOF
cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

echo $ac_n "checking for __stdcall""... $ac_c" 1>&6
echo "configure:10022: checking for __stdcall" >&5
if eval "test \"`echo '$''{'ac_cv___stdcall'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10027 "configure"
#include "confdefs.h"
template <typename Method> struct foo;
                  template <> struct foo<void (*)()> {};
                  template <> struct foo<void (__stdcall*)()> {};
int main() {

; return 0; }
EOF
if { (eval echo configure:10036: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv___stdcall=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv___stdcall=false
fi
rm -f conftest*
fi

if test "$ac_cv___stdcall" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_STDCALL ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_STDCALL 1
EOF

  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking for ssize_t""... $ac_c" 1>&6
echo "configure:10068: checking for ssize_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_ssize_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10073 "configure"
#include "confdefs.h"
#include <stdio.h>
                  #include <sys/types.h>
int main() {
ssize_t foo = 0;
; return 0; }
EOF
if { (eval echo configure:10081: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_type_ssize_t=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_type_ssize_t=false
fi
rm -f conftest*
fi

if test "$ac_cv_type_ssize_t" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SSIZE_T ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SSIZE_T 1
EOF

  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
echo $ac_n "checking for st_blksize in struct stat""... $ac_c" 1>&6
echo "configure:10106: checking for st_blksize in struct stat" >&5
if eval "test \"`echo '$''{'ac_cv_struct_st_blksize'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10111 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
int main() {
struct stat s; s.st_blksize;
; return 0; }
EOF
if { (eval echo configure:10119: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_st_blksize=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_st_blksize=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_st_blksize" 1>&6
if test $ac_cv_struct_st_blksize = yes; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_ST_BLKSIZE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ST_BLKSIZE 1
EOF

fi

echo $ac_n "checking for siginfo_t""... $ac_c" 1>&6
echo "configure:10143: checking for siginfo_t" >&5
if eval "test \"`echo '$''{'ac_cv_siginfo_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10148 "configure"
#include "confdefs.h"
#define _POSIX_C_SOURCE 199506L
                  #include <signal.h>
int main() {
siginfo_t* info;
; return 0; }
EOF
if { (eval echo configure:10156: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_siginfo_t=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_siginfo_t=false
fi
rm -f conftest*
fi

if test "$ac_cv_siginfo_t" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SIGINFO_T ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SIGINFO_T 1
EOF

  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for int64""... $ac_c" 1>&6
echo "configure:10182: checking for int64" >&5
if eval "test \"`echo '$''{'ac_cv_int64'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10187 "configure"
#include "confdefs.h"
#include <stdio.h>
                  #include <sys/types.h>
int main() {
int64 foo = 0;
; return 0; }
EOF
if { (eval echo configure:10195: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_int64=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_int64=false
fi
rm -f conftest*
fi

if test "$ac_cv_int64" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_INT64 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_INT64 1
EOF

  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
echo $ac_n "checking for uint""... $ac_c" 1>&6
echo "configure:10220: checking for uint" >&5
if eval "test \"`echo '$''{'ac_cv_uint'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10225 "configure"
#include "confdefs.h"
#include <stdio.h>
                  #include <sys/types.h>
int main() {
uint foo = 0;
; return 0; }
EOF
if { (eval echo configure:10233: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_uint=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_uint=false
fi
rm -f conftest*
fi

if test "$ac_cv_uint" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_UINT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_UINT 1
EOF

  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
echo $ac_n "checking for uint_t""... $ac_c" 1>&6
echo "configure:10258: checking for uint_t" >&5
if eval "test \"`echo '$''{'ac_cv_uint_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10263 "configure"
#include "confdefs.h"
#include <stdio.h>
                  #include <sys/types.h>
int main() {
uint_t foo = 0;
; return 0; }
EOF
if { (eval echo configure:10271: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_uint_t=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_uint_t=false
fi
rm -f conftest*
fi

if test "$ac_cv_uint_t" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_UINT_T ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_UINT_T 1
EOF

  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross


echo $ac_n "checking for uname.domainname""... $ac_c" 1>&6
echo "configure:10305: checking for uname.domainname" >&5
if eval "test \"`echo '$''{'ac_cv_have_uname_domainname_field'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10310 "configure"
#include "confdefs.h"
#include <sys/utsname.h>
int main() {
 struct utsname *res; char *domain;
            (void)uname(res);  if (res != 0) { domain = res->domainname; } 
; return 0; }
EOF
if { (eval echo configure:10318: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_have_uname_domainname_field=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have_uname_domainname_field=false
fi
rm -f conftest*
fi


if test "$ac_cv_have_uname_domainname_field" = "true"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_UNAME_DOMAINNAME_FIELD ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_UNAME_DOMAINNAME_FIELD 1
EOF

    echo "$ac_t""yes" 1>&6
else
    echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for uname.__domainname""... $ac_c" 1>&6
echo "configure:10345: checking for uname.__domainname" >&5
if eval "test \"`echo '$''{'ac_cv_have_uname_us_domainname_field'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10350 "configure"
#include "confdefs.h"
#include <sys/utsname.h>
int main() {
 struct utsname *res; char *domain;
            (void)uname(res);  if (res != 0) { domain = res->__domainname; } 
; return 0; }
EOF
if { (eval echo configure:10358: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_have_uname_us_domainname_field=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have_uname_us_domainname_field=false
fi
rm -f conftest*
fi


if test "$ac_cv_have_uname_us_domainname_field" = "true"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_UNAME_US_DOMAINNAME_FIELD ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_UNAME_US_DOMAINNAME_FIELD 1
EOF

    echo "$ac_t""yes" 1>&6
else
    echo "$ac_t""no" 1>&6
fi

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross


if test "$GNU_CXX"; then
    _SAVE_CXXFLAGS=$CXXFLAGS
    CXXFLAGS="$CXXFLAGS -std=gnu++0x"

    echo $ac_n "checking for gcc c++0x headers bug without rtti""... $ac_c" 1>&6
echo "configure:10397: checking for gcc c++0x headers bug without rtti" >&5
if eval "test \"`echo '$''{'ac_cv_cxx0x_headers_bug'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10402 "configure"
#include "confdefs.h"
#include <memory>
int main() {

; return 0; }
EOF
if { (eval echo configure:10409: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_cxx0x_headers_bug="no"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_cxx0x_headers_bug="yes"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_cxx0x_headers_bug" 1>&6
    CXXFLAGS="$_SAVE_CXXFLAGS"
    if test "$ac_cv_cxx0x_headers_bug" = "no"; then
        CXXFLAGS="$CXXFLAGS -std=gnu++0x"
    fi
fi

echo $ac_n "checking for usable char16_t (2 bytes, unsigned)""... $ac_c" 1>&6
echo "configure:10429: checking for usable char16_t (2 bytes, unsigned)" >&5
if eval "test \"`echo '$''{'ac_cv_have_usable_char16_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10434 "configure"
#include "confdefs.h"
$configure_static_assert_macros
int main() {
CONFIGURE_STATIC_ASSERT(sizeof(char16_t) == 2);
                     CONFIGURE_STATIC_ASSERT(char16_t(-1) > char16_t(0));
                     CONFIGURE_STATIC_ASSERT(sizeof((u"hello")[0]) == 2);
                     CONFIGURE_STATIC_ASSERT(sizeof(u'a') == 2);
                     CONFIGURE_STATIC_ASSERT(u'\xFFFF' > u'\x0')
; return 0; }
EOF
if { (eval echo configure:10445: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_have_usable_char16_t="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have_usable_char16_t="no"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_have_usable_char16_t" 1>&6
if test "$ac_cv_have_usable_char16_t" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_CPP_CHAR16_T ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CPP_CHAR16_T 1
EOF

    HAVE_CPP_CHAR16_T=1
elif test "$GNU_CXX"; then
    CXXFLAGS="$_SAVE_CXXFLAGS"
fi


echo $ac_n "checking for usable wchar_t (2 bytes, unsigned)""... $ac_c" 1>&6
echo "configure:10473: checking for usable wchar_t (2 bytes, unsigned)" >&5
if eval "test \"`echo '$''{'ac_cv_have_usable_wchar_v2'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10478 "configure"
#include "confdefs.h"
#include <stddef.h>
                     $configure_static_assert_macros
int main() {
CONFIGURE_STATIC_ASSERT(sizeof(wchar_t) == 2);
                     CONFIGURE_STATIC_ASSERT((wchar_t)-1 > (wchar_t) 0)
; return 0; }
EOF
if { (eval echo configure:10487: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_have_usable_wchar_v2="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have_usable_wchar_v2="no"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_have_usable_wchar_v2" 1>&6
if test "$ac_cv_have_usable_wchar_v2" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_CPP_2BYTE_WCHAR_T ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CPP_2BYTE_WCHAR_T 1
EOF

    HAVE_CPP_2BYTE_WCHAR_T=1
elif test "$ac_cv_have_usable_char16_t" != "yes"; then

    _SAVE_CXXFLAGS=$CXXFLAGS
    CXXFLAGS="$CXXFLAGS -fshort-wchar"

    echo $ac_n "checking for compiler -fshort-wchar option""... $ac_c" 1>&6
echo "configure:10515: checking for compiler -fshort-wchar option" >&5
if eval "test \"`echo '$''{'ac_cv_have_usable_wchar_option_v2'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10520 "configure"
#include "confdefs.h"
#include <stddef.h>
                      $configure_static_assert_macros
int main() {
CONFIGURE_STATIC_ASSERT(sizeof(wchar_t) == 2);
                      CONFIGURE_STATIC_ASSERT((wchar_t)-1 > (wchar_t) 0)
; return 0; }
EOF
if { (eval echo configure:10529: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_have_usable_wchar_option_v2="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have_usable_wchar_option_v2="no"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_have_usable_wchar_option_v2" 1>&6

    if test "$ac_cv_have_usable_wchar_option_v2" = "yes"; then
        cat >> confdefs.pytmp <<\EOF
    (''' HAVE_CPP_2BYTE_WCHAR_T ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CPP_2BYTE_WCHAR_T 1
EOF

        HAVE_CPP_2BYTE_WCHAR_T=1
        if test "$OS_TARGET" = Android; then
            WCHAR_CFLAGS="-fshort-wchar -Wl,--no-wchar-size-warning"
            CXXFLAGS="$CXXFLAGS -Wl,--no-wchar-size-warning"
            CFLAGS="$CFLAGS -Wl,--no-wchar-size-warning"
            DSO_LDOPTS="$DSO_LDOPTS -Wl,--no-wchar-size-warning"
        else
            WCHAR_CFLAGS="-fshort-wchar"
        fi
    else
        CXXFLAGS=$_SAVE_CXXFLAGS
    fi
fi

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


if test "$GNU_CC"; then
  echo $ac_n "checking for visibility(hidden) attribute""... $ac_c" 1>&6
echo "configure:10575: checking for visibility(hidden) attribute" >&5
if eval "test \"`echo '$''{'ac_cv_visibility_hidden'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
                  int foo __attribute__ ((visibility ("hidden"))) = 1;
EOF
                  ac_cv_visibility_hidden=no
                  if ${CC-cc} -Werror -S conftest.c -o conftest.s >/dev/null 2>&1; then
                    if egrep '\.(hidden|private_extern).*foo' conftest.s >/dev/null; then
                      ac_cv_visibility_hidden=yes
                    fi
                  fi
                  rm -f conftest.cs
                 
fi

echo "$ac_t""$ac_cv_visibility_hidden" 1>&6
  if test "$ac_cv_visibility_hidden" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_VISIBILITY_HIDDEN_ATTRIBUTE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_VISIBILITY_HIDDEN_ATTRIBUTE 1
EOF


    echo $ac_n "checking for visibility(default) attribute""... $ac_c" 1>&6
echo "configure:10603: checking for visibility(default) attribute" >&5
if eval "test \"`echo '$''{'ac_cv_visibility_default'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
                    int foo __attribute__ ((visibility ("default"))) = 1;
EOF
                    ac_cv_visibility_default=no
                    if ${CC-cc} -fvisibility=hidden -Werror -S conftest.c -o conftest.s >/dev/null 2>&1; then
                      if ! egrep '\.(hidden|private_extern).*foo' conftest.s >/dev/null; then
                        ac_cv_visibility_default=yes
                      fi
                    fi
                    rm -f conftest.cs
                   
fi

echo "$ac_t""$ac_cv_visibility_default" 1>&6
    if test "$ac_cv_visibility_default" = "yes"; then
      cat >> confdefs.pytmp <<\EOF
    (''' HAVE_VISIBILITY_ATTRIBUTE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_VISIBILITY_ATTRIBUTE 1
EOF


      echo $ac_n "checking for visibility pragma support""... $ac_c" 1>&6
echo "configure:10631: checking for visibility pragma support" >&5
if eval "test \"`echo '$''{'ac_cv_visibility_pragma'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
#pragma GCC visibility push(hidden)
                      int foo_hidden = 1;
#pragma GCC visibility push(default)
                      int foo_default = 1;
EOF
                      ac_cv_visibility_pragma=no
                      if ${CC-cc} -Werror -S conftest.c -o conftest.s >/dev/null 2>&1; then
                        if egrep '\.(hidden|private_extern).*foo_hidden' conftest.s >/dev/null; then
                          if ! egrep '\.(hidden|private_extern).*foo_default' conftest.s > /dev/null; then
                            ac_cv_visibility_pragma=yes
                          fi
                        fi
                      fi
                      rm -f conftest.cs
                    
fi

echo "$ac_t""$ac_cv_visibility_pragma" 1>&6
      if test "$ac_cv_visibility_pragma" = "yes"; then
        echo $ac_n "checking For gcc visibility bug with class-level attributes (GCC bug 26905)""... $ac_c" 1>&6
echo "configure:10656: checking For gcc visibility bug with class-level attributes (GCC bug 26905)" >&5
if eval "test \"`echo '$''{'ac_cv_have_visibility_class_bug'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
#pragma GCC visibility push(hidden)
struct __attribute__ ((visibility ("default"))) TestStruct {
  static void Init();
};
__attribute__ ((visibility ("default"))) void TestFunc() {
  TestStruct::Init();
}
EOF
                       ac_cv_have_visibility_class_bug=no
                       if ! ${CXX-g++} ${CXXFLAGS} ${DSO_PIC_CFLAGS} ${DSO_LDOPTS} -S -o conftest.S conftest.c > /dev/null 2>&1 ; then
                         ac_cv_have_visibility_class_bug=yes
                       else
                         if test `egrep -c '@PLT|\\$stub' conftest.S` = 0; then
                           ac_cv_have_visibility_class_bug=yes
                         fi
                       fi
                       rm -rf conftest.{c,S}
                       
fi

echo "$ac_t""$ac_cv_have_visibility_class_bug" 1>&6

        echo $ac_n "checking For x86_64 gcc visibility bug with builtins (GCC bug 20297)""... $ac_c" 1>&6
echo "configure:10684: checking For x86_64 gcc visibility bug with builtins (GCC bug 20297)" >&5
if eval "test \"`echo '$''{'ac_cv_have_visibility_builtin_bug'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
#pragma GCC visibility push(hidden)
#pragma GCC visibility push(default)
#include <string.h>
#pragma GCC visibility pop

__attribute__ ((visibility ("default"))) void Func() {
  char c[100];
  memset(c, 0, sizeof(c));
}
EOF
                       ac_cv_have_visibility_builtin_bug=no
                       if ! ${CC-cc} ${CFLAGS} ${DSO_PIC_CFLAGS} ${DSO_LDOPTS} -O2 -S -o conftest.S conftest.c > /dev/null 2>&1 ; then
                         ac_cv_have_visibility_builtin_bug=yes
                       else
                         if test `grep -c "@PLT" conftest.S` = 0; then
                           ac_cv_visibility_builtin_bug=yes
                         fi
                       fi
                       rm -f conftest.{c,S}
                       
fi

echo "$ac_t""$ac_cv_have_visibility_builtin_bug" 1>&6
        if test "$ac_cv_have_visibility_builtin_bug" = "no" -a \
                "$ac_cv_have_visibility_class_bug" = "no"; then
          VISIBILITY_FLAGS='-I$(DIST)/system_wrappers -include $(topsrcdir)/config/gcc_hidden.h'
          WRAP_SYSTEM_INCLUDES=1
          STL_FLAGS='-I$(DIST)/stl_wrappers'
          WRAP_STL_INCLUDES=1
        else
          VISIBILITY_FLAGS='-fvisibility=hidden'
        fi # have visibility pragma bug
      fi   # have visibility pragma
    fi     # have visibility(default) attribute
  fi       # have visibility(hidden) attribute
fi         # GNU_CC

# visibility hidden flag for Sun Studio on Solaris
if test "$SOLARIS_SUNPRO_CC"; then
VISIBILITY_FLAGS='-xldscope=hidden'
fi         # Sun Studio on Solaris





if test "$GNU_CC"; then

echo $ac_n "checking for gcc PR49911""... $ac_c" 1>&6
echo "configure:10738: checking for gcc PR49911" >&5
ac_have_gcc_pr49911="no"

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross


_SAVE_CXXFLAGS=$CXXFLAGS
CXXFLAGS="-O2"
if test "$cross_compiling" = yes; then
  true
else
  cat > conftest.$ac_ext <<EOF
#line 10755 "configure"
#include "confdefs.h"
#ifdef __cplusplus
extern "C" void exit(int);
#endif

extern "C" void abort(void);
typedef enum {
eax,         ecx,         edx,         ebx,         esp,         ebp,
esi,         edi     }
RegisterID;
union StateRemat {
  RegisterID reg_;
  int offset_;
};
static StateRemat FromRegister(RegisterID reg) {
  StateRemat sr;
  sr.reg_ = reg;
  return sr;
}
static StateRemat FromAddress3(int address) {
  StateRemat sr;
  sr.offset_ = address;
  if (address < 46 &&    address >= 0) {
    abort();
  }
  return sr;
}
struct FrameState {
  StateRemat dataRematInfo2(bool y, int z) {
    if (y)         return FromRegister(RegisterID(1));
    return FromAddress3(z);
  }
};
FrameState frame;
StateRemat x;
__attribute__((noinline)) void jsop_setelem(bool y, int z) {
  x = frame.dataRematInfo2(y, z);
}
int main(void) {
  jsop_setelem(0, 47);
}

EOF
if { (eval echo configure:10799: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_have_gcc_pr49911="yes"
fi
rm -fr conftest*
fi

CXXFLAGS="$_SAVE_CXXFLAGS"

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


if test "$ac_have_gcc_pr49911" = "yes"; then
   echo "$ac_t""yes" 1>&6
   CFLAGS="$CFLAGS -fno-tree-vrp"
   CXXFLAGS="$CXXFLAGS -fno-tree-vrp"
else
   echo "$ac_t""no" 1>&6
fi
fi


echo $ac_n "checking for gcc pr39608""... $ac_c" 1>&6
echo "configure:10832: checking for gcc pr39608" >&5
ac_have_gcc_pr39608="yes"

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross


cat > conftest.$ac_ext <<EOF
#line 10844 "configure"
#include "confdefs.h"

typedef void (*FuncType)();
template<FuncType Impl>
void f();
template<typename T> class C {
  typedef C<T> ThisC;
  template<int g()>
  static void h() {
    f<ThisC::h<g> >();
  }
};

int main() {
true
; return 0; }
EOF
if { (eval echo configure:10862: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_have_gcc_pr39608="no"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  true
fi
rm -f conftest*

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


echo "$ac_t""$ac_have_gcc_pr39608" 1>&6
if test "$ac_have_gcc_pr39608" = "yes"; then
   echo This compiler would fail to build firefox, plase upgrade.
   exit 1
fi


echo $ac_n "checking for llvm pr8927""... $ac_c" 1>&6
echo "configure:10889: checking for llvm pr8927" >&5
ac_have_llvm_pr8927="no"

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


_SAVE_CFLAGS=$CFLAGS
CFLAGS="-O2"
if test "$cross_compiling" = yes; then
  true
else
  cat > conftest.$ac_ext <<EOF
#line 10906 "configure"
#include "confdefs.h"

struct foobar {
  int x;
};
static const struct foobar* foo() {
  static const struct foobar d = { 0 };
  return &d;
}
static const struct foobar* bar() {
  static const struct foobar d = { 0 };
  return &d;
}
__attribute__((noinline)) int zed(const struct foobar *a,
                                  const struct foobar *b) {
  return a == b;
}
int main() {
  return zed(foo(), bar());
}

EOF
if { (eval echo configure:10929: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_have_llvm_pr8927="yes"
fi
rm -fr conftest*
fi

CFLAGS="$_SAVE_CFLAGS"

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


if test "$ac_have_llvm_pr8927" = "yes"; then
   echo "$ac_t""yes" 1>&6
   echo This compiler would miscompile firefox, plase upgrade.
   echo see http://developer.mozilla.org/en-US/docs/Developer_Guide/Build_Instructions/Mac_OS_X_Prerequisites
   echo for more information.
   exit 1
else
   echo "$ac_t""no" 1>&6
fi


if test "$GNU_CC"; then
  CFLAGS_save="${CFLAGS}"
  CFLAGS="${CFLAGS} -Werror"
  echo $ac_n "checking for __force_align_arg_pointer__ attribute""... $ac_c" 1>&6
echo "configure:10966: checking for __force_align_arg_pointer__ attribute" >&5
if eval "test \"`echo '$''{'ac_cv_force_align_arg_pointer'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10971 "configure"
#include "confdefs.h"
__attribute__ ((__force_align_arg_pointer__)) void test() {}
int main() {

; return 0; }
EOF
if { (eval echo configure:10978: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_force_align_arg_pointer="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_force_align_arg_pointer="no"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_force_align_arg_pointer" 1>&6
  CFLAGS="${CFLAGS_save}"
  if test "$ac_cv_force_align_arg_pointer" = "yes"; then
    HAVE_GCC_ALIGN_ARG_POINTER=1
  else
    HAVE_GCC_ALIGN_ARG_POINTER=
  fi
fi


ac_header_dirent=no
for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&6
echo "configure:11005: checking for $ac_hdr that defines DIR" >&5
if eval "test \"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11010 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_hdr>
int main() {
DIR *dirp = 0;
; return 0; }
EOF
if { (eval echo configure:11018: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_dirent_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_dirent_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_dirent_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 ac_header_dirent=$ac_hdr; break
else
  echo "$ac_t""no" 1>&6
fi
done
# Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
if test $ac_header_dirent = dirent.h; then
echo $ac_n "checking for opendir in -ldir""... $ac_c" 1>&6
echo "configure:11046: checking for opendir in -ldir" >&5
ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldir  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11054 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char opendir();

int main() {
opendir()
; return 0; }
EOF
if { (eval echo configure:11065: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -ldir"
else
  echo "$ac_t""no" 1>&6
fi

else
echo $ac_n "checking for opendir in -lx""... $ac_c" 1>&6
echo "configure:11087: checking for opendir in -lx" >&5
ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lx  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11095 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char opendir();

int main() {
opendir()
; return 0; }
EOF
if { (eval echo configure:11106: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -lx"
else
  echo "$ac_t""no" 1>&6
fi

fi

case "$target_os" in
freebsd*|openbsd*)
# for stuff like -lXshm
    CPPFLAGS="${CPPFLAGS} ${X_CFLAGS}"
    ;;
esac
 for ac_hdr in sys/byteorder.h compat.h getopt.h sys/bitypes.h \
        memory.h unistd.h gnu/libc-version.h nl_types.h malloc.h \
        X11/XKBlib.h io.h cpuid.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11140: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11145 "configure"
#include "confdefs.h"

#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:11153: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    
  fi

  done



 for ac_hdr in sys/statvfs.h sys/statfs.h sys/vfs.h sys/mount.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11188: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11193 "configure"
#include "confdefs.h"

#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:11201: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    
  fi

  done


 for ac_hdr in sys/quota.h sys/sysmacros.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11235: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11240 "configure"
#include "confdefs.h"

#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:11248: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    
  fi

  done

 for ac_hdr in linux/quota.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11281: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11286 "configure"
#include "confdefs.h"
#include <sys/socket.h>
#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:11294: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    
  fi

  done


 for ac_hdr in linux/if_addr.h linux/rtnetlink.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11328: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11333 "configure"
#include "confdefs.h"
#include <sys/socket.h>
#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:11341: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    
  fi

  done


 for ac_hdr in sys/types.h netinet/in.h byteswap.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11375: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11380 "configure"
#include "confdefs.h"

#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:11388: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    
  fi

  done


echo $ac_n "checking for sockaddr_in.sin_len""... $ac_c" 1>&6
echo "configure:11419: checking for sockaddr_in.sin_len" >&5
if eval "test \"`echo '$''{'ac_cv_sockaddr_in_sin_len'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11424 "configure"
#include "confdefs.h"
#ifdef HAVE_SYS_TYPES_H
                                    #include <sys/types.h>
                                    #endif
                                    #include <netinet/in.h>
                                    struct sockaddr_in x;
                                    void *foo = (void*) &x.sin_len;
int main() {

; return 0; }
EOF
if { (eval echo configure:11436: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_sockaddr_in_sin_len=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_sockaddr_in_sin_len=false
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_sockaddr_in_sin_len" 1>&6
if test "$ac_cv_sockaddr_in_sin_len" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SIN_LEN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SIN_LEN 1
EOF

  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SCONN_LEN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SCONN_LEN 1
EOF

fi

echo $ac_n "checking for sockaddr_in6.sin6_len""... $ac_c" 1>&6
echo "configure:11467: checking for sockaddr_in6.sin6_len" >&5
if eval "test \"`echo '$''{'ac_cv_sockaddr_in6_sin6_len'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11472 "configure"
#include "confdefs.h"
#ifdef HAVE_SYS_TYPES_H
                                #include <sys/types.h>
                                #endif
                                #include <netinet/in.h>
                                struct sockaddr_in6 x;
                                void *foo = (void*) &x.sin6_len;
int main() {

; return 0; }
EOF
if { (eval echo configure:11484: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_sockaddr_in6_sin6_len=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_sockaddr_in6_sin6_len=false
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_sockaddr_in6_sin6_len" 1>&6
if test "$ac_cv_sockaddr_in6_sin6_len" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SIN6_LEN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SIN6_LEN 1
EOF

fi

echo $ac_n "checking for sockaddr.sa_len""... $ac_c" 1>&6
echo "configure:11508: checking for sockaddr.sa_len" >&5
if eval "test \"`echo '$''{'ac_cv_sockaddr_sa_len'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11513 "configure"
#include "confdefs.h"
#ifdef HAVE_SYS_TYPES_H
                                #include <sys/types.h>
                                #endif
                                #include <sys/socket.h>
                                struct sockaddr x;
                                void *foo = (void*) &x.sa_len;
int main() {

; return 0; }
EOF
if { (eval echo configure:11525: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_sockaddr_sa_len=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_sockaddr_sa_len=false
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_sockaddr_sa_len" 1>&6
if test "$ac_cv_sockaddr_sa_len" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SA_LEN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SA_LEN 1
EOF

fi

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

NEW_H=new.h
   ac_safe=`echo "new" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for new""... $ac_c" 1>&6
echo "configure:11558: checking for new" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11563 "configure"
#include "confdefs.h"

#include <new>
int main() {

; return 0; }
EOF
if { (eval echo configure:11571: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    NEW_H=new
  else
    echo "$ac_t""no" 1>&6
    
  fi

cat >> confdefs.pytmp <<EOF
    (''' NEW_H ''', r''' <$NEW_H> ''')
EOF
cat >> confdefs.h <<EOF
#define NEW_H <$NEW_H>
EOF

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


# Check whether --enable-dtrace or --disable-dtrace was given.
if test "${enable_dtrace+set}" = set; then
  enableval="$enable_dtrace"
  enable_dtrace="yes"
fi

if test "x$enable_dtrace" = "xyes"; then
     ac_safe=`echo "sys/sdt.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for sys/sdt.h""... $ac_c" 1>&6
echo "configure:11615: checking for sys/sdt.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11620 "configure"
#include "confdefs.h"

#include <sys/sdt.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:11628: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    HAVE_DTRACE=1
  else
    echo "$ac_t""no" 1>&6
    
  fi

  if test -n "$HAVE_DTRACE"; then
      cat >> confdefs.pytmp <<\EOF
    (''' INCLUDE_MOZILLA_DTRACE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define INCLUDE_MOZILLA_DTRACE 1
EOF

  else
      { echo "configure: error: dtrace enabled but sys/sdt.h not found" 1>&2; exit 1; };
  fi
fi


case $target in
*-aix4.3*|*-aix5*)
	;;
*)
	 for ac_hdr in sys/cdefs.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11670: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11675 "configure"
#include "confdefs.h"

#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:11683: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    
  fi

  done

	;;
esac



# Check whether --with-linux-headers or --without-linux-headers was given.
if test "${with_linux_headers+set}" = set; then
  withval="$with_linux_headers"
  linux_headers=$withval
fi


LINUX_HEADERS_INCLUDES=

if test "$linux_headers"; then
    LINUX_HEADERS_INCLUDES="-I$linux_headers"
fi

_SAVE_CFLAGS="$CFLAGS"
CFLAGS="$CFLAGS $LINUX_HEADERS_INCLUDES"

   ac_safe=`echo "linux/perf_event.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for linux/perf_event.h""... $ac_c" 1>&6
echo "configure:11735: checking for linux/perf_event.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11740 "configure"
#include "confdefs.h"

#include <linux/perf_event.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:11748: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    echo $ac_n "checking for perf_event_open system call""... $ac_c" 1>&6
echo "configure:11763: checking for perf_event_open system call" >&5
if eval "test \"`echo '$''{'ac_cv_perf_event_open'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11768 "configure"
#include "confdefs.h"
#include <asm/unistd.h>
int main() {
return sizeof(__NR_perf_event_open);
; return 0; }
EOF
if { (eval echo configure:11775: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_perf_event_open=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_perf_event_open=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_perf_event_open" 1>&6
  else
    echo "$ac_t""no" 1>&6
    
  fi

if test "$ac_cv_perf_event_open" = "yes"; then
    HAVE_LINUX_PERF_EVENT_H=1
else
    HAVE_LINUX_PERF_EVENT_H=
    LINUX_HEADERS_INCLUDES=
fi



CFLAGS="$_SAVE_CFLAGS"



case $target in
*-hpux11.*)
	;;
*)
	echo $ac_n "checking for gethostbyname_r in -lc_r""... $ac_c" 1>&6
echo "configure:11811: checking for gethostbyname_r in -lc_r" >&5
ac_lib_var=`echo c_r'_'gethostbyname_r | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc_r  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11819 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname_r();

int main() {
gethostbyname_r()
; return 0; }
EOF
if { (eval echo configure:11830: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo c_r | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_lib ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lc_r $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

	;;
esac

case $target in
*-darwin*)
    ;;
*-os2*)
    ;;
*)
    
echo $ac_n "checking for library containing dlopen""... $ac_c" 1>&6
echo "configure:11871: checking for library containing dlopen" >&5
if eval "test \"`echo '$''{'ac_cv_search_dlopen'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_func_search_save_LIBS="$LIBS"
ac_cv_search_dlopen="no"
cat > conftest.$ac_ext <<EOF
#line 11878 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:11889: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_search_dlopen="none required"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
test "$ac_cv_search_dlopen" = "no" && for i in dl; do
LIBS="-l$i  $ac_func_search_save_LIBS"
cat > conftest.$ac_ext <<EOF
#line 11900 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:11911: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_search_dlopen="-l$i"
break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done
LIBS="$ac_func_search_save_LIBS"
fi

echo "$ac_t""$ac_cv_search_dlopen" 1>&6
if test "$ac_cv_search_dlopen" != "no"; then
  test "$ac_cv_search_dlopen" = "none required" || LIBS="$ac_cv_search_dlopen $LIBS"
     ac_safe=`echo "dlfcn.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for dlfcn.h""... $ac_c" 1>&6
echo "configure:11929: checking for dlfcn.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11934 "configure"
#include "confdefs.h"

#include <dlfcn.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:11942: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_DLOPEN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DLOPEN 1
EOF

  else
    echo "$ac_t""no" 1>&6
    
  fi

else :
  
fi
    ;;
esac

_SAVE_CFLAGS="$CFLAGS"
CFLAGS="$CFLAGS -D_GNU_SOURCE"
for ac_func in dladdr memmem
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:11979: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11984 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:12007: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

CFLAGS="$_SAVE_CFLAGS"

if test ! "$GNU_CXX"; then

    case $target in
    *-aix*)
	echo $ac_n "checking for demangle in -lC_r""... $ac_c" 1>&6
echo "configure:12041: checking for demangle in -lC_r" >&5
ac_lib_var=`echo C_r'_'demangle | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lC_r  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12049 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char demangle();

int main() {
demangle()
; return 0; }
EOF
if { (eval echo configure:12060: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo C_r | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_lib ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lC_r $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

	;;
     *)
	echo $ac_n "checking for demangle in -lC""... $ac_c" 1>&6
echo "configure:12093: checking for demangle in -lC" >&5
ac_lib_var=`echo C'_'demangle | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lC  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12101 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char demangle();

int main() {
demangle()
; return 0; }
EOF
if { (eval echo configure:12112: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo C | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_lib ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lC $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

	;;
     esac
fi

case $target in
*-os2*)
    ;;
*)
    echo $ac_n "checking for socket in -lsocket""... $ac_c" 1>&6
echo "configure:12151: checking for socket in -lsocket" >&5
ac_lib_var=`echo socket'_'socket | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12159 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {
socket()
; return 0; }
EOF
if { (eval echo configure:12170: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo socket | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_lib ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lsocket $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

esac

XLDFLAGS="$X_LIBS"
XLIBS="$X_EXTRA_LIBS"

if test "$no_x" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' NO_X11 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NO_X11 1
EOF

else
    cat >> confdefs.pytmp <<EOF
    (''' FUNCPROTO ''', r''' 15 ''')
EOF
cat >> confdefs.h <<EOF
#define FUNCPROTO 15
EOF

	XLIBS="-lX11 $XLIBS"
	_SAVE_LDFLAGS="$LDFLAGS"
	LDFLAGS="$XLDFLAGS $LDFLAGS"
	echo $ac_n "checking for XDrawLines in -lX11""... $ac_c" 1>&6
echo "configure:12225: checking for XDrawLines in -lX11" >&5
ac_lib_var=`echo X11'_'XDrawLines | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lX11 $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12233 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XDrawLines();

int main() {
XDrawLines()
; return 0; }
EOF
if { (eval echo configure:12244: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X11_LIBS="-lX11"
else
  echo "$ac_t""no" 1>&6
MISSING_X="$MISSING_X -lX11"
fi

	echo $ac_n "checking for XextAddDisplay in -lXext""... $ac_c" 1>&6
echo "configure:12266: checking for XextAddDisplay in -lXext" >&5
ac_lib_var=`echo Xext'_'XextAddDisplay | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXext $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12274 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XextAddDisplay();

int main() {
XextAddDisplay()
; return 0; }
EOF
if { (eval echo configure:12285: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XEXT_LIBS="-lXext"
else
  echo "$ac_t""no" 1>&6
MISSING_X="$MISSING_X -lXext"
fi


	echo $ac_n "checking for XtFree in -lXt""... $ac_c" 1>&6
echo "configure:12308: checking for XtFree in -lXt" >&5
ac_lib_var=`echo Xt'_'XtFree | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12316 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XtFree();

int main() {
XtFree()
; return 0; }
EOF
if { (eval echo configure:12327: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   XT_LIBS="-lXt"
else
  echo "$ac_t""no" 1>&6

        unset ac_cv_lib_Xt_XtFree
	    echo $ac_n "checking for IceFlush in -lICE""... $ac_c" 1>&6
echo "configure:12348: checking for IceFlush in -lICE" >&5
ac_lib_var=`echo ICE'_'IceFlush | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lICE $XT_LIBS $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12356 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char IceFlush();

int main() {
IceFlush()
; return 0; }
EOF
if { (eval echo configure:12367: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XT_LIBS="-lICE $XT_LIBS"
else
  echo "$ac_t""no" 1>&6
fi

	    echo $ac_n "checking for SmcCloseConnection in -lSM""... $ac_c" 1>&6
echo "configure:12388: checking for SmcCloseConnection in -lSM" >&5
ac_lib_var=`echo SM'_'SmcCloseConnection | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lSM $XT_LIBS $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12396 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SmcCloseConnection();

int main() {
SmcCloseConnection()
; return 0; }
EOF
if { (eval echo configure:12407: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XT_LIBS="-lSM $XT_LIBS"
else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for XtFree in -lXt""... $ac_c" 1>&6
echo "configure:12428: checking for XtFree in -lXt" >&5
ac_lib_var=`echo Xt'_'XtFree | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXt $X_PRE_LIBS $XT_LIBS $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12436 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XtFree();

int main() {
XtFree()
; return 0; }
EOF
if { (eval echo configure:12447: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   XT_LIBS="-lXt $XT_LIBS"
else
  echo "$ac_t""no" 1>&6
MISSING_X="$MISSING_X -lXt"
fi

        
fi


    # AIX needs the motif library linked before libXt to prevent
    # crashes in plugins linked against Motif - Bug #98892
    case "${target_os}" in
    aix*)
        XT_LIBS="-lXm $XT_LIBS"
        ;;
    esac

                echo $ac_n "checking for XShmCreateImage in -lXext""... $ac_c" 1>&6
echo "configure:12481: checking for XShmCreateImage in -lXext" >&5
ac_lib_var=`echo Xext'_'XShmCreateImage | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXext $XLIBS $XEXT_LIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12489 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XShmCreateImage();

int main() {
XShmCreateImage()
; return 0; }
EOF
if { (eval echo configure:12500: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  _HAVE_XSHM_XEXT=1
else
  echo "$ac_t""no" 1>&6
fi


                   ac_safe=`echo "X11/extensions/scrnsaver.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for X11/extensions/scrnsaver.h""... $ac_c" 1>&6
echo "configure:12523: checking for X11/extensions/scrnsaver.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 12528 "configure"
#include "confdefs.h"

#include <X11/extensions/scrnsaver.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:12536: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    echo $ac_n "checking for XScreenSaverQueryInfo in -lXss""... $ac_c" 1>&6
echo "configure:12551: checking for XScreenSaverQueryInfo in -lXss" >&5
ac_lib_var=`echo Xss'_'XScreenSaverQueryInfo | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXss $XEXT_LIBS $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12559 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XScreenSaverQueryInfo();

int main() {
XScreenSaverQueryInfo()
; return 0; }
EOF
if { (eval echo configure:12570: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XSS_LIBS="-lXss $XEXT_LIBS $XLIBS"
             cat >> confdefs.pytmp <<\EOF
    (''' HAVE_LIBXSS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_LIBXSS 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  else
    echo "$ac_t""no" 1>&6
    
  fi


	LDFLAGS="$_SAVE_LDFLAGS"
fi # $no_x








case "$target_os" in
darwin*)
    USE_PTHREADS=1
    ;;
*)
    
echo $ac_n "checking for pthread_create in -lpthreads""... $ac_c" 1>&6
echo "configure:12620: checking for pthread_create in -lpthreads" >&5
echo "
    #include <pthread.h>
    #include <stdlib.h>
    void *foo(void *v) { int a = 1;  } 
    int main() { 
        pthread_t t;
        if (!pthread_create(&t, 0, &foo, 0)) {
            pthread_join(t, 0);
        }
        exit(0);
    }" > dummy.c ;
    echo "${CC-cc} -o dummy${ac_exeext} dummy.c $CFLAGS $CPPFLAGS -lpthreads $LDFLAGS $LIBS" 1>&5;
    ${CC-cc} -o dummy${ac_exeext} dummy.c $CFLAGS $CPPFLAGS -lpthreads $LDFLAGS $LIBS 2>&5;
    _res=$? ;
    rm -f dummy.c dummy${ac_exeext} ;
    if test "$_res" = "0"; then
        echo "$ac_t""yes" 1>&6
        USE_PTHREADS=1 _PTHREAD_LDFLAGS="-lpthreads"
    else
        echo "$ac_t""no" 1>&6
        
echo $ac_n "checking for pthread_create in -lpthread""... $ac_c" 1>&6
echo "configure:12643: checking for pthread_create in -lpthread" >&5
echo "
    #include <pthread.h>
    #include <stdlib.h>
    void *foo(void *v) { int a = 1;  } 
    int main() { 
        pthread_t t;
        if (!pthread_create(&t, 0, &foo, 0)) {
            pthread_join(t, 0);
        }
        exit(0);
    }" > dummy.c ;
    echo "${CC-cc} -o dummy${ac_exeext} dummy.c $CFLAGS $CPPFLAGS -lpthread $LDFLAGS $LIBS" 1>&5;
    ${CC-cc} -o dummy${ac_exeext} dummy.c $CFLAGS $CPPFLAGS -lpthread $LDFLAGS $LIBS 2>&5;
    _res=$? ;
    rm -f dummy.c dummy${ac_exeext} ;
    if test "$_res" = "0"; then
        echo "$ac_t""yes" 1>&6
        USE_PTHREADS=1 _PTHREAD_LDFLAGS="-lpthread"
    else
        echo "$ac_t""no" 1>&6
        
echo $ac_n "checking for pthread_create in -lc_r""... $ac_c" 1>&6
echo "configure:12666: checking for pthread_create in -lc_r" >&5
echo "
    #include <pthread.h>
    #include <stdlib.h>
    void *foo(void *v) { int a = 1;  } 
    int main() { 
        pthread_t t;
        if (!pthread_create(&t, 0, &foo, 0)) {
            pthread_join(t, 0);
        }
        exit(0);
    }" > dummy.c ;
    echo "${CC-cc} -o dummy${ac_exeext} dummy.c $CFLAGS $CPPFLAGS -lc_r $LDFLAGS $LIBS" 1>&5;
    ${CC-cc} -o dummy${ac_exeext} dummy.c $CFLAGS $CPPFLAGS -lc_r $LDFLAGS $LIBS 2>&5;
    _res=$? ;
    rm -f dummy.c dummy${ac_exeext} ;
    if test "$_res" = "0"; then
        echo "$ac_t""yes" 1>&6
        USE_PTHREADS=1 _PTHREAD_LDFLAGS="-lc_r"
    else
        echo "$ac_t""no" 1>&6
        
echo $ac_n "checking for pthread_create in -lc""... $ac_c" 1>&6
echo "configure:12689: checking for pthread_create in -lc" >&5
echo "
    #include <pthread.h>
    #include <stdlib.h>
    void *foo(void *v) { int a = 1;  } 
    int main() { 
        pthread_t t;
        if (!pthread_create(&t, 0, &foo, 0)) {
            pthread_join(t, 0);
        }
        exit(0);
    }" > dummy.c ;
    echo "${CC-cc} -o dummy${ac_exeext} dummy.c $CFLAGS $CPPFLAGS -lc $LDFLAGS $LIBS" 1>&5;
    ${CC-cc} -o dummy${ac_exeext} dummy.c $CFLAGS $CPPFLAGS -lc $LDFLAGS $LIBS 2>&5;
    _res=$? ;
    rm -f dummy.c dummy${ac_exeext} ;
    if test "$_res" = "0"; then
        echo "$ac_t""yes" 1>&6
        USE_PTHREADS=1
                
    else
        echo "$ac_t""no" 1>&6
        
    fi

            
    fi

        
    fi

    
    fi

    ;;
esac

# Check whether --with-pthreads or --without-pthreads was given.
if test "${with_pthreads+set}" = set; then
  withval="$with_pthreads"
  if test "$withval" = "yes"; then
     if test "$USE_PTHREADS"x = x; then
    { echo "configure: error:  --with-pthreads specified for a system without pthread support " 1>&2; exit 1; };
fi
  elif test "$withval" = "no"; then
    USE_PTHREADS=
    _PTHREAD_LDFLAGS=

  else
    { echo "configure: error: Option, pthreads, does not take an argument ($withval)." 1>&2; exit 1; }
  fi
fi


if test "$USE_PTHREADS"x != x
then
				rm -f conftest*
	ac_cv_have_dash_pthread=no
	echo $ac_n "checking whether ${CC-cc} accepts -pthread""... $ac_c" 1>&6
echo "configure:12748: checking whether ${CC-cc} accepts -pthread" >&5
	echo 'int main() { return 0; }' | cat > conftest.c
	${CC-cc} -pthread -o conftest conftest.c > conftest.out 2>&1
	if test $? -eq 0; then
		if test -z "`egrep -i '(unrecognize|unknown)' conftest.out | grep pthread`" -a -z "`egrep -i '(error|incorrect)' conftest.out`" ; then
			ac_cv_have_dash_pthread=yes
	        case "$target_os" in
	        freebsd*)
# Freebsd doesn't use -pthread for compiles, it uses them for linking
                ;;
	        *)
			    CFLAGS="$CFLAGS -pthread"
			    CXXFLAGS="$CXXFLAGS -pthread"
                ;;
	        esac
		fi
	fi
	rm -f conftest*
    echo "$ac_t""$ac_cv_have_dash_pthread" 1>&6

			    ac_cv_have_dash_pthreads=no
    if test "$ac_cv_have_dash_pthread" = "no"; then
	    echo $ac_n "checking whether ${CC-cc} accepts -pthreads""... $ac_c" 1>&6
echo "configure:12771: checking whether ${CC-cc} accepts -pthreads" >&5
    	echo 'int main() { return 0; }' | cat > conftest.c
	    ${CC-cc} -pthreads -o conftest conftest.c > conftest.out 2>&1
    	if test $? -eq 0; then
	    	if test -z "`egrep -i '(unrecognize|unknown)' conftest.out | grep pthreads`" -a -z "`egrep -i '(error|incorrect)' conftest.out`" ; then
			    ac_cv_have_dash_pthreads=yes
			    CFLAGS="$CFLAGS -pthreads"
			    CXXFLAGS="$CXXFLAGS -pthreads"
		    fi
	    fi
	    rm -f conftest*
    	echo "$ac_t""$ac_cv_have_dash_pthreads" 1>&6
    fi

	case "$target" in
	    *-*-freebsd*)
			cat >> confdefs.pytmp <<\EOF
    (''' _REENTRANT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _REENTRANT 1
EOF

			cat >> confdefs.pytmp <<\EOF
    (''' _THREAD_SAFE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _THREAD_SAFE 1
EOF

						if test "$ac_cv_have_dash_pthread" = "yes"; then
				_PTHREAD_LDFLAGS="-pthread"
			fi
			;;

	    *-*-openbsd*|*-*-bsdi*)
			cat >> confdefs.pytmp <<\EOF
    (''' _REENTRANT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _REENTRANT 1
EOF

			cat >> confdefs.pytmp <<\EOF
    (''' _THREAD_SAFE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _THREAD_SAFE 1
EOF

						if test "$ac_cv_have_dash_pthread" = "yes"; then
                _PTHREAD_LDFLAGS="-pthread"
			fi
			;;

	    *-*-linux*|*-*-kfreebsd*-gnu|*-*-gnu*)
			cat >> confdefs.pytmp <<\EOF
    (''' _REENTRANT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _REENTRANT 1
EOF

			;;

	    *-aix4.3*|*-aix5*)
			cat >> confdefs.pytmp <<\EOF
    (''' _REENTRANT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _REENTRANT 1
EOF

			;;

	    *-hpux11.*)
			cat >> confdefs.pytmp <<\EOF
    (''' _REENTRANT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _REENTRANT 1
EOF

			;;

	    *-*-solaris*)
			cat >> confdefs.pytmp <<\EOF
    (''' _REENTRANT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _REENTRANT 1
EOF

			if test "$SOLARIS_SUNPRO_CC"; then
				CFLAGS="$CFLAGS -mt"
				CXXFLAGS="$CXXFLAGS -mt"
			fi
			;;
	esac
    LDFLAGS="${_PTHREAD_LDFLAGS} ${LDFLAGS}"
fi


if test $ac_cv_prog_gcc = yes; then
    echo $ac_n "checking whether ${CC-cc} needs -traditional""... $ac_c" 1>&6
echo "configure:12876: checking whether ${CC-cc} needs -traditional" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gcc_traditional'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    ac_pattern="Autoconf.*'x'"
  cat > conftest.$ac_ext <<EOF
#line 12882 "configure"
#include "confdefs.h"
#include <sgtty.h>
Autoconf TIOCGETP
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "$ac_pattern" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_prog_gcc_traditional=yes
else
  rm -rf conftest*
  ac_cv_prog_gcc_traditional=no
fi
rm -f conftest*


  if test $ac_cv_prog_gcc_traditional = no; then
    cat > conftest.$ac_ext <<EOF
#line 12900 "configure"
#include "confdefs.h"
#include <termio.h>
Autoconf TCGETA
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "$ac_pattern" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_prog_gcc_traditional=yes
fi
rm -f conftest*

  fi
fi

echo "$ac_t""$ac_cv_prog_gcc_traditional" 1>&6
  if test $ac_cv_prog_gcc_traditional = yes; then
    CC="$CC -traditional"
  fi
fi

echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
echo "configure:12922: checking for 8-bit clean memcmp" >&5
if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_func_memcmp_clean=no
else
  cat > conftest.$ac_ext <<EOF
#line 12930 "configure"
#include "confdefs.h"

main()
{
  char c0 = 0x40, c1 = 0x80, c2 = 0x81;
  exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
}

EOF
if { (eval echo configure:12940: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_memcmp_clean=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_memcmp_clean=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"

for ac_func in random strerror lchown fchmod snprintf memmove rint stat64 lstat64 truncate64 setbuf isatty
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:12960: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12965 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:12988: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

for ac_func in statvfs64 statvfs statfs64 statfs
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:13018: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13023 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:13046: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

for ac_func in flockfile getpagesize
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:13076: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13081 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:13104: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

for ac_func in localtime_r strtok_r
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:13134: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13139 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:13162: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


echo $ac_n "checking for clock_gettime(CLOCK_MONOTONIC)""... $ac_c" 1>&6
echo "configure:13191: checking for clock_gettime(CLOCK_MONOTONIC)" >&5
if eval "test \"`echo '$''{'ac_cv_clock_monotonic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  for libs in "" -lrt; do
                    _SAVE_LIBS="$LIBS"
                    LIBS="$LIBS $libs"
                    cat > conftest.$ac_ext <<EOF
#line 13199 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
 struct timespec ts;
                                   clock_gettime(CLOCK_MONOTONIC, &ts); 
; return 0; }
EOF
if { (eval echo configure:13207: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_clock_monotonic=$libs
                                 LIBS="$_SAVE_LIBS"
                                 break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_clock_monotonic=no
fi
rm -f conftest*
                    LIBS="$_SAVE_LIBS"
                done
fi

echo "$ac_t""$ac_cv_clock_monotonic" 1>&6
if test "$ac_cv_clock_monotonic" != "no"; then
    HAVE_CLOCK_MONOTONIC=1
    REALTIME_LIBS=$ac_cv_clock_monotonic
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_CLOCK_MONOTONIC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CLOCK_MONOTONIC 1
EOF

    
    
fi

if test -z "$MACOS_DEPLOYMENT_TARGET" || test "$MACOS_DEPLOYMENT_TARGET" -ge "100300"; then

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

echo $ac_n "checking for wcrtomb""... $ac_c" 1>&6
echo "configure:13248: checking for wcrtomb" >&5
if eval "test \"`echo '$''{'ac_cv_have_wcrtomb'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13253 "configure"
#include "confdefs.h"
#include <wchar.h>
int main() {
mbstate_t ps={0};wcrtomb(0,'f',&ps);
; return 0; }
EOF
if { (eval echo configure:13260: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_have_wcrtomb="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have_wcrtomb="no"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_have_wcrtomb" 1>&6
if test "$ac_cv_have_wcrtomb" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_WCRTOMB ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_WCRTOMB 1
EOF

fi
echo $ac_n "checking for mbrtowc""... $ac_c" 1>&6
echo "configure:13283: checking for mbrtowc" >&5
if eval "test \"`echo '$''{'ac_cv_have_mbrtowc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13288 "configure"
#include "confdefs.h"
#include <wchar.h>
int main() {
mbstate_t ps={0};mbrtowc(0,0,0,&ps);
; return 0; }
EOF
if { (eval echo configure:13295: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_have_mbrtowc="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have_mbrtowc="no"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_have_mbrtowc" 1>&6
if test "$ac_cv_have_mbrtowc" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_MBRTOWC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MBRTOWC 1
EOF

fi
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

fi

echo $ac_n "checking for res_ninit()""... $ac_c" 1>&6
echo "configure:13327: checking for res_ninit()" >&5
if eval "test \"`echo '$''{'ac_cv_func_res_ninit'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13332 "configure"
#include "confdefs.h"

        #ifdef linux
        #define _BSD_SOURCE 1
        #endif
        #include <resolv.h>
        
int main() {
int foo = res_ninit(&_res);
; return 0; }
EOF
if { (eval echo configure:13344: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_res_ninit=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_res_ninit=no
fi
rm -f conftest*
    
fi

echo "$ac_t""$ac_cv_func_res_ninit" 1>&6

if test "$ac_cv_func_res_ninit" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_RES_NINIT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_RES_NINIT 1
EOF

fi

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

echo $ac_n "checking for gnu_get_libc_version()""... $ac_c" 1>&6
echo "configure:13377: checking for gnu_get_libc_version()" >&5
if eval "test \"`echo '$''{'ac_cv_func_gnu_get_libc_version'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13382 "configure"
#include "confdefs.h"

        #ifdef HAVE_GNU_LIBC_VERSION_H
        #include <gnu/libc-version.h>
        #endif
        
int main() {
const char *glibc_version = gnu_get_libc_version();
; return 0; }
EOF
if { (eval echo configure:13393: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_gnu_get_libc_version=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_gnu_get_libc_version=no
        
fi
rm -f conftest*
    
fi

echo "$ac_t""$ac_cv_func_gnu_get_libc_version" 1>&6

if test "$ac_cv_func_gnu_get_libc_version" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_GNU_GET_LIBC_VERSION ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_GNU_GET_LIBC_VERSION 1
EOF

fi

case $target_os in
    darwin*|mingw*|os2*)
        ;;
    *)

echo $ac_n "checking for iconv in -lc""... $ac_c" 1>&6
echo "configure:13425: checking for iconv in -lc" >&5
ac_lib_var=`echo c'_'iconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 13433 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {
iconv()
; return 0; }
EOF
if { (eval echo configure:13447: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  _ICONV_LIBS="$_ICONV_LIBS"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for iconv in -liconv""... $ac_c" 1>&6
echo "configure:13466: checking for iconv in -liconv" >&5
ac_lib_var=`echo iconv'_'iconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-liconv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 13474 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {
iconv()
; return 0; }
EOF
if { (eval echo configure:13488: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  _ICONV_LIBS="$_ICONV_LIBS -liconv"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for libiconv in -liconv""... $ac_c" 1>&6
echo "configure:13507: checking for libiconv in -liconv" >&5
ac_lib_var=`echo iconv'_'libiconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-liconv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 13515 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char libiconv();

int main() {
libiconv()
; return 0; }
EOF
if { (eval echo configure:13529: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  _ICONV_LIBS="$_ICONV_LIBS -liconv"
else
  echo "$ac_t""no" 1>&6
fi

fi

fi

_SAVE_LIBS=$LIBS
LIBS="$LIBS $_ICONV_LIBS"
echo $ac_n "checking for iconv()""... $ac_c" 1>&6
echo "configure:13556: checking for iconv()" >&5
if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13561 "configure"
#include "confdefs.h"

        #include <stdlib.h>
        #include <iconv.h>
        
int main() {

            iconv_t h = iconv_open("", "");
            iconv(h, NULL, NULL, NULL, NULL);
            iconv_close(h);
        
; return 0; }
EOF
if { (eval echo configure:13575: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_iconv=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_iconv=no
        
fi
rm -f conftest*
    
fi

echo "$ac_t""$ac_cv_func_iconv" 1>&6
if test "$ac_cv_func_iconv" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_ICONV ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ICONV 1
EOF

    DYNAMIC_XPCOM_LIBS="$DYNAMIC_XPCOM_LIBS $_ICONV_LIBS"
    LIBXUL_LIBS="$LIBXUL_LIBS $_ICONV_LIBS"
    LIBICONV="$_ICONV_LIBS"
    echo $ac_n "checking for iconv() with const input""... $ac_c" 1>&6
echo "configure:13602: checking for iconv() with const input" >&5
if eval "test \"`echo '$''{'ac_cv_func_const_iconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13607 "configure"
#include "confdefs.h"

            #include <stdlib.h>
            #include <iconv.h>
            
int main() {

                const char *input = "testing";
                iconv_t h = iconv_open("", "");
                iconv(h, &input, NULL, NULL, NULL);
                iconv_close(h);
            
; return 0; }
EOF
if { (eval echo configure:13622: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_func_const_iconv=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_const_iconv=no
            
fi
rm -f conftest*
        
fi

echo "$ac_t""$ac_cv_func_const_iconv" 1>&6
    if test "$ac_cv_func_const_iconv" = "yes"; then
        cat >> confdefs.pytmp <<\EOF
    (''' HAVE_ICONV_WITH_CONST_INPUT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ICONV_WITH_CONST_INPUT 1
EOF

    fi
fi
LIBS=$_SAVE_LIBS

    ;;
esac


  echo $ac_n "checking for nl_langinfo and CODESET""... $ac_c" 1>&6
echo "configure:13654: checking for nl_langinfo and CODESET" >&5
if eval "test \"`echo '$''{'am_cv_langinfo_codeset'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13659 "configure"
#include "confdefs.h"
#include <langinfo.h>
int main() {
char* cs = nl_langinfo(CODESET);
; return 0; }
EOF
if { (eval echo configure:13666: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  am_cv_langinfo_codeset=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  am_cv_langinfo_codeset=no
fi
rm -f conftest*
    
fi

echo "$ac_t""$am_cv_langinfo_codeset" 1>&6
  if test $am_cv_langinfo_codeset = yes; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_LANGINFO_CODESET ''', r''' 1 ''')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_LANGINFO_CODESET 1
EOF

      HAVE_LANGINFO_CODESET=1
  fi


ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


echo $ac_n "checking for an implementation of va_copy()""... $ac_c" 1>&6
echo "configure:13701: checking for an implementation of va_copy()" >&5
if eval "test \"`echo '$''{'ac_cv_va_copy'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  ac_cv_va_copy=no
    
else
  cat > conftest.$ac_ext <<EOF
#line 13711 "configure"
#include "confdefs.h"

        #include <stdarg.h>
        void f (int i, ...) {
            va_list args1, args2;
            va_start (args1, i);
            va_copy (args2, args1);
            if (va_arg (args2, int) != 42 || va_arg (args1, int) != 42)
                exit (1);
            va_end (args1); va_end (args2);
        }
        int main() { f (0, 42); return 0; }
EOF
if { (eval echo configure:13725: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_va_copy=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_va_copy=no
fi
rm -fr conftest*
fi


fi

echo "$ac_t""$ac_cv_va_copy" 1>&6
echo $ac_n "checking for an implementation of __va_copy()""... $ac_c" 1>&6
echo "configure:13742: checking for an implementation of __va_copy()" >&5
if eval "test \"`echo '$''{'ac_cv___va_copy'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  ac_cv___va_copy=no
    
else
  cat > conftest.$ac_ext <<EOF
#line 13752 "configure"
#include "confdefs.h"

        #include <stdarg.h>
        void f (int i, ...) {
            va_list args1, args2;
            va_start (args1, i);
            __va_copy (args2, args1);
            if (va_arg (args2, int) != 42 || va_arg (args1, int) != 42)
                exit (1);
            va_end (args1); va_end (args2);
        }
        int main() { f (0, 42); return 0; }
EOF
if { (eval echo configure:13766: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv___va_copy=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv___va_copy=no
fi
rm -fr conftest*
fi


fi

echo "$ac_t""$ac_cv___va_copy" 1>&6
echo $ac_n "checking whether va_lists can be copied by value""... $ac_c" 1>&6
echo "configure:13783: checking whether va_lists can be copied by value" >&5
if eval "test \"`echo '$''{'ac_cv_va_val_copy'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  ac_cv_va_val_copy=yes
    
else
  cat > conftest.$ac_ext <<EOF
#line 13793 "configure"
#include "confdefs.h"

        #include <stdarg.h>
        void f (int i, ...) {
            va_list args1, args2;
            va_start (args1, i);
            args2 = args1;
            if (va_arg (args2, int) != 42 || va_arg (args1, int) != 42)
                exit (1);
            va_end (args1); va_end (args2);
        }
        int main() { f (0, 42); return 0; }
EOF
if { (eval echo configure:13807: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_va_val_copy=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_va_val_copy=no
fi
rm -fr conftest*
fi


fi

if test "x$ac_cv_va_copy" = "xyes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' VA_COPY ''', r''' va_copy ''')
EOF
cat >> confdefs.h <<\EOF
#define VA_COPY va_copy
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_VA_COPY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_VA_COPY 1
EOF

elif test "x$ac_cv___va_copy" = "xyes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' VA_COPY ''', r''' __va_copy ''')
EOF
cat >> confdefs.h <<\EOF
#define VA_COPY __va_copy
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_VA_COPY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_VA_COPY 1
EOF

fi

if test "x$ac_cv_va_val_copy" = "xno"; then
   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_VA_LIST_AS_ARRAY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_VA_LIST_AS_ARRAY 1
EOF

fi
echo "$ac_t""$ac_cv_va_val_copy" 1>&6

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross


ARM_ABI_PREFIX=
if test "$GNU_CC"; then
  if test "$CPU_ARCH" = "arm" ; then
    echo $ac_n "checking for ARM EABI""... $ac_c" 1>&6
echo "configure:13877: checking for ARM EABI" >&5
if eval "test \"`echo '$''{'ac_cv_gcc_arm_eabi'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13882 "configure"
#include "confdefs.h"

int main() {

#if defined(__ARM_EABI__)
  return 0;
#else
#error Not ARM EABI.
#endif
                        
; return 0; }
EOF
if { (eval echo configure:13895: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_gcc_arm_eabi="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_gcc_arm_eabi="no"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_gcc_arm_eabi" 1>&6
    if test "$ac_cv_gcc_arm_eabi" = "yes"; then
        HAVE_ARM_EABI=1
        ARM_ABI_PREFIX=eabi-
    else
        ARM_ABI_PREFIX=oabi-
    fi
  fi

  TARGET_COMPILER_ABI="${TARGET_COMPILER_ABI-${ARM_ABI_PREFIX}gcc3}"
fi

echo $ac_n "checking for modern C++ template specialization syntax support""... $ac_c" 1>&6
echo "configure:13920: checking for modern C++ template specialization syntax support" >&5
if eval "test \"`echo '$''{'ac_cv_cpp_modern_specialize_template_syntax'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13925 "configure"
#include "confdefs.h"
template <class T> struct X { int a; };
                               class Y {};
                               template <> struct X<Y> { double a; };
int main() {
X<int> int_x;
                               X<Y> y_x;
; return 0; }
EOF
if { (eval echo configure:13935: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_cpp_modern_specialize_template_syntax=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_cpp_modern_specialize_template_syntax=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_cpp_modern_specialize_template_syntax" 1>&6
if test "$ac_cv_cpp_modern_specialize_template_syntax" = no ; then
  { echo "configure: error: The C++ compiler does not support template specialization" 1>&2; exit 1; }
fi

echo $ac_n "checking whether partial template specialization works""... $ac_c" 1>&6
echo "configure:13953: checking whether partial template specialization works" >&5
if eval "test \"`echo '$''{'ac_cv_cpp_partial_specialization'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13958 "configure"
#include "confdefs.h"
template <class T> class Foo {};
                               template <class T> class Foo<T*> {};
int main() {
return 0;
; return 0; }
EOF
if { (eval echo configure:13966: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_cpp_partial_specialization=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_cpp_partial_specialization=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_cpp_partial_specialization" 1>&6
if test "$ac_cv_cpp_partial_specialization" = yes ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_CPP_PARTIAL_SPECIALIZATION ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CPP_PARTIAL_SPECIALIZATION 1
EOF

fi

echo $ac_n "checking whether the C++ \"using\" keyword resolves ambiguity""... $ac_c" 1>&6
echo "configure:13990: checking whether the C++ \"using\" keyword resolves ambiguity" >&5
if eval "test \"`echo '$''{'ac_cv_cpp_ambiguity_resolving_using'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13995 "configure"
#include "confdefs.h"
class X {
                                 public: int go(const X&) {return 3;}
                                         int jo(const X&) {return 3;}
                               };
                               class Y : public X {
                                 public:  int go(int) {return 2;}
                                          int jo(int) {return 2;}
                                          using X::jo;
                                 private: using X::go;
                               };
int main() {
X x; Y y; y.jo(x);
; return 0; }
EOF
if { (eval echo configure:14011: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_cpp_ambiguity_resolving_using=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_cpp_ambiguity_resolving_using=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_cpp_ambiguity_resolving_using" 1>&6
if test "$ac_cv_cpp_ambiguity_resolving_using" = yes ; then
   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_CPP_AMBIGUITY_RESOLVING_USING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CPP_AMBIGUITY_RESOLVING_USING 1
EOF

fi

echo $ac_n "checking for C++ dynamic_cast to void*""... $ac_c" 1>&6
echo "configure:14035: checking for C++ dynamic_cast to void*" >&5
if eval "test \"`echo '$''{'ac_cv_cpp_dynamic_cast_void_ptr'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_cpp_dynamic_cast_void_ptr=no
else
  cat > conftest.$ac_ext <<EOF
#line 14043 "configure"
#include "confdefs.h"
#ifdef __cplusplus
extern "C" void exit(int);
#endif
class X { int i; public: virtual ~X() { } };
                            class Y { int j; public: virtual ~Y() { } };
                            class Z : public X, public Y { int k; };

                            int main() {
                                 Z mdo;
                                 X *subx = (X*)&mdo;
                                 Y *suby = (Y*)&mdo;
                                 return !((((void*)&mdo != (void*)subx) &&
                                           ((void*)&mdo == dynamic_cast<void*>(subx))) ||
                                          (((void*)&mdo != (void*)suby) &&
                                           ((void*)&mdo == dynamic_cast<void*>(suby))));
                            }
EOF
if { (eval echo configure:14062: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_cpp_dynamic_cast_void_ptr=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_cpp_dynamic_cast_void_ptr=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_cpp_dynamic_cast_void_ptr" 1>&6
if test "$ac_cv_cpp_dynamic_cast_void_ptr" = yes ; then
   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_CPP_DYNAMIC_CAST_TO_VOID_PTR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CPP_DYNAMIC_CAST_TO_VOID_PTR 1
EOF

fi


echo $ac_n "checking whether C++ requires implementation of unused virtual methods""... $ac_c" 1>&6
echo "configure:14089: checking whether C++ requires implementation of unused virtual methods" >&5
if eval "test \"`echo '$''{'ac_cv_cpp_unused_required'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14094 "configure"
#include "confdefs.h"
class X {private: virtual void never_called();};
int main() {
X x;
; return 0; }
EOF
if { (eval echo configure:14101: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_cpp_unused_required=no
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_cpp_unused_required=yes
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_cpp_unused_required" 1>&6
if test "$ac_cv_cpp_unused_required" = yes ; then
   cat >> confdefs.pytmp <<\EOF
    (''' NEED_CPP_UNUSED_IMPLEMENTATIONS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NEED_CPP_UNUSED_IMPLEMENTATIONS 1
EOF

fi



echo $ac_n "checking for trouble comparing to zero near std::operator!=()""... $ac_c" 1>&6
echo "configure:14127: checking for trouble comparing to zero near std::operator!=()" >&5
if eval "test \"`echo '$''{'ac_cv_trouble_comparing_to_zero'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14132 "configure"
#include "confdefs.h"
#include <algorithm>
                                template <class T> class Foo {};
                                class T2;
                                template <class T> int operator==(const T2*, const T&) { return 0; }
                                template <class T> int operator!=(const T2*, const T&) { return 0; }
int main() {
Foo<int> f; return (0 != f);
; return 0; }
EOF
if { (eval echo configure:14143: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_trouble_comparing_to_zero=no
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_trouble_comparing_to_zero=yes
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_trouble_comparing_to_zero" 1>&6
if test "$ac_cv_trouble_comparing_to_zero" = yes ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_CPP_TROUBLE_COMPARING_TO_ZERO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CPP_TROUBLE_COMPARING_TO_ZERO 1
EOF

fi

# try harder, when checking for __thread support, see bug 521750 comment #33 and below
# We pass MOZ_OPTIMIZE_LDFLAGS to the linker because if dead_strip is
# enabled, the linker in xcode 4.1 will crash. Without this it would crash when
# linking XUL.
_SAVE_LDFLAGS=$LDFLAGS
LDFLAGS="$LDFLAGS $DSO_PIC_CFLAGS $DSO_LDOPTS $MOZ_OPTIMIZE_LDFLAGS"
echo $ac_n "checking for __thread keyword for TLS variables""... $ac_c" 1>&6
echo "configure:14173: checking for __thread keyword for TLS variables" >&5
if eval "test \"`echo '$''{'ac_cv_thread_keyword'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14178 "configure"
#include "confdefs.h"
__thread bool tlsIsMainThread = false;
int main() {
return tlsIsMainThread;
; return 0; }
EOF
if { (eval echo configure:14185: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_thread_keyword=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_thread_keyword=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_thread_keyword" 1>&6
LDFLAGS=$_SAVE_LDFLAGS
# The custom dynamic linker doesn't support TLS variables
MOZ_TLS=
if test "$ac_cv_thread_keyword" = yes -a "$MOZ_LINKER" != 1; then
  # mips builds fail with TLS variables because of a binutils bug.
  # See bug 528687
  # OpenBSD doesn't have TLS support, and the test succeeds with clang++
  case "${target}" in
    mips*-*)
      :
      ;;
    *-android*|*-linuxandroid*)
      :
      ;;
    *-openbsd*)
      :
      ;;
    *)
      cat >> confdefs.pytmp <<\EOF
    (''' HAVE_THREAD_TLS_KEYWORD ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_THREAD_TLS_KEYWORD 1
EOF

      MOZ_TLS=1
      ;;
  esac
fi

if test -n "$MOZ_LINKER"; then
  if test "$CPU_ARCH" = arm; then
        ARM_ARCH=`${CC-cc} ${CFLAGS} -dM -E - < /dev/null | sed -n 's/.*__ARM_ARCH_\([0-9]*\).*/\1/p'`
        if test -n "$ARM_ARCH" && test "$ARM_ARCH" -lt 7; then
      LDFLAGS="$LDFLAGS -Wl,-z,max-page-size=0x4000"
      _SUBDIR_LDFLAGS="$_SUBDIR_LDFLAGS -Wl,-z,max-page-size=0x4000"
    fi
  fi
fi

if test -n "$MOZ_LINKER" -a -z "$MOZ_OLD_LINKER" -a "$OS_TARGET" = "Android"; then
  echo $ac_n "checking whether the CRT objects have text relocations""... $ac_c" 1>&6
echo "configure:14240: checking whether the CRT objects have text relocations" >&5
if eval "test \"`echo '$''{'ac_cv_crt_has_text_relocations'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'int foo() { return 0; }' > conftest.cpp
     if { ac_try='${CXX-g++} -o conftest${DLL_SUFFIX} $CXXFLAGS $DSO_LDOPTS $LDFLAGS conftest.cpp $LIBS 1>&5'; { (eval echo configure:14245: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } &&
        test -s conftest${DLL_SUFFIX}; then
       if ${TOOLCHAIN_PREFIX}readelf -d conftest${DLL_SUFFIX} | grep TEXTREL > /dev/null; then
         ac_cv_crt_has_text_relocations=yes
       else
         ac_cv_crt_has_text_relocations=no
       fi
     else
       { echo "configure: error: couldn't compile a simple C file" 1>&2; exit 1; }
     fi
     rm -rf conftest*
fi

echo "$ac_t""$ac_cv_crt_has_text_relocations" 1>&6
  if test "$ac_cv_crt_has_text_relocations" = yes; then
                            DSO_LDOPTS="$DSO_LDOPTS -nostartfiles"
    NSPR_LDFLAGS="$NSPR_LDFLAGS -nostartfiles"
  fi
fi


MALLOC_HEADERS="malloc.h malloc_np.h malloc/malloc.h sys/malloc.h"
MALLOC_H=

for file in $MALLOC_HEADERS; do
     ac_safe=`echo "$file" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $file""... $ac_c" 1>&6
echo "configure:14272: checking for $file" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 14277 "configure"
#include "confdefs.h"

#include <$file>
int main() {

; return 0; }
EOF
if { (eval echo configure:14285: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    MALLOC_H=$file
  else
    echo "$ac_t""no" 1>&6
    
  fi

  if test "$MALLOC_H" != ""; then
    cat >> confdefs.pytmp <<EOF
    (''' MALLOC_H ''', r''' <$MALLOC_H> ''')
EOF
cat >> confdefs.h <<EOF
#define MALLOC_H <$MALLOC_H>
EOF

    break
  fi
done

MOZ_ALLOCATING_FUNCS="strndup posix_memalign memalign valloc"
for ac_func in strndup posix_memalign memalign valloc
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:14321: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14326 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:14352: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


for ac_func in malloc_usable_size
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:14383: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14388 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:14414: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



echo $ac_n "checking for __attribute__((always_inline))""... $ac_c" 1>&6
echo "configure:14444: checking for __attribute__((always_inline))" >&5
if eval "test \"`echo '$''{'ac_cv_attribute_always_inline'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14449 "configure"
#include "confdefs.h"
inline void f(void) __attribute__((always_inline));
int main() {

; return 0; }
EOF
if { (eval echo configure:14456: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_attribute_always_inline=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_attribute_always_inline=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_attribute_always_inline" 1>&6

echo $ac_n "checking for __attribute__((malloc))""... $ac_c" 1>&6
echo "configure:14471: checking for __attribute__((malloc))" >&5
if eval "test \"`echo '$''{'ac_cv_attribute_malloc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14476 "configure"
#include "confdefs.h"
void* f(int) __attribute__((malloc));
int main() {

; return 0; }
EOF
if { (eval echo configure:14483: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_attribute_malloc=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_attribute_malloc=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_attribute_malloc" 1>&6

echo $ac_n "checking for __attribute__((warn_unused_result))""... $ac_c" 1>&6
echo "configure:14498: checking for __attribute__((warn_unused_result))" >&5
if eval "test \"`echo '$''{'ac_cv_attribute_warn_unused'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14503 "configure"
#include "confdefs.h"
int f(void) __attribute__((warn_unused_result));
int main() {

; return 0; }
EOF
if { (eval echo configure:14510: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_attribute_warn_unused=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_attribute_warn_unused=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_attribute_warn_unused" 1>&6

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross



echo $ac_n "checking for LC_MESSAGES""... $ac_c" 1>&6
echo "configure:14534: checking for LC_MESSAGES" >&5
if eval "test \"`echo '$''{'ac_cv_i18n_lc_messages'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14539 "configure"
#include "confdefs.h"
#include <locale.h>
int main() {
int category = LC_MESSAGES;
; return 0; }
EOF
if { (eval echo configure:14546: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_i18n_lc_messages=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_i18n_lc_messages=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_i18n_lc_messages" 1>&6
if test "$ac_cv_i18n_lc_messages" = yes; then
   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_I18N_LC_MESSAGES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_I18N_LC_MESSAGES 1
EOF

fi

for ac_func in localeconv
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:14572: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14577 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:14600: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

fi # ! SKIP_COMPILER_CHECKS

TARGET_XPCOM_ABI=
if test -n "${CPU_ARCH}" -a -n "${TARGET_COMPILER_ABI}"; then
    TARGET_XPCOM_ABI="${CPU_ARCH}-${TARGET_COMPILER_ABI}"
fi


if test "$ac_cv_attribute_malloc" = yes ; then
  cat >> confdefs.pytmp <<\EOF
    (''' NS_ATTR_MALLOC ''', r''' __attribute__((malloc)) ''')
EOF
cat >> confdefs.h <<\EOF
#define NS_ATTR_MALLOC __attribute__((malloc))
EOF

else
  cat >> confdefs.pytmp <<\EOF
    (''' NS_ATTR_MALLOC ''', r'''  ''')
EOF
cat >> confdefs.h <<\EOF
#define NS_ATTR_MALLOC 
EOF

fi

if test "$ac_cv_attribute_warn_unused" = yes ; then
  cat >> confdefs.pytmp <<\EOF
    (''' NS_WARN_UNUSED_RESULT ''', r''' __attribute__((warn_unused_result)) ''')
EOF
cat >> confdefs.h <<\EOF
#define NS_WARN_UNUSED_RESULT __attribute__((warn_unused_result))
EOF

else
  cat >> confdefs.pytmp <<\EOF
    (''' NS_WARN_UNUSED_RESULT ''', r'''  ''')
EOF
cat >> confdefs.h <<\EOF
#define NS_WARN_UNUSED_RESULT 
EOF

fi


if test -n "$SKIP_COMPILER_CHECKS"; then
      cat >> confdefs.pytmp <<\EOF
    (''' MALLOC_H ''', r''' <malloc.h> ''')
EOF
cat >> confdefs.h <<\EOF
#define MALLOC_H <malloc.h>
EOF

   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_FORCEINLINE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_FORCEINLINE 1
EOF

   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_LOCALECONV ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_LOCALECONV 1
EOF

fi # SKIP_COMPILER_CHECKS

# External Packages

# Check whether --with-libxul-sdk or --without-libxul-sdk was given.
if test "${with_libxul_sdk+set}" = set; then
  withval="$with_libxul_sdk"
  LIBXUL_SDK_DIR=$withval
fi


if test "$LIBXUL_SDK_DIR" = "yes"; then
    { echo "configure: error: --with-libxul-sdk must specify a path" 1>&2; exit 1; }
elif test -n "$LIBXUL_SDK_DIR" -a "$LIBXUL_SDK_DIR" != "no"; then
    LIBXUL_SDK=`cd "$LIBXUL_SDK_DIR" && pwd`

    if test ! -f "$LIBXUL_SDK/include/xpcom-config.h"; then
        { echo "configure: error: $LIBXUL_SDK/include/xpcom-config.h doesn't exist" 1>&2; exit 1; }
    fi

fi


if test -n "$LIBXUL_SDK"; then
    LIBXUL_DIST="$LIBXUL_SDK"
else
    LIBXUL_DIST="$MOZ_BUILD_ROOT/dist"
fi


SYSTEM_LIBXUL=

# Check whether --with-system-libxul or --without-system-libxul was given.
if test "${with_system_libxul+set}" = set; then
  withval="$with_system_libxul"
  if test "$withval" = "yes"; then
    SYSTEM_LIBXUL=1
  elif test "$withval" = "no"; then
    :
  else
    { echo "configure: error: Option, system-libxul, does not take an argument ($withval)." 1>&2; exit 1; }
  fi
fi


# Check whether --with-system-nspr or --without-system-nspr was given.
if test "${with_system_nspr+set}" = set; then
  withval="$with_system_nspr"
  if test "$withval" = "yes"; then
    _USE_SYSTEM_NSPR=1 
  elif test "$withval" = "no"; then
    :
  else
    { echo "configure: error: Option, system-nspr, does not take an argument ($withval)." 1>&2; exit 1; }
  fi
fi


if test -n "$_USE_SYSTEM_NSPR"; then
    
# Check whether --with-nspr-prefix or --without-nspr-prefix was given.
if test "${with_nspr_prefix+set}" = set; then
  withval="$with_nspr_prefix"
  nspr_config_prefix="$withval"
else
  nspr_config_prefix=""
fi


# Check whether --with-nspr-exec-prefix or --without-nspr-exec-prefix was given.
if test "${with_nspr_exec_prefix+set}" = set; then
  withval="$with_nspr_exec_prefix"
  nspr_config_exec_prefix="$withval"
else
  nspr_config_exec_prefix=""
fi


	if test -n "$nspr_config_exec_prefix"; then
		nspr_config_args="$nspr_config_args --exec-prefix=$nspr_config_exec_prefix"
		if test -z "$NSPR_CONFIG"; then
			NSPR_CONFIG=$nspr_config_exec_prefix/bin/nspr-config
		fi
	fi
	if test -n "$nspr_config_prefix"; then
		nspr_config_args="$nspr_config_args --prefix=$nspr_config_prefix"
		if test -z "$NSPR_CONFIG"; then
			NSPR_CONFIG=$nspr_config_prefix/bin/nspr-config
		fi
	fi

	unset ac_cv_path_NSPR_CONFIG
	# Extract the first word of "nspr-config", so it can be a program name with args.
set dummy nspr-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:14789: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_NSPR_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$NSPR_CONFIG" in
  /*)
  ac_cv_path_NSPR_CONFIG="$NSPR_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_NSPR_CONFIG="$NSPR_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_NSPR_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_NSPR_CONFIG" && ac_cv_path_NSPR_CONFIG="no"
  ;;
esac
fi
NSPR_CONFIG="$ac_cv_path_NSPR_CONFIG"
if test -n "$NSPR_CONFIG"; then
  echo "$ac_t""$NSPR_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

	min_nspr_version=4.9.4
	echo $ac_n "checking for NSPR - version >= $min_nspr_version""... $ac_c" 1>&6
echo "configure:14824: checking for NSPR - version >= $min_nspr_version" >&5

	no_nspr=""
	if test "$NSPR_CONFIG" != "no"; then
		NSPR_CFLAGS=`$NSPR_CONFIG $nspr_config_args --cflags`
		NSPR_LIBS=`$NSPR_CONFIG $nspr_config_args --libs`
		NSPR_VERSION_STRING=`$NSPR_CONFIG $nspr_config_args --version`	
	elif test -n "${NO_NSPR_CONFIG_SYSTEM_VERSION}"; then
	    NSPR_CFLAGS="${NO_NSPR_CONFIG_SYSTEM_CFLAGS}"
		NSPR_LIBS="${NO_NSPR_CONFIG_SYSTEM_LDFLAGS}"
		NSPR_VERSION_STRING="$NO_NSPR_CONFIG_SYSTEM_VERSION"
	else
	    no_nspr="yes"
	fi

	if test -z "$no_nspr"; then
		nspr_config_major_version=`echo $NSPR_VERSION_STRING | \
			sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\1/'`
		nspr_config_minor_version=`echo $NSPR_VERSION_STRING | \
			sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\2/'`
		nspr_config_micro_version=`echo $NSPR_VERSION_STRING | \
			sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\3/'`
		min_nspr_major_version=`echo $min_nspr_version | \
			sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\1/'`
		min_nspr_minor_version=`echo $min_nspr_version | \
			sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\2/'`
		min_nspr_micro_version=`echo $min_nspr_version | \
			sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\3/'`
		if test "$nspr_config_major_version" -ne "$min_nspr_major_version"; then
			no_nspr="yes"
		elif test "$nspr_config_major_version" -eq "$min_nspr_major_version" &&
		     test "$nspr_config_minor_version" -lt "$min_nspr_minor_version"; then
			no_nspr="yes"
		elif test "$nspr_config_major_version" -eq "$min_nspr_major_version" &&
		     test "$nspr_config_minor_version" -eq "$min_nspr_minor_version" &&
		     test "$nspr_config_micro_version" -lt "$min_nspr_micro_version"; then
			no_nspr="yes"
		fi
	fi

	if test -z "$no_nspr"; then
		echo "$ac_t""yes" 1>&6
		MOZ_NATIVE_NSPR=1     
	else
		echo "$ac_t""no" 1>&6
		{ echo "configure: error: your don't have NSPR installed or your version is too old" 1>&2; exit 1; }
	fi


	
	


fi

if test -n "$MOZ_NATIVE_NSPR"; then
    _SAVE_CFLAGS=$CFLAGS
    CFLAGS="$CFLAGS $NSPR_CFLAGS"
    cat > conftest.$ac_ext <<EOF
#line 14883 "configure"
#include "confdefs.h"
#include "prtypes.h"
int main() {
#ifndef PR_STATIC_ASSERT
                 #error PR_STATIC_ASSERT not defined or requires including prtypes.h
                 #endif
; return 0; }
EOF
if { (eval echo configure:14892: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  MOZ_NATIVE_NSPR=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: system NSPR does not support PR_STATIC_ASSERT or including prtypes.h does not provide it" 1>&2; exit 1; }
fi
rm -f conftest*
    cat > conftest.$ac_ext <<EOF
#line 14903 "configure"
#include "confdefs.h"
#include "prtypes.h"
int main() {
#ifndef PR_UINT64
                 #error PR_UINT64 not defined or requires including prtypes.h
                 #endif
; return 0; }
EOF
if { (eval echo configure:14912: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  MOZ_NATIVE_NSPR=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: system NSPR does not support PR_UINT64 or including prtypes.h does not provide it" 1>&2; exit 1; }
fi
rm -f conftest*
    CFLAGS=$_SAVE_CFLAGS
else
    if test -z "$LIBXUL_SDK"; then
        NSPR_CFLAGS="-I${LIBXUL_DIST}/include/nspr"
        if test -n "$GNU_CC"; then
            NSPR_LIBS="-L${LIBXUL_DIST}/lib -lnspr${NSPR_VERSION} -lplc${NSPR_VERSION} -lplds${NSPR_VERSION}"
        else
            NSPR_LIBS="${LIBXUL_DIST}/lib/nspr${NSPR_VERSION}.lib ${LIBXUL_DIST}/lib/plc${NSPR_VERSION}.lib ${LIBXUL_DIST}/lib/plds${NSPR_VERSION}.lib "
        fi
    else
        NSPR_CFLAGS=`"${LIBXUL_DIST}"/sdk/bin/nspr-config --prefix="${LIBXUL_DIST}" --includedir="${LIBXUL_DIST}/include/nspr" --cflags`
        NSPR_LIBS=`"${LIBXUL_DIST}"/sdk/bin/nspr-config --prefix="${LIBXUL_DIST}" --libdir="${LIBXUL_DIST}"/lib --libs`
    fi
fi

if test -n "$LIBXUL_SDK"; then
    GRE_MILESTONE=`$PYTHON "$_topsrcdir"/config/printconfigsetting.py "$LIBXUL_DIST"/bin/platform.ini Build Milestone`
else
    GRE_MILESTONE=`tail -n 1 "$_topsrcdir"/config/milestone.txt 2>/dev/null || tail -1 "$_topsrcdir"/config/milestone.txt`
fi


# Check whether --with-system-libevent or --without-system-libevent was given.
if test "${with_system_libevent+set}" = set; then
  withval="$with_system_libevent"
  LIBEVENT_DIR=$withval
fi


_SAVE_CFLAGS=$CFLAGS
_SAVE_LDFLAGS=$LDFLAGS
_SAVE_LIBS=$LIBS
if test "$LIBEVENT_DIR" = yes; then
    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:14961: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libevent""... $ac_c" 1>&6
echo "configure:15005: checking for libevent" >&5

        if $PKG_CONFIG --exists "libevent" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_LIBEVENT_CFLAGS""... $ac_c" 1>&6
echo "configure:15012: checking MOZ_LIBEVENT_CFLAGS" >&5
            MOZ_LIBEVENT_CFLAGS=`$PKG_CONFIG --cflags "libevent"`
            echo "$ac_t""$MOZ_LIBEVENT_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_LIBEVENT_LIBS""... $ac_c" 1>&6
echo "configure:15017: checking MOZ_LIBEVENT_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_LIBEVENT_LIBS="`$PKG_CONFIG --libs \"libevent\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_LIBEVENT_LIBS" 1>&6
        else
            MOZ_LIBEVENT_CFLAGS=""
            MOZ_LIBEVENT_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_LIBEVENT_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libevent"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     MOZ_NATIVE_LIBEVENT=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       LIBEVENT_DIR=/usr
     fi
  fi

fi
if test -z "$LIBEVENT_DIR" -o "$LIBEVENT_DIR" = no; then
    MOZ_NATIVE_LIBEVENT=
elif test -z "$MOZ_NATIVE_LIBEVENT"; then
    CFLAGS="-I${LIBEVENT_DIR}/include $CFLAGS"
    LDFLAGS="-L${LIBEVENT_DIR}/lib $LDFLAGS"
       ac_safe=`echo "event.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for event.h""... $ac_c" 1>&6
echo "configure:15054: checking for event.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 15059 "configure"
#include "confdefs.h"

#include <event.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:15067: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    if test ! -f "${LIBEVENT_DIR}/include/event.h"; then
             { echo "configure: error: event.h found, but is not in ${LIBEVENT_DIR}/include" 1>&2; exit 1; }
         fi
  else
    echo "$ac_t""no" 1>&6
    { echo "configure: error: --with-system-libevent requested but event.h not found" 1>&2; exit 1; }
  fi

    echo $ac_n "checking for event_init in -levent""... $ac_c" 1>&6
echo "configure:15090: checking for event_init in -levent" >&5
ac_lib_var=`echo event'_'event_init | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-levent  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15098 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char event_init();

int main() {
event_init()
; return 0; }
EOF
if { (eval echo configure:15109: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MOZ_NATIVE_LIBEVENT=1
                  MOZ_LIBEVENT_CFLAGS="-I${LIBEVENT_DIR}/include"
                  MOZ_LIBEVENT_LIBS="-L${LIBEVENT_DIR}/lib -levent"
else
  echo "$ac_t""no" 1>&6
MOZ_NATIVE_LIBEVENT= MOZ_LIBEVENT_CFLAGS= MOZ_LIBEVENT_LIBS=
fi

fi
CFLAGS=$_SAVE_CFLAGS
LDFLAGS=$_SAVE_LDFLAGS
LIBS=$_SAVE_LIBS






# Check whether --with-system-nss or --without-system-nss was given.
if test "${with_system_nss+set}" = set; then
  withval="$with_system_nss"
  if test "$withval" = "yes"; then
    _USE_SYSTEM_NSS=1 
  elif test "$withval" = "no"; then
    :
  else
    { echo "configure: error: Option, system-nss, does not take an argument ($withval)." 1>&2; exit 1; }
  fi
fi


if test -n "$_USE_SYSTEM_NSS"; then
    
# Check whether --with-nss-prefix or --without-nss-prefix was given.
if test "${with_nss_prefix+set}" = set; then
  withval="$with_nss_prefix"
  nss_config_prefix="$withval"
else
  nss_config_prefix=""
fi


# Check whether --with-nss-exec-prefix or --without-nss-exec-prefix was given.
if test "${with_nss_exec_prefix+set}" = set; then
  withval="$with_nss_exec_prefix"
  nss_config_exec_prefix="$withval"
else
  nss_config_exec_prefix=""
fi


	if test -n "$nss_config_exec_prefix"; then
		nss_config_args="$nss_config_args --exec-prefix=$nss_config_exec_prefix"
		if test -z "$NSS_CONFIG"; then
			NSS_CONFIG=$nss_config_exec_prefix/bin/nss-config
		fi
	fi
	if test -n "$nss_config_prefix"; then
		nss_config_args="$nss_config_args --prefix=$nss_config_prefix"
		if test -z "$NSS_CONFIG"; then
			NSS_CONFIG=$nss_config_prefix/bin/nss-config
		fi
	fi

	unset ac_cv_path_NSS_CONFIG
	# Extract the first word of "nss-config", so it can be a program name with args.
set dummy nss-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:15192: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_NSS_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$NSS_CONFIG" in
  /*)
  ac_cv_path_NSS_CONFIG="$NSS_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_NSS_CONFIG="$NSS_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_NSS_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_NSS_CONFIG" && ac_cv_path_NSS_CONFIG="no"
  ;;
esac
fi
NSS_CONFIG="$ac_cv_path_NSS_CONFIG"
if test -n "$NSS_CONFIG"; then
  echo "$ac_t""$NSS_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

	min_nss_version=3.14.2
	echo $ac_n "checking for NSS - version >= $min_nss_version""... $ac_c" 1>&6
echo "configure:15227: checking for NSS - version >= $min_nss_version" >&5

	no_nss=""
	if test "$NSS_CONFIG" = "no"; then
		no_nss="yes"
	else
		NSS_CFLAGS=`$NSS_CONFIG $nss_config_args --cflags`
		NSS_LIBS=`$NSS_CONFIG $nss_config_args --libs`

		nss_config_major_version=`$NSS_CONFIG $nss_config_args --version | \
			sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\1/'`
		nss_config_minor_version=`$NSS_CONFIG $nss_config_args --version | \
			sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\2/'`
		nss_config_micro_version=`$NSS_CONFIG $nss_config_args --version | \
			sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\3/'`
		min_nss_major_version=`echo $min_nss_version | \
			sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\1/'`
		min_nss_minor_version=`echo $min_nss_version | \
			sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\2/'`
		min_nss_micro_version=`echo $min_nss_version | \
			sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\3/'`
		if test "$nss_config_major_version" -lt "$min_nss_major_version"; then
			no_nss="yes"
		elif test "$nss_config_major_version" -eq "$min_nss_major_version" &&
		     test "$nss_config_minor_version" -lt "$min_nss_minor_version"; then
			no_nss="yes"
		elif test "$nss_config_major_version" -eq "$min_nss_major_version" &&
		     test "$nss_config_minor_version" -eq "$min_nss_minor_version" &&
		     test "$nss_config_micro_version" -lt "$min_nss_micro_version"; then
			no_nss="yes"
		fi
	fi

	if test -z "$no_nss"; then
		echo "$ac_t""yes" 1>&6
		MOZ_NATIVE_NSS=1     
	else
		echo "$ac_t""no" 1>&6
		{ echo "configure: error: you don't have NSS installed or your version is too old" 1>&2; exit 1; }
	fi


	
	


fi

if test -n "$MOZ_NATIVE_NSS"; then
   NSS_LIBS="$NSS_LIBS -lcrmf"
else
   NSS_CFLAGS='-I$(LIBXUL_DIST)/include/nss'
   NSS_DEP_LIBS="\
        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)crmf.\$(LIB_SUFFIX) \
        \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)smime$NSS_VERSION\$(DLL_SUFFIX) \
        \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)ssl$NSS_VERSION\$(DLL_SUFFIX) \
        \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)nss$NSS_VERSION\$(DLL_SUFFIX) \
        \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)nssutil$NSS_VERSION\$(DLL_SUFFIX)"

   if test -z "$GNU_CC" -a "$OS_ARCH" = "WINNT" -o "$OS_ARCH" = "OS2"; then
       NSS_LIBS="\
        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)crmf.\$(LIB_SUFFIX) \
        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)smime$NSS_VERSION.\$(LIB_SUFFIX) \
        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)ssl$NSS_VERSION.\$(LIB_SUFFIX) \
        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)nss$NSS_VERSION.\$(LIB_SUFFIX) \
        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)nssutil$NSS_VERSION.\$(LIB_SUFFIX)"
   else
       NSS_LIBS='$(LIBS_DIR)'" -lcrmf -lsmime$NSS_VERSION -lssl$NSS_VERSION -lnss$NSS_VERSION -lnssutil$NSS_VERSION"
   fi
fi


echo $ac_n "checking for YASM assembler""... $ac_c" 1>&6
echo "configure:15300: checking for YASM assembler" >&5
for ac_prog in yasm
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:15306: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_YASM'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$YASM"; then
  ac_cv_prog_YASM="$YASM" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_YASM="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
YASM="$ac_cv_prog_YASM"
if test -n "$YASM"; then
  echo "$ac_t""$YASM" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$YASM" && break
done
test -n "$YASM" || YASM=""""


if test -n "$YASM"; then
    YASM_VERSION=`yasm --version | $AWK '/^yasm/ { print $2 }'`
  _YASM_MAJOR_VERSION=`echo ${YASM_VERSION} | $AWK -F\. '{ print $1 }'`
  _YASM_MINOR_VERSION=`echo ${YASM_VERSION} | $AWK -F\. '{ print $2 }'`
  _YASM_RELEASE=`      echo ${YASM_VERSION} | $AWK -F\. '{ print $3 }'`
  _YASM_BUILD=`        echo ${YASM_VERSION} | $AWK -F\. '{ print $4 }'`
fi

if test -z "$SKIP_LIBRARY_CHECKS"; then
# Check whether --with-system-jpeg or --without-system-jpeg was given.
if test "${with_system_jpeg+set}" = set; then
  withval="$with_system_jpeg"
  JPEG_DIR=$withval
fi


_SAVE_CFLAGS=$CFLAGS
_SAVE_LDFLAGS=$LDFLAGS
_SAVE_LIBS=$LIBS
if test -n "${JPEG_DIR}" -a "${JPEG_DIR}" != "yes"; then
    CFLAGS="-I${JPEG_DIR}/include $CFLAGS"
    LDFLAGS="-L${JPEG_DIR}/lib $LDFLAGS"
fi
if test -z "$JPEG_DIR" -o "$JPEG_DIR" = no; then
    MOZ_NATIVE_JPEG=
else
    echo $ac_n "checking for jpeg_destroy_compress in -ljpeg""... $ac_c" 1>&6
echo "configure:15364: checking for jpeg_destroy_compress in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_destroy_compress | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15372 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_destroy_compress();

int main() {
jpeg_destroy_compress()
; return 0; }
EOF
if { (eval echo configure:15383: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MOZ_NATIVE_JPEG=1 MOZ_JPEG_LIBS="-ljpeg"
else
  echo "$ac_t""no" 1>&6
MOZ_NATIVE_JPEG=
fi

fi

if test "$MOZ_NATIVE_JPEG" = 1; then
    cat > conftest.$ac_ext <<EOF
#line 15408 "configure"
#include "confdefs.h"
 #include <stdio.h>
                     #include <sys/types.h>
                     #include <jpeglib.h> 
int main() {
 #if JPEG_LIB_VERSION < $MOZJPEG
                     #error "Insufficient JPEG library version ($MOZJPEG required)."
                     #endif
                     #ifndef JCS_EXTENSIONS
                     #error "libjpeg-turbo JCS_EXTENSIONS required"
                     #endif
                     
; return 0; }
EOF
if { (eval echo configure:15423: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  MOZ_NATIVE_JPEG=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: Insufficient JPEG library version for --with-system-jpeg" 1>&2; exit 1; }
fi
rm -f conftest*
fi
CFLAGS=$_SAVE_CFLAGS
LDFLAGS=$_SAVE_LDFLAGS
LIBS=$_SAVE_LIBS

if test -n "${JPEG_DIR}" -a -d "${JPEG_DIR}" -a "$MOZ_NATIVE_JPEG" = 1; then
    MOZ_JPEG_CFLAGS="-I${JPEG_DIR}/include"
    MOZ_JPEG_LIBS="-L${JPEG_DIR}/lib ${MOZ_JPEG_LIBS}"
fi
fi # SKIP_LIBRARY_CHECKS



MOZZLIB=1.2.3

# Check whether --with-system-zlib or --without-system-zlib was given.
if test "${with_system_zlib+set}" = set; then
  withval="$with_system_zlib"
  ZLIB_DIR=$withval
fi


if test -z "$MOZ_ZLIB_LIBS$MOZ_ZLIB_CFLAGS$SKIP_LIBRARY_CHECKS"; then
    _SAVE_CFLAGS=$CFLAGS
    _SAVE_LDFLAGS=$LDFLAGS
    _SAVE_LIBS=$LIBS

    if test -n "${ZLIB_DIR}" -a "${ZLIB_DIR}" != "yes"; then
        MOZ_ZLIB_CFLAGS="-I${ZLIB_DIR}/include"
        MOZ_ZLIB_LIBS="-L${ZLIB_DIR}/lib"
        CFLAGS="$MOZ_ZLIB_CFLAGS $CFLAGS"
        LDFLAGS="$MOZ_ZLIB_LIBS $LDFLAGS"
    fi
    if test -z "$ZLIB_DIR" -o "$ZLIB_DIR" = no; then
        MOZ_NATIVE_ZLIB=
    else
        echo $ac_n "checking for gzread in -lz""... $ac_c" 1>&6
echo "configure:15470: checking for gzread in -lz" >&5
ac_lib_var=`echo z'_'gzread | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lz  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15478 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gzread();

int main() {
gzread()
; return 0; }
EOF
if { (eval echo configure:15489: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MOZ_NATIVE_ZLIB=1 MOZ_ZLIB_LIBS="$MOZ_ZLIB_LIBS -lz"
else
  echo "$ac_t""no" 1>&6
MOZ_NATIVE_ZLIB=
fi

        if test "$MOZ_NATIVE_ZLIB" = 1; then
            MOZZLIBNUM=`echo $MOZZLIB | awk -F. '{printf "0x%x\n", ((($1 * 16 + $2) * 16) + $3) * 16 + $4}'`
            cat > conftest.$ac_ext <<EOF
#line 15513 "configure"
#include "confdefs.h"
 #include <stdio.h>
                             #include <string.h>
                             #include <zlib.h> 
int main() {
 #if ZLIB_VERNUM < $MOZZLIBNUM
                             #error "Insufficient zlib version ($MOZZLIBNUM required)."
                             #endif 
; return 0; }
EOF
if { (eval echo configure:15524: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  MOZ_NATIVE_ZLIB=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: Insufficient zlib version for --with-system-zlib ($MOZZLIB required)" 1>&2; exit 1; }
fi
rm -f conftest*
        fi
    fi
    CFLAGS=$_SAVE_CFLAGS
    LDFLAGS=$_SAVE_LDFLAGS
    LIBS=$_SAVE_LIBS
fi







if test "$MOZ_NATIVE_ZLIB" != 1; then
    MOZ_ZLIB_CFLAGS=
    MOZ_ZLIB_LIBS='$(call EXPAND_LIBNAME_PATH,mozz,'"$MOZ_BUILD_ROOT"'/modules/zlib/src)'
fi

if test "$MOZ_LINKER" = 1 -a "$MOZ_NATIVE_ZLIB" != 1; then
    { echo "configure: error: Custom dynamic linker requires --with-system-zlib" 1>&2; exit 1; }
fi

if test -z "$SKIP_LIBRARY_CHECKS"; then
# Check whether --with-system-bz2 or --without-system-bz2 was given.
if test "${with_system_bz2+set}" = set; then
  withval="$with_system_bz2"
  BZ2_DIR=$withval
fi


_SAVE_CFLAGS=$CFLAGS
_SAVE_LDFLAGS=$LDFLAGS
_SAVE_LIBS=$LIBS
if test -n "${BZ2_DIR}" -a "${BZ2_DIR}" != "yes"; then
    CFLAGS="-I${BZ2_DIR}/include $CFLAGS"
    LDFLAGS="-L${BZ2_DIR}/lib $LDFLAGS"
fi
if test -z "$BZ2_DIR" -o "$BZ2_DIR" = no; then
    MOZ_NATIVE_BZ2=
else
    echo $ac_n "checking for BZ2_bzread in -lbz2""... $ac_c" 1>&6
echo "configure:15575: checking for BZ2_bzread in -lbz2" >&5
ac_lib_var=`echo bz2'_'BZ2_bzread | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbz2  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15583 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char BZ2_bzread();

int main() {
BZ2_bzread()
; return 0; }
EOF
if { (eval echo configure:15594: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MOZ_NATIVE_BZ2=1 MOZ_BZ2_LIBS="-lbz2"
else
  echo "$ac_t""no" 1>&6
MOZ_NATIVE_BZ2= MOZ_BZ2_CFLAGS= MOZ_BZ2_LIBS=
fi

fi
CFLAGS=$_SAVE_CFLAGS
LDFLAGS=$_SAVE_LDFLAGS
LIBS=$_SAVE_LIBS

if test "${BZ2_DIR}" -a -d "${BZ2_DIR}" -a "$MOZ_NATIVE_BZ2" = 1; then
    MOZ_BZ2_CFLAGS="-I${BZ2_DIR}/include"
    MOZ_BZ2_LIBS="-L${BZ2_DIR}/lib ${MOZ_BZ2_LIBS}"
fi

# Check whether --with-system-png or --without-system-png was given.
if test "${with_system_png+set}" = set; then
  withval="$with_system_png"
  PNG_DIR=$withval
fi


_SAVE_CFLAGS=$CFLAGS
_SAVE_LDFLAGS=$LDFLAGS
_SAVE_LIBS=$LIBS
if test -n "${PNG_DIR}" -a "${PNG_DIR}" != "yes"; then
    CFLAGS="-I${PNG_DIR}/include $CFLAGS"
    LDFLAGS="-L${PNG_DIR}/lib $LDFLAGS"
fi
if test -z "$PNG_DIR" -o "$PNG_DIR" = no; then
    MOZ_NATIVE_PNG=
else
    echo $ac_n "checking for png_get_valid in -lpng""... $ac_c" 1>&6
echo "configure:15643: checking for png_get_valid in -lpng" >&5
ac_lib_var=`echo png'_'png_get_valid | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpng  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15651 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_get_valid();

int main() {
png_get_valid()
; return 0; }
EOF
if { (eval echo configure:15662: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MOZ_NATIVE_PNG=1 MOZ_PNG_LIBS="-lpng"
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: --with-system-png requested but no working libpng found" 1>&2; exit 1; }
fi

    echo $ac_n "checking for png_get_acTL in -lpng""... $ac_c" 1>&6
echo "configure:15684: checking for png_get_acTL in -lpng" >&5
ac_lib_var=`echo png'_'png_get_acTL | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpng  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15692 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_get_acTL();

int main() {
png_get_acTL()
; return 0; }
EOF
if { (eval echo configure:15703: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo png | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_lib ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lpng $LIBS"

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: --with-system-png won't work because the system's libpng doesn't have APNG support" 1>&2; exit 1; }
fi

fi
if test "$MOZ_NATIVE_PNG" = 1; then
    cat > conftest.$ac_ext <<EOF
#line 15737 "configure"
#include "confdefs.h"
 #include <stdio.h>
                     #include <sys/types.h>
                     #include <png.h> 
int main() {
 #if PNG_LIBPNG_VER < $MOZPNG
                     #error "Insufficient libpng version ($MOZPNG required)."
                     #endif
                     #ifndef PNG_UINT_31_MAX
                     #error "Insufficient libpng version."
                     #endif 
; return 0; }
EOF
if { (eval echo configure:15751: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  MOZ_NATIVE_PNG=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: --with-system-png requested but no working libpng found" 1>&2; exit 1; }
fi
rm -f conftest*
fi
CFLAGS=$_SAVE_CFLAGS
LDFLAGS=$_SAVE_LDFLAGS
LIBS=$_SAVE_LIBS

if test "${PNG_DIR}" -a -d "${PNG_DIR}" -a "$MOZ_NATIVE_PNG" = 1; then
    MOZ_PNG_CFLAGS="-I${PNG_DIR}/include"
    MOZ_PNG_LIBS="-L${PNG_DIR}/lib ${MOZ_PNG_LIBS}"
fi

fi # SKIP_LIBRARY_CHECKS

# Check whether --enable-system-hunspell or --disable-system-hunspell was given.
if test "${enable_system_hunspell+set}" = set; then
  enableval="$enable_system_hunspell"
  if test "$enableval" = "yes"; then
    MOZ_NATIVE_HUNSPELL=1 
  elif test "$enableval" = "no"; then
    :
  else
    { echo "configure: error: Option, system-hunspell, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_NATIVE_HUNSPELL"; then
    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:15793: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for hunspell""... $ac_c" 1>&6
echo "configure:15837: checking for hunspell" >&5

        if $PKG_CONFIG --exists "hunspell" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_HUNSPELL_CFLAGS""... $ac_c" 1>&6
echo "configure:15844: checking MOZ_HUNSPELL_CFLAGS" >&5
            MOZ_HUNSPELL_CFLAGS=`$PKG_CONFIG --cflags "hunspell"`
            echo "$ac_t""$MOZ_HUNSPELL_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_HUNSPELL_LIBS""... $ac_c" 1>&6
echo "configure:15849: checking MOZ_HUNSPELL_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_HUNSPELL_LIBS="`$PKG_CONFIG --libs \"hunspell\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_HUNSPELL_LIBS" 1>&6
        else
            MOZ_HUNSPELL_CFLAGS=""
            MOZ_HUNSPELL_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_HUNSPELL_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "hunspell"`
            echo $MOZ_HUNSPELL_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (hunspell) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

fi



# Check whether --enable-system-ffi or --disable-system-ffi was given.
if test "${enable_system_ffi+set}" = set; then
  enableval="$enable_system_ffi"
  if test "$enableval" = "yes"; then
    MOZ_NATIVE_FFI=1 
  elif test "$enableval" = "no"; then
    :
  else
    { echo "configure: error: Option, system-ffi, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_NATIVE_FFI"; then
    # Vanilla libffi 3.0.9 needs a few patches from upcoming version 3.0.10
    # for non-GCC compilers.
    if test -z "$GNU_CC"; then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:15905: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libffi > 3.0.9""... $ac_c" 1>&6
echo "configure:15949: checking for libffi > 3.0.9" >&5

        if $PKG_CONFIG --exists "libffi > 3.0.9" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_FFI_CFLAGS""... $ac_c" 1>&6
echo "configure:15956: checking MOZ_FFI_CFLAGS" >&5
            MOZ_FFI_CFLAGS=`$PKG_CONFIG --cflags "libffi > 3.0.9"`
            echo "$ac_t""$MOZ_FFI_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_FFI_LIBS""... $ac_c" 1>&6
echo "configure:15961: checking MOZ_FFI_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_FFI_LIBS="`$PKG_CONFIG --libs \"libffi > 3.0.9\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_FFI_LIBS" 1>&6
        else
            MOZ_FFI_CFLAGS=""
            MOZ_FFI_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_FFI_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libffi > 3.0.9"`
            echo $MOZ_FFI_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (libffi > 3.0.9) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

    else
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:15997: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libffi >= 3.0.9""... $ac_c" 1>&6
echo "configure:16041: checking for libffi >= 3.0.9" >&5

        if $PKG_CONFIG --exists "libffi >= 3.0.9" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_FFI_CFLAGS""... $ac_c" 1>&6
echo "configure:16048: checking MOZ_FFI_CFLAGS" >&5
            MOZ_FFI_CFLAGS=`$PKG_CONFIG --cflags "libffi >= 3.0.9"`
            echo "$ac_t""$MOZ_FFI_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_FFI_LIBS""... $ac_c" 1>&6
echo "configure:16053: checking MOZ_FFI_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_FFI_LIBS="`$PKG_CONFIG --libs \"libffi >= 3.0.9\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_FFI_LIBS" 1>&6
        else
            MOZ_FFI_CFLAGS=""
            MOZ_FFI_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_FFI_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libffi >= 3.0.9"`
            echo $MOZ_FFI_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (libffi >= 3.0.9) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

    fi
    MOZ_JS_STATIC_LIBS="$MOZ_JS_STATIC_LIBS $MOZ_FFI_LIBS"
fi


JAVA_BIN_PATH=
# Check whether --with-java-bin-path or --without-java-bin-path was given.
if test "${with_java_bin_path+set}" = set; then
  withval="$with_java_bin_path"
  JAVA_BIN_PATH=$withval
fi



# Application

ENABLE_TESTS=1
ENABLE_SYSTEM_EXTENSION_DIRS=1
MOZ_BRANDING_DIRECTORY=
MOZ_OFFICIAL_BRANDING=
MOZ_FEEDS=1
MOZ_FLEXBOX=1
MOZ_WEBAPP_RUNTIME=
MOZ_JSDEBUGGER=1
MOZ_AUTH_EXTENSION=1
MOZ_OGG=1
MOZ_RAW=
MOZ_SYDNEYAUDIO=
MOZ_SPEEX_RESAMPLER=1
MOZ_SOUNDTOUCH=1
MOZ_CUBEB=
MOZ_VORBIS=
MOZ_TREMOR=
MOZ_WAVE=1
MOZ_SAMPLE_TYPE_FLOAT32=
MOZ_SAMPLE_TYPE_S16=
MOZ_MEDIA=
MOZ_OPUS=1
MOZ_WEBM=1
MOZ_DASH=1
MOZ_WMF=
MOZ_WEBRTC=1
MOZ_PEERCONNECTION=
MOZ_SRTP=
MOZ_WEBRTC_SIGNALING=
MOZ_WEBRTC_IN_LIBXUL=
MOZ_SCTP=
MOZ_MEDIA_PLUGINS=
MOZ_MEDIA_NAVIGATOR=
MOZ_OMX_PLUGIN=
MOZ_VP8=
MOZ_VP8_ERROR_CONCEALMENT=
MOZ_VP8_ENCODER=
VPX_AS=
VPX_ASFLAGS=
VPX_AS_DASH_C_FLAG=
VPX_AS_CONVERSION=
VPX_ASM_SUFFIX=
VPX_X86_ASM=
VPX_ARM_ASM=
LIBJPEG_TURBO_AS=
LIBJPEG_TURBO_ASFLAGS=
LIBJPEG_TURBO_X86_ASM=
LIBJPEG_TURBO_X64_ASM=
LIBJPEG_TURBO_ARM_ASM=
MOZ_PANGO=1
MOZ_PERMISSIONS=1
MOZ_PLACES=1
MOZ_PREF_EXTENSIONS=1
MOZ_PROFILELOCKING=1
MOZ_PSM=1
MOZ_REFLOW_PERF=
MOZ_SAFE_BROWSING=
MOZ_HELP_VIEWER=
MOZ_SPELLCHECK=1
MOZ_ANDROID_OMTC=
MOZ_ONLY_TOUCH_EVENTS=
MOZ_TOOLKIT_SEARCH=1
MOZ_UI_LOCALE=en-US
MOZ_UNIVERSALCHARDET=1
MOZ_URL_CLASSIFIER=
MOZ_XUL=1
MOZ_ZIPWRITER=1
NS_PRINTING=1
MOZ_PDF_PRINTING=
MOZ_DISABLE_DOMCRYPTO=
NSS_DISABLE_DBM=
NECKO_WIFI=1
NECKO_COOKIES=1
NECKO_PROTOCOLS_DEFAULT="about data file ftp http res viewsource websocket wyciwyg device"
USE_ARM_KUSER=
BUILD_CTYPES=1
MOZ_USE_NATIVE_POPUP_WINDOWS=
MOZ_ANDROID_HISTORY=
MOZ_WEBSMS_BACKEND=
MOZ_GRAPHITE=1
ACCESSIBILITY=1
MOZ_SYS_MSG=
MOZ_TIME_MANAGER=
MOZ_PAY=
MOZ_AUDIO_CHANNEL_MANAGER=

case "$target_os" in
    mingw*)
        NS_ENABLE_TSF=1
        cat >> confdefs.pytmp <<\EOF
    (''' NS_ENABLE_TSF ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NS_ENABLE_TSF 1
EOF

        ;;
esac

case "${target}" in
    *-android*|*-linuxandroid*)
        if test "$CPU_ARCH" = "arm" ; then
          USE_ARM_KUSER=1
        fi

        NSS_DISABLE_DBM=1
        if test -z "$gonkdir"; then
          NECKO_WIFI=
        else
          NECKO_WIFI=1
        fi
        MOZ_THEME_FASTSTRIPE=1
        MOZ_TREE_FREETYPE=1
        MOZ_MEMORY=1
        MOZ_RAW=1
        ;;

esac

# Check whether --enable-application or --disable-application was given.
if test "${enable_application+set}" = set; then
  enableval="$enable_application"
   MOZ_BUILD_APP=$enableval  
fi


# Check whether --with-xulrunner-stub-name or --without-xulrunner-stub-name was given.
if test "${with_xulrunner_stub_name+set}" = set; then
  withval="$with_xulrunner_stub_name"
  XULRUNNER_STUB_NAME=$withval
fi


if test -z "$XULRUNNER_STUB_NAME"; then
  case "$target_os" in
  darwin*)
    XULRUNNER_STUB_NAME=xulrunner
    ;;
  *)
    XULRUNNER_STUB_NAME=xulrunner-stub
  esac
fi


echo $ac_n "checking for application to build""... $ac_c" 1>&6
echo "configure:16243: checking for application to build" >&5
if test -z "$MOZ_BUILD_APP"; then
  echo "$ac_t""browser" 1>&6
  MOZ_BUILD_APP=browser
else
  # default mobile to be mobile/xul
  if test "$MOZ_BUILD_APP" = "mobile" ; then
    MOZ_BUILD_APP=mobile/xul
  fi
  # We have a valid application only if it has a build.mk file in its top
  # directory.
  if test ! -f "${srcdir}/${MOZ_BUILD_APP}/build.mk" ; then
    echo "$ac_t""none" 1>&6
    { echo "configure: error: --enable-application value not recognized (${MOZ_BUILD_APP}/build.mk does not exist)." 1>&2; exit 1; }
  else
    echo "$ac_t""$MOZ_BUILD_APP" 1>&6
  fi
fi

# The app update channel is 'default' when not supplied. The value is used in
# the application's confvars.sh so it must be set before confvars.sh is called.
# Check whether --enable-update-channel or --disable-update-channel was given.
if test "${enable_update_channel+set}" = set; then
  enableval="$enable_update_channel"
  MOZ_UPDATE_CHANNEL=`echo $enableval | tr A-Z a-z`
fi


if test -z "$MOZ_UPDATE_CHANNEL"; then
    MOZ_UPDATE_CHANNEL=default
fi
cat >> confdefs.pytmp <<EOF
    (''' MOZ_UPDATE_CHANNEL ''', r''' $MOZ_UPDATE_CHANNEL ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_UPDATE_CHANNEL $MOZ_UPDATE_CHANNEL
EOF



# Allow the application to influence configure with a confvars.sh script.

echo $ac_n "checking if app-specific confvars.sh exists""... $ac_c" 1>&6
echo "configure:16286: checking if app-specific confvars.sh exists" >&5
if test -f "${srcdir}/${MOZ_BUILD_APP}/confvars.sh" ; then
  echo "$ac_t""${srcdir}/${MOZ_BUILD_APP}/confvars.sh" 1>&6
  . "${srcdir}/${MOZ_BUILD_APP}/confvars.sh"
else
  echo "$ac_t""no" 1>&6
fi

# Allow someone to change MOZ_APP_NAME and MOZ_APP_BASENAME in mozconfig
# Check whether --with-app-name or --without-app-name was given.
if test "${with_app_name+set}" = set; then
  withval="$with_app_name"
  WITH_APP_NAME=$withval
fi


if test -n "$WITH_APP_NAME" ; then
    MOZ_APP_NAME="$WITH_APP_NAME"
fi

# Check whether --with-app-basename or --without-app-basename was given.
if test "${with_app_basename+set}" = set; then
  withval="$with_app_basename"
  WITH_APP_BASENAME=$withval
fi


if test -n "$WITH_APP_BASENAME" ; then
    MOZ_APP_BASENAME="$WITH_APP_BASENAME"
fi

# Now is a good time to test for logic errors, define mismatches, etc.
case "$MOZ_BUILD_APP" in
xulrunner)
  if test "$LIBXUL_SDK"; then
    { echo "configure: error: Building XULRunner --with-libxul-sdk doesn't make sense; XULRunner provides the libxul SDK." 1>&2; exit 1; }
  fi
  ;;
esac

# Special cases where we need to AC_DEFINE something. Also a holdover for apps
# that haven't made a confvars.sh yet. Don't add new stuff here, use
# MOZ_BUILD_APP.
case "$MOZ_BUILD_APP" in
browser)
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PHOENIX ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PHOENIX 1
EOF

  ;;

xulrunner)
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_XULRUNNER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_XULRUNNER 1
EOF

  ;;
b2g)
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_B2G ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_B2G 1
EOF

  ;;
esac






cat >> confdefs.pytmp <<EOF
    (''' MOZ_BUILD_APP ''', r''' $MOZ_BUILD_APP ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_BUILD_APP $MOZ_BUILD_APP
EOF



if test -z "$gonkdir" ; then
    # Minimum Android SDK API Level we require.
    case "$MOZ_BUILD_APP" in
    mobile/xul)
        android_min_api_level=13
        ;;
    mobile/android)
        android_min_api_level=16
        ;;
    esac

    

# Check whether --with-android-sdk or --without-android-sdk was given.
if test "${with_android_sdk+set}" = set; then
  withval="$with_android_sdk"
  android_sdk=$withval
fi


case "$target" in
*-android*|*-linuxandroid*)
    if test -z "$android_sdk" ; then
        { echo "configure: error: You must specify --with-android-sdk=/path/to/sdk when targeting Android." 1>&2; exit 1; }
    else
        if ! test -e "$android_sdk"/source.properties ; then
            { echo "configure: error: The path in --with-android-sdk isn't valid (source.properties hasn't been found)." 1>&2; exit 1; }
        fi

        # Get the api level from "$android_sdk"/source.properties.
        android_api_level=`$AWK -F = '$1 == "AndroidVersion.ApiLevel" {print $2}' "$android_sdk"/source.properties`

        if test -z "$android_api_level" ; then
            { echo "configure: error: Unexpected error: no AndroidVersion.ApiLevel field has been found in source.properties." 1>&2; exit 1; }
        fi

        if ! test "$android_api_level" -eq "$android_api_level" ; then
            { echo "configure: error: Unexpected error: the found android api value isn't a number! (found $android_api_level)" 1>&2; exit 1; }
        fi

        if test $android_api_level -lt $android_min_api_level ; then
            { echo "configure: error: The given Android SDK provides API level $android_api_level ($android_min_api_level or higher required)." 1>&2; exit 1; }
        fi
    fi

    android_platform_tools="$android_sdk"/../../platform-tools
    if test ! -d "$android_platform_tools" ; then
        android_platform_tools="$android_sdk"/tools # SDK Tools < r8
    fi
    ANDROID_SDK="${android_sdk}"
    if test -e "${android_sdk}/../../extras/android/compatibility/v4/android-support-v4.jar" ; then
        ANDROID_COMPAT_LIB="${android_sdk}/../../extras/android/compatibility/v4/android-support-v4.jar"
    else
        ANDROID_COMPAT_LIB="${android_sdk}/../../extras/android/support/v4/android-support-v4.jar";
    fi
    ANDROID_PLATFORM_TOOLS="${android_platform_tools}"
    
    
    if ! test -e $ANDROID_COMPAT_LIB ; then
        { echo "configure: error: You must download the Android support library when targeting Android.   Run the Android SDK tool and install Android Support Library under Extras.  See https://developer.android.com/tools/extras/support-library.html for more info. (looked for $ANDROID_COMPAT_LIB)" 1>&2; exit 1; }
    fi
    
    ;;
esac


fi

# Toolkit Options

            	# Check whether --enable-default-toolkit or --disable-default-toolkit was given.
if test "${enable_default_toolkit+set}" = set; then
  enableval="$enable_default_toolkit"
   _DEFAULT_TOOLKIT=$enableval 
else
   _DEFAULT_TOOLKIT=$_PLATFORM_DEFAULT_TOOLKIT
fi


    if test "$_DEFAULT_TOOLKIT" = "cairo-windows" \
        -o "$_DEFAULT_TOOLKIT" = "cairo-gtk2" \
        -o "$_DEFAULT_TOOLKIT" = "cairo-gtk2-x11" \
        -o "$_DEFAULT_TOOLKIT" = "cairo-qt" \
        -o "$_DEFAULT_TOOLKIT" = "cairo-os2" \
        -o "$_DEFAULT_TOOLKIT" = "cairo-cocoa" \
        -o "$_DEFAULT_TOOLKIT" = "cairo-uikit" \
        -o "$_DEFAULT_TOOLKIT" = "cairo-android" \
        -o "$_DEFAULT_TOOLKIT" = "cairo-gonk"
    then
                        MOZ_WIDGET_TOOLKIT=`echo "$_DEFAULT_TOOLKIT" | sed -e "s/,.*$//"`
    else
        { echo "configure: error: You must specify a default toolkit (perhaps $_PLATFORM_DEFAULT_TOOLKIT)." 1>&2; exit 1; }
    fi

# Check whether --with-x or --without-x was given.
if test "${with_x+set}" = set; then
  withval="$with_x"
  if test "$withval" = "no"; then
    WITHOUT_X11=1
  elif test "$withval" = "yes"; then
    :
  else
    { echo "configure: error: Option, x, does not take an argument ($withval)." 1>&2; exit 1; }
  fi
fi



MOZ_WIDGET_GTK=

case "$MOZ_WIDGET_TOOLKIT" in

cairo-windows)
    MOZ_WIDGET_TOOLKIT=windows
    MOZ_WEBGL=1
    MOZ_PDF_PRINTING=1
    MOZ_INSTRUMENT_EVENT_LOOP=1
    ;;

cairo-gtk2|cairo-gtk2-x11)
    MOZ_WIDGET_TOOLKIT=gtk2
    MOZ_ENABLE_GTK2=1
    MOZ_ENABLE_XREMOTE=1
    MOZ_WEBGL=1
    MOZ_GL_DEFAULT_PROVIDER=GLX

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_X11 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_X11 1
EOF

    MOZ_X11=1
    USE_FC_FREETYPE=1

    TK_CFLAGS='$(MOZ_GTK2_CFLAGS)'
    TK_LIBS='$(MOZ_GTK2_LIBS)'
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WIDGET_GTK2 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WIDGET_GTK2 1
EOF

    MOZ_WIDGET_GTK=2
    cat >> confdefs.pytmp <<EOF
    (''' MOZ_WIDGET_GTK ''', r''' $MOZ_WIDGET_GTK ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_WIDGET_GTK $MOZ_WIDGET_GTK
EOF

    MOZ_PDF_PRINTING=1
    MOZ_INSTRUMENT_EVENT_LOOP=1
    ;;

cairo-qt)
    MOZ_WIDGET_TOOLKIT=qt
    MOZ_ENABLE_QT=1
    if test -z "$WITHOUT_X11"; then
      MOZ_ENABLE_XREMOTE=1
      MOZ_GL_DEFAULT_PROVIDER=GLX
      MOZ_X11=1
      cat >> confdefs.pytmp <<\EOF
    (''' MOZ_X11 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_X11 1
EOF

      XT_LIBS=
    fi

    MOZ_WEBGL=1
    USE_ELF_DYNSTR_GC=
    USE_FC_FREETYPE=1
    TK_CFLAGS='$(MOZ_QT_CFLAGS)'
    TK_LIBS='$(MOZ_QT_LIBS)'
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WIDGET_QT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WIDGET_QT 1
EOF

    MOZ_PDF_PRINTING=1
    ;;

cairo-os2)
    MOZ_WIDGET_TOOLKIT=os2
    USE_FC_FREETYPE=1
    TK_CFLAGS='$(MOZ_CAIRO_CFLAGS) $(MOZ_PIXMAN_CFLAGS)'
    TK_LIBS='$(MOZ_CAIRO_LIBS) $(MOZ_PIXMAN_LIBS)'
    MOZ_PDF_PRINTING=1
    ;;

cairo-cocoa)
    MOZ_WIDGET_TOOLKIT=cocoa
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WIDGET_COCOA ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WIDGET_COCOA 1
EOF

    LDFLAGS="$LDFLAGS -framework Cocoa -lobjc"
    TK_LIBS='-framework QuartzCore -framework Carbon -framework CoreAudio -framework AudioToolbox -framework AudioUnit -framework AddressBook -framework OpenGL'
    TK_CFLAGS="-DNO_X11"
    CFLAGS="$CFLAGS $TK_CFLAGS"
    CXXFLAGS="$CXXFLAGS $TK_CFLAGS"
    LIBXUL_LIBS='$(XPCOM_FROZEN_LDOPTS) $(LIBXUL_DIST)/bin/XUL'
    MOZ_USER_DIR="Mozilla"
    MOZ_FS_LAYOUT=bundle
    # skip webgl and event loop instrumentation on UIKit for now
    if test "$MOZ_WIDGET_TOOLKIT" == "cocoa"; then
      MOZ_WEBGL=1
      MOZ_INSTRUMENT_EVENT_LOOP=1
    fi
    ;;

cairo-uikit)
    MOZ_WIDGET_TOOLKIT=uikit
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WIDGET_UIKIT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WIDGET_UIKIT 1
EOF

    LDFLAGS="$LDFLAGS -framework UIKit -lobjc"
    TK_CFLAGS="-DNO_X11"
    TK_LIBS='-framework Foundation -framework CoreFoundation -framework CoreGraphics -framework CoreText'
    CFLAGS="$CFLAGS $TK_CFLAGS"
    CXXFLAGS="$CXXFLAGS $TK_CFLAGS"
    LIBXUL_LIBS='$(XPCOM_FROZEN_LDOPTS) $(LIBXUL_DIST)/bin/XUL'
    MOZ_USER_DIR="Mozilla"
    MOZ_FS_LAYOUT=bundle
    ;;

cairo-android)
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WIDGET_ANDROID ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WIDGET_ANDROID 1
EOF

    MOZ_WIDGET_TOOLKIT=android
    TK_CFLAGS='$(MOZ_CAIRO_CFLAGS) $(MOZ_PIXMAN_CFLAGS)'
    TK_LIBS='$(MOZ_CAIRO_LIBS) $(MOZ_PIXMAN_LIBS)'
    MOZ_WEBGL=1
    MOZ_PDF_PRINTING=1
    MOZ_INSTRUMENT_EVENT_LOOP=1
    if test "$MOZ_BUILD_APP" = "mobile/xul"; then
        MOZ_OLD_LINKER=1
    fi
    ;;

cairo-gonk)
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WIDGET_GONK ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WIDGET_GONK 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TOUCH ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TOUCH 1
EOF

    MOZ_WIDGET_TOOLKIT=gonk
    TK_CFLAGS='$(MOZ_CAIRO_CFLAGS) $(MOZ_PIXMAN_CFLAGS)'
    TK_LIBS='$(MOZ_CAIRO_LIBS) $(MOZ_PIXMAN_LIBS)'
    MOZ_WEBGL=1
    MOZ_PDF_PRINTING=1
    MOZ_TOUCH=1
    ;;

esac



if test "$MOZ_PDF_PRINTING"; then
   PDF_SURFACE_FEATURE="#define CAIRO_HAS_PDF_SURFACE 1"
   cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PDF_PRINTING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PDF_PRINTING 1
EOF

fi

if test "$MOZ_ENABLE_XREMOTE"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_XREMOTE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_XREMOTE 1
EOF

fi

if test "$MOZ_INSTRUMENT_EVENT_LOOP"; then
   cat >> confdefs.pytmp <<\EOF
    (''' MOZ_INSTRUMENT_EVENT_LOOP ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_INSTRUMENT_EVENT_LOOP 1
EOF

fi

if test "$COMPILE_ENVIRONMENT"; then
  if test "$MOZ_ENABLE_GTK2"; then
    if test "$MOZ_X11"; then
      GDK_PACKAGES=gdk-x11-2.0
    fi

    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:16703: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 gobject-2.0 $GDK_PACKAGES""... $ac_c" 1>&6
echo "configure:16747: checking for gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 gobject-2.0 $GDK_PACKAGES" >&5

        if $PKG_CONFIG --exists "gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 gobject-2.0 $GDK_PACKAGES" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_GTK2_CFLAGS""... $ac_c" 1>&6
echo "configure:16754: checking MOZ_GTK2_CFLAGS" >&5
            MOZ_GTK2_CFLAGS=`$PKG_CONFIG --cflags "gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 gobject-2.0 $GDK_PACKAGES"`
            echo "$ac_t""$MOZ_GTK2_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_GTK2_LIBS""... $ac_c" 1>&6
echo "configure:16759: checking MOZ_GTK2_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_GTK2_LIBS="`$PKG_CONFIG --libs \"gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 gobject-2.0 $GDK_PACKAGES\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_GTK2_LIBS" 1>&6
        else
            MOZ_GTK2_CFLAGS=""
            MOZ_GTK2_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_GTK2_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 gobject-2.0 $GDK_PACKAGES"`
            echo $MOZ_GTK2_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 gobject-2.0 $GDK_PACKAGES) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

  fi

fi # COMPILE_ENVIRONMENT



# Check whether --with-arm-kuser or --without-arm-kuser was given.
if test "${with_arm_kuser+set}" = set; then
  withval="$with_arm_kuser"
  if test "$withval" = "yes"; then
    USE_ARM_KUSER=1
  elif test "$withval" = "no"; then
    :
  else
    { echo "configure: error: Option, arm-kuser, does not take an argument ($withval)." 1>&2; exit 1; }
  fi
fi

if test -n "$USE_ARM_KUSER"; then
   cat >> confdefs.pytmp <<\EOF
    (''' USE_ARM_KUSER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define USE_ARM_KUSER 1
EOF

fi


if test "$MOZ_ENABLE_GTK2"
then
    MOZ_ENABLE_STARTUP_NOTIFICATION=

    # Check whether --enable-startup-notification or --disable-startup-notification was given.
if test "${enable_startup_notification+set}" = set; then
  enableval="$enable_startup_notification"
  if test "$enableval" = "yes"; then
    MOZ_ENABLE_STARTUP_NOTIFICATION=force
  elif test "$enableval" = "no"; then
    MOZ_ENABLE_STARTUP_NOTIFICATION=
  else
    { echo "configure: error: Option, startup-notification, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

    if test "$MOZ_ENABLE_STARTUP_NOTIFICATION"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:16841: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libstartup-notification-1.0 >= $STARTUP_NOTIFICATION_VERSION""... $ac_c" 1>&6
echo "configure:16885: checking for libstartup-notification-1.0 >= $STARTUP_NOTIFICATION_VERSION" >&5

        if $PKG_CONFIG --exists "libstartup-notification-1.0 >= $STARTUP_NOTIFICATION_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_STARTUP_NOTIFICATION_CFLAGS""... $ac_c" 1>&6
echo "configure:16892: checking MOZ_STARTUP_NOTIFICATION_CFLAGS" >&5
            MOZ_STARTUP_NOTIFICATION_CFLAGS=`$PKG_CONFIG --cflags "libstartup-notification-1.0 >= $STARTUP_NOTIFICATION_VERSION"`
            echo "$ac_t""$MOZ_STARTUP_NOTIFICATION_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_STARTUP_NOTIFICATION_LIBS""... $ac_c" 1>&6
echo "configure:16897: checking MOZ_STARTUP_NOTIFICATION_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_STARTUP_NOTIFICATION_LIBS="`$PKG_CONFIG --libs \"libstartup-notification-1.0 >= $STARTUP_NOTIFICATION_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_STARTUP_NOTIFICATION_LIBS" 1>&6
        else
            MOZ_STARTUP_NOTIFICATION_CFLAGS=""
            MOZ_STARTUP_NOTIFICATION_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_STARTUP_NOTIFICATION_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libstartup-notification-1.0 >= $STARTUP_NOTIFICATION_VERSION"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     MOZ_ENABLE_STARTUP_NOTIFICATION=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       
            if test "$MOZ_ENABLE_STARTUP_NOTIFICATION" = "force"
            then
                { echo "configure: error: * * * Could not find startup-notification >= $STARTUP_NOTIFICATION_VERSION" 1>&2; exit 1; }
            fi
            MOZ_ENABLE_STARTUP_NOTIFICATION=
        
     fi
  fi

    fi

    if test "$MOZ_ENABLE_STARTUP_NOTIFICATION"; then
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_STARTUP_NOTIFICATION ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_STARTUP_NOTIFICATION 1
EOF

    fi

    TK_LIBS="$TK_LIBS $MOZ_STARTUP_NOTIFICATION_LIBS"
fi




if test "$MOZ_ENABLE_QT"
then
    # Check whether --with-qtdir or --without-qtdir was given.
if test "${with_qtdir+set}" = set; then
  withval="$with_qtdir"
   QTDIR=$withval
fi


    if test -z "$QTDIR"; then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:16966: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for QtGui QtNetwork QtCore QtOpenGL""... $ac_c" 1>&6
echo "configure:17010: checking for QtGui QtNetwork QtCore QtOpenGL" >&5

        if $PKG_CONFIG --exists "QtGui QtNetwork QtCore QtOpenGL" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_QT_CFLAGS""... $ac_c" 1>&6
echo "configure:17017: checking MOZ_QT_CFLAGS" >&5
            MOZ_QT_CFLAGS=`$PKG_CONFIG --cflags "QtGui QtNetwork QtCore QtOpenGL"`
            echo "$ac_t""$MOZ_QT_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_QT_LIBS""... $ac_c" 1>&6
echo "configure:17022: checking MOZ_QT_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_QT_LIBS="`$PKG_CONFIG --libs \"QtGui QtNetwork QtCore QtOpenGL\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_QT_LIBS" 1>&6
        else
            MOZ_QT_CFLAGS=""
            MOZ_QT_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_QT_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "QtGui QtNetwork QtCore QtOpenGL"`
            echo $MOZ_QT_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (QtGui QtNetwork QtCore QtOpenGL) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:17057: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for QtWidgets QtMultimedia QtPrintSupport""... $ac_c" 1>&6
echo "configure:17101: checking for QtWidgets QtMultimedia QtPrintSupport" >&5

        if $PKG_CONFIG --exists "QtWidgets QtMultimedia QtPrintSupport" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_QT5_CFLAGS""... $ac_c" 1>&6
echo "configure:17108: checking MOZ_QT5_CFLAGS" >&5
            MOZ_QT5_CFLAGS=`$PKG_CONFIG --cflags "QtWidgets QtMultimedia QtPrintSupport"`
            echo "$ac_t""$MOZ_QT5_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_QT5_LIBS""... $ac_c" 1>&6
echo "configure:17113: checking MOZ_QT5_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_QT5_LIBS="`$PKG_CONFIG --libs \"QtWidgets QtMultimedia QtPrintSupport\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_QT5_LIBS" 1>&6
        else
            MOZ_QT5_CFLAGS=""
            MOZ_QT5_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_QT5_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "QtWidgets QtMultimedia QtPrintSupport"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     MOZ_ENABLE_QT5=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       MOZ_ENABLE_QT5=
     fi
  fi

        if test "$MOZ_ENABLE_QT5"; then
            echo "Using qt5"
            MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS $MOZ_QT5_CFLAGS"
            MOZ_QT_LIBS="$MOZ_QT_LIBS $MOZ_QT5_LIBS"
        fi

        for ac_prog in $MOC moc
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:17153: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_HOST_MOC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$HOST_MOC"; then
  ac_cv_prog_HOST_MOC="$HOST_MOC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_HOST_MOC="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
HOST_MOC="$ac_cv_prog_HOST_MOC"
if test -n "$HOST_MOC"; then
  echo "$ac_t""$HOST_MOC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$HOST_MOC" && break
done
test -n "$HOST_MOC" || HOST_MOC=""""

        for ac_prog in $RCC rcc
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:17188: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_HOST_RCC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$HOST_RCC"; then
  ac_cv_prog_HOST_RCC="$HOST_RCC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_HOST_RCC="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
HOST_RCC="$ac_cv_prog_HOST_RCC"
if test -n "$HOST_RCC"; then
  echo "$ac_t""$HOST_RCC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$HOST_RCC" && break
done
test -n "$HOST_RCC" || HOST_RCC=""""

    else
        MOZ_QT_LIBS="-L$QTDIR/lib/ -lQtGui -lQtNetwork -lQtCore -lQtXml -lQtOpenGL"

        MOZ_QT_CFLAGS="-DQT_SHARED"
        MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include"
        MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include/Qt"
        MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include/QtGui"
        MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include/QtCore"
        MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include/QtNetwork"
        MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include/QtXml"
        MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include/QtDeclarative"
        HOST_MOC="$QTDIR/bin/moc"
        HOST_RCC="$QTDIR/bin/rcc"

        # QtWidgets was introduced only in Qt5
        if test -d $QTDIR/include/QtWidgets; then
            MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include/QtWidgets"
            MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include/QtPrintSupport"
            MOZ_QT_LIBS="$MOZ_QT_LIBS -lQtWidgets -lQtPrintSupport"
        fi
    fi
    if test -z "$HOST_MOC"; then
        { echo "configure: error: No acceptable moc preprocessor found. Qt SDK is not installed or --with-qt is
incorrect" 1>&2; exit 1; }
    fi
    if test -z "$HOST_RCC"; then
        { echo "configure: error: No acceptable rcc preprocessor found. Qt SDK is not installed or --with-qt is
incorrect" 1>&2; exit 1; }
    fi

    MOC=$HOST_MOC
    RCC=$HOST_RCC

    MOZ_ENABLE_QMSYSTEM2=
    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:17258: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for qmsystem2""... $ac_c" 1>&6
echo "configure:17302: checking for qmsystem2" >&5

        if $PKG_CONFIG --exists "qmsystem2" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking _QMSYSTEM2_CFLAGS""... $ac_c" 1>&6
echo "configure:17309: checking _QMSYSTEM2_CFLAGS" >&5
            _QMSYSTEM2_CFLAGS=`$PKG_CONFIG --cflags "qmsystem2"`
            echo "$ac_t""$_QMSYSTEM2_CFLAGS" 1>&6

            echo $ac_n "checking _QMSYSTEM2_LIBS""... $ac_c" 1>&6
echo "configure:17314: checking _QMSYSTEM2_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            _QMSYSTEM2_LIBS="`$PKG_CONFIG --libs \"qmsystem2\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$_QMSYSTEM2_LIBS" 1>&6
        else
            _QMSYSTEM2_CFLAGS=""
            _QMSYSTEM2_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            _QMSYSTEM2_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "qmsystem2"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     MOZ_ENABLE_QMSYSTEM2=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       MOZ_ENABLE_QMSYSTEM2=
     fi
  fi


    if test "$MOZ_ENABLE_QMSYSTEM2"; then
      MOZ_ENABLE_QMSYSTEM2=1
      MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS $_QMSYSTEM2_CFLAGS"
      MOZ_QT_LIBS="$MOZ_QT_LIBS $_QMSYSTEM2_LIBS"
      cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_QMSYSTEM2 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_QMSYSTEM2 1
EOF

    fi

    MOZ_ENABLE_QTNETWORK=
    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:17364: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for QtNetwork >= 4.7""... $ac_c" 1>&6
echo "configure:17408: checking for QtNetwork >= 4.7" >&5

        if $PKG_CONFIG --exists "QtNetwork >= 4.7" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking _QTNETWORK_CFLAGS""... $ac_c" 1>&6
echo "configure:17415: checking _QTNETWORK_CFLAGS" >&5
            _QTNETWORK_CFLAGS=`$PKG_CONFIG --cflags "QtNetwork >= 4.7"`
            echo "$ac_t""$_QTNETWORK_CFLAGS" 1>&6

            echo $ac_n "checking _QTNETWORK_LIBS""... $ac_c" 1>&6
echo "configure:17420: checking _QTNETWORK_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            _QTNETWORK_LIBS="`$PKG_CONFIG --libs \"QtNetwork >= 4.7\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$_QTNETWORK_LIBS" 1>&6
        else
            _QTNETWORK_CFLAGS=""
            _QTNETWORK_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            _QTNETWORK_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "QtNetwork >= 4.7"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     MOZ_ENABLE_QTNETWORK=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       MOZ_ENABLE_QTNETWORK=
     fi
  fi


    if test "$MOZ_ENABLE_QTNETWORK"; then
      MOZ_ENABLE_QTNETWORK=1
      cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_QTNETWORK ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_QTNETWORK 1
EOF

    fi

    MOZ_ENABLE_QTMOBILITY=
    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:17468: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for QtSensors QtFeedback QtLocation""... $ac_c" 1>&6
echo "configure:17512: checking for QtSensors QtFeedback QtLocation" >&5

        if $PKG_CONFIG --exists "QtSensors QtFeedback QtLocation" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking _QTMOBILITY_CFLAGS""... $ac_c" 1>&6
echo "configure:17519: checking _QTMOBILITY_CFLAGS" >&5
            _QTMOBILITY_CFLAGS=`$PKG_CONFIG --cflags "QtSensors QtFeedback QtLocation"`
            echo "$ac_t""$_QTMOBILITY_CFLAGS" 1>&6

            echo $ac_n "checking _QTMOBILITY_LIBS""... $ac_c" 1>&6
echo "configure:17524: checking _QTMOBILITY_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            _QTMOBILITY_LIBS="`$PKG_CONFIG --libs \"QtSensors QtFeedback QtLocation\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$_QTMOBILITY_LIBS" 1>&6
        else
            _QTMOBILITY_CFLAGS=""
            _QTMOBILITY_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            _QTMOBILITY_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "QtSensors QtFeedback QtLocation"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     MOZ_ENABLE_QTMOBILITY=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       MOZ_ENABLE_QTMOBILITY=
     fi
  fi

    if test "$MOZ_ENABLE_QTMOBILITY"; then
       MOZ_ENABLE_QTMOBILITY=1
       MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS $_QTMOBILITY_CFLAGS"
       MOZ_QT_LIBS="$MOZ_QT_LIBS $_QTMOBILITY_LIBS"
    else
       echo $ac_n "checking for main in -lQtSensors""... $ac_c" 1>&6
echo "configure:17559: checking for main in -lQtSensors" >&5
ac_lib_var=`echo QtSensors'_'main | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lQtSensors  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 17567 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:17574: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
          MOZ_ENABLE_QTMOBILITY=1
          MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include/QtMobility"
          MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include/QtSensors"
          MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include/QtFeedback"
          MOZ_QT_CFLAGS="$MOZ_QT_CFLAGS -I$QTDIR/include/QtLocation"
          MOZ_QT_LIBS="$MOZ_QT_LIBS -lQtSensors -lQtFeedback -lQtLocation"
       
else
  echo "$ac_t""no" 1>&6
fi

    fi
    if test "$MOZ_ENABLE_QTMOBILITY"; then
       cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_QTMOBILITY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_QTMOBILITY 1
EOF

    fi
fi






















# Components and Features

# Check whether --enable-ui-locale or --disable-ui-locale was given.
if test "${enable_ui_locale+set}" = set; then
  enableval="$enable_ui_locale"
  MOZ_UI_LOCALE=$enableval 
fi



# Check whether --enable-official-branding or --disable-official-branding was given.
if test "${enable_official_branding+set}" = set; then
  enableval="$enable_official_branding"
  if test "$enableval" = "yes"; then
    
  if test -z "$MOZ_OFFICIAL_BRANDING_DIRECTORY"; then
    { echo "configure: error: You must specify MOZ_OFFICIAL_BRANDING_DIRECTORY to use --enable-official-branding." 1>&2; exit 1; }
  else
    MOZ_BRANDING_DIRECTORY=${MOZ_OFFICIAL_BRANDING_DIRECTORY}
    MOZ_OFFICIAL_BRANDING=1
  fi

  elif test "$enableval" = "no"; then
    MOZ_OFFICIAL_BRANDING=
  else
    { echo "configure: error: Option, official-branding, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi



if test -n "$MOZ_OFFICIAL_BRANDING"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_OFFICIAL_BRANDING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_OFFICIAL_BRANDING 1
EOF

fi

# Check whether --with-branding or --without-branding was given.
if test "${with_branding+set}" = set; then
  withval="$with_branding"
  MOZ_BRANDING_DIRECTORY=$withval
fi


REAL_BRANDING_DIRECTORY="${MOZ_BRANDING_DIRECTORY}"
if test -z "$REAL_BRANDING_DIRECTORY"; then
  REAL_BRANDING_DIRECTORY=${MOZ_BUILD_APP}/branding/nightly
fi

if test -f "${_topsrcdir}/$REAL_BRANDING_DIRECTORY/configure.sh"; then
  . "${_topsrcdir}/$REAL_BRANDING_DIRECTORY/configure.sh"
fi



# Check whether --with-distribution-id or --without-distribution-id was given.
if test "${with_distribution_id+set}" = set; then
  withval="$with_distribution_id"
   val=`echo $withval`
    MOZ_DISTRIBUTION_ID="$val"
fi


if test -z "$MOZ_DISTRIBUTION_ID"; then
   MOZ_DISTRIBUTION_ID="org.mozilla"
fi

cat >> confdefs.pytmp <<EOF
    (''' MOZ_DISTRIBUTION_ID ''', r''' "$MOZ_DISTRIBUTION_ID" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_DISTRIBUTION_ID "$MOZ_DISTRIBUTION_ID"
EOF




# Check whether --enable-pango or --disable-pango was given.
if test "${enable_pango+set}" = set; then
  enableval="$enable_pango"
  if test "$enableval" = "no"; then
    MOZ_PANGO=
  elif test "$enableval" = "yes"; then
    MOZ_PANGO=1
  else
    { echo "configure: error: Option, pango, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test "$MOZ_ENABLE_GTK2" -o "$MOZ_ENABLE_QT"
then
    

    if test "$MOZ_PANGO"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:17740: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for pango >= $PANGO_VERSION""... $ac_c" 1>&6
echo "configure:17784: checking for pango >= $PANGO_VERSION" >&5

        if $PKG_CONFIG --exists "pango >= $PANGO_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking _PANGOCHK_CFLAGS""... $ac_c" 1>&6
echo "configure:17791: checking _PANGOCHK_CFLAGS" >&5
            _PANGOCHK_CFLAGS=`$PKG_CONFIG --cflags "pango >= $PANGO_VERSION"`
            echo "$ac_t""$_PANGOCHK_CFLAGS" 1>&6

            echo $ac_n "checking _PANGOCHK_LIBS""... $ac_c" 1>&6
echo "configure:17796: checking _PANGOCHK_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            _PANGOCHK_LIBS="`$PKG_CONFIG --libs \"pango >= $PANGO_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$_PANGOCHK_LIBS" 1>&6
        else
            _PANGOCHK_CFLAGS=""
            _PANGOCHK_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            _PANGOCHK_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "pango >= $PANGO_VERSION"`
            echo $_PANGOCHK_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (pango >= $PANGO_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi


        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:17832: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for pango >= $PANGO_VERSION pangoft2 >= $PANGO_VERSION pangocairo >= $PANGO_VERSION""... $ac_c" 1>&6
echo "configure:17876: checking for pango >= $PANGO_VERSION pangoft2 >= $PANGO_VERSION pangocairo >= $PANGO_VERSION" >&5

        if $PKG_CONFIG --exists "pango >= $PANGO_VERSION pangoft2 >= $PANGO_VERSION pangocairo >= $PANGO_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_PANGO_CFLAGS""... $ac_c" 1>&6
echo "configure:17883: checking MOZ_PANGO_CFLAGS" >&5
            MOZ_PANGO_CFLAGS=`$PKG_CONFIG --cflags "pango >= $PANGO_VERSION pangoft2 >= $PANGO_VERSION pangocairo >= $PANGO_VERSION"`
            echo "$ac_t""$MOZ_PANGO_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_PANGO_LIBS""... $ac_c" 1>&6
echo "configure:17888: checking MOZ_PANGO_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_PANGO_LIBS="`$PKG_CONFIG --libs \"pango >= $PANGO_VERSION pangoft2 >= $PANGO_VERSION pangocairo >= $PANGO_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_PANGO_LIBS" 1>&6
        else
            MOZ_PANGO_CFLAGS=""
            MOZ_PANGO_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_PANGO_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "pango >= $PANGO_VERSION pangoft2 >= $PANGO_VERSION pangocairo >= $PANGO_VERSION"`
            echo $MOZ_PANGO_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (pango >= $PANGO_VERSION pangoft2 >= $PANGO_VERSION pangocairo >= $PANGO_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

        
        
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PANGO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PANGO 1
EOF

    else
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:17933: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for freetype2 > 6.1.0""... $ac_c" 1>&6
echo "configure:17977: checking for freetype2 > 6.1.0" >&5

        if $PKG_CONFIG --exists "freetype2 > 6.1.0" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking FT2_CFLAGS""... $ac_c" 1>&6
echo "configure:17984: checking FT2_CFLAGS" >&5
            FT2_CFLAGS=`$PKG_CONFIG --cflags "freetype2 > 6.1.0"`
            echo "$ac_t""$FT2_CFLAGS" 1>&6

            echo $ac_n "checking FT2_LIBS""... $ac_c" 1>&6
echo "configure:17989: checking FT2_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            FT2_LIBS="`$PKG_CONFIG --libs \"freetype2 > 6.1.0\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$FT2_LIBS" 1>&6
        else
            FT2_CFLAGS=""
            FT2_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            FT2_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "freetype2 > 6.1.0"`
            echo $FT2_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (freetype2 > 6.1.0) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

        
        
    fi
fi


if test "$MOZ_X11"
then
            if test "$MOZ_ENABLE_GTK2"
    then
        MOZ_ENABLE_GIO=1
        MOZ_ENABLE_GCONF=1
    fi

                # Check whether --enable-gnomevfs or --disable-gnomevfs was given.
if test "${enable_gnomevfs+set}" = set; then
  enableval="$enable_gnomevfs"
  if test "$enableval" = "yes"; then
    MOZ_ENABLE_GNOMEVFS=force
  elif test "$enableval" = "no"; then
    MOZ_ENABLE_GNOMEVFS=
  else
    { echo "configure: error: Option, gnomevfs, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


    if test "$MOZ_ENABLE_GNOMEVFS"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:18053: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION""... $ac_c" 1>&6
echo "configure:18097: checking for gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION" >&5

        if $PKG_CONFIG --exists "gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_GNOMEVFS_CFLAGS""... $ac_c" 1>&6
echo "configure:18104: checking MOZ_GNOMEVFS_CFLAGS" >&5
            MOZ_GNOMEVFS_CFLAGS=`$PKG_CONFIG --cflags "gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION"`
            echo "$ac_t""$MOZ_GNOMEVFS_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_GNOMEVFS_LIBS""... $ac_c" 1>&6
echo "configure:18109: checking MOZ_GNOMEVFS_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_GNOMEVFS_LIBS="`$PKG_CONFIG --libs \"gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_GNOMEVFS_LIBS" 1>&6
        else
            MOZ_GNOMEVFS_CFLAGS=""
            MOZ_GNOMEVFS_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_GNOMEVFS_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     
            MOZ_GNOMEVFS_LIBS=`echo $MOZ_GNOMEVFS_LIBS | sed 's/-llinc\>//'`
            MOZ_ENABLE_GNOMEVFS=1
            cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_GNOMEVFS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_GNOMEVFS 1
EOF

        
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       
            if test "$MOZ_ENABLE_GNOMEVFS" = "force"
            then
                { echo "configure: error: * * * Could not find gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION" 1>&2; exit 1; }
            fi
            MOZ_ENABLE_GNOMEVFS=
        
     fi
  fi

    fi

    
    
    

                # Check whether --enable-gio or --disable-gio was given.
if test "${enable_gio+set}" = set; then
  enableval="$enable_gio"
  if test "$enableval" = "no"; then
    MOZ_ENABLE_GIO=
  elif test "$enableval" = "yes"; then
    MOZ_ENABLE_GIO=force
  else
    { echo "configure: error: Option, gio, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


    if test "$MOZ_ENABLE_GIO" -a "$MOZ_ENABLE_GTK2"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:18181: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for gtk+-2.0 >= 2.14""... $ac_c" 1>&6
echo "configure:18225: checking for gtk+-2.0 >= 2.14" >&5

        if $PKG_CONFIG --exists "gtk+-2.0 >= 2.14" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking _GTKCHECK_CFLAGS""... $ac_c" 1>&6
echo "configure:18232: checking _GTKCHECK_CFLAGS" >&5
            _GTKCHECK_CFLAGS=`$PKG_CONFIG --cflags "gtk+-2.0 >= 2.14"`
            echo "$ac_t""$_GTKCHECK_CFLAGS" 1>&6

            echo $ac_n "checking _GTKCHECK_LIBS""... $ac_c" 1>&6
echo "configure:18237: checking _GTKCHECK_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            _GTKCHECK_LIBS="`$PKG_CONFIG --libs \"gtk+-2.0 >= 2.14\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$_GTKCHECK_LIBS" 1>&6
        else
            _GTKCHECK_CFLAGS=""
            _GTKCHECK_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            _GTKCHECK_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "gtk+-2.0 >= 2.14"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: * * * Could not find gtk+-2.0 > 2.14. Required for build with gio." 1>&2; exit 1; }
     fi
  fi

        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:18272: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for gio-2.0 >= $GIO_VERSION""... $ac_c" 1>&6
echo "configure:18316: checking for gio-2.0 >= $GIO_VERSION" >&5

        if $PKG_CONFIG --exists "gio-2.0 >= $GIO_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_GIO_CFLAGS""... $ac_c" 1>&6
echo "configure:18323: checking MOZ_GIO_CFLAGS" >&5
            MOZ_GIO_CFLAGS=`$PKG_CONFIG --cflags "gio-2.0 >= $GIO_VERSION"`
            echo "$ac_t""$MOZ_GIO_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_GIO_LIBS""... $ac_c" 1>&6
echo "configure:18328: checking MOZ_GIO_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_GIO_LIBS="`$PKG_CONFIG --libs \"gio-2.0 >= $GIO_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_GIO_LIBS" 1>&6
        else
            MOZ_GIO_CFLAGS=""
            MOZ_GIO_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_GIO_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "gio-2.0 >= $GIO_VERSION"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     
            MOZ_GIO_LIBS=`echo $MOZ_GIO_LIBS | sed 's/-llinc\>//'`
            MOZ_ENABLE_GIO=1
            cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_GIO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_GIO 1
EOF

        
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       
            if test "$MOZ_ENABLE_GIO" = "force"
            then
                { echo "configure: error: * * * Could not find gio-2.0 >= $GIO_VERSION" 1>&2; exit 1; }
            fi
            MOZ_ENABLE_GIO=
        
     fi
  fi

    fi

    
    
    

                # Check whether --enable-gconf or --disable-gconf was given.
if test "${enable_gconf+set}" = set; then
  enableval="$enable_gconf"
  if test "$enableval" = "no"; then
    MOZ_ENABLE_GCONF=
  elif test "$enableval" = "yes"; then
    MOZ_ENABLE_GCONF=force
  else
    { echo "configure: error: Option, gconf, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


    if test "$MOZ_ENABLE_GCONF"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:18400: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for gconf-2.0 >= $GCONF_VERSION gobject-2.0 ""... $ac_c" 1>&6
echo "configure:18444: checking for gconf-2.0 >= $GCONF_VERSION gobject-2.0 " >&5

        if $PKG_CONFIG --exists "gconf-2.0 >= $GCONF_VERSION gobject-2.0 " ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_GCONF_CFLAGS""... $ac_c" 1>&6
echo "configure:18451: checking MOZ_GCONF_CFLAGS" >&5
            MOZ_GCONF_CFLAGS=`$PKG_CONFIG --cflags "gconf-2.0 >= $GCONF_VERSION gobject-2.0 "`
            echo "$ac_t""$MOZ_GCONF_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_GCONF_LIBS""... $ac_c" 1>&6
echo "configure:18456: checking MOZ_GCONF_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_GCONF_LIBS="`$PKG_CONFIG --libs \"gconf-2.0 >= $GCONF_VERSION gobject-2.0 \" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_GCONF_LIBS" 1>&6
        else
            MOZ_GCONF_CFLAGS=""
            MOZ_GCONF_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_GCONF_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "gconf-2.0 >= $GCONF_VERSION gobject-2.0 "`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     
            MOZ_GCONF_LIBS=`$PKG_CONFIG --libs gobject-2.0`
            MOZ_ENABLE_GCONF=1
        
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       
            if test "$MOZ_ENABLE_GCONF" = "force"
            then
                { echo "configure: error: * * * Could not find gconf-2.0 " 1>&2; exit 1; }
            fi
            MOZ_ENABLE_GCONF=
        
     fi
  fi

    fi

    if test "$MOZ_ENABLE_GCONF"; then
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_GCONF ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_GCONF 1
EOF

    fi

    
    
    
fi


if test "$MOZ_ENABLE_GTK2" -o "$MOZ_ENABLE_QT"
then
    MOZ_ENABLE_LIBPROXY=

    # Check whether --enable-libproxy or --disable-libproxy was given.
if test "${enable_libproxy+set}" = set; then
  enableval="$enable_libproxy"
  if test "$enableval" = "yes"; then
    MOZ_ENABLE_LIBPROXY=1
  elif test "$enableval" = "no"; then
    MOZ_ENABLE_LIBPROXY=
  else
    { echo "configure: error: Option, libproxy, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


    if test "$MOZ_ENABLE_LIBPROXY"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:18537: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libproxy-1.0""... $ac_c" 1>&6
echo "configure:18581: checking for libproxy-1.0" >&5

        if $PKG_CONFIG --exists "libproxy-1.0" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_LIBPROXY_CFLAGS""... $ac_c" 1>&6
echo "configure:18588: checking MOZ_LIBPROXY_CFLAGS" >&5
            MOZ_LIBPROXY_CFLAGS=`$PKG_CONFIG --cflags "libproxy-1.0"`
            echo "$ac_t""$MOZ_LIBPROXY_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_LIBPROXY_LIBS""... $ac_c" 1>&6
echo "configure:18593: checking MOZ_LIBPROXY_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_LIBPROXY_LIBS="`$PKG_CONFIG --libs \"libproxy-1.0\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_LIBPROXY_LIBS" 1>&6
        else
            MOZ_LIBPROXY_CFLAGS=""
            MOZ_LIBPROXY_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_LIBPROXY_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libproxy-1.0"`
            echo $MOZ_LIBPROXY_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (libproxy-1.0) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_LIBPROXY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_LIBPROXY 1
EOF

    fi
fi





if test "$MOZ_ENABLE_GTK2"
then
    MOZ_ENABLE_GNOME_COMPONENT=1
fi



if test "$MOZ_ENABLE_GTK2"
then
    # Check whether --enable-gnomeui or --disable-gnomeui was given.
if test "${enable_gnomeui+set}" = set; then
  enableval="$enable_gnomeui"
  if test "$enableval" = "yes"; then
    MOZ_ENABLE_GNOMEUI=force
  elif test "$enableval" = "no"; then
    MOZ_ENABLE_GNOMEUI=
  else
    { echo "configure: error: Option, gnomeui, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


    if test "$MOZ_ENABLE_GNOMEUI"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:18666: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libgnomeui-2.0 >= $GNOMEUI_VERSION""... $ac_c" 1>&6
echo "configure:18710: checking for libgnomeui-2.0 >= $GNOMEUI_VERSION" >&5

        if $PKG_CONFIG --exists "libgnomeui-2.0 >= $GNOMEUI_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_GNOMEUI_CFLAGS""... $ac_c" 1>&6
echo "configure:18717: checking MOZ_GNOMEUI_CFLAGS" >&5
            MOZ_GNOMEUI_CFLAGS=`$PKG_CONFIG --cflags "libgnomeui-2.0 >= $GNOMEUI_VERSION"`
            echo "$ac_t""$MOZ_GNOMEUI_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_GNOMEUI_LIBS""... $ac_c" 1>&6
echo "configure:18722: checking MOZ_GNOMEUI_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_GNOMEUI_LIBS="`$PKG_CONFIG --libs \"libgnomeui-2.0 >= $GNOMEUI_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_GNOMEUI_LIBS" 1>&6
        else
            MOZ_GNOMEUI_CFLAGS=""
            MOZ_GNOMEUI_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_GNOMEUI_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libgnomeui-2.0 >= $GNOMEUI_VERSION"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     
            MOZ_ENABLE_GNOMEUI=1
        
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       
            if test "$MOZ_ENABLE_GNOMEUI" = "force"
            then
                { echo "configure: error: * * * Could not find libgnomeui-2.0 >= $GNOMEUI_VERSION" 1>&2; exit 1; }
            fi
            MOZ_ENABLE_GNOMEUI=
        
     fi
  fi

    fi

    if test "$MOZ_ENABLE_GNOMEUI"; then
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_GNOMEUI ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_GNOMEUI 1
EOF

    fi
fi





if test "$MOZ_ENABLE_GTK2" -o "$MOZ_ENABLE_QT"
then
    MOZ_ENABLE_DBUS=1

    # Check whether --enable-dbus or --disable-dbus was given.
if test "${enable_dbus+set}" = set; then
  enableval="$enable_dbus"
  if test "$enableval" = "no"; then
    MOZ_ENABLE_DBUS=
  elif test "$enableval" = "yes"; then
    MOZ_ENABLE_DBUS=1
  else
    { echo "configure: error: Option, dbus, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


    if test "$MOZ_ENABLE_DBUS"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:18801: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for dbus-1 >= $DBUS_VERSION""... $ac_c" 1>&6
echo "configure:18845: checking for dbus-1 >= $DBUS_VERSION" >&5

        if $PKG_CONFIG --exists "dbus-1 >= $DBUS_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_DBUS_CFLAGS""... $ac_c" 1>&6
echo "configure:18852: checking MOZ_DBUS_CFLAGS" >&5
            MOZ_DBUS_CFLAGS=`$PKG_CONFIG --cflags "dbus-1 >= $DBUS_VERSION"`
            echo "$ac_t""$MOZ_DBUS_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_DBUS_LIBS""... $ac_c" 1>&6
echo "configure:18857: checking MOZ_DBUS_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_DBUS_LIBS="`$PKG_CONFIG --libs \"dbus-1 >= $DBUS_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_DBUS_LIBS" 1>&6
        else
            MOZ_DBUS_CFLAGS=""
            MOZ_DBUS_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_DBUS_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "dbus-1 >= $DBUS_VERSION"`
            echo $MOZ_DBUS_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (dbus-1 >= $DBUS_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:18892: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for dbus-glib-1 >= $DBUS_VERSION""... $ac_c" 1>&6
echo "configure:18936: checking for dbus-glib-1 >= $DBUS_VERSION" >&5

        if $PKG_CONFIG --exists "dbus-glib-1 >= $DBUS_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_DBUS_GLIB_CFLAGS""... $ac_c" 1>&6
echo "configure:18943: checking MOZ_DBUS_GLIB_CFLAGS" >&5
            MOZ_DBUS_GLIB_CFLAGS=`$PKG_CONFIG --cflags "dbus-glib-1 >= $DBUS_VERSION"`
            echo "$ac_t""$MOZ_DBUS_GLIB_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_DBUS_GLIB_LIBS""... $ac_c" 1>&6
echo "configure:18948: checking MOZ_DBUS_GLIB_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_DBUS_GLIB_LIBS="`$PKG_CONFIG --libs \"dbus-glib-1 >= $DBUS_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_DBUS_GLIB_LIBS" 1>&6
        else
            MOZ_DBUS_GLIB_CFLAGS=""
            MOZ_DBUS_GLIB_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_DBUS_GLIB_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "dbus-glib-1 >= $DBUS_VERSION"`
            echo $MOZ_DBUS_GLIB_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (dbus-glib-1 >= $DBUS_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_DBUS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_DBUS 1
EOF

    fi
fi






if test -n "$MOZ_ANDROID_HISTORY"; then
    if test -z "$MOZ_PLACES"; then
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ANDROID_HISTORY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ANDROID_HISTORY 1
EOF

    else
        { echo "configure: error: Cannot use MOZ_ANDROID_HISTORY alongside MOZ_PLACES." 1>&2; exit 1; }
    fi
fi

if test -n "$MOZ_ANDROID_OMTC"; then
          cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ANDROID_OMTC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ANDROID_OMTC 1
EOF

fi

# Check whether --enable-websms-backend or --disable-websms-backend was given.
if test "${enable_websms_backend+set}" = set; then
  enableval="$enable_websms_backend"
  if test "$enableval" = "no"; then
    MOZ_WEBSMS_BACKEND=
  elif test "$enableval" = "yes"; then
    MOZ_WEBSMS_BACKEND=1
  else
    { echo "configure: error: Option, websms-backend, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_WEBSMS_BACKEND"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WEBSMS_BACKEND ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WEBSMS_BACKEND 1
EOF

fi

# Check whether --enable-crypto or --disable-crypto was given.
if test "${enable_crypto+set}" = set; then
  enableval="$enable_crypto"
  if test "$enableval" = "no"; then
    MOZ_PSM=
  elif test "$enableval" = "yes"; then
    MOZ_PSM=1 
  else
    { echo "configure: error: Option, crypto, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


# Check whether --enable-jsd or --disable-jsd was given.
if test "${enable_jsd+set}" = set; then
  enableval="$enable_jsd"
  if test "$enableval" = "no"; then
    MOZ_JSDEBUGGER=
  elif test "$enableval" = "yes"; then
    MOZ_JSDEBUGGER=1
  else
    { echo "configure: error: Option, jsd, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi



MOZ_IPDL_TESTS=

# Check whether --enable-ipdl-tests or --disable-ipdl-tests was given.
if test "${enable_ipdl_tests+set}" = set; then
  enableval="$enable_ipdl_tests"
  if test "$enableval" = "yes"; then
    MOZ_IPDL_TESTS=1
  elif test "$enableval" = "no"; then
    MOZ_IPDL_TESTS=
  else
    { echo "configure: error: Option, ipdl-tests, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_IPDL_TESTS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_IPDL_TESTS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_IPDL_TESTS 1
EOF

fi




MOZ_E10S_COMPAT=

# Check whether --enable-e10s-compat or --disable-e10s-compat was given.
if test "${enable_e10s_compat+set}" = set; then
  enableval="$enable_e10s_compat"
  if test "$enableval" = "yes"; then
    MOZ_E10S_COMPAT=1
  elif test "$enableval" = "no"; then
    MOZ_E10S_COMPAT=
  else
    { echo "configure: error: Option, e10s-compat, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_E10S_COMPAT"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_E10S_COMPAT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_E10S_COMPAT 1
EOF

fi

if test -n "$MOZ_PLUGINS"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PLUGINS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PLUGINS 1
EOF

fi

# Check whether --enable-dbm or --disable-dbm was given.
if test "${enable_dbm+set}" = set; then
  enableval="$enable_dbm"
  if test "$enableval" = "no"; then
    NSS_DISABLE_DBM=1
  elif test "$enableval" = "yes"; then
    NSS_DISABLE_DBM=
  else
    { echo "configure: error: Option, dbm, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


IBMBIDI=1
cat >> confdefs.pytmp <<\EOF
    (''' IBMBIDI ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define IBMBIDI 1
EOF


# Check whether --enable-accessibility or --disable-accessibility was given.
if test "${enable_accessibility+set}" = set; then
  enableval="$enable_accessibility"
  if test "$enableval" = "no"; then
    ACCESSIBILITY=
  elif test "$enableval" = "yes"; then
    ACCESSIBILITY=1 
  else
    { echo "configure: error: Option, accessibility, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test "$ACCESSIBILITY"; then
    case "$target" in
    *-mingw*)
        if test -z "$MIDL"; then
            if test "$GCC" != "yes"; then
                { echo "configure: error: MIDL could not be found. Building accessibility without MIDL is not supported." 1>&2; exit 1; }
            else
                { echo "configure: error: You have accessibility enabled, but widl could not be found. Add --disable-accessibility to your mozconfig or install widl. See https://developer.mozilla.org/en-US/docs/Cross_Compile_Mozilla_for_Mingw32 for details." 1>&2; exit 1; }
            fi
        fi
    esac
    cat >> confdefs.pytmp <<\EOF
    (''' ACCESSIBILITY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define ACCESSIBILITY 1
EOF

fi

# Check whether --enable-printing or --disable-printing was given.
if test "${enable_printing+set}" = set; then
  enableval="$enable_printing"
  if test "$enableval" = "no"; then
    NS_PRINTING=
  elif test "$enableval" = "yes"; then
    NS_PRINTING=1
  else
    { echo "configure: error: Option, printing, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test "$NS_PRINTING"; then
    cat >> confdefs.pytmp <<\EOF
    (''' NS_PRINTING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NS_PRINTING 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' NS_PRINT_PREVIEW ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NS_PRINT_PREVIEW 1
EOF

fi

if test -n "$MOZ_WEBRTC"; then
    case "$target" in
    *-android*|*-linuxandroid*)
                MOZ_WEBRTC=
        ;;
    *-linux*|*-mingw*|*-darwin*)
                ;;
    *)
                MOZ_WEBRTC=
        ;;
    esac
fi

# Check whether --enable-webrtc or --disable-webrtc was given.
if test "${enable_webrtc+set}" = set; then
  enableval="$enable_webrtc"
  if test "$enableval" = "no"; then
    MOZ_WEBRTC=
  elif test "$enableval" = "yes"; then
    MOZ_WEBRTC=1
  else
    { echo "configure: error: Option, webrtc, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_WEBRTC"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WEBRTC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WEBRTC 1
EOF

    MOZ_MEDIA=1
    MOZ_RAW=1
    MOZ_VP8=1
    MOZ_VP8_ENCODER=1
    MOZ_VP8_ERROR_CONCEALMENT=1

                    if test "$OS_TARGET" = "Android"; then
       LDFLAGS="$LDFLAGS -lOpenSLES"
    fi
    case "$target" in
    *-android*|*-linuxandroid*)
       LDFLAGS="$LDFLAGS -lOpenSLES"
       ;;
    esac

    MOZ_WEBRTC_SIGNALING=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WEBRTC_SIGNALING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WEBRTC_SIGNALING 1
EOF

    if test "${OS_TARGET}" = "WINNT"; then
        MOZ_WEBRTC_IN_LIBXUL=1
    fi
    MOZ_PEERCONNECTION=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PEERCONNECTION ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PEERCONNECTION 1
EOF

    MOZ_SCTP=1
    MOZ_SRTP=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SCTP ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SCTP 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SRTP ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SRTP 1
EOF

fi









case "$target_cpu" in
arm*)
    MOZ_SAMPLE_TYPE_S16=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SAMPLE_TYPE_S16 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SAMPLE_TYPE_S16 1
EOF

    
;;
*)
    MOZ_SAMPLE_TYPE_FLOAT32=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SAMPLE_TYPE_FLOAT32 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SAMPLE_TYPE_FLOAT32 1
EOF

    
;;
esac

# Check whether --enable-raw or --disable-raw was given.
if test "${enable_raw+set}" = set; then
  enableval="$enable_raw"
  if test "$enableval" = "yes"; then
    MOZ_RAW=1
  elif test "$enableval" = "no"; then
    MOZ_RAW=
  else
    { echo "configure: error: Option, raw, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_RAW"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_RAW ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_RAW 1
EOF

    MOZ_MEDIA=1
fi



# Check whether --enable-ogg or --disable-ogg was given.
if test "${enable_ogg+set}" = set; then
  enableval="$enable_ogg"
  if test "$enableval" = "no"; then
    MOZ_OGG=
  elif test "$enableval" = "yes"; then
    MOZ_OGG=1
  else
    { echo "configure: error: Option, ogg, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_OGG"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_OGG ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_OGG 1
EOF

    MOZ_SYDNEYAUDIO=1
    MOZ_CUBEB=1
    MOZ_MEDIA=1
    if test "$MOZ_SAMPLE_TYPE_FLOAT32"; then
        MOZ_VORBIS=1
    else
        MOZ_TREMOR=1
    fi

        echo $ac_n "checking __attribute__ ((aligned ())) support""... $ac_c" 1>&6
echo "configure:19389: checking __attribute__ ((aligned ())) support" >&5
if eval "test \"`echo '$''{'ac_cv_c_attribute_aligned'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_cv_c_attribute_aligned=0
         CFLAGS_save="${CFLAGS}"
         CFLAGS="${CFLAGS} -Werror"
         for ac_cv_c_attr_align_try in 64 32 16 8; do
           echo "trying $ac_cv_c_attr_align_try"
           cat > conftest.$ac_ext <<EOF
#line 19399 "configure"
#include "confdefs.h"

int main() {
static char c __attribute__ ((aligned(${ac_cv_c_attr_align_try}))) = 0; return c;
; return 0; }
EOF
if { (eval echo configure:19406: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_attribute_aligned="${ac_cv_c_attr_align_try}"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
           if test "$ac_cv_c_attribute_aligned" != 0; then
             break;
           fi
         done
           CFLAGS="${CFLAGS_save}"
fi

echo "$ac_t""$ac_cv_c_attribute_aligned" 1>&6
    if test "${ac_cv_c_attribute_aligned}" != "0"; then
      cat >> confdefs.pytmp <<EOF
    (''' ATTRIBUTE_ALIGNED_MAX ''', r''' ${ac_cv_c_attribute_aligned} ''')
EOF
cat >> confdefs.h <<EOF
#define ATTRIBUTE_ALIGNED_MAX ${ac_cv_c_attribute_aligned}
EOF

    fi
fi

# Check whether --enable-opus or --disable-opus was given.
if test "${enable_opus+set}" = set; then
  enableval="$enable_opus"
  if test "$enableval" = "no"; then
    MOZ_OPUS=
  elif test "$enableval" = "yes"; then
    MOZ_OPUS=1
  else
    { echo "configure: error: Option, opus, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


# Check whether --enable-webm or --disable-webm was given.
if test "${enable_webm+set}" = set; then
  enableval="$enable_webm"
  if test "$enableval" = "no"; then
    MOZ_WEBM=
  elif test "$enableval" = "yes"; then
    MOZ_WEBM=1
  else
    { echo "configure: error: Option, webm, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_WEBM"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WEBM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WEBM 1
EOF

    MOZ_VP8=1
fi;

# Check whether --enable-dash or --disable-dash was given.
if test "${enable_dash+set}" = set; then
  enableval="$enable_dash"
  if test "$enableval" = "no"; then
    MOZ_DASH=
  elif test "$enableval" = "yes"; then
    MOZ_DASH=1
  else
    { echo "configure: error: Option, dash, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_DASH"; then
    if test -n "$MOZ_WEBM"; then
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DASH ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DASH 1
EOF

    else
                { echo "configure: error: WebM is currently disabled and must be enabled for DASH
                     to work." 1>&2; exit 1; }
    fi
fi;


if test "$OS_ARCH" = "WINNT"; then
                MOZ_WMF=1
fi

# Check whether --enable-wmf or --disable-wmf was given.
if test "${enable_wmf+set}" = set; then
  enableval="$enable_wmf"
  if test "$enableval" = "no"; then
    MOZ_WMF=
  elif test "$enableval" = "yes"; then
    MOZ_WMF=1
  else
    { echo "configure: error: Option, wmf, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_WMF"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WMF ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WMF 1
EOF

    MOZ_SYDNEYAUDIO=1
    MOZ_CUBEB=1
    MOZ_MEDIA=1
fi;

if test "$OS_TARGET" = Android -a x"$MOZ_WIDGET_TOOLKIT" != x"gonk"; then
    MOZ_MEDIA_PLUGINS=1
fi

# Check whether --enable-media-plugins or --disable-media-plugins was given.
if test "${enable_media_plugins+set}" = set; then
  enableval="$enable_media_plugins"
  if test "$enableval" = "yes"; then
    MOZ_MEDIA_PLUGINS=1
  elif test "$enableval" = "no"; then
    MOZ_MEDIA_PLUGINS=
  else
    { echo "configure: error: Option, media-plugins, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_MEDIA_PLUGINS"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEDIA_PLUGINS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEDIA_PLUGINS 1
EOF

fi

# Check whether --enable-media-navigator or --disable-media-navigator was given.
if test "${enable_media_navigator+set}" = set; then
  enableval="$enable_media_navigator"
  if test "$enableval" = "yes"; then
    MOZ_MEDIA_NAVIGATOR=1
  elif test "$enableval" = "no"; then
    MOZ_MEDIA_NAVIGATOR=
  else
    { echo "configure: error: Option, media-navigator, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_MEDIA_NAVIGATOR"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEDIA_NAVIGATOR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEDIA_NAVIGATOR 1
EOF

fi

if test "$OS_TARGET" = Android -a x"$MOZ_WIDGET_TOOLKIT" != x"gonk"; then
    MOZ_OMX_PLUGIN=1
fi

# Check whether --enable-omx-plugin or --disable-omx-plugin was given.
if test "${enable_omx_plugin+set}" = set; then
  enableval="$enable_omx_plugin"
  if test "$enableval" = "yes"; then
    MOZ_OMX_PLUGIN=1
  elif test "$enableval" = "no"; then
    MOZ_OMX_PLUGIN=
  else
    { echo "configure: error: Option, omx-plugin, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_OMX_PLUGIN"; then
    if test "$OS_TARGET" = "Android"; then
                cat >> confdefs.pytmp <<\EOF
    (''' MOZ_OMX_PLUGIN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_OMX_PLUGIN 1
EOF

    else
              { echo "configure: error: OMX media plugin can only be built on B2G or Android" 1>&2; exit 1; }
    fi
fi

# Check whether --with-system-libvpx or --without-system-libvpx was given.
if test "${with_system_libvpx+set}" = set; then
  withval="$with_system_libvpx"
  if test "$withval" = "yes"; then
    MOZ_NATIVE_LIBVPX=1
  elif test "$withval" = "no"; then
    :
  else
    { echo "configure: error: Option, system-libvpx, does not take an argument ($withval)." 1>&2; exit 1; }
  fi
fi


MOZ_LIBVPX_CFLAGS=
MOZ_LIBVPX_LIBS=

if test -n "$MOZ_VP8"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VP8 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VP8 1
EOF

    if test -n "$MOZ_VP8_ERROR_CONCEALMENT" ; then
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VP8_ERROR_CONCEALMENT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VP8_ERROR_CONCEALMENT 1
EOF

    fi
    if test -n "$MOZ_VP8_ENCODER" ; then
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VP8_ENCODER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VP8_ENCODER 1
EOF

    fi

    if test -n "$MOZ_NATIVE_LIBVPX"; then
                                        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:19660: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for vpx >= 1.0.0""... $ac_c" 1>&6
echo "configure:19704: checking for vpx >= 1.0.0" >&5

        if $PKG_CONFIG --exists "vpx >= 1.0.0" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_LIBVPX_CFLAGS""... $ac_c" 1>&6
echo "configure:19711: checking MOZ_LIBVPX_CFLAGS" >&5
            MOZ_LIBVPX_CFLAGS=`$PKG_CONFIG --cflags "vpx >= 1.0.0"`
            echo "$ac_t""$MOZ_LIBVPX_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_LIBVPX_LIBS""... $ac_c" 1>&6
echo "configure:19716: checking MOZ_LIBVPX_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_LIBVPX_LIBS="`$PKG_CONFIG --libs \"vpx >= 1.0.0\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_LIBVPX_LIBS" 1>&6
        else
            MOZ_LIBVPX_CFLAGS=""
            MOZ_LIBVPX_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_LIBVPX_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "vpx >= 1.0.0"`
            echo $MOZ_LIBVPX_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (vpx >= 1.0.0) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi


           ac_safe=`echo "vpx/vpx_decoder.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for vpx/vpx_decoder.h""... $ac_c" 1>&6
echo "configure:19748: checking for vpx/vpx_decoder.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 19753 "configure"
#include "confdefs.h"

#include <vpx/vpx_decoder.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:19761: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    :
  else
    echo "$ac_t""no" 1>&6
    { echo "configure: error: Couldn't find vpx/vpx_decoder.h which is required for build with system libvpx. Use --without-system-libvpx to build with in-tree libvpx." 1>&2; exit 1; }
  fi


        _SAVE_LIBS=$LIBS
        echo $ac_n "checking for vpx_codec_dec_init_ver in -lvpx""... $ac_c" 1>&6
echo "configure:19784: checking for vpx_codec_dec_init_ver in -lvpx" >&5
ac_lib_var=`echo vpx'_'vpx_codec_dec_init_ver | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lvpx  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 19792 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char vpx_codec_dec_init_ver();

int main() {
vpx_codec_dec_init_ver()
; return 0; }
EOF
if { (eval echo configure:19803: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo vpx | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_lib ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lvpx $LIBS"

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: --with-system-libvpx requested but symbol vpx_codec_dec_init_ver not found" 1>&2; exit 1; }
fi

        LIBS=$_SAVE_LIBS
    fi
fi





if test "$MOZ_WEBM"; then
    MOZ_SYDNEYAUDIO=1
    MOZ_CUBEB=1
    MOZ_MEDIA=1
    if test "$MOZ_SAMPLE_TYPE_FLOAT32"; then
        MOZ_VORBIS=1
    else
        MOZ_TREMOR=1
    fi
fi

if test -n "$MOZ_VP8" -a -z "$MOZ_NATIVE_LIBVPX"; then

                VPX_AS=$YASM
    VPX_ASM_SUFFIX=asm
    VPX_NEED_OBJ_INT_EXTRACT=

        case "$OS_ARCH:$CPU_ARCH" in
    Darwin:x86)
      VPX_ASFLAGS="-f macho32 -rnasm -pnasm -DPIC"
      VPX_X86_ASM=1
    ;;
    Darwin:x86_64)
      VPX_ASFLAGS="-f macho64 -rnasm -pnasm -DPIC"
      VPX_X86_ASM=1
    ;;
    WINNT:x86_64)
      VPX_ASFLAGS="-f x64 -rnasm -pnasm"
      VPX_X86_ASM=1
    ;;
    WINNT:x86)
            if test -n "$COMPILE_ENVIRONMENT" -a -z "$YASM"; then
        { echo "configure: error: yasm 1.1 or greater is required to build libvpx on Win32, but it appears not to be installed.  Install it (included in MozillaBuild 1.5.1 and newer) or configure with --disable-webm (which disables the WebM video format). See https://developer.mozilla.org/en/YASM for more details." 1>&2; exit 1; }
      elif test -n "$COMPILE_ENVIRONMENT" -a "$_YASM_MAJOR_VERSION" -lt "1" -o \( "$_YASM_MAJOR_VERSION" -eq "1" -a "$_YASM_MINOR_VERSION" -lt "1" \) ; then
        { echo "configure: error: yasm 1.1 or greater is required to build libvpx on Win32, but you appear to have version $_YASM_MAJOR_VERSION.$_YASM_MINOR_VERSION.  Upgrade to the newest version (included in MozillaBuild 1.5.1 and newer) or configure with --disable-webm (which disables the WebM video format). See https://developer.mozilla.org/en/YASM for more details." 1>&2; exit 1; }
      else
        VPX_ASFLAGS="-f win32 -rnasm -pnasm -DPIC"
        VPX_X86_ASM=1
              fi
    ;;
    *:arm*)
      if test -n "$GNU_AS" ; then
        VPX_AS=$AS
                        VPX_ASFLAGS="-march=armv7-a -mfpu=neon"
        VPX_DASH_C_FLAG="-c"
        VPX_AS_CONVERSION='$(PERL) $(topsrcdir)/media/libvpx/build/make/ads2gas.pl'
        VPX_ASM_SUFFIX="$ASM_SUFFIX"
        VPX_ARM_ASM=1
      fi
    ;;
    *:x86)
      if $CC -E -dM -</dev/null | grep -q __ELF__; then
        VPX_ASFLAGS="-f elf32 -rnasm -pnasm"
        VPX_X86_ASM=1
      fi
    ;;
    *:x86_64)
      if $CC -E -dM -</dev/null | grep -q __ELF__; then
        VPX_ASFLAGS="-f elf64 -rnasm -pnasm -DPIC"
        VPX_X86_ASM=1
      fi
    ;;
    esac

    if test -n "$COMPILE_ENVIRONMENT" -a -n "$VPX_X86_ASM" -a -z "$VPX_AS"; then
      { echo "configure: error: yasm is a required build tool for this architecture when webm is enabled. You may either install yasm or --disable-webm (which disables the WebM video format). See https://developer.mozilla.org/en/YASM for more details." 1>&2; exit 1; }
    fi

    if test -n "$MOZ_VP8_ENCODER" -a \
            -z "$GNU_CC" -a -z "$INTEL_CC" -a -z "$CLANG_CC" ; then
                                    VPX_NEED_OBJ_INT_EXTRACT=1
    fi

    if test -n "$VPX_X86_ASM"; then
      cat >> confdefs.pytmp <<\EOF
    (''' VPX_X86_ASM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define VPX_X86_ASM 1
EOF

    elif test -n "$VPX_ARM_ASM"; then
      cat >> confdefs.pytmp <<\EOF
    (''' VPX_ARM_ASM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define VPX_ARM_ASM 1
EOF

    else
      echo "configure: warning: No assembler or assembly support for libvpx. Using unoptimized C routines." 1>&2
    fi
fi

# Check whether --enable-wave or --disable-wave was given.
if test "${enable_wave+set}" = set; then
  enableval="$enable_wave"
  if test "$enableval" = "no"; then
    MOZ_WAVE=
  elif test "$enableval" = "yes"; then
    MOZ_WAVE=1
  else
    { echo "configure: error: Option, wave, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_WAVE"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WAVE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WAVE 1
EOF

    MOZ_SYDNEYAUDIO=1
    MOZ_CUBEB=1
    MOZ_MEDIA=1
fi


if test -n "$MOZ_SYDNEYAUDIO"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SYDNEYAUDIO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SYDNEYAUDIO 1
EOF

fi

if test -n "$MOZ_SPEEX_RESAMPLER"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SPEEX_RESAMPLER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SPEEX_RESAMPLER 1
EOF

fi

if test -n "$MOZ_SOUNDTOUCH"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SOUNDTOUCH ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SOUNDTOUCH 1
EOF

fi

if test -n "$MOZ_CUBEB"; then
    case "$target" in
    *-android*|*-linuxandroid*)
        if test -n "$gonkdir"; then
            cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CUBEB ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CUBEB 1
EOF

        fi
                ;;
    *-linux*)
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CUBEB ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CUBEB 1
EOF

        ;;
    *-mingw*)
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CUBEB ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CUBEB 1
EOF

        ;;
    *-darwin*)
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CUBEB ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CUBEB 1
EOF

        ;;
    *-openbsd*)
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CUBEB ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CUBEB 1
EOF

        ;;
    *)
                ;;
    esac
fi

if test -n "$MOZ_MEDIA"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEDIA ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEDIA 1
EOF

fi

if test -n "$MOZ_VORBIS" -a -n "$MOZ_TREMOR"; then
    { echo "configure: error: MOZ_VORBIS and MOZ_TREMOR are mutually exclusive!  The build system should not allow them both to be set, but they are.  Please file a bug at https://bugzilla.mozilla.org/" 1>&2; exit 1; }
fi

if test -n "$MOZ_VORBIS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VORBIS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VORBIS 1
EOF

fi

if test -n "$MOZ_TREMOR"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TREMOR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TREMOR 1
EOF

fi

if test -n "$MOZ_OPUS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_OPUS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_OPUS 1
EOF

fi


if test -n "$MOZ_SYDNEYAUDIO" -a "$OS_TARGET" = "Linux"; then
    MOZ_ALSA=1
fi

# Check whether --enable-alsa or --disable-alsa was given.
if test "${enable_alsa+set}" = set; then
  enableval="$enable_alsa"
  if test "$enableval" = "yes"; then
    MOZ_ALSA=1
  elif test "$enableval" = "no"; then
    MOZ_ALSA=
  else
    { echo "configure: error: Option, alsa, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_ALSA"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CUBEB ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CUBEB 1
EOF

    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:20123: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for alsa""... $ac_c" 1>&6
echo "configure:20167: checking for alsa" >&5

        if $PKG_CONFIG --exists "alsa" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_ALSA_CFLAGS""... $ac_c" 1>&6
echo "configure:20174: checking MOZ_ALSA_CFLAGS" >&5
            MOZ_ALSA_CFLAGS=`$PKG_CONFIG --cflags "alsa"`
            echo "$ac_t""$MOZ_ALSA_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_ALSA_LIBS""... $ac_c" 1>&6
echo "configure:20179: checking MOZ_ALSA_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_ALSA_LIBS="`$PKG_CONFIG --libs \"alsa\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_ALSA_LIBS" 1>&6
        else
            MOZ_ALSA_CFLAGS=""
            MOZ_ALSA_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_ALSA_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "alsa"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       echo "$MOZ_ALSA_PKG_ERRORS"
          { echo "configure: error: Need alsa for Ogg, Wave or WebM decoding on Linux.  Disable with --disable-ogg --disable-wave --disable-webm.  (On Ubuntu, you might try installing the package libasound2-dev.)" 1>&2; exit 1; }
     fi
  fi

fi






# Check whether --enable-pulseaudio or --disable-pulseaudio was given.
if test "${enable_pulseaudio+set}" = set; then
  enableval="$enable_pulseaudio"
  if test "$enableval" = "yes"; then
    MOZ_PULSEAUDIO=1
  elif test "$enableval" = "no"; then
    MOZ_PULSEAUDIO=
  else
    { echo "configure: error: Option, pulseaudio, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_PULSEAUDIO"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CUBEB ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CUBEB 1
EOF

    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:20243: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libpulse""... $ac_c" 1>&6
echo "configure:20287: checking for libpulse" >&5

        if $PKG_CONFIG --exists "libpulse" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_PULSEAUDIO_CFLAGS""... $ac_c" 1>&6
echo "configure:20294: checking MOZ_PULSEAUDIO_CFLAGS" >&5
            MOZ_PULSEAUDIO_CFLAGS=`$PKG_CONFIG --cflags "libpulse"`
            echo "$ac_t""$MOZ_PULSEAUDIO_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_PULSEAUDIO_LIBS""... $ac_c" 1>&6
echo "configure:20299: checking MOZ_PULSEAUDIO_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_PULSEAUDIO_LIBS="`$PKG_CONFIG --libs \"libpulse\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_PULSEAUDIO_LIBS" 1>&6
        else
            MOZ_PULSEAUDIO_CFLAGS=""
            MOZ_PULSEAUDIO_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_PULSEAUDIO_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libpulse"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       echo "$MOZ_PULSEAUDIO_PKG_ERRORS"
          { echo "configure: error: pulseaudio audio backend requires libpulse package" 1>&2; exit 1; }
     fi
  fi

fi





# Check whether --enable-gstreamer or --disable-gstreamer was given.
if test "${enable_gstreamer+set}" = set; then
  enableval="$enable_gstreamer"
  if test "$enableval" = "yes"; then
    MOZ_GSTREAMER=1
  elif test "$enableval" = "no"; then
    MOZ_GSTREAMER=
  else
    { echo "configure: error: Option, gstreamer, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test "$MOZ_GSTREAMER"; then
    # API version, eg 0.10, 1.0 etc
    GST_API_VERSION=0.10
    # core/base release number
    # depend on >= 0.10.33 as that's when the playbin2 source-setup signal was
    # introduced
    GST_VERSION=0.10.33
    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:20361: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for gstreamer-$GST_API_VERSION >= $GST_VERSION
                      gstreamer-app-$GST_API_VERSION
                      gstreamer-plugins-base-$GST_API_VERSION""... $ac_c" 1>&6
echo "configure:20407: checking for gstreamer-$GST_API_VERSION >= $GST_VERSION
                      gstreamer-app-$GST_API_VERSION
                      gstreamer-plugins-base-$GST_API_VERSION" >&5

        if $PKG_CONFIG --exists "gstreamer-$GST_API_VERSION >= $GST_VERSION
                      gstreamer-app-$GST_API_VERSION
                      gstreamer-plugins-base-$GST_API_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking GSTREAMER_CFLAGS""... $ac_c" 1>&6
echo "configure:20418: checking GSTREAMER_CFLAGS" >&5
            GSTREAMER_CFLAGS=`$PKG_CONFIG --cflags "gstreamer-$GST_API_VERSION >= $GST_VERSION
                      gstreamer-app-$GST_API_VERSION
                      gstreamer-plugins-base-$GST_API_VERSION"`
            echo "$ac_t""$GSTREAMER_CFLAGS" 1>&6

            echo $ac_n "checking GSTREAMER_LIBS""... $ac_c" 1>&6
echo "configure:20425: checking GSTREAMER_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            GSTREAMER_LIBS="`$PKG_CONFIG --libs \"gstreamer-$GST_API_VERSION >= $GST_VERSION
                      gstreamer-app-$GST_API_VERSION
                      gstreamer-plugins-base-$GST_API_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$GSTREAMER_LIBS" 1>&6
        else
            GSTREAMER_CFLAGS=""
            GSTREAMER_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            GSTREAMER_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "gstreamer-$GST_API_VERSION >= $GST_VERSION
                      gstreamer-app-$GST_API_VERSION
                      gstreamer-plugins-base-$GST_API_VERSION"`
            echo $GSTREAMER_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (gstreamer-$GST_API_VERSION >= $GST_VERSION
                      gstreamer-app-$GST_API_VERSION
                      gstreamer-plugins-base-$GST_API_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

    if test -n "$GSTREAMER_LIBS"; then
       _SAVE_LDFLAGS=$LDFLAGS
       LDFLAGS="$LDFLAGS $GSTREAMER_LIBS -lgstvideo-$GST_API_VERSION"
       cat > conftest.$ac_ext <<EOF
#line 20464 "configure"
#include "confdefs.h"

int main() {
return 0;
; return 0; }
EOF
if { (eval echo configure:20471: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  _HAVE_LIBGSTVIDEO=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _HAVE_LIBGSTVIDEO=
fi
rm -f conftest*
       if test -n "$_HAVE_LIBGSTVIDEO" ; then
          GSTREAMER_LIBS="$GSTREAMER_LIBS -lgstvideo-$GST_API_VERSION"
       else
          { echo "configure: error: gstreamer video backend requires libgstvideo" 1>&2; exit 1; }
       fi
       LDFLAGS=$_SAVE_LDFLAGS
    else
       { echo "configure: error: gstreamer backend requires the gstreamer packages" 1>&2; exit 1; }
    fi
fi




if test -n "$MOZ_GSTREAMER"; then
   cat >> confdefs.pytmp <<\EOF
    (''' MOZ_GSTREAMER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_GSTREAMER 1
EOF

   MOZ_MEDIA=1
fi


# Check whether --enable-permissions or --disable-permissions was given.
if test "${enable_permissions+set}" = set; then
  enableval="$enable_permissions"
  if test "$enableval" = "no"; then
    MOZ_PERMISSIONS=
  elif test "$enableval" = "yes"; then
    MOZ_PERMISSIONS=1

  else
    { echo "configure: error: Option, permissions, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


# Check whether --enable-negotiateauth or --disable-negotiateauth was given.
if test "${enable_negotiateauth+set}" = set; then
  enableval="$enable_negotiateauth"
  if test "$enableval" = "no"; then
    MOZ_AUTH_EXTENSION=
  elif test "$enableval" = "yes"; then
    MOZ_AUTH_EXTENSION=1 
  else
    { echo "configure: error: Option, negotiateauth, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


# Check whether --enable-pref-extensions or --disable-pref-extensions was given.
if test "${enable_pref_extensions+set}" = set; then
  enableval="$enable_pref_extensions"
  if test "$enableval" = "no"; then
    MOZ_PREF_EXTENSIONS=
  elif test "$enableval" = "yes"; then
    MOZ_PREF_EXTENSIONS=1 
  else
    { echo "configure: error: Option, pref-extensions, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


# Check whether --enable-system-extension-dirs or --disable-system-extension-dirs was given.
if test "${enable_system_extension_dirs+set}" = set; then
  enableval="$enable_system_extension_dirs"
  if test "$enableval" = "no"; then
    ENABLE_SYSTEM_EXTENSION_DIRS=
  elif test "$enableval" = "yes"; then
    ENABLE_SYSTEM_EXTENSION_DIRS=1 
  else
    { echo "configure: error: Option, system-extension-dirs, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test "$ENABLE_SYSTEM_EXTENSION_DIRS"; then
  cat >> confdefs.pytmp <<\EOF
    (''' ENABLE_SYSTEM_EXTENSION_DIRS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define ENABLE_SYSTEM_EXTENSION_DIRS 1
EOF

fi

# Check whether --enable-universalchardet or --disable-universalchardet was given.
if test "${enable_universalchardet+set}" = set; then
  enableval="$enable_universalchardet"
  if test "$enableval" = "no"; then
    MOZ_UNIVERSALCHARDET=
  elif test "$enableval" = "yes"; then
    MOZ_UNIVERSALCHARDET=1 
  else
    { echo "configure: error: Option, universalchardet, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "${JAVA_BIN_PATH}"; then
    JAVA_PATH="$JAVA_BIN_PATH"
else
    JAVA_PATH="$JAVA_HOME/bin:$PATH"
fi

 # Extract the first word of "java", so it can be a program name with args.
set dummy java; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:20591: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_JAVA'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$JAVA" in
  /*)
  ac_cv_path_JAVA="$JAVA" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_JAVA="$JAVA" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$JAVA_PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_JAVA="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_JAVA" && ac_cv_path_JAVA=":"
  ;;
esac
fi
JAVA="$ac_cv_path_JAVA"
if test -n "$JAVA"; then
  echo "$ac_t""$JAVA" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$msyshost"; then
    case "$JAVA" in
    /*)
      tmp_DIRNAME=`dirname "$JAVA"`
      tmp_BASENAME=`basename "$JAVA"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      JAVA="$tmp_PWD/$tmp_BASENAME"
      if test -e "$JAVA.exe"; then
        JAVA="$JAVA.exe"
      fi
    esac
  fi

 # Extract the first word of "javac", so it can be a program name with args.
set dummy javac; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:20640: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_JAVAC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$JAVAC" in
  /*)
  ac_cv_path_JAVAC="$JAVAC" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_JAVAC="$JAVAC" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$JAVA_PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_JAVAC="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_JAVAC" && ac_cv_path_JAVAC=":"
  ;;
esac
fi
JAVAC="$ac_cv_path_JAVAC"
if test -n "$JAVAC"; then
  echo "$ac_t""$JAVAC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$msyshost"; then
    case "$JAVAC" in
    /*)
      tmp_DIRNAME=`dirname "$JAVAC"`
      tmp_BASENAME=`basename "$JAVAC"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      JAVAC="$tmp_PWD/$tmp_BASENAME"
      if test -e "$JAVAC.exe"; then
        JAVAC="$JAVAC.exe"
      fi
    esac
  fi

 # Extract the first word of "jar", so it can be a program name with args.
set dummy jar; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:20689: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_JAR'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$JAR" in
  /*)
  ac_cv_path_JAR="$JAR" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_JAR="$JAR" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$JAVA_PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_JAR="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_JAR" && ac_cv_path_JAR=":"
  ;;
esac
fi
JAR="$ac_cv_path_JAR"
if test -n "$JAR"; then
  echo "$ac_t""$JAR" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$msyshost"; then
    case "$JAR" in
    /*)
      tmp_DIRNAME=`dirname "$JAR"`
      tmp_BASENAME=`basename "$JAR"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      JAR="$tmp_PWD/$tmp_BASENAME"
      if test -e "$JAR.exe"; then
        JAR="$JAR.exe"
      fi
    esac
  fi


if test -n "${JAVA_BIN_PATH}" -o \
  \( "$OS_TARGET" = Android -a x"$MOZ_WIDGET_TOOLKIT" != x"gonk" \); then
  if test -z "$JAVA" -o "$JAVA" = ":" -o -z "$JAVAC" -o "$JAVAC" = ":" -o -z "$JAR" -o "$JAR" = ":"; then
    { echo "configure: error: The programs java, javac and jar were not found.  Set \$JAVA_HOME to your java sdk directory or use --with-java-bin-path={java-bin-dir}" 1>&2; exit 1; }
  fi
fi

MOZ_ANGLE_RENDERER=
MOZ_DIRECTX_SDK_PATH=
MOZ_DIRECTX_SDK_CPU_SUFFIX=
MOZ_D3DX9_VERSION=
MOZ_D3DX9_CAB=
MOZ_D3DCOMPILER_CAB=
MOZ_D3DX9_DLL=
MOZ_D3DCOMPILER_DLL=
case "$target_os" in
*mingw*)
    MOZ_ANGLE_RENDERER=1
    ;;
esac

# The DirectX SDK libraries are split into x86 and x64 sub-directories
case "${target_cpu}" in
i*86)
  MOZ_DIRECTX_SDK_CPU_SUFFIX=x86
  ;;
x86_64)
  MOZ_DIRECTX_SDK_CPU_SUFFIX=x64
  ;;
esac

# Check whether --enable-webgl or --disable-webgl was given.
if test "${enable_webgl+set}" = set; then
  enableval="$enable_webgl"
  if test "$enableval" = "no"; then
    MOZ_WEBGL_DISABLED=1
  elif test "$enableval" = "yes"; then
    MOZ_WEBGL_DISABLED=
  else
    { echo "configure: error: Option, webgl, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_WEBGL_DISABLED"; then
  MOZ_WEBGL=
  MOZ_ANGLE_RENDERER=
fi

if test -n "$MOZ_ANGLE_RENDERER" -a -z "$CROSS_COMPILE"; then
  # Get the SDK path from the registry.
  # First try to get the June 2010 SDK
  MOZ_DIRECTX_SDK_REG_KEY=`reg query 'HKLM\Software\Microsoft\DirectX' //s | grep 'Microsoft DirectX SDK (June 2010)' | head -n 1`
  if test -z "$MOZ_DIRECTX_SDK_REG_KEY" ; then
    # Otherwise just take whatever comes first
    MOZ_DIRECTX_SDK_REG_KEY=`reg query 'HKLM\Software\Microsoft\DirectX' //s | grep 'Microsoft DirectX SDK' | head -n 1`
  fi

  if test -n "`echo $MOZ_DIRECTX_SDK_REG_KEY | grep 'February 2010'`" ; then
    { echo "configure: error: Found the February 2010 DirectX SDK. Need the June 2010 DirectX SDK, or newer.  Upgrade your SDK or reconfigure with --disable-webgl." 1>&2; exit 1; }
  else
    MOZ_DIRECTX_SDK_PATH=`reg query "$MOZ_DIRECTX_SDK_REG_KEY" //v InstallPath | grep REG_SZ | sed 's/.*\([a-zA-Z]\)\\:\\\\/\\1\\:\\\\/' | sed 's,\\\\,/,g'`
  fi

  if test -n "$MOZ_DIRECTX_SDK_PATH" &&
     test -f "$MOZ_DIRECTX_SDK_PATH"/include/d3dx9.h &&
	 test -f "$MOZ_DIRECTX_SDK_PATH"/lib/$MOZ_DIRECTX_SDK_CPU_SUFFIX/dxguid.lib ; then
    echo "$ac_t""Found DirectX SDK via registry, using $MOZ_DIRECTX_SDK_PATH" 1>&6
  else
    { echo "configure: error: Couldn't find the DirectX SDK, needed for WebGL. Either install it (June 2010 version or newer), or reconfigure with --disable-webgl." 1>&2; exit 1; }
  fi

  # Get the SDK numeric version (e.g. 43) by looking at the dependencies of d3dx9.lib
  MOZ_D3DX9_VERSION=`dumpbin //headers "$MOZ_DIRECTX_SDK_PATH"/lib/$MOZ_DIRECTX_SDK_CPU_SUFFIX/d3dx9.lib | egrep d3dx9_[0-9][0-9]\.dll | head -n1 | sed 's/.*\([0-9][0-9]\).*/\\1/g'`

  if test -z "$MOZ_D3DX9_VERSION" ; then
  	{ echo "configure: error: Couldn't determine the D3DX9 version, needed for WebGL. Either reinstall the DirectX SDK (June 2010 version or newer), or reconfigure with --disable-webgl." 1>&2; exit 1; }
  fi

  MOZ_D3DX9_CAB=`find "$MOZ_DIRECTX_SDK_PATH"/Redist -name *d3dx9_${MOZ_D3DX9_VERSION}_${MOZ_DIRECTX_SDK_CPU_SUFFIX}.cab | head -n1`
  MOZ_D3DCOMPILER_CAB=`find "$MOZ_DIRECTX_SDK_PATH"/Redist -name *D3DCompiler_${MOZ_D3DX9_VERSION}_${MOZ_DIRECTX_SDK_CPU_SUFFIX}.cab | head -n1`

  if test -z "$MOZ_D3DX9_CAB" -o -z "$MOZ_D3DCOMPILER_CAB"; then
    { echo "configure: error: Couldn't find the DirectX redistributable files. Either reinstall the DirectX SDK (making sure the "DirectX Redistributable Files" option is selected), or reconfigure with --disable-webgl." 1>&2; exit 1; }
  fi

  MOZ_D3DX9_DLL=d3dx9_$MOZ_D3DX9_VERSION.dll
  MOZ_D3DCOMPILER_DLL=D3DCompiler_$MOZ_D3DX9_VERSION.dll
fi


case $target in
i?86-*-mingw*|x86_64-*-mingw*)
  MOZ_CRASHREPORTER=1
  ;;
i?86-apple-darwin*|x86_64-apple-darwin*)
  MOZ_CRASHREPORTER=1
  ;;
i?86-*-linux*|x86_64-*-linux*|arm-*-linux*)
  if test "$MOZ_ENABLE_GTK2"; then
    MOZ_CRASHREPORTER=1
  fi
  ;;
*-android*|*-linuxandroid*)
  MOZ_CRASHREPORTER=1
  ;;
*solaris*)
  MOZ_CRASHREPORTER=1
  ;;
esac

# Check whether --enable-crashreporter or --disable-crashreporter was given.
if test "${enable_crashreporter+set}" = set; then
  enableval="$enable_crashreporter"
  if test "$enableval" = "no"; then
    MOZ_CRASHREPORTER=
  elif test "$enableval" = "yes"; then
    MOZ_CRASHREPORTER=1
  else
    { echo "configure: error: Option, crashreporter, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_CRASHREPORTER"; then
   cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CRASHREPORTER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CRASHREPORTER 1
EOF


  if test "$OS_TARGET" = "Linux" -o "$OS_ARCH" = "SunOS" && \
    test -z "$SKIP_LIBRARY_CHECKS"; then
    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:20877: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for gthread-2.0""... $ac_c" 1>&6
echo "configure:20921: checking for gthread-2.0" >&5

        if $PKG_CONFIG --exists "gthread-2.0" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_GTHREAD_CFLAGS""... $ac_c" 1>&6
echo "configure:20928: checking MOZ_GTHREAD_CFLAGS" >&5
            MOZ_GTHREAD_CFLAGS=`$PKG_CONFIG --cflags "gthread-2.0"`
            echo "$ac_t""$MOZ_GTHREAD_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_GTHREAD_LIBS""... $ac_c" 1>&6
echo "configure:20933: checking MOZ_GTHREAD_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_GTHREAD_LIBS="`$PKG_CONFIG --libs \"gthread-2.0\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_GTHREAD_LIBS" 1>&6
        else
            MOZ_GTHREAD_CFLAGS=""
            MOZ_GTHREAD_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_GTHREAD_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "gthread-2.0"`
            echo $MOZ_GTHREAD_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (gthread-2.0) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

    
    

     for ac_hdr in curl/curl.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:20969: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 20974 "configure"
#include "confdefs.h"

#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:20982: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    { echo "configure: error: Couldn't find curl/curl.h which is required for the crash reporter.  Use --disable-crashreporter to disable the crash reporter." 1>&2; exit 1; }
  fi

  done

  fi

  if test "$OS_ARCH" != "$HOST_OS_ARCH"; then
    { echo "configure: error: Breakpad tools do not support compiling on $HOST_OS_ARCH while targeting $OS_ARCH.  Use --disable-crashreporter." 1>&2; exit 1; }
  fi

  if test "$OS_ARCH" = "WINNT" -a -z "$HAVE_64BIT_OS"; then
    MOZ_CRASHREPORTER_INJECTOR=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CRASHREPORTER_INJECTOR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CRASHREPORTER_INJECTOR 1
EOF

  fi
fi

# Check whether --with-crashreporter-enable-percent or --without-crashreporter-enable-percent was given.
if test "${with_crashreporter_enable_percent+set}" = set; then
  withval="$with_crashreporter_enable_percent"
   val=`echo $withval | sed 's/^0-9//g'`
    MOZ_CRASHREPORTER_ENABLE_PERCENT="$val"
fi


if test -z "$MOZ_CRASHREPORTER_ENABLE_PERCENT"; then
   MOZ_CRASHREPORTER_ENABLE_PERCENT=100
fi
cat >> confdefs.pytmp <<EOF
    (''' MOZ_CRASHREPORTER_ENABLE_PERCENT ''', r''' $MOZ_CRASHREPORTER_ENABLE_PERCENT ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_CRASHREPORTER_ENABLE_PERCENT $MOZ_CRASHREPORTER_ENABLE_PERCENT
EOF


MOZ_LIBJPEG_TURBO=
if test -z "$MOZ_NATIVE_JPEG"; then
    MOZ_LIBJPEG_TURBO=1
fi

# Check whether --enable-libjpeg_turbo or --disable-libjpeg_turbo was given.
if test "${enable_libjpeg_turbo+set}" = set; then
  enableval="$enable_libjpeg_turbo"
  if test "$enableval" = "no"; then
    MOZ_LIBJPEG_TURBO=
  elif test "$enableval" = "yes"; then
    MOZ_LIBJPEG_TURBO=1
  else
    { echo "configure: error: Option, libjpeg_turbo, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test "$MOZ_NATIVE_JPEG" = 1 -a "$MOZ_LIBJPEG_TURBO" = 1; then
    { echo "configure: error: cannot use --with-system-jpeg with --enable-libjpeg-turbo." 1>&2; exit 1; }
fi


if test -n "$MOZ_LIBJPEG_TURBO"; then

    case "$OS_ARCH:$OS_TEST" in
  Darwin:i?86)
    LIBJPEG_TURBO_ASFLAGS="-f macho32 -rnasm -pnasm -DPIC -DMACHO"
    LIBJPEG_TURBO_X86_ASM=1
  ;;
  Darwin:x86_64)
    LIBJPEG_TURBO_ASFLAGS="-f macho64 -rnasm -pnasm -D__x86_64__ -DPIC -DMACHO"
    LIBJPEG_TURBO_X64_ASM=1
  ;;
  WINNT:x86|WINNT:i?86)
    LIBJPEG_TURBO_ASFLAGS="-f win32 -rnasm -pnasm -DPIC -DWIN32"
    LIBJPEG_TURBO_X86_ASM=1
  ;;
  WINNT:x86_64)
    LIBJPEG_TURBO_ASFLAGS="-f win64 -rnasm -pnasm -D__x86_64__ -DPIC -DWIN64 -DMSVC"
    LIBJPEG_TURBO_X64_ASM=1
  ;;
  *:arm*)
    LIBJPEG_TURBO_ASFLAGS="-march=armv7-a -mfpu=neon"
    LIBJPEG_TURBO_ARM_ASM=1
  ;;
  *:x86|*:i?86)
    if $CC -E -dM -</dev/null | grep -q __ELF__; then
      LIBJPEG_TURBO_ASFLAGS="-f elf32 -rnasm -pnasm -DPIC -DELF"
      LIBJPEG_TURBO_X86_ASM=1
    fi
  ;;
  *:x86_64)
    if $CC -E -dM -</dev/null | grep -q __ELF__; then
      LIBJPEG_TURBO_ASFLAGS="-f elf64 -rnasm -pnasm -D__x86_64__ -DPIC -DELF"
      LIBJPEG_TURBO_X64_ASM=1
    fi
  ;;
  esac

fi

if test -n "$LIBJPEG_TURBO_X86_ASM" -o -n "$LIBJPEG_TURBO_X64_ASM" ; then
    echo $ac_n "checking for Yasm assembler""... $ac_c" 1>&6
echo "configure:21112: checking for Yasm assembler" >&5
    for ac_prog in yasm
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:21118: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LIBJPEG_TURBO_AS'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LIBJPEG_TURBO_AS"; then
  ac_cv_prog_LIBJPEG_TURBO_AS="$LIBJPEG_TURBO_AS" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LIBJPEG_TURBO_AS="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
LIBJPEG_TURBO_AS="$ac_cv_prog_LIBJPEG_TURBO_AS"
if test -n "$LIBJPEG_TURBO_AS"; then
  echo "$ac_t""$LIBJPEG_TURBO_AS" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$LIBJPEG_TURBO_AS" && break
done
test -n "$LIBJPEG_TURBO_AS" || LIBJPEG_TURBO_AS=""""


    if test -z "$LIBJPEG_TURBO_AS" ; then
        { echo "configure: error: Yasm is required to build with libjpeg-turbo's optimized JPEG decoding routines, but you do not appear to have Yasm installed.  Either install it or configure with --disable-libjpeg-turbo to use the pure C JPEG decoder.  See https://developer.mozilla.org/en/YASM for more details." 1>&2; exit 1; }
    fi

            if test "$OS_ARCH" = "Linux" ; then
        if test "$_YASM_MAJOR_VERSION" -lt "1" -o \( "$_YASM_MAJOR_VERSION" -eq "1" -a "$_YASM_MINOR_VERSION" -eq "0" -a "$_YASM_RELEASE" -lt "1" \) ; then
            { echo "configure: error: Yasm 1.0.1 or greater is required to build with libjpeg-turbo's optimized JPEG decoding routines, but you appear to have version $_YASM_MAJOR_VERSION.$_YASM_MINOR_VERSION.$_YASM_RELEASE.  Upgrade to the newest version or configure with --disable-libjpeg-turbo to use the pure C JPEG decoder.  See https://developer.mozilla.org/en/YASM for more details." 1>&2; exit 1; }
        fi
    else
        if test "$_YASM_MAJOR_VERSION" -lt "1" -o \( "$_YASM_MAJOR_VERSION" -eq "1" -a "$_YASM_MINOR_VERSION" -lt "1" \) ; then
            { echo "configure: error: Yasm 1.1 or greater is required to build with libjpeg-turbo's optimized JPEG decoding routines, but you appear to have version $_YASM_MAJOR_VERSION.$_YASM_MINOR_VERSION.  Upgrade to the newest version or configure with --disable-libjpeg-turbo to use the pure C JPEG decoder.  See https://developer.mozilla.org/en/YASM for more details." 1>&2; exit 1; }
        fi
    fi
fi

if test -n "$LIBJPEG_TURBO_ARM_ASM" ; then
    echo "Using $AS as the assembler for ARM code."
    LIBJPEG_TURBO_AS=$AS
fi

if test -n "$LIBJPEG_TURBO_X86_ASM"; then
    cat >> confdefs.pytmp <<\EOF
    (''' LIBJPEG_TURBO_X86_ASM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define LIBJPEG_TURBO_X86_ASM 1
EOF

elif test -n "$LIBJPEG_TURBO_X64_ASM"; then
    cat >> confdefs.pytmp <<\EOF
    (''' LIBJPEG_TURBO_X64_ASM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define LIBJPEG_TURBO_X64_ASM 1
EOF

elif test -n "$LIBJPEG_TURBO_ARM_ASM"; then
    cat >> confdefs.pytmp <<\EOF
    (''' LIBJPEG_TURBO_ARM_ASM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define LIBJPEG_TURBO_ARM_ASM 1
EOF

elif test -n "$MOZ_LIBJPEG_TURBO"; then
            echo "configure: warning: No assembler or assembly support for libjpeg-turbo.  Using unoptimized C routines." 1>&2
fi


# Check whether --enable-extensions or --disable-extensions was given.
if test "${enable_extensions+set}" = set; then
  enableval="$enable_extensions"
   for option in `echo $enableval | sed 's/,/ /g'`; do
    if test "$option" = "yes" -o "$option" = "all"; then
        { echo "configure: error: --enable-extensions=$option is no longer supported." 1>&2; exit 1; }
    elif test "$option" = "no" -o "$option" = "none"; then
        MOZ_EXTENSIONS=""
    elif test "$option" = "default"; then
        MOZ_EXTENSIONS="$MOZ_EXTENSIONS $MOZ_EXTENSIONS_DEFAULT"
    elif test `echo "$option" | grep -c \^-` != 0; then
        option=`echo $option | sed 's/^-//'`
        MOZ_EXTENSIONS=`echo "$MOZ_EXTENSIONS" | sed "s/ ${option}//"`
    else
        MOZ_EXTENSIONS="$MOZ_EXTENSIONS $option"
    fi
done
else
  MOZ_EXTENSIONS="$MOZ_EXTENSIONS_DEFAULT"
fi


if test -z "$MOZ_ENABLE_GNOMEVFS" -a `echo "$MOZ_EXTENSIONS" | grep -c gnomevfs` -ne 0; then
    # Suppress warning on non-X11 platforms
    if test -n "$MOZ_X11"; then
        echo "configure: warning: Removing gnomevfs from MOZ_EXTENSIONS due to no --enable-gnomevfs." 1>&2
    fi
    MOZ_EXTENSIONS=`echo $MOZ_EXTENSIONS | sed -e 's|gnomevfs||'`
fi

if test -n "$LIBXUL_SDK_DIR" -a `echo "$MOZ_EXTENSIONS" | grep -c gnomevfs` -ne 0; then
    MOZ_EXTENSIONS=`echo $MOZ_EXTENSIONS | sed -e 's|gnomevfs||'`
fi

if test -z "$MOZ_ENABLE_GIO" -a `echo "$MOZ_EXTENSIONS" | grep -c gio` -ne 0; then
    # Suppress warning on non-X11 platforms
    if test -n "$MOZ_X11"; then
        echo "configure: warning: Removing gio from MOZ_EXTENSIONS due to --disable-gio." 1>&2
    fi
    MOZ_EXTENSIONS=`echo $MOZ_EXTENSIONS | sed -e 's|gio||'`
fi

if test -n "$LIBXUL_SDK_DIR" -a `echo "$MOZ_EXTENSIONS" | grep -c gio` -ne 0; then
    MOZ_EXTENSIONS=`echo $MOZ_EXTENSIONS | sed -e 's|gio||'`
fi

if test `echo "$MOZ_EXTENSIONS" | grep -c gio` -ne 0; then
    MOZ_GIO_COMPONENT=1
    MOZ_EXTENSIONS=`echo $MOZ_EXTENSIONS | sed -e 's|gio||'`
fi


if test -z "$MOZ_JSDEBUGGER" -a `echo "$MOZ_EXTENSIONS" | grep -c venkman` -ne 0; then
    echo "configure: warning: Cannot build venkman without JavaScript debug library. Removing venkman from MOZ_EXTENSIONS." 1>&2
    MOZ_EXTENSIONS=`echo $MOZ_EXTENSIONS | sed -e 's|venkman||'`
fi

MOZ_EXTENSIONS=`${PERL} ${srcdir}/build/unix/uniq.pl ${MOZ_EXTENSIONS}`

for extension in $MOZ_EXTENSIONS; do
    if test ! -d "${srcdir}/extensions/${extension}"; then
        { echo "configure: error: Unrecognized extension provided to --enable-extensions: ${extension}." 1>&2; exit 1; }
    fi
done

if test -n "$MOZ_USE_NATIVE_POPUP_WINDOWS"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_USE_NATIVE_POPUP_WINDOWS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_USE_NATIVE_POPUP_WINDOWS 1
EOF

fi

if test -n "$MOZ_FLEXBOX"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_FLEXBOX ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_FLEXBOX 1
EOF

fi

# Check whether --enable-tree-freetype or --disable-tree-freetype was given.
if test "${enable_tree_freetype+set}" = set; then
  enableval="$enable_tree_freetype"
  if test "$enableval" = "yes"; then
    MOZ_TREE_FREETYPE=1
  elif test "$enableval" = "no"; then
    MOZ_TREE_FREETYPE= 
  else
    { echo "configure: error: Option, tree-freetype, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_TREE_FREETYPE"; then
   if test -n "$_WIN32_MSVC"; then
      { echo "configure: error: "building with in-tree freetype is not supported on MSVC"" 1>&2; exit 1; }
   fi
   cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TREE_FREETYPE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TREE_FREETYPE 1
EOF

   
   MOZ_ENABLE_CAIRO_FT=1
   FT_FONT_FEATURE="#define CAIRO_HAS_FT_FONT 1"
   FT2_CFLAGS='-I$(topsrcdir)/modules/freetype2/include'
   CAIRO_FT_CFLAGS='-I$(topsrcdir)/modules/freetype2/include'
   FT2_LIBS='$(call EXPAND_LIBNAME_PATH,freetype,$(DEPTH)/modules/freetype2/.libs)'
   CAIRO_FT_OSLIBS=''
   CAIRO_FT_LIBS='$(call EXPAND_LIBNAME_PATH,freetype,$(DEPTH)/modules/freetype2/.libs)'
   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_FT_BITMAP_SIZE_Y_PPEM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_FT_BITMAP_SIZE_Y_PPEM 1
EOF

   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_FT_GLYPHSLOT_EMBOLDEN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_FT_GLYPHSLOT_EMBOLDEN 1
EOF

   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_FT_LOAD_SFNT_TABLE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_FT_LOAD_SFNT_TABLE 1
EOF

   
fi

if test "$OS_ARCH" = "WINNT"; then
    REQ_NSIS_MAJOR_VER=2
    MIN_NSIS_MINOR_VER=33
      for ac_prog in $MAKENSISU makensisu-2.46 makensisu makensis
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:21346: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_MAKENSISU'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$MAKENSISU" in
  /*)
  ac_cv_path_MAKENSISU="$MAKENSISU" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_MAKENSISU="$MAKENSISU" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_MAKENSISU="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
MAKENSISU="$ac_cv_path_MAKENSISU"
if test -n "$MAKENSISU"; then
  echo "$ac_t""$MAKENSISU" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$MAKENSISU" && break
done

  if test "$msyshost"; then
    case "$MAKENSISU" in
    /*)
      tmp_DIRNAME=`dirname "$MAKENSISU"`
      tmp_BASENAME=`basename "$MAKENSISU"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      MAKENSISU="$tmp_PWD/$tmp_BASENAME"
      if test -e "$MAKENSISU.exe"; then
        MAKENSISU="$MAKENSISU.exe"
      fi
    esac
  fi

    if test -n "$MAKENSISU" -a "$MAKENSISU" != ":"; then
      echo "$ac_t""yes" 1>&6
      
      MAKENSISU_VER=`"$MAKENSISU" -version 2>/dev/null | sed -e '/-Unicode/!s/.*//g' -e 's/^v\([0-9]\+\.[0-9]\+\)\-Unicode$/\1/g'`
      
      if test ! "$MAKENSISU_VER" = ""; then
          MAKENSISU_MAJOR_VER=`echo $MAKENSISU_VER | $AWK -F\. '{ print $1 }'`
          MAKENSISU_MINOR_VER=`echo $MAKENSISU_VER | $AWK -F\. '{ print $2 }'`
      fi
      echo $ac_n "checking for Unicode NSIS with major version == $REQ_NSIS_MAJOR_VER and minor version >= $MIN_NSIS_MINOR_VER""... $ac_c" 1>&6
echo "configure:21404: checking for Unicode NSIS with major version == $REQ_NSIS_MAJOR_VER and minor version >= $MIN_NSIS_MINOR_VER" >&5
      if test "$MAKENSISU_VER" = "" || \
         test ! "$MAKENSISU_MAJOR_VER" = "$REQ_NSIS_MAJOR_VER" -o \
              ! "$MAKENSISU_MINOR_VER" -ge $MIN_NSIS_MINOR_VER; then
          echo "$ac_t""no" 1>&6
          if test -z "$CROSS_COMPILE"; then
            { echo "configure: error: To build the installer you must have the latest MozillaBuild or Unicode NSIS with a major version of $REQ_NSIS_MAJOR_VER and a minimum minor version of $MIN_NSIS_MINOR_VER in your path." 1>&2; exit 1; }
          else
            MAKENSISU=
          fi
      fi
    elif test -z "$CROSS_COMPILE"; then
      { echo "configure: error: To build the installer you must have the latest MozillaBuild or Unicode NSIS with a major version of $REQ_NSIS_MAJOR_VER and a minimum minor version of $MIN_NSIS_MINOR_VER in your path." 1>&2; exit 1; }
    else
      MAKENSISU=
    fi
fi

# Check whether --enable-webapp-runtime or --disable-webapp-runtime was given.
if test "${enable_webapp_runtime+set}" = set; then
  enableval="$enable_webapp_runtime"
  if test "$enableval" = "no"; then
    MOZ_WEBAPP_RUNTIME=
  elif test "$enableval" = "yes"; then
    MOZ_WEBAPP_RUNTIME=1
  else
    { echo "configure: error: Option, webapp-runtime, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test "$MOZ_WIDGET_TOOLKIT" != "windows" -a "$MOZ_WIDGET_TOOLKIT" != "cocoa" -a "$MOZ_WIDGET_TOOLKIT" != "gtk2"; then
    MOZ_WEBAPP_RUNTIME=
fi
if test "$OS_ARCH" = "WINNT" -a -z "$MAKENSISU" -a -n "$CROSS_COMPILE"; then
    MOZ_WEBAPP_RUNTIME=
fi

if test "$MOZ_WEBAPP_RUNTIME"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WEBAPP_RUNTIME ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WEBAPP_RUNTIME 1
EOF

fi

echo $ac_n "checking for tar archiver""... $ac_c" 1>&6
echo "configure:21452: checking for tar archiver" >&5
for ac_prog in gnutar gtar tar
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:21458: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_TAR'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$TAR"; then
  ac_cv_prog_TAR="$TAR" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_TAR="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
TAR="$ac_cv_prog_TAR"
if test -n "$TAR"; then
  echo "$ac_t""$TAR" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$TAR" && break
done
test -n "$TAR" || TAR=""""

if test -z "$TAR"; then
    { echo "configure: error: no tar archiver found in \$PATH" 1>&2; exit 1; }
fi
echo "$ac_t""$TAR" 1>&6


echo $ac_n "checking for wget""... $ac_c" 1>&6
echo "configure:21495: checking for wget" >&5
for ac_prog in wget
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:21501: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_WGET'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$WGET"; then
  ac_cv_prog_WGET="$WGET" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_WGET="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
WGET="$ac_cv_prog_WGET"
if test -n "$WGET"; then
  echo "$ac_t""$WGET" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$WGET" && break
done
test -n "$WGET" || WGET=""""

echo "$ac_t""$WGET" 1>&6



if test -n "$MOZ_SIGN_CMD"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SIGNING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SIGNING 1
EOF

fi


# Check whether --enable-maintenance-service or --disable-maintenance-service was given.
if test "${enable_maintenance_service+set}" = set; then
  enableval="$enable_maintenance_service"
  if test "$enableval" = "yes"; then
    MOZ_MAINTENANCE_SERVICE=1
  elif test "$enableval" = "no"; then
    MOZ_MAINTENANCE_SERVICE= 
  else
    { echo "configure: error: Option, maintenance-service, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_MAINTENANCE_SERVICE"; then
  if test "$OS_ARCH" = "WINNT"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MAINTENANCE_SERVICE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MAINTENANCE_SERVICE 1
EOF

  else
    { echo "configure: error: Can only build with --enable-maintenance-service with a Windows target" 1>&2; exit 1; }
  fi
fi


# Check whether --enable-verify-mar or --disable-verify-mar was given.
if test "${enable_verify_mar+set}" = set; then
  enableval="$enable_verify_mar"
  if test "$enableval" = "yes"; then
    MOZ_VERIFY_MAR_SIGNATURE=1
  elif test "$enableval" = "no"; then
    MOZ_VERIFY_MAR_SIGNATURE= 
  else
    { echo "configure: error: Option, verify-mar, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_VERIFY_MAR_SIGNATURE"; then
  if test "$OS_ARCH" = "WINNT"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VERIFY_MAR_SIGNATURE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VERIFY_MAR_SIGNATURE 1
EOF

  else
    { echo "configure: error: Can only build with --enable-verify-mar with a Windows target" 1>&2; exit 1; }
  fi
fi


# Check whether --enable-signmar or --disable-signmar was given.
if test "${enable_signmar+set}" = set; then
  enableval="$enable_signmar"
  if test "$enableval" = "yes"; then
    MOZ_ENABLE_SIGNMAR=1
  elif test "$enableval" = "no"; then
    MOZ_ENABLE_SIGNMAR= 
  else
    { echo "configure: error: Option, signmar, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_ENABLE_SIGNMAR"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_SIGNMAR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_SIGNMAR 1
EOF

fi


# Check whether --enable-updater or --disable-updater was given.
if test "${enable_updater+set}" = set; then
  enableval="$enable_updater"
  if test "$enableval" = "no"; then
    MOZ_UPDATER=
  elif test "$enableval" = "yes"; then
    MOZ_UPDATER=1 
  else
    { echo "configure: error: Option, updater, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_UPDATER"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_UPDATER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_UPDATER 1
EOF

fi

# tools/update-packaging is not checked out by default.
# Check whether --enable-update-packaging or --disable-update-packaging was given.
if test "${enable_update_packaging+set}" = set; then
  enableval="$enable_update_packaging"
  if test "$enableval" = "yes"; then
    MOZ_UPDATE_PACKAGING=1
  elif test "$enableval" = "no"; then
    MOZ_UPDATE_PACKAGING= 
  else
    { echo "configure: error: Option, update-packaging, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi



# Check whether --enable-tests or --disable-tests was given.
if test "${enable_tests+set}" = set; then
  enableval="$enable_tests"
  if test "$enableval" = "no"; then
    ENABLE_TESTS=
  elif test "$enableval" = "yes"; then
    ENABLE_TESTS=1 
  else
    { echo "configure: error: Option, tests, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


# Check whether --enable-parental-controls or --disable-parental-controls was given.
if test "${enable_parental_controls+set}" = set; then
  enableval="$enable_parental_controls"
  if test "$enableval" = "no"; then
    MOZ_DISABLE_PARENTAL_CONTROLS=1
  elif test "$enableval" = "yes"; then
    MOZ_DISABLE_PARENTAL_CONTROLS=
  else
    { echo "configure: error: Option, parental-controls, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_DISABLE_PARENTAL_CONTROLS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DISABLE_PARENTAL_CONTROLS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DISABLE_PARENTAL_CONTROLS 1
EOF

fi



if test -n "$MOZ_DISABLE_DOMCRYPTO"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DISABLE_DOMCRYPTO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DISABLE_DOMCRYPTO 1
EOF

fi

# Individual module options

# Check whether --enable-feeds or --disable-feeds was given.
if test "${enable_feeds+set}" = set; then
  enableval="$enable_feeds"
  if test "$enableval" = "no"; then
    MOZ_FEEDS=
  elif test "$enableval" = "yes"; then
    MOZ_FEEDS=1 
  else
    { echo "configure: error: Option, feeds, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_FEEDS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_FEEDS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_FEEDS 1
EOF

else
    if test "$MOZ_BUILD_APP" = "browser"; then
        { echo "configure: error: Cannot build Firefox with --disable-feeds." 1>&2; exit 1; }
    fi
fi


MOZ_NATIVE_SQLITE=
# Check whether --enable-system-sqlite or --disable-system-sqlite was given.
if test "${enable_system_sqlite+set}" = set; then
  enableval="$enable_system_sqlite"
  if test "$enableval" = "yes"; then
    MOZ_NATIVE_SQLITE=1
  elif test "$enableval" = "no"; then
    MOZ_NATIVE_SQLITE= 
  else
    { echo "configure: error: Option, system-sqlite, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -z "$MOZ_NATIVE_SQLITE"
then
    SQLITE_CFLAGS=
    SQLITE_LIBS='$(call EXPAND_LIBNAME_PATH,mozsqlite3,$(DIST)/lib)'
else
                    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:21765: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for sqlite3 >= $SQLITE_VERSION""... $ac_c" 1>&6
echo "configure:21809: checking for sqlite3 >= $SQLITE_VERSION" >&5

        if $PKG_CONFIG --exists "sqlite3 >= $SQLITE_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking SQLITE_CFLAGS""... $ac_c" 1>&6
echo "configure:21816: checking SQLITE_CFLAGS" >&5
            SQLITE_CFLAGS=`$PKG_CONFIG --cflags "sqlite3 >= $SQLITE_VERSION"`
            echo "$ac_t""$SQLITE_CFLAGS" 1>&6

            echo $ac_n "checking SQLITE_LIBS""... $ac_c" 1>&6
echo "configure:21821: checking SQLITE_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            SQLITE_LIBS="`$PKG_CONFIG --libs \"sqlite3 >= $SQLITE_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$SQLITE_LIBS" 1>&6
        else
            SQLITE_CFLAGS=""
            SQLITE_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            SQLITE_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "sqlite3 >= $SQLITE_VERSION"`
            echo $SQLITE_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (sqlite3 >= $SQLITE_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi


                        echo $ac_n "checking for SQLITE_SECURE_DELETE support in system SQLite""... $ac_c" 1>&6
echo "configure:21852: checking for SQLITE_SECURE_DELETE support in system SQLite" >&5
    _SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS $SQLITE_CFLAGS"
    _SAVE_LIBS="$LIBS"
    LIBS="$LIBS $SQLITE_LIBS"
    if eval "test \"`echo '$''{'ac_cv_sqlite_secure_delete'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        if test "$cross_compiling" = yes; then
  ac_cv_sqlite_secure_delete=no
        
else
  cat > conftest.$ac_ext <<EOF
#line 21866 "configure"
#include "confdefs.h"

            #include "sqlite3.h"

            int main(int argc, char **argv){
              return !sqlite3_compileoption_used("SQLITE_SECURE_DELETE");
            }
EOF
if { (eval echo configure:21875: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sqlite_secure_delete=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sqlite_secure_delete=no
fi
rm -fr conftest*
fi

    
fi

    echo "$ac_t""$ac_cv_sqlite_secure_delete" 1>&6
    CFLAGS="$_SAVE_CFLAGS"
    LIBS="$_SAVE_LIBS"
    if test "x$ac_cv_sqlite_secure_delete" = "xno"; then
        { echo "configure: error: System SQLite library is not compiled with SQLITE_SECURE_DELETE." 1>&2; exit 1; }
    fi

                        echo $ac_n "checking for SQLITE_THREADSAFE support in system SQLite""... $ac_c" 1>&6
echo "configure:21898: checking for SQLITE_THREADSAFE support in system SQLite" >&5
    _SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS $SQLITE_CFLAGS"
    _SAVE_LIBS="$LIBS"
    LIBS="$LIBS $SQLITE_LIBS"
    if eval "test \"`echo '$''{'ac_cv_sqlite_threadsafe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        if test "$cross_compiling" = yes; then
  ac_cv_sqlite_threadsafe=no
        
else
  cat > conftest.$ac_ext <<EOF
#line 21912 "configure"
#include "confdefs.h"

            #include "sqlite3.h"

            int main(int argc, char **argv){
              return !sqlite3_compileoption_used("SQLITE_THREADSAFE=1");
            }
EOF
if { (eval echo configure:21921: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sqlite_threadsafe=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sqlite_threadsafe=no
fi
rm -fr conftest*
fi

    
fi

    echo "$ac_t""$ac_cv_sqlite_threadsafe" 1>&6
    CFLAGS="$_SAVE_CFLAGS"
    LIBS="$_SAVE_LIBS"
    if test "x$ac_cv_sqlite_threadsafe" = "xno"; then
        { echo "configure: error: System SQLite library is not compiled with SQLITE_THREADSAFE." 1>&2; exit 1; }
    fi

                        echo $ac_n "checking for SQLITE_ENABLE_FTS3 support in system SQLite""... $ac_c" 1>&6
echo "configure:21944: checking for SQLITE_ENABLE_FTS3 support in system SQLite" >&5
    _SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS $SQLITE_CFLAGS"
    _SAVE_LIBS="$LIBS"
    LIBS="$LIBS $SQLITE_LIBS"
    if eval "test \"`echo '$''{'ac_cv_sqlite_enable_fts3'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        if test "$cross_compiling" = yes; then
  ac_cv_sqlite_enable_fts3=no
        
else
  cat > conftest.$ac_ext <<EOF
#line 21958 "configure"
#include "confdefs.h"

            #include "sqlite3.h"

            int main(int argc, char **argv){
              return !sqlite3_compileoption_used("SQLITE_ENABLE_FTS3");
            }
EOF
if { (eval echo configure:21967: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sqlite_enable_fts3=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sqlite_enable_fts3=no
fi
rm -fr conftest*
fi

    
fi

    echo "$ac_t""$ac_cv_sqlite_enable_fts3" 1>&6
    CFLAGS="$_SAVE_CFLAGS"
    LIBS="$_SAVE_LIBS"
    if test "x$ac_cv_sqlite_enable_fts3" = "xno"; then
        { echo "configure: error: System SQLite library is not compiled with SQLITE_ENABLE_FTS3." 1>&2; exit 1; }
    fi

                        echo $ac_n "checking for SQLITE_ENABLE_UNLOCK_NOTIFY support in system SQLite""... $ac_c" 1>&6
echo "configure:21990: checking for SQLITE_ENABLE_UNLOCK_NOTIFY support in system SQLite" >&5
    _SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS $SQLITE_CFLAGS"
    _SAVE_LIBS="$LIBS"
    LIBS="$LIBS $SQLITE_LIBS"
    if eval "test \"`echo '$''{'ac_cv_sqlite_enable_unlock_notify'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        if test "$cross_compiling" = yes; then
  ac_cv_sqlite_enable_unlock_notify=no
        
else
  cat > conftest.$ac_ext <<EOF
#line 22004 "configure"
#include "confdefs.h"

            #include "sqlite3.h"

            int main(int argc, char **argv){
              return !sqlite3_compileoption_used("SQLITE_ENABLE_UNLOCK_NOTIFY");
            }
EOF
if { (eval echo configure:22013: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sqlite_enable_unlock_notify=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sqlite_enable_unlock_notify=no
fi
rm -fr conftest*
fi

    
fi

    echo "$ac_t""$ac_cv_sqlite_enable_unlock_notify" 1>&6
    CFLAGS="$_SAVE_CFLAGS"
    LIBS="$_SAVE_LIBS"
    if test "x$ac_cv_sqlite_enable_unlock_notify" = "xno"; then
        { echo "configure: error: System SQLite library is not compiled with SQLITE_ENABLE_UNLOCK_NOTIFY." 1>&2; exit 1; }
    fi
fi

if test -n "$MOZ_NATIVE_SQLITE"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_NATIVE_SQLITE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_NATIVE_SQLITE 1
EOF

fi


if test -n "$MOZ_HELP_VIEWER"; then
          cat >> confdefs.pytmp <<\EOF
    (''' MOZ_HELP_VIEWER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_HELP_VIEWER 1
EOF

fi

# Check whether --enable-safe-browsing or --disable-safe-browsing was given.
if test "${enable_safe_browsing+set}" = set; then
  enableval="$enable_safe_browsing"
  if test "$enableval" = "yes"; then
    MOZ_SAFE_BROWSING=1
  elif test "$enableval" = "no"; then
    MOZ_SAFE_BROWSING= 
  else
    { echo "configure: error: Option, safe-browsing, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_SAFE_BROWSING"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SAFE_BROWSING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SAFE_BROWSING 1
EOF

fi


if test -n "$MOZ_SAFE_BROWSING"; then
    MOZ_URL_CLASSIFIER=1
fi
# Check whether --enable-url-classifier or --disable-url-classifier was given.
if test "${enable_url_classifier+set}" = set; then
  enableval="$enable_url_classifier"
  if test "$enableval" = "yes"; then
    MOZ_URL_CLASSIFIER=1
  elif test "$enableval" = "no"; then
    MOZ_URL_CLASSIFIER= 
  else
    { echo "configure: error: Option, url-classifier, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_URL_CLASSIFIER"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_URL_CLASSIFIER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_URL_CLASSIFIER 1
EOF

fi


# Check whether --enable-zipwriter or --disable-zipwriter was given.
if test "${enable_zipwriter+set}" = set; then
  enableval="$enable_zipwriter"
  if test "$enableval" = "no"; then
    MOZ_ZIPWRITER=
  elif test "$enableval" = "yes"; then
    MOZ_ZIPWRITER=1 
  else
    { echo "configure: error: Option, zipwriter, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi



MOZ_ENABLE_LIBCONIC=1

if test -n "$MOZ_ENABLE_QT"; then
  if test "$MOZ_ENABLE_QTNETWORK"; then
    MOZ_ENABLE_LIBCONIC=
  fi
fi

# Check whether --enable-libconic or --disable-libconic was given.
if test "${enable_libconic+set}" = set; then
  enableval="$enable_libconic"
  if test "$enableval" = "no"; then
    MOZ_ENABLE_LIBCONIC=
  elif test "$enableval" = "yes"; then
    MOZ_ENABLE_LIBCONIC=1 
  else
    { echo "configure: error: Option, libconic, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_ENABLE_LIBCONIC"; then
    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:22148: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for conic""... $ac_c" 1>&6
echo "configure:22192: checking for conic" >&5

        if $PKG_CONFIG --exists "conic" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking LIBCONIC_CFLAGS""... $ac_c" 1>&6
echo "configure:22199: checking LIBCONIC_CFLAGS" >&5
            LIBCONIC_CFLAGS=`$PKG_CONFIG --cflags "conic"`
            echo "$ac_t""$LIBCONIC_CFLAGS" 1>&6

            echo $ac_n "checking LIBCONIC_LIBS""... $ac_c" 1>&6
echo "configure:22204: checking LIBCONIC_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            LIBCONIC_LIBS="`$PKG_CONFIG --libs \"conic\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$LIBCONIC_LIBS" 1>&6
        else
            LIBCONIC_CFLAGS=""
            LIBCONIC_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            LIBCONIC_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "conic"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     MOZ_ENABLE_LIBCONIC=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       MOZ_ENABLE_LIBCONIC=
     fi
  fi

fi
if test "$MOZ_ENABLE_LIBCONIC"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_LIBCONIC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_LIBCONIC 1
EOF

fi






MAEMO_SDK_TARGET_VER=-1

# Check whether --with-maemo-version or --without-maemo-version was given.
if test "${with_maemo_version+set}" = set; then
  withval="$with_maemo_version"
  MAEMO_SDK_TARGET_VER=$withval
fi


case "$MAEMO_SDK_TARGET_VER" in
5)
    MOZ_PLATFORM_MAEMO=5
    ;;

6)
    MOZ_PLATFORM_MAEMO=6
    ;;

-1)
        ;;
*)
    { echo "configure: error: Unknown Maemo Version.  Try setting --with-maemo-version to 5 or 6." 1>&2; exit 1; }
    ;;
esac

if test $MOZ_PLATFORM_MAEMO; then
   cat >> confdefs.pytmp <<EOF
    (''' MOZ_PLATFORM_MAEMO ''', r''' $MOZ_PLATFORM_MAEMO ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_PLATFORM_MAEMO $MOZ_PLATFORM_MAEMO
EOF


   if test -z "$MOZ_ENABLE_DBUS"; then
       { echo "configure: error: DBus is required when building for Maemo" 1>&2; exit 1; }
   fi

   MOZ_GFX_OPTIMIZE_MOBILE=1
   MOZ_GL_DEFAULT_PROVIDER=EGL
   MOZ_MAEMO_LIBLOCATION=

   if test $MOZ_PLATFORM_MAEMO = 5; then
             for ac_hdr in X11/extensions/Xdamage.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:22296: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 22301 "configure"
#include "confdefs.h"

#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:22309: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    { echo "configure: error: Couldn't find X11/extensions/Xdamage.h which is required for composited plugins." 1>&2; exit 1; }
  fi

  done

      echo $ac_n "checking for XCompositeRedirectWindow in -lXcomposite""... $ac_c" 1>&6
echo "configure:22339: checking for XCompositeRedirectWindow in -lXcomposite" >&5
ac_lib_var=`echo Xcomposite'_'XCompositeRedirectWindow | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXcomposite $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 22347 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XCompositeRedirectWindow();

int main() {
XCompositeRedirectWindow()
; return 0; }
EOF
if { (eval echo configure:22358: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XCOMPOSITE_LIBS="-lXcomposite -lXdamage -lXfixes"
else
  echo "$ac_t""no" 1>&6
MISSING_X="$MISSING_X -lXcomposite"
fi


      

      succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:22388: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libhildonmime""... $ac_c" 1>&6
echo "configure:22432: checking for libhildonmime" >&5

        if $PKG_CONFIG --exists "libhildonmime" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking LIBHILDONMIME_CFLAGS""... $ac_c" 1>&6
echo "configure:22439: checking LIBHILDONMIME_CFLAGS" >&5
            LIBHILDONMIME_CFLAGS=`$PKG_CONFIG --cflags "libhildonmime"`
            echo "$ac_t""$LIBHILDONMIME_CFLAGS" 1>&6

            echo $ac_n "checking LIBHILDONMIME_LIBS""... $ac_c" 1>&6
echo "configure:22444: checking LIBHILDONMIME_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            LIBHILDONMIME_LIBS="`$PKG_CONFIG --libs \"libhildonmime\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$LIBHILDONMIME_LIBS" 1>&6
        else
            LIBHILDONMIME_CFLAGS=""
            LIBHILDONMIME_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            LIBHILDONMIME_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libhildonmime"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     _LIB_FOUND=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       _LIB_FOUND=
     fi
  fi

      MOZ_PLATFORM_MAEMO_LIBS="$MOZ_PLATFORM_MAEMO_LIBS $LIBHILDONMIME_LIBS"
      MOZ_PLATFORM_MAEMO_CFLAGS="$MOZ_PLATFORM_MAEMO_CFLAGS $LIBHILDONMIME_CFLAGS"
      if test -z "$_LIB_FOUND"; then
         { echo "configure: error: Hildon Mime is required when building for Maemo" 1>&2; exit 1; }
      fi


      succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:22486: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libosso""... $ac_c" 1>&6
echo "configure:22530: checking for libosso" >&5

        if $PKG_CONFIG --exists "libosso" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking LIBOSSO_CFLAGS""... $ac_c" 1>&6
echo "configure:22537: checking LIBOSSO_CFLAGS" >&5
            LIBOSSO_CFLAGS=`$PKG_CONFIG --cflags "libosso"`
            echo "$ac_t""$LIBOSSO_CFLAGS" 1>&6

            echo $ac_n "checking LIBOSSO_LIBS""... $ac_c" 1>&6
echo "configure:22542: checking LIBOSSO_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            LIBOSSO_LIBS="`$PKG_CONFIG --libs \"libosso\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$LIBOSSO_LIBS" 1>&6
        else
            LIBOSSO_CFLAGS=""
            LIBOSSO_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            LIBOSSO_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libosso"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     _LIB_FOUND=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       _LIB_FOUND=
     fi
  fi

      MOZ_PLATFORM_MAEMO_LIBS="$MOZ_PLATFORM_MAEMO_LIBS $LIBOSSO_LIBS"
      MOZ_PLATFORM_MAEMO_CFLAGS="$MOZ_PLATFORM_MAEMO_CFLAGS $LIBOSSO_CFLAGS"
      if test -z "$_LIB_FOUND"; then
         { echo "configure: error: LibOSSO is required when building for Maemo" 1>&2; exit 1; }
      fi

      succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:22583: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for hildon-fm-2""... $ac_c" 1>&6
echo "configure:22627: checking for hildon-fm-2" >&5

        if $PKG_CONFIG --exists "hildon-fm-2" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking LIBHILDONFM_CFLAGS""... $ac_c" 1>&6
echo "configure:22634: checking LIBHILDONFM_CFLAGS" >&5
            LIBHILDONFM_CFLAGS=`$PKG_CONFIG --cflags "hildon-fm-2"`
            echo "$ac_t""$LIBHILDONFM_CFLAGS" 1>&6

            echo $ac_n "checking LIBHILDONFM_LIBS""... $ac_c" 1>&6
echo "configure:22639: checking LIBHILDONFM_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            LIBHILDONFM_LIBS="`$PKG_CONFIG --libs \"hildon-fm-2\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$LIBHILDONFM_LIBS" 1>&6
        else
            LIBHILDONFM_CFLAGS=""
            LIBHILDONFM_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            LIBHILDONFM_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "hildon-fm-2"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     _LIB_FOUND=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       _LIB_FOUND=
     fi
  fi

      MOZ_PLATFORM_MAEMO_LIBS="$MOZ_PLATFORM_MAEMO_LIBS $LIBHILDONFM_LIBS"
      MOZ_PLATFORM_MAEMO_CFLAGS="$MOZ_PLATFORM_MAEMO_CFLAGS $LIBHILDONFM_CFLAGS"
      if test -z "$_LIB_FOUND"; then
         { echo "configure: error: Hildon FM-2 is required when building for Maemo" 1>&2; exit 1; }
      fi

   fi
   if test $MOZ_PLATFORM_MAEMO = 6; then

      succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:22683: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for ContentManager QtSparql""... $ac_c" 1>&6
echo "configure:22727: checking for ContentManager QtSparql" >&5

        if $PKG_CONFIG --exists "ContentManager QtSparql" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking LIBCONTENTMANAGER_CFLAGS""... $ac_c" 1>&6
echo "configure:22734: checking LIBCONTENTMANAGER_CFLAGS" >&5
            LIBCONTENTMANAGER_CFLAGS=`$PKG_CONFIG --cflags "ContentManager QtSparql"`
            echo "$ac_t""$LIBCONTENTMANAGER_CFLAGS" 1>&6

            echo $ac_n "checking LIBCONTENTMANAGER_LIBS""... $ac_c" 1>&6
echo "configure:22739: checking LIBCONTENTMANAGER_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            LIBCONTENTMANAGER_LIBS="`$PKG_CONFIG --libs \"ContentManager QtSparql\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$LIBCONTENTMANAGER_LIBS" 1>&6
        else
            LIBCONTENTMANAGER_CFLAGS=""
            LIBCONTENTMANAGER_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            LIBCONTENTMANAGER_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "ContentManager QtSparql"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     _LIB_FOUND=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       _LIB_FOUND=
     fi
  fi

      if test "$_LIB_FOUND"; then
         MOZ_PLATFORM_MAEMO_LIBS="$MOZ_PLATFORM_MAEMO_LIBS $LIBCONTENTMANAGER_LIBS"
         MOZ_PLATFORM_MAEMO_CFLAGS="$MOZ_PLATFORM_MAEMO_CFLAGS $LIBCONTENTMANAGER_CFLAGS"
         MOZ_ENABLE_CONTENTMANAGER=1
         cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_CONTENTMANAGER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_CONTENTMANAGER 1
EOF

      else
         echo "configure: warning: Cannot find libcontentmanager and or QtSparql building for Maemo 6" 1>&2
      fi
      

                        # Check whether --enable-meegocontentaction or --disable-meegocontentaction was given.
if test "${enable_meegocontentaction+set}" = set; then
  enableval="$enable_meegocontentaction"
  if test "$enableval" = "yes"; then
    MOZ_MEEGOCONTENTACTION=1
  elif test "$enableval" = "no"; then
    MOZ_MEEGOCONTENTACTION=
  else
    { echo "configure: error: Option, meegocontentaction, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


      if test -n "$MOZ_MEEGOCONTENTACTION"; then

         succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:22805: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for contentaction-0.1""... $ac_c" 1>&6
echo "configure:22849: checking for contentaction-0.1" >&5

        if $PKG_CONFIG --exists "contentaction-0.1" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking LIBCONTENTACTION_CFLAGS""... $ac_c" 1>&6
echo "configure:22856: checking LIBCONTENTACTION_CFLAGS" >&5
            LIBCONTENTACTION_CFLAGS=`$PKG_CONFIG --cflags "contentaction-0.1"`
            echo "$ac_t""$LIBCONTENTACTION_CFLAGS" 1>&6

            echo $ac_n "checking LIBCONTENTACTION_LIBS""... $ac_c" 1>&6
echo "configure:22861: checking LIBCONTENTACTION_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            LIBCONTENTACTION_LIBS="`$PKG_CONFIG --libs \"contentaction-0.1\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$LIBCONTENTACTION_LIBS" 1>&6
        else
            LIBCONTENTACTION_CFLAGS=""
            LIBCONTENTACTION_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            LIBCONTENTACTION_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "contentaction-0.1"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     _LIB_FOUND=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       _LIB_FOUND=
     fi
  fi

         if test "$_LIB_FOUND"; then
            MOZ_PLATFORM_MAEMO_LIBS="$MOZ_PLATFORM_MAEMO_LIBS $LIBCONTENTACTION_LIBS"
            MOZ_PLATFORM_MAEMO_CFLAGS="$MOZ_PLATFORM_MAEMO_CFLAGS $LIBCONTENTACTION_CFLAGS"
            MOZ_ENABLE_CONTENTACTION=1
            cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_CONTENTACTION ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_CONTENTACTION 1
EOF

            
         fi
      fi

      # Check whether --enable-meegotouch or --disable-meegotouch was given.
if test "${enable_meegotouch+set}" = set; then
  enableval="$enable_meegotouch"
  if test "$enableval" = "yes"; then
    MOZ_MEEGOTOUCHENABLED=1
  elif test "$enableval" = "no"; then
    MOZ_MEEGOTOUCHENABLED=
  else
    { echo "configure: error: Option, meegotouch, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


      if test -n "$MOZ_MEEGOTOUCHENABLED"; then
          succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:22925: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for meegotouchcore""... $ac_c" 1>&6
echo "configure:22969: checking for meegotouchcore" >&5

        if $PKG_CONFIG --exists "meegotouchcore" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_MEEGOTOUCH_CFLAGS""... $ac_c" 1>&6
echo "configure:22976: checking MOZ_MEEGOTOUCH_CFLAGS" >&5
            MOZ_MEEGOTOUCH_CFLAGS=`$PKG_CONFIG --cflags "meegotouchcore"`
            echo "$ac_t""$MOZ_MEEGOTOUCH_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_MEEGOTOUCH_LIBS""... $ac_c" 1>&6
echo "configure:22981: checking MOZ_MEEGOTOUCH_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_MEEGOTOUCH_LIBS="`$PKG_CONFIG --libs \"meegotouchcore\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_MEEGOTOUCH_LIBS" 1>&6
        else
            MOZ_MEEGOTOUCH_CFLAGS=""
            MOZ_MEEGOTOUCH_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_MEEGOTOUCH_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "meegotouchcore"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     _LIB_FOUND=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       _LIB_FOUND=
     fi
  fi

          if test "$_LIB_FOUND"; then
              MOZ_QT_CFLAGS="$MOZ_MEEGOTOUCH_CFLAGS $MOZ_QT_CFLAGS"
              MOZ_QT_LIBS="$MOZ_MEEGOTOUCH_LIBS $MOZ_QT_LIBS"
              cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_MEEGOTOUCH ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_MEEGOTOUCH 1
EOF

          else
              echo "configure: warning: Cannot meegotouchcore-dev. Disabling Meegotouch support." 1>&2
          fi
      fi
   fi

   succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:23032: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for liblocation""... $ac_c" 1>&6
echo "configure:23076: checking for liblocation" >&5

        if $PKG_CONFIG --exists "liblocation" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking LIBLOCATION_CFLAGS""... $ac_c" 1>&6
echo "configure:23083: checking LIBLOCATION_CFLAGS" >&5
            LIBLOCATION_CFLAGS=`$PKG_CONFIG --cflags "liblocation"`
            echo "$ac_t""$LIBLOCATION_CFLAGS" 1>&6

            echo $ac_n "checking LIBLOCATION_LIBS""... $ac_c" 1>&6
echo "configure:23088: checking LIBLOCATION_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            LIBLOCATION_LIBS="`$PKG_CONFIG --libs \"liblocation\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$LIBLOCATION_LIBS" 1>&6
        else
            LIBLOCATION_CFLAGS=""
            LIBLOCATION_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            LIBLOCATION_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "liblocation"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     _LIB_FOUND=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       _LIB_FOUND=
     fi
  fi

   MOZ_PLATFORM_MAEMO_LIBS="$MOZ_PLATFORM_MAEMO_LIBS $LIBLOCATION_LIBS"
   MOZ_PLATFORM_MAEMO_CFLAGS="$MOZ_PLATFORM_MAEMO_CFLAGS $LIBLOCATION_CFLAGS"
   if test "$_LIB_FOUND"; then
      MOZ_MAEMO_LIBLOCATION=1
      cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MAEMO_LIBLOCATION ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MAEMO_LIBLOCATION 1
EOF

   else
      echo "configure: warning: Cannot liblocation-dev. Disabling Maemo geolocation." 1>&2
   fi
   

   succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:23139: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for ShareUiInterface-maemo-meegotouch >= 0.3.31 mdatauri""... $ac_c" 1>&6
echo "configure:23183: checking for ShareUiInterface-maemo-meegotouch >= 0.3.31 mdatauri" >&5

        if $PKG_CONFIG --exists "ShareUiInterface-maemo-meegotouch >= 0.3.31 mdatauri" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking LIBMEEGOTOUCHSHARE_CFLAGS""... $ac_c" 1>&6
echo "configure:23190: checking LIBMEEGOTOUCHSHARE_CFLAGS" >&5
            LIBMEEGOTOUCHSHARE_CFLAGS=`$PKG_CONFIG --cflags "ShareUiInterface-maemo-meegotouch >= 0.3.31 mdatauri"`
            echo "$ac_t""$LIBMEEGOTOUCHSHARE_CFLAGS" 1>&6

            echo $ac_n "checking LIBMEEGOTOUCHSHARE_LIBS""... $ac_c" 1>&6
echo "configure:23195: checking LIBMEEGOTOUCHSHARE_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            LIBMEEGOTOUCHSHARE_LIBS="`$PKG_CONFIG --libs \"ShareUiInterface-maemo-meegotouch >= 0.3.31 mdatauri\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$LIBMEEGOTOUCHSHARE_LIBS" 1>&6
        else
            LIBMEEGOTOUCHSHARE_CFLAGS=""
            LIBMEEGOTOUCHSHARE_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            LIBMEEGOTOUCHSHARE_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "ShareUiInterface-maemo-meegotouch >= 0.3.31 mdatauri"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     _LIB_FOUND=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       _LIB_FOUND=
     fi
  fi

   MOZ_PLATFORM_MAEMO_LIBS="$MOZ_PLATFORM_MAEMO_LIBS $LIBMEEGOTOUCHSHARE_LIBS"
   MOZ_PLATFORM_MAEMO_CFLAGS="$MOZ_PLATFORM_MAEMO_CFLAGS $LIBMEEGOTOUCHSHARE_CFLAGS"
   if test "$_LIB_FOUND"; then
      MOZ_ENABLE_MEEGOTOUCHSHARE=1
      cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_MEEGOTOUCHSHARE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_MEEGOTOUCHSHARE 1
EOF

   else
      echo "configure: warning: Cannot find maemo-meegotouch-interfaces-dev or libmdatauri-dev. Disabling meegotouch share ui." 1>&2
   fi
   

   
   
fi

MOZ_GL_PROVIDER=
# Check whether --with-gl-provider or --without-gl-provider was given.
if test "${with_gl_provider+set}" = set; then
  withval="$with_gl_provider"
   val=`echo $withval`
    MOZ_GL_PROVIDER="$val"
fi


if test -n "$MOZ_GL_PROVIDER"; then
MOZ_GL_DEFAULT_PROVIDER=$MOZ_GL_PROVIDER

cat >> confdefs.pytmp <<EOF
    (''' MOZ_GL_PROVIDER ''', r''' GLContextProvider$MOZ_GL_PROVIDER ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_GL_PROVIDER GLContextProvider$MOZ_GL_PROVIDER
EOF

fi

cat >> confdefs.pytmp <<EOF
    (''' GL_PROVIDER_$MOZ_GL_DEFAULT_PROVIDER ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define GL_PROVIDER_$MOZ_GL_DEFAULT_PROVIDER 1
EOF


# Check whether --enable-faststripe or --disable-faststripe was given.
if test "${enable_faststripe+set}" = set; then
  enableval="$enable_faststripe"
  if test "$enableval" = "yes"; then
    MOZ_THEME_FASTSTRIPE=1
  elif test "$enableval" = "no"; then
    MOZ_THEME_FASTSTRIPE= 
  else
    { echo "configure: error: Option, faststripe, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi




# Debugging and Optimizations

if test -z "$MOZ_DEBUG_FLAGS"; then
  MOZ_DEBUG_FLAGS="-g"
fi

# Check whether --enable-debug or --disable-debug was given.
if test "${enable_debug+set}" = set; then
  enableval="$enable_debug"
   if test "$enableval" != "no"; then
    MOZ_DEBUG=1
    if test -n "$enableval" -a "$enableval" != "yes"; then
        MOZ_DEBUG_FLAGS=`echo $enableval | sed -e 's|\\\ | |g'`
        _MOZ_DEBUG_FLAGS_SET=1
    fi
  else
    MOZ_DEBUG=
  fi 
else
  MOZ_DEBUG=
fi


MOZ_DEBUG_ENABLE_DEFS="-DDEBUG -D_DEBUG -DTRACING"
# Check whether --with-debug-label or --without-debug-label was given.
if test "${with_debug_label+set}" = set; then
  withval="$with_debug_label"
   for option in `echo $withval | sed 's/,/ /g'`; do
    MOZ_DEBUG_ENABLE_DEFS="$MOZ_DEBUG_ENABLE_DEFS -DDEBUG_${option}"
done
fi


MOZ_DEBUG_DISABLE_DEFS="-DNDEBUG -DTRIMMED"

if test -n "$MOZ_DEBUG"; then
    echo $ac_n "checking for valid debug flags""... $ac_c" 1>&6
echo "configure:23325: checking for valid debug flags" >&5
    _SAVE_CFLAGS=$CFLAGS
    CFLAGS="$CFLAGS $MOZ_DEBUG_FLAGS"
    cat > conftest.$ac_ext <<EOF
#line 23329 "configure"
#include "confdefs.h"
#include <stdio.h>
int main() {
printf("Hello World\n");
; return 0; }
EOF
if { (eval echo configure:23336: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  _results=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _results=no
fi
rm -f conftest*
    echo "$ac_t""$_results" 1>&6
    if test "$_results" = "no"; then
        { echo "configure: error: These compiler flags are invalid: $MOZ_DEBUG_FLAGS" 1>&2; exit 1; }
    fi
    CFLAGS=$_SAVE_CFLAGS
fi

# Check whether --enable-mobile-optimize or --disable-mobile-optimize was given.
if test "${enable_mobile_optimize+set}" = set; then
  enableval="$enable_mobile_optimize"
  if test "$enableval" = "yes"; then
    MOZ_GFX_OPTIMIZE_MOBILE=1
  elif test "$enableval" = "no"; then
    :
  else
    { echo "configure: error: Option, mobile-optimize, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi




if test "$MOZ_GFX_OPTIMIZE_MOBILE"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_GFX_OPTIMIZE_MOBILE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_GFX_OPTIMIZE_MOBILE 1
EOF

fi

if test -z "$MOZ_OPTIMIZE_FLAGS"; then
	MOZ_OPTIMIZE_FLAGS="-O"
fi

# Check whether --enable-optimize or --disable-optimize was given.
if test "${enable_optimize+set}" = set; then
  enableval="$enable_optimize"
   if test "$enableval" != "no"; then
    MOZ_OPTIMIZE=1
    if test -n "$enableval" -a "$enableval" != "yes"; then
        MOZ_OPTIMIZE_FLAGS=`echo "$enableval" | sed -e 's|\\\ | |g'`
        MOZ_OPTIMIZE=2
    fi
else
    MOZ_OPTIMIZE=
fi 
else
  MOZ_OPTIMIZE=1
fi



  case "$target" in
  *android*)
    unwind_tables="-funwind-tables"
    ;;
  esac
  if test "$GNU_CC"; then
    MOZ_ENABLE_FRAME_PTR="-fno-omit-frame-pointer $unwind_tables"
    MOZ_DISABLE_FRAME_PTR="-fomit-frame-pointer"
  else
    case "$target" in
    *-mingw*)
      MOZ_ENABLE_FRAME_PTR="-Oy-"
      MOZ_DISABLE_FRAME_PTR="-Oy"
    ;;
    esac
  fi

  # if we are debugging or profiling, we want a frame pointer.
  if test -z "$MOZ_OPTIMIZE" -o \
          -n "$MOZ_PROFILING" -o -n "$MOZ_DEBUG"; then
    MOZ_FRAMEPTR_FLAGS="$MOZ_ENABLE_FRAME_PTR"
  else
    MOZ_FRAMEPTR_FLAGS="$MOZ_DISABLE_FRAME_PTR"
  fi


if test "$COMPILE_ENVIRONMENT"; then
if test -n "$MOZ_OPTIMIZE"; then
    echo $ac_n "checking for valid optimization flags""... $ac_c" 1>&6
echo "configure:23429: checking for valid optimization flags" >&5
    _SAVE_CFLAGS=$CFLAGS
    CFLAGS="$CFLAGS $MOZ_OPTIMIZE_FLAGS"
    cat > conftest.$ac_ext <<EOF
#line 23433 "configure"
#include "confdefs.h"
#include <stdio.h>
int main() {
printf("Hello World\n");
; return 0; }
EOF
if { (eval echo configure:23440: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  _results=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _results=no
fi
rm -f conftest*
    echo "$ac_t""$_results" 1>&6
    if test "$_results" = "no"; then
        { echo "configure: error: These compiler flags are invalid: $MOZ_OPTIMIZE_FLAGS" 1>&2; exit 1; }
    fi
    CFLAGS=$_SAVE_CFLAGS
fi
fi # COMPILE_ENVIRONMENT









# Check whether --enable-debug-symbols or --disable-debug-symbols was given.
if test "${enable_debug_symbols+set}" = set; then
  enableval="$enable_debug_symbols"
   if test "$enableval" != "no"; then
      MOZ_DEBUG_SYMBOLS=1
      if test -n "$enableval" -a "$enableval" != "yes"; then
          if test -z "$_MOZ_DEBUG_FLAGS_SET"; then
              MOZ_DEBUG_FLAGS=`echo $enableval | sed -e 's|\\\ | |g'`
          else
              { echo "configure: error: --enable-debug-symbols flags cannot be used with --enable-debug flags" 1>&2; exit 1; }
          fi
      fi
  else
      MOZ_DEBUG_SYMBOLS=
  fi 
else
  MOZ_DEBUG_SYMBOLS=1
fi


if test -n "$MOZ_DEBUG" -o -n "$MOZ_DEBUG_SYMBOLS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DEBUG_SYMBOLS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DEBUG_SYMBOLS 1
EOF

    export MOZ_DEBUG_SYMBOLS
fi

# Check whether --enable-warnings-as-errors or --disable-warnings-as-errors was given.
if test "${enable_warnings_as_errors+set}" = set; then
  enableval="$enable_warnings_as_errors"
  if test "$enableval" = "yes"; then
    MOZ_ENABLE_WARNINGS_AS_ERRORS=1
  elif test "$enableval" = "no"; then
    MOZ_ENABLE_WARNINGS_AS_ERRORS=
  else
    { echo "configure: error: Option, warnings-as-errors, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -z "$MOZ_ENABLE_WARNINGS_AS_ERRORS"; then
   WARNINGS_AS_ERRORS=''
fi

# Check whether --enable-logging or --disable-logging was given.
if test "${enable_logging+set}" = set; then
  enableval="$enable_logging"
  if test "$enableval" = "no"; then
    NS_DISABLE_LOGGING=1
  elif test "$enableval" = "yes"; then
    NS_DISABLE_LOGGING= 
  else
    { echo "configure: error: Option, logging, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test "$NS_DISABLE_LOGGING"; then
    cat >> confdefs.pytmp <<\EOF
    (''' NS_DISABLE_LOGGING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NS_DISABLE_LOGGING 1
EOF

else
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_LOGGING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_LOGGING 1
EOF

fi

_ENABLE_LOGREFCNT=42
# Check whether --enable-logrefcnt or --disable-logrefcnt was given.
if test "${enable_logrefcnt+set}" = set; then
  enableval="$enable_logrefcnt"
  if test "$enableval" = "yes"; then
    _ENABLE_LOGREFCNT=1
  elif test "$enableval" = "no"; then
    _ENABLE_LOGREFCNT= 
  else
    { echo "configure: error: Option, logrefcnt, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test "$_ENABLE_LOGREFCNT" = "1"; then
    cat >> confdefs.pytmp <<\EOF
    (''' FORCE_BUILD_REFCNT_LOGGING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define FORCE_BUILD_REFCNT_LOGGING 1
EOF

elif test -z "$_ENABLE_LOGREFCNT"; then
    cat >> confdefs.pytmp <<\EOF
    (''' NO_BUILD_REFCNT_LOGGING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NO_BUILD_REFCNT_LOGGING 1
EOF

fi

# Check whether --enable-dump-painting or --disable-dump-painting was given.
if test "${enable_dump_painting+set}" = set; then
  enableval="$enable_dump_painting"
  if test "$enableval" = "yes"; then
    MOZ_DUMP_PAINTING=1
  elif test "$enableval" = "no"; then
    MOZ_DUMP_PAINTING= 
  else
    { echo "configure: error: Option, dump-painting, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_DUMP_PAINTING"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DUMP_PAINTING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DUMP_PAINTING 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_LAYERS_HAVE_LOG ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_LAYERS_HAVE_LOG 1
EOF

fi
if test -n "$MOZ_DEBUG"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DUMP_PAINTING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DUMP_PAINTING 1
EOF

fi

NS_TRACE_MALLOC=${MOZ_TRACE_MALLOC}
# Check whether --enable-trace-malloc or --disable-trace-malloc was given.
if test "${enable_trace_malloc+set}" = set; then
  enableval="$enable_trace_malloc"
  if test "$enableval" = "yes"; then
    NS_TRACE_MALLOC=1
  elif test "$enableval" = "no"; then
    NS_TRACE_MALLOC= 
  else
    { echo "configure: error: Option, trace-malloc, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test "$NS_TRACE_MALLOC"; then
  # Please, Mr. Linker Man, don't take away our symbol names
  MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS=
  USE_ELF_DYNSTR_GC=
  cat >> confdefs.pytmp <<\EOF
    (''' NS_TRACE_MALLOC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NS_TRACE_MALLOC 1
EOF

fi



# Check whether --enable-dmd or --disable-dmd was given.
if test "${enable_dmd+set}" = set; then
  enableval="$enable_dmd"
  if test "$enableval" = "yes"; then
    MOZ_DMD=1
  elif test "$enableval" = "no"; then
    MOZ_DMD= 
  else
    { echo "configure: error: Option, dmd, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test "$NS_TRACE_MALLOC"; then        # trace-malloc disables DMD
    MOZ_DMD=
fi
if test "$MOZ_DMD"; then
    USE_ELF_DYNSTR_GC=
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DMD ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DMD 1
EOF


    if test "${CPU_ARCH}" = "arm"; then
        CFLAGS="$CFLAGS -funwind-tables"
        CXXFLAGS="$CXXFLAGS -funwind-tables"
    fi

    MOZ_MEMORY=1                        # DMD enables jemalloc
    MOZ_REPLACE_MALLOC=1                # DMD enables replace-malloc
    MOZ_DMDV=                           # DMD disables DMDV
fi


# Check whether --enable-jemalloc or --disable-jemalloc was given.
if test "${enable_jemalloc+set}" = set; then
  enableval="$enable_jemalloc"
  if test "$enableval" = "yes"; then
    MOZ_MEMORY=1
  elif test "$enableval" = "no"; then
    MOZ_MEMORY=
  else
    { echo "configure: error: Option, jemalloc, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test "$NS_TRACE_MALLOC"; then
    MOZ_MEMORY=
fi
if test "$MOZ_DMDV"; then
    MOZ_MEMORY=
fi

if test "${OS_TARGET}" = "Android"; then
    :
elif test "${OS_TARGET}" = "WINNT" -o "${OS_TARGET}" = "Darwin" -o "${OS_TARGET}" = "OS2"; then
    if test -z "$GNU_CC"; then
    MOZ_GLUE_LDFLAGS='$(call EXPAND_LIBNAME_PATH,mozglue,$(LIBXUL_DIST)/lib)'
  else
    MOZ_GLUE_LDFLAGS='-L$(LIBXUL_DIST)/lib $(call EXPAND_LIBNAME,mozglue)'
  fi
else
    MOZ_GLUE_PROGRAM_LDFLAGS='$(MKSHLIB_FORCE_ALL) $(call EXPAND_LIBNAME_PATH,mozglue,$(LIBXUL_DIST)/lib)'
      if test "$MOZ_MEMORY" = 1 -o \( "$LIBXUL_SDK" -a -f "$LIBXUL_SDK/lib/${LIB_PREFIX}memory.${LIB_SUFFIX}" \); then
    MOZ_GLUE_PROGRAM_LDFLAGS="$MOZ_GLUE_PROGRAM_LDFLAGS "'$(call EXPAND_LIBNAME_PATH,memory,$(LIBXUL_DIST)/lib)'
  fi
  MOZ_GLUE_PROGRAM_LDFLAGS="$MOZ_GLUE_PROGRAM_LDFLAGS "'$(MKSHLIB_UNFORCE_ALL)'
  if test -n "$GNU_CC"; then
        MOZ_GLUE_PROGRAM_LDFLAGS="$MOZ_GLUE_PROGRAM_LDFLAGS -rdynamic"
  fi
  if test "$MOZ_LINKER" = 1; then
    MOZ_GLUE_PROGRAM_LDFLAGS="$MOZ_GLUE_PROGRAM_LDFLAGS $ZLIB_LIBS"
  fi
fi

# Check whether --enable-replace-malloc or --disable-replace-malloc was given.
if test "${enable_replace_malloc+set}" = set; then
  enableval="$enable_replace_malloc"
  if test "$enableval" = "yes"; then
    MOZ_REPLACE_MALLOC=1
  elif test "$enableval" = "no"; then
    MOZ_REPLACE_MALLOC= 
  else
    { echo "configure: error: Option, replace-malloc, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$MOZ_REPLACE_MALLOC" -a -z "$MOZ_MEMORY"; then
            { echo "configure: error: --enable-replace-malloc requires --enable-jemalloc" 1>&2; exit 1; }
elif test -n "$MOZ_REPLACE_MALLOC"; then
    MOZ_NATIVE_JEMALLOC=

        if test -n "$MACOSX_DEPLOYMENT_TARGET"; then
        echo $ac_n "checking how to do weak dynamic linking""... $ac_c" 1>&6
echo "configure:23739: checking how to do weak dynamic linking" >&5
if eval "test \"`echo '$''{'ac_cv_weak_dynamic_linking'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'extern void foo() __attribute__((weak_import));int bar() { if (foo) foo(); return 0; }' > conftest.c
             if { ac_try='${CC-cc} -o conftest${DLL_SUFFIX} $CFLAGS -dynamiclib $LDFLAGS -Wl,-U,_foo conftest.c $LIBS 1>&5'; { (eval echo configure:23744: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } &&
                test -s conftest${DLL_SUFFIX}; then
                                                                                     if otool -l conftest${DLL_SUFFIX} 2> /dev/null | grep "LC_DYLD_INFO_ONLY" > /dev/null; then
                     _CLASSIC_INFO=
                 else
                     _CLASSIC_INFO=1
                 fi
                 if otool -l conftest${DLL_SUFFIX} 2> /dev/null | grep "LC_DYLD_INFO" > /dev/null; then
                     _DYLD_INFO=1
                 else
                     _DYLD_INFO=
                 fi
                                                                                                                                                                                                            if test -n "$_DYLD_INFO" && dyldinfo -bind conftest${DLL_SUFFIX} 2> /dev/null | grep "_foo (weak import)" > /dev/null; then
                     if test -n "$_CLASSIC_INFO"; then
                         ac_cv_weak_dynamic_linking="flat namespace"
                     else
                         ac_cv_weak_dynamic_linking="compiler support"
                     fi
                 else
                     if test -n "$_DYLD_INFO"; then
                         ac_cv_weak_dynamic_linking="dummy library"
                     else
                         ac_cv_weak_dynamic_linking="flat namespace"
                     fi
                 fi
             else
                 { echo "configure: error: couldn't compile a simple C file" 1>&2; exit 1; }
             fi
             rm -rf conftest*
fi

echo "$ac_t""$ac_cv_weak_dynamic_linking" 1>&6
        MOZ_REPLACE_MALLOC_LINKAGE="$ac_cv_weak_dynamic_linking"
    fi
fi



if test -z "$MOZ_MEMORY"; then
  if test -n "$MOZ_JEMALLOC3" -a -z "$MOZ_REPLACE_MALLOC"; then
    MOZ_NATIVE_JEMALLOC=1
    for ac_func in mallctl nallocm
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:23788: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 23793 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:23816: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
MOZ_NATIVE_JEMALLOC=
       break
fi
done

    if test -n "$MOZ_NATIVE_JEMALLOC"; then
      MOZ_MEMORY=1
      cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY 1
EOF

      cat >> confdefs.pytmp <<\EOF
    (''' MOZ_JEMALLOC3 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_JEMALLOC3 1
EOF

      cat >> confdefs.pytmp <<\EOF
    (''' MOZ_NATIVE_JEMALLOC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_NATIVE_JEMALLOC 1
EOF

    fi
  fi
  case "${target}" in
    *-mingw*)
      if test -z "$WIN32_REDIST_DIR" -a -z "$MOZ_DEBUG"; then
        echo "configure: warning: When not building jemalloc, you need to set WIN32_REDIST_DIR to the path to the Visual C++ Redist (usually VCINSTALLDIR\redist\x86\Microsoft.VC80.CRT, for VC++ v8) if you intend to distribute your build." 1>&2
      fi
      ;;
  esac
else
    if test "$OS_ARCH" = "WINNT"; then
    if test -z "$HAVE_64BIT_OS"; then
      cat >> confdefs.pytmp <<EOF
    (''' MOZ_MEMORY_SIZEOF_PTR_2POW ''', r''' 2 ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_MEMORY_SIZEOF_PTR_2POW 2
EOF

    else
      cat >> confdefs.pytmp <<EOF
    (''' MOZ_MEMORY_SIZEOF_PTR_2POW ''', r''' 3 ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_MEMORY_SIZEOF_PTR_2POW 3
EOF

    fi
  else
    echo $ac_n "checking size of int *""... $ac_c" 1>&6
echo "configure:23898: checking size of int *" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_int_p'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_int_p=4
else
  cat > conftest.$ac_ext <<EOF
#line 23906 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(int *));
  exit(0);
}
EOF
if { (eval echo configure:23917: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int_p=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int_p=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_int_p" 1>&6
cat >> confdefs.pytmp <<EOF
    (''' SIZEOF_INT_P ''', r''' $ac_cv_sizeof_int_p ''')
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_INT_P $ac_cv_sizeof_int_p
EOF


    case "${ac_cv_sizeof_int_p}" in
    4)
      cat >> confdefs.pytmp <<EOF
    (''' MOZ_MEMORY_SIZEOF_PTR_2POW ''', r''' 2 ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_MEMORY_SIZEOF_PTR_2POW 2
EOF

      ;;
    8)
      cat >> confdefs.pytmp <<EOF
    (''' MOZ_MEMORY_SIZEOF_PTR_2POW ''', r''' 3 ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_MEMORY_SIZEOF_PTR_2POW 3
EOF

      ;;
    *)
      { echo "configure: error: Unexpected pointer size" 1>&2; exit 1; }
      ;;
    esac
  fi

  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY 1
EOF

  if test -n "$MOZ_JEMALLOC3"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_JEMALLOC3 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_JEMALLOC3 1
EOF

  fi
  if test "x$MOZ_DEBUG" = "x1"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY_DEBUG ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY_DEBUG 1
EOF

  fi
        case "${target}" in
  *-darwin*)
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY_DARWIN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY_DARWIN 1
EOF

    ;;
  *-*freebsd*)
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY_BSD ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY_BSD 1
EOF

    ;;
  *-android*|*-linuxandroid*)
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY_LINUX ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY_LINUX 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY_ANDROID ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY_ANDROID 1
EOF

    if test -z "$gonkdir"; then
      _WRAP_MALLOC=1
    else
      cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY_GONK ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY_GONK 1
EOF

    fi
    MOZ_GLUE_LDFLAGS=
    ;;
  *-*linux*)
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY_LINUX ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY_LINUX 1
EOF

    ;;
  *-netbsd*)
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY_BSD ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY_BSD 1
EOF

    ;;
  *-solaris*)
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY_SOLARIS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY_SOLARIS 1
EOF

    ;;
  *-mingw*)
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY_WINDOWS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY_WINDOWS 1
EOF

    if test -z "$MOZ_DEBUG"; then
      WIN32_CRT_LIBS="msvcrt.lib msvcprt.lib"
    else
      WIN32_CRT_LIBS="msvcrtd.lib msvcprtd.lib"
    fi
        WIN32_CRTDLL_FULLPATH=`lib -nologo -list $WIN32_CRT_LIBS | grep crtdll\\.obj`
    lib -NOLOGO -OUT:crtdll.obj $WIN32_CRT_LIBS -EXTRACT:$WIN32_CRTDLL_FULLPATH
    if grep -q '__imp__\{0,1\}free' crtdll.obj; then
      MOZ_GLUE_LDFLAGS='-LIBPATH:$(DIST)/lib -NODEFAULTLIB:msvcrt -NODEFAULTLIB:msvcrtd -NODEFAULTLIB:msvcprt -NODEFAULTLIB:msvcprtd -DEFAULTLIB:mozcrt'
            DLLFLAGS="$DLLFLAGS $MOZ_GLUE_LDFLAGS"
    else
      DLLFLAGS="$DLLFLAGS -LIBPATH:\$(DIST)/lib -DEFAULTLIB:mozglue"
    fi
    rm crtdll.obj

    export DLLFLAGS
    ;;
  *)
    { echo "configure: error: --enable-jemalloc not supported on ${target}" 1>&2; exit 1; }
    ;;
  esac
fi # MOZ_MEMORY








if test "$OS_TARGET" = Android; then
    WRAP_LDFLAGS="${WRAP_LDFLAGS} -L$_objdir/dist/lib -lmozglue"
    if test -n "$MOZ_OLD_LINKER"; then
        WRAP_LDFLAGS="${WRAP_LDFLAGS} -Wl,--wrap=dlopen,--wrap=dlclose,--wrap=dlerror,--wrap=dlsym,--wrap=dladdr"
    fi
    WRAP_LDFLAGS="${WRAP_LDFLAGS} -Wl,--wrap=getaddrinfo,--wrap=freeaddrinfo,--wrap=gai_strerror"
    WRAP_LDFLAGS="${WRAP_LDFLAGS} -Wl--wrap=PR_GetEnv,--wrap=PR_SetEnv"
    if test -z "$gonkdir"; then
        WRAP_LDFLAGS="${WRAP_LDFLAGS} -Wl,--wrap=fork,--wrap=pthread_atfork,--wrap=raise"
    fi
fi

# Check whether --enable-wrap-malloc or --disable-wrap-malloc was given.
if test "${enable_wrap_malloc+set}" = set; then
  enableval="$enable_wrap_malloc"
  if test "$enableval" = "yes"; then
    _WRAP_MALLOC=1
  elif test "$enableval" = "no"; then
    _WRAP_MALLOC= 
  else
    { echo "configure: error: Option, wrap-malloc, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$_WRAP_MALLOC"; then
    if test -n "$GNU_CC"; then
        WRAP_LDFLAGS="${WRAP_LDFLAGS} -Wl,--wrap=malloc,--wrap=calloc,--wrap=valloc,--wrap=free,--wrap=realloc,--wrap=memalign"
        WRAP_LDFLAGS="${WRAP_LDFLAGS} -Wl,--wrap=__builtin_new,--wrap=__builtin_vec_new,--wrap=__builtin_delete,--wrap=__builtin_vec_delete"
        WRAP_LDFLAGS="${WRAP_LDFLAGS} -Wl,--wrap=strdup,--wrap=strndup"
        WRAP_LDFLAGS="${WRAP_LDFLAGS} -Wl,--wrap=posix_memalign,--wrap=malloc_usable_size"
                if test "$OS_TARGET" = "Android"; then
            WRAP_LDFLAGS="${WRAP_LDFLAGS} -Wl,--wrap=_Znwj,--wrap=_Znaj,--wrap=_ZdlPv,--wrap=_ZdaPv"
                        WRAP_LDFLAGS="${WRAP_LDFLAGS} -Wl,--wrap=_ZnwjRKSt9nothrow_t,--wrap=_ZnajRKSt9nothrow_t,--wrap=_ZdlPvRKSt9nothrow_t,--wrap=_ZdaPvRKSt9nothrow_t"
        fi
    else
        { echo "configure: error: --enable-wrap-malloc is not supported for non-GNU toolchains" 1>&2; exit 1; }
    fi
fi

# Check whether --with-wrap-malloc or --without-wrap-malloc was given.
if test "${with_wrap_malloc+set}" = set; then
  withval="$with_wrap_malloc"
  WRAP_LDFLAGS="${WRAP_LDFLAGS} $withval"
fi


# Check whether --enable-trace-jscalls or --disable-trace-jscalls was given.
if test "${enable_trace_jscalls+set}" = set; then
  enableval="$enable_trace_jscalls"
  if test "$enableval" = "yes"; then
    MOZ_TRACE_JSCALLS=1
  elif test "$enableval" = "no"; then
    MOZ_TRACE_JSCALLS= 
  else
    { echo "configure: error: Option, trace-jscalls, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_TRACE_JSCALLS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TRACE_JSCALLS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TRACE_JSCALLS 1
EOF

fi

JSGC_INCREMENTAL=1
# Check whether --enable-gcincremental or --disable-gcincremental was given.
if test "${enable_gcincremental+set}" = set; then
  enableval="$enable_gcincremental"
  if test "$enableval" = "no"; then
    JSGC_INCREMENTAL= 
  elif test "$enableval" = "yes"; then
    :
  else
    { echo "configure: error: Option, gcincremental, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$JSGC_INCREMENTAL"; then
    cat >> confdefs.pytmp <<\EOF
    (''' JSGC_INCREMENTAL ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define JSGC_INCREMENTAL 1
EOF

fi

# Check whether --enable-ETW or --disable-ETW was given.
if test "${enable_ETW+set}" = set; then
  enableval="$enable_ETW"
  if test "$enableval" = "yes"; then
    MOZ_ETW=1
  elif test "$enableval" = "no"; then
    MOZ_ETW= 
  else
    { echo "configure: error: Option, ETW, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_ETW"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ETW ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ETW 1
EOF

fi

if test -n "$MOZ_ETW"; then
    if test -z "$MOZ_WINSDK_TARGETVER"; then
        { echo "configure: error: --enable-ETW is only valid on Windows" 1>&2; exit 1; }
    fi
fi

# Check whether --enable-gczeal or --disable-gczeal was given.
if test "${enable_gczeal+set}" = set; then
  enableval="$enable_gczeal"
  if test "$enableval" = "yes"; then
    JS_GC_ZEAL=1
  elif test "$enableval" = "no"; then
    JS_GC_ZEAL= 
  else
    { echo "configure: error: Option, gczeal, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$JS_GC_ZEAL"; then
    cat >> confdefs.pytmp <<\EOF
    (''' JS_GC_ZEAL ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define JS_GC_ZEAL 1
EOF

fi

# Check whether --enable-js-diagnostics or --disable-js-diagnostics was given.
if test "${enable_js_diagnostics+set}" = set; then
  enableval="$enable_js_diagnostics"
  if test "$enableval" = "yes"; then
    JS_CRASH_DIAGNOSTICS=1
  elif test "$enableval" = "no"; then
    JS_CRASH_DIAGNOSTICS= 
  else
    { echo "configure: error: Option, js-diagnostics, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$JS_CRASH_DIAGNOSTICS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' JS_CRASH_DIAGNOSTICS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define JS_CRASH_DIAGNOSTICS 1
EOF

fi


# Check whether --with-ccache or --without-ccache was given.
if test "${with_ccache+set}" = set; then
  withval="$with_ccache"
  CCACHE=$withval
else
  CCACHE="no"
fi


if test "$CCACHE" != "no"; then
    if test -z "$CCACHE" -o "$CCACHE" = "yes"; then
        CCACHE=
    else
        if test ! -e "$CCACHE"; then
            { echo "configure: error: $CCACHE not found" 1>&2; exit 1; }
        fi
    fi
      for ac_prog in $CCACHE ccache
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:24288: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_CCACHE'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$CCACHE" in
  /*)
  ac_cv_path_CCACHE="$CCACHE" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_CCACHE="$CCACHE" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_CCACHE="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
CCACHE="$ac_cv_path_CCACHE"
if test -n "$CCACHE"; then
  echo "$ac_t""$CCACHE" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CCACHE" && break
done

  if test "$msyshost"; then
    case "$CCACHE" in
    /*)
      tmp_DIRNAME=`dirname "$CCACHE"`
      tmp_BASENAME=`basename "$CCACHE"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      CCACHE="$tmp_PWD/$tmp_BASENAME"
      if test -e "$CCACHE.exe"; then
        CCACHE="$CCACHE.exe"
      fi
    esac
  fi

    if test -z "$CCACHE" -o "$CCACHE" = ":"; then
        { echo "configure: error: ccache not found" 1>&2; exit 1; }
    elif test -x "$CCACHE"; then
        CC="$CCACHE $CC"
        CXX="$CCACHE $CXX"
        MOZ_USING_CCACHE=1
    else
        { echo "configure: error: $CCACHE is not executable" 1>&2; exit 1; }
    fi
fi





# Check whether --with-static-checking or --without-static-checking was given.
if test "${with_static_checking+set}" = set; then
  withval="$with_static_checking"
  DEHYDRA_PATH=$withval
else
  DEHYDRA_PATH= 
fi


if test -n "$DEHYDRA_PATH"; then
    if test ! -f "$DEHYDRA_PATH"; then
        { echo "configure: error: The dehydra plugin is not at the specified path." 1>&2; exit 1; }
    fi
    cat >> confdefs.pytmp <<\EOF
    (''' NS_STATIC_CHECKING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NS_STATIC_CHECKING 1
EOF

fi


# Check whether --enable-strip or --disable-strip was given.
if test "${enable_strip+set}" = set; then
  enableval="$enable_strip"
  if test "$enableval" = "yes"; then
    ENABLE_STRIP=1
  elif test "$enableval" = "no"; then
    ENABLE_STRIP= 
  else
    { echo "configure: error: Option, strip, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


# Check whether --enable-install-strip or --disable-install-strip was given.
if test "${enable_install_strip+set}" = set; then
  enableval="$enable_install_strip"
  if test "$enableval" = "yes"; then
    PKG_SKIP_STRIP= 
  elif test "$enableval" = "no"; then
    PKG_SKIP_STRIP=1
  else
    { echo "configure: error: Option, install-strip, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


# Check whether --enable-elf-dynstr-gc or --disable-elf-dynstr-gc was given.
if test "${enable_elf_dynstr_gc+set}" = set; then
  enableval="$enable_elf_dynstr_gc"
  if test "$enableval" = "yes"; then
    USE_ELF_DYNSTR_GC=1
  elif test "$enableval" = "no"; then
    USE_ELF_DYNSTR_GC= 
  else
    { echo "configure: error: Option, elf-dynstr-gc, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi



USE_ELF_HACK=1
# Check whether --enable-elf-hack or --disable-elf-hack was given.
if test "${enable_elf_hack+set}" = set; then
  enableval="$enable_elf_hack"
  if test "$enableval" = "no"; then
    USE_ELF_HACK=
  elif test "$enableval" = "yes"; then
    USE_ELF_HACK=1
  else
    { echo "configure: error: Option, elf-hack, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


# Disable elf hack for profiling because the built in profiler
# doesn't read the segments properly with elf hack. This is
# temporary and should be fixed soon in the profiler.
if test "$MOZ_PROFILING" = 1; then
  USE_ELF_HACK=
fi

# Only enable elfhack where supported
if test "$USE_ELF_HACK" = 1; then
    case "${HOST_OS_ARCH},${OS_ARCH}" in
    Linux,Linux)
        case "${CPU_ARCH}" in
        arm | x86 | x86_64)
            USE_ELF_HACK=1
            ;;
        *)
            USE_ELF_HACK=
            ;;
        esac
        ;;
    *)
        USE_ELF_HACK=
        ;;
    esac
fi

if test "$USE_ELF_HACK" = 1; then
                                    echo $ac_n "checking whether linker creates PT_GNU_RELRO segments""... $ac_c" 1>&6
echo "configure:24456: checking whether linker creates PT_GNU_RELRO segments" >&5
if eval "test \"`echo '$''{'LINK_WITH_PT_GNU_RELRO'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo "int main() {return 0;}" > conftest.${ac_ext}
         if { ac_try='${CC-cc} -o conftest${ac_exeext} $LDFLAGS conftest.${ac_ext} $LIBS 1>&2'; { (eval echo configure:24461: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } &&
            test -s conftest${ac_exeext}; then
            if ${TOOLCHAIN_PREFIX}readelf -l conftest${ac_exeext} | grep GNU_RELRO > /dev/null; then
                LINK_WITH_PT_GNU_RELRO=yes
            else
                LINK_WITH_PT_GNU_RELRO=no
            fi
         else
                          { echo "configure: error: couldn't compile a simple C file" 1>&2; exit 1; }
         fi
         rm -rf conftest*
fi

echo "$ac_t""$LINK_WITH_PT_GNU_RELRO" 1>&6
    if test "$LINK_WITH_PT_GNU_RELRO" = yes; then
        echo "configure: warning: Disabling elfhack" 1>&2
        USE_ELF_HACK=
    fi
fi


STDCXX_COMPAT=
# Check whether --enable-stdcxx-compat or --disable-stdcxx-compat was given.
if test "${enable_stdcxx_compat+set}" = set; then
  enableval="$enable_stdcxx_compat"
  if test "$enableval" = "yes"; then
    STDCXX_COMPAT=1
  elif test "$enableval" = "no"; then
    :
  else
    { echo "configure: error: Option, stdcxx-compat, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi




if test -n "$STDCXX_COMPAT"; then
   eval $(CXX="$CXX" $PYTHON $_topsrcdir/build/autoconf/libstdcxx.py)
   
   
fi

# Profiling and Instrumenting

# Check whether --enable-visual-event-tracer or --disable-visual-event-tracer was given.
if test "${enable_visual_event_tracer+set}" = set; then
  enableval="$enable_visual_event_tracer"
  if test "$enableval" = "yes"; then
    MOZ_VISUAL_EVENT_TRACER=1
  elif test "$enableval" = "no"; then
    MOZ_VISUAL_EVENT_TRACER=
  else
    { echo "configure: error: Option, visual-event-tracer, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_VISUAL_EVENT_TRACER"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VISUAL_EVENT_TRACER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VISUAL_EVENT_TRACER 1
EOF

fi

# Check whether --enable-reflow-perf or --disable-reflow-perf was given.
if test "${enable_reflow_perf+set}" = set; then
  enableval="$enable_reflow_perf"
  if test "$enableval" = "yes"; then
    MOZ_REFLOW_PERF=1
  elif test "$enableval" = "no"; then
    MOZ_REFLOW_PERF= 
  else
    { echo "configure: error: Option, reflow-perf, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_REFLOW_PERF"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_REFLOW_PERF ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_REFLOW_PERF 1
EOF

fi

# Check whether --enable-codesighs or --disable-codesighs was given.
if test "${enable_codesighs+set}" = set; then
  enableval="$enable_codesighs"
  if test "$enableval" = "yes"; then
    _ENABLE_CODESIGHS=1
  elif test "$enableval" = "no"; then
    _ENABLE_CODESIGHS= 
  else
    { echo "configure: error: Option, codesighs, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$_ENABLE_CODESIGHS"; then
    if test -d $srcdir/tools/codesighs; then
        MOZ_MAPINFO=1
    else
        { echo "configure: error: Codesighs directory $srcdir/tools/codesighs required." 1>&2; exit 1; }
    fi
fi

# Check whether --enable-b2g-ril or --disable-b2g-ril was given.
if test "${enable_b2g_ril+set}" = set; then
  enableval="$enable_b2g_ril"
  if test "$enableval" = "yes"; then
    MOZ_B2G_RIL=1
  elif test "$enableval" = "no"; then
    MOZ_B2G_RIL= 
  else
    { echo "configure: error: Option, b2g-ril, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_B2G_RIL"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_B2G_RIL ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_B2G_RIL 1
EOF

fi


if test -n "$MOZ_B2G_FM"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_B2G_FM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_B2G_FM 1
EOF

fi


# Check whether --enable-b2g-bt or --disable-b2g-bt was given.
if test "${enable_b2g_bt+set}" = set; then
  enableval="$enable_b2g_bt"
  if test "$enableval" = "yes"; then
    MOZ_B2G_BT=1
  elif test "$enableval" = "no"; then
    MOZ_B2G_BT= 
  else
    { echo "configure: error: Option, b2g-bt, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_B2G_BT"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_B2G_BT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_B2G_BT 1
EOF

fi


if test -n "$MOZ_SYS_MSG"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SYS_MSG ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SYS_MSG 1
EOF

fi


if test -n "$MOZ_TIME_MANAGER"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TIME_MANAGER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TIME_MANAGER 1
EOF

fi


# Check whether --enable-b2g-camera or --disable-b2g-camera was given.
if test "${enable_b2g_camera+set}" = set; then
  enableval="$enable_b2g_camera"
  if test "$enableval" = "yes"; then
    MOZ_B2G_CAMERA=1
  elif test "$enableval" = "no"; then
    MOZ_B2G_CAMERA= 
  else
    { echo "configure: error: Option, b2g-camera, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test -n "$MOZ_B2G_CAMERA"; then
   cat >> confdefs.pytmp <<\EOF
    (''' MOZ_B2G_CAMERA ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_B2G_CAMERA 1
EOF

fi


if test -n "$MOZ_B2G_CERTDATA"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_B2G_CERTDATA ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_B2G_CERTDATA 1
EOF

fi


if test -n "$MOZ_PAY"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PAY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PAY 1
EOF

fi


if test -n "$MOZ_AUDIO_CHANNEL_MANAGER"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_AUDIO_CHANNEL_MANAGER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_AUDIO_CHANNEL_MANAGER 1
EOF

fi


if test -z "$SKIP_LIBRARY_CHECKS"; then
    
    ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

    for ac_func in __cxa_demangle
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:24717: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 24722 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:24748: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 HAVE_DEMANGLE=1
else
  echo "$ac_t""no" 1>&6
HAVE_DEMANGLE=
fi
done

    ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

fi

# Demangle only for debug or trace-malloc or DMD builds
MOZ_DEMANGLE_SYMBOLS=
if test "$HAVE_DEMANGLE" && test "$MOZ_DEBUG" -o "$NS_TRACE_MALLOC" -o "$MOZ_DMD"; then
    MOZ_DEMANGLE_SYMBOLS=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DEMANGLE_SYMBOLS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DEMANGLE_SYMBOLS 1
EOF

fi


if test -z "$SKIP_LIBRARY_CHECKS"; then
       ac_safe=`echo "unwind.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for unwind.h""... $ac_c" 1>&6
echo "configure:24802: checking for unwind.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 24807 "configure"
#include "confdefs.h"

#include <unwind.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:24815: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    for ac_func in _Unwind_Backtrace
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:24832: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 24837 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:24860: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  else
    echo "$ac_t""no" 1>&6
    
  fi

fi


# Check whether --with-jitreport-granularity or --without-jitreport-granularity was given.
if test "${with_jitreport_granularity+set}" = set; then
  withval="$with_jitreport_granularity"
  JITREPORT_GRANULARITY=$withval
else
  JITREPORT_GRANULARITY=3
fi


cat >> confdefs.pytmp <<EOF
    (''' JS_DEFAULT_JITREPORT_GRANULARITY ''', r''' $JITREPORT_GRANULARITY ''')
EOF
cat >> confdefs.h <<EOF
#define JS_DEFAULT_JITREPORT_GRANULARITY $JITREPORT_GRANULARITY
EOF


# Misc. Options

# Check whether --enable-xterm-updates or --disable-xterm-updates was given.
if test "${enable_xterm_updates+set}" = set; then
  enableval="$enable_xterm_updates"
  if test "$enableval" = "yes"; then
    MOZ_UPDATE_XTERM=1
  elif test "$enableval" = "no"; then
    MOZ_UPDATE_XTERM= 
  else
    { echo "configure: error: Option, xterm-updates, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


# Check whether --enable-chrome-format or --disable-chrome-format was given.
if test "${enable_chrome_format+set}" = set; then
  enableval="$enable_chrome_format"
  MOZ_CHROME_FILE_FORMAT=`echo $enableval | tr A-Z a-z`
fi


if test -z "$MOZ_CHROME_FILE_FORMAT"; then
    MOZ_CHROME_FILE_FORMAT=jar
fi

if test "$MOZ_CHROME_FILE_FORMAT" != "jar" &&
    test "$MOZ_CHROME_FILE_FORMAT" != "flat" &&
    test "$MOZ_CHROME_FILE_FORMAT" != "symlink" &&
    test "$MOZ_CHROME_FILE_FORMAT" != "both" &&
    test "$MOZ_CHROME_FILE_FORMAT" != "omni"; then
    { echo "configure: error: --enable-chrome-format must be set to either jar, flat, both, symlink, or omni" 1>&2; exit 1; }
fi

if test "$MOZ_CHROME_FILE_FORMAT" = "omni"; then
    MOZ_OMNIJAR=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_OMNIJAR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_OMNIJAR 1
EOF

    if test "$OS_ARCH" = "WINNT" -o "$OS_ARCH" = "OS2" -o "$MOZ_WIDGET_TOOLKIT" = "android"; then
        MOZ_CHROME_FILE_FORMAT=flat
    else
        MOZ_CHROME_FILE_FORMAT=symlink
    fi
elif test "$MOZ_CHROME_FILE_FORMAT" = "jar"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CHROME_FILE_FORMAT_JAR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CHROME_FILE_FORMAT_JAR 1
EOF

fi

OMNIJAR_NAME=omni.ja



# Check whether --with-default-mozilla-five-home or --without-default-mozilla-five-home was given.
if test "${with_default_mozilla_five_home+set}" = set; then
  withval="$with_default_mozilla_five_home"
   val=`echo $withval`
  cat >> confdefs.pytmp <<EOF
    (''' MOZ_DEFAULT_MOZILLA_FIVE_HOME ''', r''' "$val" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_DEFAULT_MOZILLA_FIVE_HOME "$val"
EOF
 
fi


# Check whether --with-user-appdir or --without-user-appdir was given.
if test "${with_user_appdir+set}" = set; then
  withval="$with_user_appdir"
   val=`echo $withval`
if echo "$val" | grep "\/" >/dev/null; then
    { echo "configure: error: "Homedir must be single relative path."" 1>&2; exit 1; }
else
    MOZ_USER_DIR="$val"
fi
fi


cat >> confdefs.pytmp <<EOF
    (''' MOZ_USER_DIR ''', r''' "$MOZ_USER_DIR" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_USER_DIR "$MOZ_USER_DIR"
EOF


MOZ_DOC_INPUT_DIRS='./dist/include ./dist/idl'
# Check whether --with-doc-input-dirs or --without-doc-input-dirs was given.
if test "${with_doc_input_dirs+set}" = set; then
  withval="$with_doc_input_dirs"
   MOZ_DOC_INPUT_DIRS=`echo "$withval" | sed "s/,/ /g"`  
fi



MOZ_DOC_INCLUDE_DIRS='./dist/include ./dist/include/nspr'
# Check whether --with-doc-include-dirs or --without-doc-include-dirs was given.
if test "${with_doc_include_dirs+set}" = set; then
  withval="$with_doc_include_dirs"
   MOZ_DOC_INCLUDE_DIRS=`echo "$withval" | sed "s/,/ /g"`  
fi



MOZ_DOC_OUTPUT_DIR='./dist/docs'
# Check whether --with-doc-output-dir or --without-doc-output-dir was given.
if test "${with_doc_output_dir+set}" = set; then
  withval="$with_doc_output_dir"
   MOZ_DOC_OUTPUT_DIR=$withval  
fi



if test -z "$SKIP_COMPILER_CHECKS"; then
# Compiler Options

echo $ac_n "checking for -pipe support""... $ac_c" 1>&6
echo "configure:25039: checking for -pipe support" >&5
if test -n "$GNU_CC" -a -n "$GNU_CXX"; then
        CFLAGS="$CFLAGS -pipe"
    CXXFLAGS="$CXXFLAGS -pipe"
    echo "$ac_t""yes" 1>&6
else
    echo "$ac_t""no" 1>&6
fi


_SAVE_CFLAGS="$CFLAGS"
CFLAGS="$CFLAGS -fprofile-generate -fprofile-correction"

echo $ac_n "checking whether C compiler supports -fprofile-generate""... $ac_c" 1>&6
echo "configure:25053: checking whether C compiler supports -fprofile-generate" >&5
cat > conftest.$ac_ext <<EOF
#line 25055 "configure"
#include "confdefs.h"

int main() {
return 0;
; return 0; }
EOF
if { (eval echo configure:25062: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
   PROFILE_GEN_CFLAGS="-fprofile-generate"
                 result="yes" 
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  result="no"
fi
rm -f conftest*
echo "$ac_t""$result" 1>&6

if test $result = "yes"; then
  PROFILE_GEN_LDFLAGS="-fprofile-generate"
  PROFILE_USE_CFLAGS="-fprofile-use -fprofile-correction -Wcoverage-mismatch"
  PROFILE_USE_LDFLAGS="-fprofile-use"
fi

CFLAGS="$_SAVE_CFLAGS"

if test -n "$INTEL_CC"; then
  PROFILE_GEN_CFLAGS="-prof-gen -prof-dir ."
  PROFILE_GEN_LDFLAGS=
  PROFILE_USE_CFLAGS="-prof-use -prof-dir ."
  PROFILE_USE_LDFLAGS=
fi

if test "$SOLARIS_SUNPRO_CC"; then
  PROFILE_GEN_CFLAGS="-xprofile=collect:$_objdir/$enable_application"
  PROFILE_GEN_LDFLAGS="-xprofile=collect:$_objdir/$enable_application"
  PROFILE_USE_CFLAGS="-xprofile=use:$_objdir/$enable_application"
  PROFILE_USE_LDFLAGS="-xprofile=use:$_objdir/$enable_application"
fi






ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross


# Check whether --enable-pedantic or --disable-pedantic was given.
if test "${enable_pedantic+set}" = set; then
  enableval="$enable_pedantic"
  if test "$enableval" = "no"; then
    _PEDANTIC= 
  elif test "$enableval" = "yes"; then
    :
  else
    { echo "configure: error: Option, pedantic, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test "$_PEDANTIC"; then
    _SAVE_CXXFLAGS=$CXXFLAGS
    CXXFLAGS="$CXXFLAGS -pedantic ${_WARNINGS_CXXFLAGS} -Wno-long-long"
    echo $ac_n "checking whether C++ compiler has -pedantic long long bug""... $ac_c" 1>&6
echo "configure:25126: checking whether C++ compiler has -pedantic long long bug" >&5
    cat > conftest.$ac_ext <<EOF
#line 25128 "configure"
#include "confdefs.h"
$configure_static_assert_macros
int main() {
CONFIGURE_STATIC_ASSERT(sizeof(long long) == 8)
; return 0; }
EOF
if { (eval echo configure:25135: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  result="no"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  result="yes" 
fi
rm -f conftest*
    echo "$ac_t""$result" 1>&6
    CXXFLAGS="$_SAVE_CXXFLAGS"

    case "$result" in
    no)
        _WARNINGS_CFLAGS="-pedantic ${_WARNINGS_CFLAGS} -Wno-long-long"
        _WARNINGS_CXXFLAGS="-pedantic ${_WARNINGS_CXXFLAGS} -Wno-long-long"
        ;;
    yes)
        { echo "configure: error: Your compiler appears to have a known bug where long long is miscompiled when using -pedantic.  Reconfigure using --disable-pedantic. " 1>&2; exit 1; }
        ;;
    esac
fi

_SAVE_CXXFLAGS=$CXXFLAGS
CXXFLAGS="$CXXFLAGS ${_WARNINGS_CXXFLAGS}"
echo $ac_n "checking for correct overload resolution with const and templates""... $ac_c" 1>&6
echo "configure:25162: checking for correct overload resolution with const and templates" >&5
if eval "test \"`echo '$''{'ac_nscap_nonconst_opeq_bug'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 25167 "configure"
#include "confdefs.h"

                      template <class T>
                      class Pointer
                        {
                        public:
                          T* myPtr;
                        };

                      template <class T, class U>
                      int operator==(const Pointer<T>& rhs, U* lhs)
                        {
                          return rhs.myPtr == lhs;
                        }

                      template <class T, class U>
                      int operator==(const Pointer<T>& rhs, const U* lhs)
                        {
                          return rhs.myPtr == lhs;
                        }
                    
int main() {

                      Pointer<int> foo;
                      const int* bar;
                      return foo == bar;
                    
; return 0; }
EOF
if { (eval echo configure:25197: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_nscap_nonconst_opeq_bug="no"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_nscap_nonconst_opeq_bug="yes"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_nscap_nonconst_opeq_bug" 1>&6
CXXFLAGS="$_SAVE_CXXFLAGS"

if test "$ac_nscap_nonconst_opeq_bug" = "yes" ; then
    cat >> confdefs.pytmp <<\EOF
    (''' NSCAP_DONT_PROVIDE_NONCONST_OPEQ ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NSCAP_DONT_PROVIDE_NONCONST_OPEQ 1
EOF

fi
fi # ! SKIP_COMPILER_CHECKS

cat >> confdefs.pytmp <<\EOF
    (''' CPP_THROW_NEW ''', r''' throw() ''')
EOF
cat >> confdefs.h <<\EOF
#define CPP_THROW_NEW throw()
EOF

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


if test "$COMPILE_ENVIRONMENT"; then


echo $ac_n "checking what kind of list files are supported by the linker""... $ac_c" 1>&6
echo "configure:25242: checking what kind of list files are supported by the linker" >&5
if eval "test \"`echo '$''{'EXPAND_LIBS_LIST_STYLE'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo "int main() {return 0;}" > conftest.${ac_ext}
     if { ac_try='${CC-cc} -o conftest.${OBJ_SUFFIX} -c $CFLAGS $CPPFLAGS conftest.${ac_ext} 1>&5'; { (eval echo configure:25247: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } && test -s conftest.${OBJ_SUFFIX}; then
         echo "INPUT(conftest.${OBJ_SUFFIX})" > conftest.list
         if { ac_try='${CC-cc} -o conftest${ac_exeext} $LDFLAGS conftest.list $LIBS 1>&5'; { (eval echo configure:25249: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } && test -s conftest${ac_exeext}; then
             EXPAND_LIBS_LIST_STYLE=linkerscript
         else
             echo "conftest.${OBJ_SUFFIX}" > conftest.list
             if { ac_try='${CC-cc} -o conftest${ac_exeext} $LDFLAGS @conftest.list $LIBS 1>&5'; { (eval echo configure:25253: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } && test -s conftest${ac_exeext}; then
                 EXPAND_LIBS_LIST_STYLE=list
             else
                 EXPAND_LIBS_LIST_STYLE=none
             fi
         fi
     else
                  { echo "configure: error: couldn't compile a simple C file" 1>&2; exit 1; }
     fi
     rm -rf conftest*
fi

echo "$ac_t""$EXPAND_LIBS_LIST_STYLE" 1>&6

LIBS_DESC_SUFFIX=desc



if test "$GCC_USE_GNU_LD"; then
    echo $ac_n "checking what kind of ordering can be done with the linker""... $ac_c" 1>&6
echo "configure:25273: checking what kind of ordering can be done with the linker" >&5
if eval "test \"`echo '$''{'EXPAND_LIBS_ORDER_STYLE'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  > conftest.order
         _SAVE_LDFLAGS="$LDFLAGS"
         LDFLAGS="${LDFLAGS} -Wl,--section-ordering-file,conftest.order"
         cat > conftest.$ac_ext <<EOF
#line 25281 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:25288: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  EXPAND_LIBS_ORDER_STYLE=section-ordering-file
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  EXPAND_LIBS_ORDER_STYLE=
fi
rm -f conftest*
         LDFLAGS="$_SAVE_LDFLAGS"
         if test -z "$EXPAND_LIBS_ORDER_STYLE"; then
             if { ac_try='${CC-cc} ${DSO_LDOPTS} ${LDFLAGS} -o ${DLL_PREFIX}conftest${DLL_SUFFIX} -Wl'; { (eval echo configure:25300: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; }; then
                 EXPAND_LIBS_ORDER_STYLE=linkerscript
             else
                 EXPAND_LIBS_ORDER_STYLE=none
             fi
             rm -f ${DLL_PREFIX}conftest${DLL_SUFFIX}
         fi
fi

echo "$ac_t""$EXPAND_LIBS_ORDER_STYLE" 1>&6
fi



fi # COMPILE_ENVIRONMENT

# Build dependencies

if test "$GNU_CC" -a "$GNU_CXX"; then
  _DEPEND_CFLAGS='$(filter-out %/.pp,-MD -MF $(MDDEPDIR)/$(@F).pp)'
elif test "$SOLARIS_SUNPRO_CC"; then
  _DEPEND_CFLAGS=
else
    if test -z "$_WIN32_MSVC"; then
    _USE_CPP_INCLUDE_FLAG=
    _DEFINES_CFLAGS='$(ACDEFINES) -D_MOZILLA_CONFIG_H_ -DMOZILLA_CLIENT'
    _DEFINES_CXXFLAGS='$(ACDEFINES) -D_MOZILLA_CONFIG_H_ -DMOZILLA_CLIENT'
  else
    echo '#include <stdio.h>' > dummy-hello.c
    
    CL_INCLUDES_PREFIX=`${CC} -showIncludes -c -Fonul dummy-hello.c 2>&1 | sed -ne 's/^\([^:]*:[^:]*:\).*stdio.h$/\1/p'`
    
    if test -z "$CL_INCLUDES_PREFIX"; then
        { echo "configure: error: Cannot find cl -showIncludes prefix." 1>&2; exit 1; }
    fi
    
    rm -f dummy-hello.c
  fi
fi

# Static build options

# split JS out by default to avoid VS2005 PGO crash (bug 591836).
if test "$OS_ARCH" = "WINNT" -a "$CPU_ARCH" != "x86_64" ; then
  ENABLE_SHARED_JS=1
fi

# Check whether --enable-shared-js or --disable-shared-js was given.
if test "${enable_shared_js+set}" = set; then
  enableval="$enable_shared_js"
  if test "$enableval" = "yes"; then
    ENABLE_SHARED_JS=1
  elif test "$enableval" = "no"; then
    ENABLE_SHARED_JS=
  else
    { echo "configure: error: Option, shared-js, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test -n "$ENABLE_SHARED_JS"; then
  JS_SHARED_LIBRARY=1
  MOZ_JS_LIBS="$MOZ_JS_SHARED_LIBS"
else
  MOZ_JS_LIBS="$MOZ_JS_STATIC_LIBS"
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_STATIC_JS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_STATIC_JS 1
EOF

fi



XPCOM_LIBS="$LIBXUL_LIBS"

# Standalone module options (Not for building Mozilla)


if test -z "$SKIP_PATH_CHECKS"; then
if test -z "${GLIB_CFLAGS}" -o -z "${GLIB_LIBS}" ; then
    if test "$MOZ_ENABLE_GTK2" -o "$USE_ELF_DYNSTR_GC" ; then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:25390: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for glib-2.0 >= 1.3.7 gobject-2.0""... $ac_c" 1>&6
echo "configure:25434: checking for glib-2.0 >= 1.3.7 gobject-2.0" >&5

        if $PKG_CONFIG --exists "glib-2.0 >= 1.3.7 gobject-2.0" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking GLIB_CFLAGS""... $ac_c" 1>&6
echo "configure:25441: checking GLIB_CFLAGS" >&5
            GLIB_CFLAGS=`$PKG_CONFIG --cflags "glib-2.0 >= 1.3.7 gobject-2.0"`
            echo "$ac_t""$GLIB_CFLAGS" 1>&6

            echo $ac_n "checking GLIB_LIBS""... $ac_c" 1>&6
echo "configure:25446: checking GLIB_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            GLIB_LIBS="`$PKG_CONFIG --libs \"glib-2.0 >= 1.3.7 gobject-2.0\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$GLIB_LIBS" 1>&6
        else
            GLIB_CFLAGS=""
            GLIB_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            GLIB_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "glib-2.0 >= 1.3.7 gobject-2.0"`
            echo $GLIB_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (glib-2.0 >= 1.3.7 gobject-2.0) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

    fi
fi
fi

if test -z "${GLIB_GMODULE_LIBS}" \
   -a -n "${GLIB_CONFIG}"\
    -a "${GLIB_CONFIG}" != no\
; then
    GLIB_GMODULE_LIBS=`$GLIB_CONFIG gmodule --libs`
fi






if test "$MOZ_WIDGET_TOOLKIT" != "uikit"; then
if test "${OS_TARGET}" = "WINNT" -o "${OS_ARCH}" = "Darwin" -o "${MOZ_WIDGET_TOOLKIT}" = "android" -o "${MOZ_WIDGET_TOOLKIT}" = "gtk2"; then
MOZ_ENABLE_SKIA=1
else
MOZ_ENABLE_SKIA=
fi
fi

# Check whether --enable-skia or --disable-skia was given.
if test "${enable_skia+set}" = set; then
  enableval="$enable_skia"
  if test "$enableval" = "yes"; then
    MOZ_ENABLE_SKIA=1
  elif test "$enableval" = "no"; then
    MOZ_ENABLE_SKIA=
  else
    { echo "configure: error: Option, skia, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test "$USE_FC_FREETYPE"; then
    if test "$COMPILE_ENVIRONMENT"; then
                                succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:25520: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for freetype2 >= 6.1.0""... $ac_c" 1>&6
echo "configure:25564: checking for freetype2 >= 6.1.0" >&5

        if $PKG_CONFIG --exists "freetype2 >= 6.1.0" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking FT2_CFLAGS""... $ac_c" 1>&6
echo "configure:25571: checking FT2_CFLAGS" >&5
            FT2_CFLAGS=`$PKG_CONFIG --cflags "freetype2 >= 6.1.0"`
            echo "$ac_t""$FT2_CFLAGS" 1>&6

            echo $ac_n "checking FT2_LIBS""... $ac_c" 1>&6
echo "configure:25576: checking FT2_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            FT2_LIBS="`$PKG_CONFIG --libs \"freetype2 >= 6.1.0\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$FT2_LIBS" 1>&6
        else
            FT2_CFLAGS=""
            FT2_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            FT2_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "freetype2 >= 6.1.0"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     _HAVE_FREETYPE2=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       _HAVE_FREETYPE2=
     fi
  fi


        if test "$_HAVE_FREETYPE2"; then
            _SAVE_LIBS="$LIBS"
            _SAVE_CFLAGS="$CFLAGS"
            LIBS="$LIBS $FT2_LIBS"
            CFLAGS="$CFLAGS $FT2_CFLAGS"

            echo $ac_n "checking for FT_Bitmap_Size.y_ppem""... $ac_c" 1>&6
echo "configure:25613: checking for FT_Bitmap_Size.y_ppem" >&5
if eval "test \"`echo '$''{'ac_cv_member_FT_Bitmap_Size_y_ppem'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 25618 "configure"
#include "confdefs.h"
#include <ft2build.h>
                                 #include FT_FREETYPE_H
int main() {
FT_Bitmap_Size s;
                                 if (sizeof s.y_ppem) return 0;
                                 return 1
; return 0; }
EOF
if { (eval echo configure:25628: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_member_FT_Bitmap_Size_y_ppem=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_member_FT_Bitmap_Size_y_ppem=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_member_FT_Bitmap_Size_y_ppem" 1>&6
            if test "$ac_cv_member_FT_Bitmap_Size_y_ppem" = yes; then
                HAVE_FT_BITMAP_SIZE_Y_PPEM=1
            else
                HAVE_FT_BITMAP_SIZE_Y_PPEM=0
            fi
            cat >> confdefs.pytmp <<EOF
    (''' HAVE_FT_BITMAP_SIZE_Y_PPEM ''', r''' $HAVE_FT_BITMAP_SIZE_Y_PPEM ''')
EOF
cat >> confdefs.h <<EOF
#define HAVE_FT_BITMAP_SIZE_Y_PPEM $HAVE_FT_BITMAP_SIZE_Y_PPEM
EOF


            for ac_func in FT_GlyphSlot_Embolden FT_Load_Sfnt_Table FT_Select_Size
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:25657: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 25662 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:25685: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


            LIBS="$_SAVE_LIBS"
            CFLAGS="$_SAVE_CFLAGS"
        fi

        _SAVE_CPPFLAGS="$CPPFLAGS"
        CPPFLAGS="$CPPFLAGS $FT2_CFLAGS $XCFLAGS"
         for ac_hdr in fontconfig/fcfreetype.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:25723: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 25728 "configure"
#include "confdefs.h"
#include <fontconfig/fontconfig.h>
#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:25736: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    { echo "configure: error: Can't find header fontconfig/fcfreetype.h." 1>&2; exit 1; }
  fi

  done

        CPPFLAGS="$_SAVE_CPPFLAGS"
    else
        cat >> confdefs.pytmp <<\EOF
    (''' HAVE_FONTCONFIG_FCFREETYPE_H ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_FONTCONFIG_FCFREETYPE_H 1
EOF

    fi

    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:25782: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for fontconfig""... $ac_c" 1>&6
echo "configure:25826: checking for fontconfig" >&5

        if $PKG_CONFIG --exists "fontconfig" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking _FONTCONFIG_CFLAGS""... $ac_c" 1>&6
echo "configure:25833: checking _FONTCONFIG_CFLAGS" >&5
            _FONTCONFIG_CFLAGS=`$PKG_CONFIG --cflags "fontconfig"`
            echo "$ac_t""$_FONTCONFIG_CFLAGS" 1>&6

            echo $ac_n "checking _FONTCONFIG_LIBS""... $ac_c" 1>&6
echo "configure:25838: checking _FONTCONFIG_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            _FONTCONFIG_LIBS="`$PKG_CONFIG --libs \"fontconfig\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$_FONTCONFIG_LIBS" 1>&6
        else
            _FONTCONFIG_CFLAGS=""
            _FONTCONFIG_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            _FONTCONFIG_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "fontconfig"`
            echo $_FONTCONFIG_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     
        if test "$MOZ_PANGO"; then
            MOZ_PANGO_CFLAGS="$MOZ_PANGO_CFLAGS $_FONTCONFIG_CFLAGS"
            MOZ_PANGO_LIBS="$MOZ_PANGO_LIBS $_FONTCONFIG_LIBS"
        else
            FT2_CFLAGS="$FT2_CFLAGS $_FONTCONFIG_CFLAGS"
            FT2_LIBS="$FT2_LIBS $_FONTCONFIG_LIBS"
        fi
    
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (fontconfig) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

fi


MOZ_TREE_CAIRO=1
# Check whether --enable-system-cairo or --disable-system-cairo was given.
if test "${enable_system_cairo+set}" = set; then
  enableval="$enable_system_cairo"
  if test "$enableval" = "yes"; then
    MOZ_TREE_CAIRO=
  elif test "$enableval" = "no"; then
    MOZ_TREE_CAIRO=1 
  else
    { echo "configure: error: Option, system-cairo, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


MOZ_TREE_PIXMAN=1
# Check whether --enable-system-pixman or --disable-system-pixman was given.
if test "${enable_system_pixman+set}" = set; then
  enableval="$enable_system_pixman"
  if test "$enableval" = "yes"; then
    MOZ_TREE_PIXMAN=
  elif test "$enableval" = "no"; then
    MOZ_TREE_PIXMAN=force
  else
    { echo "configure: error: Option, system-pixman, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
else
  MOZ_TREE_PIXMAN=1 
fi


# System cairo depends on system pixman
if test "$MOZ_TREE_PIXMAN" = "force"; then
    if test -z "$MOZ_TREE_CAIRO"; then
        { echo "configure: error: --disable-system-pixman is incompatible with --enable-system-cairo." 1>&2; exit 1; }
    else
        MOZ_TREE_PIXMAN=1
    fi
elif test -z "$MOZ_TREE_CAIRO"; then
    MOZ_TREE_PIXMAN=
fi

if test "$MOZ_TREE_PIXMAN"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TREE_PIXMAN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TREE_PIXMAN 1
EOF

    MOZ_PIXMAN_CFLAGS=""
    MOZ_PIXMAN_LIBS='$(call EXPAND_LIBNAME_PATH,mozlibpixman,$(DEPTH)/gfx/cairo/libpixman/src)'
else
    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:25936: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for pixman-1 >= 0.19.2""... $ac_c" 1>&6
echo "configure:25980: checking for pixman-1 >= 0.19.2" >&5

        if $PKG_CONFIG --exists "pixman-1 >= 0.19.2" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking PIXMAN_CFLAGS""... $ac_c" 1>&6
echo "configure:25987: checking PIXMAN_CFLAGS" >&5
            PIXMAN_CFLAGS=`$PKG_CONFIG --cflags "pixman-1 >= 0.19.2"`
            echo "$ac_t""$PIXMAN_CFLAGS" 1>&6

            echo $ac_n "checking PIXMAN_LIBS""... $ac_c" 1>&6
echo "configure:25992: checking PIXMAN_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            PIXMAN_LIBS="`$PKG_CONFIG --libs \"pixman-1 >= 0.19.2\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$PIXMAN_LIBS" 1>&6
        else
            PIXMAN_CFLAGS=""
            PIXMAN_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            PIXMAN_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "pixman-1 >= 0.19.2"`
            echo $PIXMAN_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (pixman-1 >= 0.19.2) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

    MOZ_PIXMAN_CFLAGS="$PIXMAN_CFLAGS"
    MOZ_PIXMAN_LIBS="$PIXMAN_LIBS"
fi



# Check for headers defining standard int types.
 for ac_hdr in stdint.h inttypes.h sys/int_types.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:26032: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 26037 "configure"
#include "confdefs.h"

#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:26045: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    
  fi

  done


if test "$MOZ_TREE_CAIRO"; then
    MOZ_CAIRO_CFLAGS='-I$(LIBXUL_DIST)/include/cairo'
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TREE_CAIRO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TREE_CAIRO 1
EOF


    # For now we assume that we will have a uint64_t available through
    # one of the above headers or mozstdint.h.
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_UINT64_T ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_UINT64_T 1
EOF


    # Define macros for cairo-features.h
    TEE_SURFACE_FEATURE="#define CAIRO_HAS_TEE_SURFACE 1"
    if test "$MOZ_X11"; then
        XLIB_SURFACE_FEATURE="#define CAIRO_HAS_XLIB_SURFACE 1"
        XLIB_XRENDER_SURFACE_FEATURE="#define CAIRO_HAS_XLIB_XRENDER_SURFACE 1"
        PS_SURFACE_FEATURE="#define CAIRO_HAS_PS_SURFACE 1"
        FT_FONT_FEATURE="#define CAIRO_HAS_FT_FONT 1"
        MOZ_ENABLE_CAIRO_FT=1
        CAIRO_FT_CFLAGS="$FT2_CFLAGS"
    fi
    case "$MOZ_WIDGET_TOOLKIT" in
      qt)
        QT_SURFACE_FEATURE="#define CAIRO_HAS_QT_SURFACE 1"
        ;;
      cocoa | uikit)
        QUARTZ_SURFACE_FEATURE="#define CAIRO_HAS_QUARTZ_SURFACE 1"
        QUARTZ_IMAGE_SURFACE_FEATURE="#define CAIRO_HAS_QUARTZ_IMAGE_SURFACE 1"
        QUARTZ_FONT_FEATURE="#define CAIRO_HAS_QUARTZ_FONT 1"
        ;;
      windows)
        WIN32_SURFACE_FEATURE="#define CAIRO_HAS_WIN32_SURFACE 1"
        WIN32_FONT_FEATURE="#define CAIRO_HAS_WIN32_FONT 1"
        if test "$MOZ_WINSDK_TARGETVER" -ge "06010000"; then
            WIN32_DWRITE_FONT_FEATURE="#define CAIRO_HAS_DWRITE_FONT 1"
            WIN32_D2D_SURFACE_FEATURE="#define CAIRO_HAS_D2D_SURFACE 1"
            MOZ_ENABLE_D2D_SURFACE=1
            MOZ_ENABLE_DWRITE_FONT=1
        else
            WIN32_DWRITE_FONT_FEATURE=
            WIN32_D2D_SURFACE_FEATURE=
        fi

           ac_safe=`echo "d3d9.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for d3d9.h""... $ac_c" 1>&6
echo "configure:26129: checking for d3d9.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 26134 "configure"
#include "confdefs.h"

#include <d3d9.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:26142: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    MOZ_ENABLE_D3D9_LAYER=1
  else
    echo "$ac_t""no" 1>&6
    
  fi


                if test -n "$WIN32_D2D_SURFACE_FEATURE"; then
             ac_safe=`echo "d3d10.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for d3d10.h""... $ac_c" 1>&6
echo "configure:26166: checking for d3d10.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 26171 "configure"
#include "confdefs.h"

#include <d3d10.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:26179: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    MOZ_ENABLE_D3D10_LAYER=1
  else
    echo "$ac_t""no" 1>&6
    
  fi

        fi
        ;;
      os2)
        OS2_SURFACE_FEATURE="#define CAIRO_HAS_OS2_SURFACE 1"
        FT_FONT_FEATURE="#define CAIRO_HAS_FT_FONT 1"
        MOZ_ENABLE_CAIRO_FT=1
        CAIRO_FT_CFLAGS="-I${MZFTCFGFT2}/include"
        CAIRO_FT_OSLIBS="-L${MZFTCFGFT2}/lib -lmozft -lmzfntcfg"
        CAIRO_FT_LIBS=""
        ;;
    esac
    if test "$USE_FC_FREETYPE"; then
        FC_FONT_FEATURE="#define CAIRO_HAS_FC_FONT 1"
    fi
    
    
    
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    MOZ_CAIRO_LIBS='$(call EXPAND_LIBNAME_PATH,mozcairo,$(DEPTH)/gfx/cairo/cairo/src)'" $CAIRO_FT_LIBS"
    MOZ_CAIRO_OSLIBS='${CAIRO_FT_OSLIBS}'

    if test "$MOZ_X11"; then
        MOZ_CAIRO_OSLIBS="$MOZ_CAIRO_OSLIBS $XLDFLAGS -lXrender"
    fi

    CAIRO_FEATURES_H=gfx/cairo/cairo/src/cairo-features.h
else
    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:26255: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for cairo >= $CAIRO_VERSION""... $ac_c" 1>&6
echo "configure:26299: checking for cairo >= $CAIRO_VERSION" >&5

        if $PKG_CONFIG --exists "cairo >= $CAIRO_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking CAIRO_CFLAGS""... $ac_c" 1>&6
echo "configure:26306: checking CAIRO_CFLAGS" >&5
            CAIRO_CFLAGS=`$PKG_CONFIG --cflags "cairo >= $CAIRO_VERSION"`
            echo "$ac_t""$CAIRO_CFLAGS" 1>&6

            echo $ac_n "checking CAIRO_LIBS""... $ac_c" 1>&6
echo "configure:26311: checking CAIRO_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            CAIRO_LIBS="`$PKG_CONFIG --libs \"cairo >= $CAIRO_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$CAIRO_LIBS" 1>&6
        else
            CAIRO_CFLAGS=""
            CAIRO_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            CAIRO_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "cairo >= $CAIRO_VERSION"`
            echo $CAIRO_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (cairo >= $CAIRO_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

    MOZ_CAIRO_CFLAGS="$CAIRO_CFLAGS"
    MOZ_CAIRO_LIBS="$CAIRO_LIBS"
    succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:26348: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for cairo-tee >= $CAIRO_VERSION""... $ac_c" 1>&6
echo "configure:26392: checking for cairo-tee >= $CAIRO_VERSION" >&5

        if $PKG_CONFIG --exists "cairo-tee >= $CAIRO_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking CAIRO_TEE_CFLAGS""... $ac_c" 1>&6
echo "configure:26399: checking CAIRO_TEE_CFLAGS" >&5
            CAIRO_TEE_CFLAGS=`$PKG_CONFIG --cflags "cairo-tee >= $CAIRO_VERSION"`
            echo "$ac_t""$CAIRO_TEE_CFLAGS" 1>&6

            echo $ac_n "checking CAIRO_TEE_LIBS""... $ac_c" 1>&6
echo "configure:26404: checking CAIRO_TEE_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            CAIRO_TEE_LIBS="`$PKG_CONFIG --libs \"cairo-tee >= $CAIRO_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$CAIRO_TEE_LIBS" 1>&6
        else
            CAIRO_TEE_CFLAGS=""
            CAIRO_TEE_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            CAIRO_TEE_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "cairo-tee >= $CAIRO_VERSION"`
            echo $CAIRO_TEE_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (cairo-tee >= $CAIRO_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

    if test "$MOZ_X11"; then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:26440: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

  if test "$PKG_CONFIG" = "no" ; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for cairo-xlib-xrender >= $CAIRO_VERSION""... $ac_c" 1>&6
echo "configure:26484: checking for cairo-xlib-xrender >= $CAIRO_VERSION" >&5

        if $PKG_CONFIG --exists "cairo-xlib-xrender >= $CAIRO_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking CAIRO_XRENDER_CFLAGS""... $ac_c" 1>&6
echo "configure:26491: checking CAIRO_XRENDER_CFLAGS" >&5
            CAIRO_XRENDER_CFLAGS=`$PKG_CONFIG --cflags "cairo-xlib-xrender >= $CAIRO_VERSION"`
            echo "$ac_t""$CAIRO_XRENDER_CFLAGS" 1>&6

            echo $ac_n "checking CAIRO_XRENDER_LIBS""... $ac_c" 1>&6
echo "configure:26496: checking CAIRO_XRENDER_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            CAIRO_XRENDER_LIBS="`$PKG_CONFIG --libs \"cairo-xlib-xrender >= $CAIRO_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$CAIRO_XRENDER_LIBS" 1>&6
        else
            CAIRO_XRENDER_CFLAGS=""
            CAIRO_XRENDER_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            CAIRO_XRENDER_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "cairo-xlib-xrender >= $CAIRO_VERSION"`
            echo $CAIRO_XRENDER_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (cairo-xlib-xrender >= $CAIRO_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
     fi
  fi

        MOZ_CAIRO_LIBS="$MOZ_CAIRO_LIBS $XLDFLAGS $CAIRO_XRENDER_LIBS"
        MOZ_CAIRO_OSLIBS="$MOZ_CAIRO_LIBS"
        MOZ_CAIRO_CFLAGS="$MOZ_CAIRO_CFLAGS $CAIRO_XRENDER_CFLAGS"
    fi
fi








QCMS_LIBS='$(DEPTH)/gfx/qcms/$(LIB_PREFIX)mozqcms.$(LIB_SUFFIX)'


MOZ_HARFBUZZ_LIBS='$(DEPTH)/gfx/harfbuzz/src/$(LIB_PREFIX)mozharfbuzz.$(LIB_SUFFIX)'


if test "$MOZ_GRAPHITE"; then
  MOZ_GRAPHITE_LIBS='$(DEPTH)/gfx/graphite2/src/$(LIB_PREFIX)mozgraphite2.$(LIB_SUFFIX)'
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_GRAPHITE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_GRAPHITE 1
EOF

else
  MOZ_GRAPHITE_LIBS=
fi



MOZ_OTS_LIBS='$(DEPTH)/gfx/ots/src/$(LIB_PREFIX)mozots.$(LIB_SUFFIX)'


if test "$MOZ_ENABLE_SKIA"; then
  MOZ_SKIA_LIBS='$(DEPTH)/gfx/skia/$(LIB_PREFIX)skia.$(LIB_SUFFIX)'
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_SKIA ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_SKIA 1
EOF

else
  MOZ_SKIA_LIBS=
fi



# Check whether --enable-xul or --disable-xul was given.
if test "${enable_xul+set}" = set; then
  enableval="$enable_xul"
  if test "$enableval" = "no"; then
    MOZ_XUL= 
  elif test "$enableval" = "yes"; then
    :
  else
    { echo "configure: error: Option, xul, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test "$MOZ_XUL"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_XUL ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_XUL 1
EOF

else
    MOZ_EXTENSIONS=`echo $MOZ_EXTENSIONS | sed -e 's/inspector//' -e 's/venkman//' -e 's/irc//' -e 's/tasks//'`
fi



# Check whether --enable-profilelocking or --disable-profilelocking was given.
if test "${enable_profilelocking+set}" = set; then
  enableval="$enable_profilelocking"
  if test "$enableval" = "no"; then
    MOZ_PROFILELOCKING=
  elif test "$enableval" = "yes"; then
    MOZ_PROFILELOCKING=1 
  else
    { echo "configure: error: Option, profilelocking, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi

if test "$MOZ_PROFILELOCKING"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PROFILELOCKING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PROFILELOCKING 1
EOF

fi


# Check whether --enable-necko-protocols or --disable-necko-protocols was given.
if test "${enable_necko_protocols+set}" = set; then
  enableval="$enable_necko_protocols"
   for option in `echo $enableval | sed 's/,/ /g'`; do
    if test "$option" = "yes" -o "$option" = "all"; then
        NECKO_PROTOCOLS="$NECKO_PROTOCOLS $NECKO_PROTOCOLS_DEFAULT"
    elif test "$option" = "no" -o "$option" = "none"; then
        NECKO_PROTOCOLS=""
    elif test "$option" = "default"; then
        NECKO_PROTOCOLS="$NECKO_PROTOCOLS $NECKO_PROTOCOLS_DEFAULT"
    elif test `echo "$option" | grep -c \^-` != 0; then
        option=`echo $option | sed 's/^-//'`
        NECKO_PROTOCOLS=`echo "$NECKO_PROTOCOLS" | sed "s/ ${option}//"`
    else
        NECKO_PROTOCOLS="$NECKO_PROTOCOLS $option"
    fi
done
else
  NECKO_PROTOCOLS="$NECKO_PROTOCOLS_DEFAULT"
fi

NECKO_PROTOCOLS=`${PERL} ${srcdir}/build/unix/uniq.pl ${NECKO_PROTOCOLS}`

for p in $NECKO_PROTOCOLS; do
    cat >> confdefs.pytmp <<EOF
    (''' NECKO_PROTOCOL_$p ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define NECKO_PROTOCOL_$p 1
EOF

    _NON_GLOBAL_ACDEFINES="$_NON_GLOBAL_ACDEFINES NECKO_PROTOCOL_$p"
done

# Check whether --enable-necko-wifi or --disable-necko-wifi was given.
if test "${enable_necko_wifi+set}" = set; then
  enableval="$enable_necko_wifi"
  if test "$enableval" = "no"; then
    NECKO_WIFI=
  elif test "$enableval" = "yes"; then
    NECKO_WIFI=1
  else
    { echo "configure: error: Option, necko-wifi, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test "$OS_ARCH" = "OS2"; then
    NECKO_WIFI=
fi
if test "$NECKO_WIFI" -a \
        "$OS_ARCH" != "Linux" -a \
        "$OS_ARCH" != "Darwin" -a \
        "$OS_ARCH" != "SunOS" -a \
        "$OS_ARCH" != "WINNT"; then
  { echo "configure: error: Necko WiFi scanning not supported on your platform, use --disable-necko-wifi" 1>&2; exit 1; }
fi

if test "$NECKO_WIFI"; then
  cat >> confdefs.pytmp <<\EOF
    (''' NECKO_WIFI ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NECKO_WIFI 1
EOF

  _NON_GLOBAL_ACDEFINES="$_NON_GLOBAL_ACDEFINES NECKO_WIFI"
fi


# Check whether --enable-cookies or --disable-cookies was given.
if test "${enable_cookies+set}" = set; then
  enableval="$enable_cookies"
  if test "$enableval" = "no"; then
    NECKO_COOKIES=
  elif test "$enableval" = "yes"; then
    NECKO_COOKIES=1
  else
    { echo "configure: error: Option, cookies, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test "$NECKO_COOKIES"; then
    cat >> confdefs.pytmp <<\EOF
    (''' NECKO_COOKIES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NECKO_COOKIES 1
EOF

    _NON_GLOBAL_ACDEFINES="$_NON_GLOBAL_ACDEFINES NECKO_COOKIES"
fi

# Check whether --enable-ctypes or --disable-ctypes was given.
if test "${enable_ctypes+set}" = set; then
  enableval="$enable_ctypes"
  if test "$enableval" = "no"; then
    BUILD_CTYPES=
  elif test "$enableval" = "yes"; then
    BUILD_CTYPES=1
  else
    { echo "configure: error: Option, ctypes, does not take an argument ($enableval)." 1>&2; exit 1; }
  fi
fi


if test "$BUILD_CTYPES"; then
    cat >> confdefs.pytmp <<\EOF
    (''' BUILD_CTYPES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define BUILD_CTYPES 1
EOF

fi

if test "$MOZ_PLACES"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PLACES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PLACES 1
EOF

fi


if test -n "$MOZ_SERVICES_AITC"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SERVICES_AITC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SERVICES_AITC 1
EOF

fi


if test -n "$MOZ_SERVICES_COMMON"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SERVICES_COMMON ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SERVICES_COMMON 1
EOF

fi


if test -n "$MOZ_SERVICES_CRYPTO"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SERVICES_CRYPTO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SERVICES_CRYPTO 1
EOF

fi


if test -n "$MOZ_SERVICES_HEALTHREPORT"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SERVICES_HEALTHREPORT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SERVICES_HEALTHREPORT 1
EOF

fi


if test -n "$MOZ_SERVICES_METRICS"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SERVICES_METRICS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SERVICES_METRICS 1
EOF

fi


if test -n "$MOZ_SERVICES_NOTIFICATIONS"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SERVICES_NOTIFICATIONS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SERVICES_NOTIFICATIONS 1
EOF

fi


if test -n "$MOZ_SERVICES_SYNC"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SERVICES_SYNC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SERVICES_SYNC 1
EOF

fi

if test "$MOZ_DEBUG" -o "$NS_TRACE_MALLOC" -o "$MOZ_DMD"; then
    MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS=
fi

if test "$MOZ_APP_COMPONENT_INCLUDE"; then
  cat >> confdefs.pytmp <<EOF
    (''' MOZ_APP_COMPONENT_INCLUDE ''', r''' "$MOZ_APP_COMPONENT_INCLUDE" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_APP_COMPONENT_INCLUDE "$MOZ_APP_COMPONENT_INCLUDE"
EOF

fi

if test "$MOZ_APP_COMPONENT_MODULES"; then
  cat >> confdefs.pytmp <<EOF
    (''' MOZ_APP_COMPONENT_MODULES ''', r''' $MOZ_APP_COMPONENT_MODULES ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_APP_COMPONENT_MODULES $MOZ_APP_COMPONENT_MODULES
EOF

fi















































































































if test -n "$MOZ_PER_WINDOW_PRIVATE_BROWSING" ; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PER_WINDOW_PRIVATE_BROWSING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PER_WINDOW_PRIVATE_BROWSING 1
EOF

fi

# Check whether --with-macbundlename-prefix or --without-macbundlename-prefix was given.
if test "${with_macbundlename_prefix+set}" = set; then
  withval="$with_macbundlename_prefix"
   MOZ_MACBUNDLE_NAME_PREFIX="$withval"
fi


MOZ_MACBUNDLE_NAME=`echo $MOZ_APP_DISPLAYNAME | tr -d ' '`
if test "$MOZ_MACBUNDLE_NAME_PREFIX"; then
  MOZ_MACBUNDLE_NAME="${MOZ_MACBUNDLE_NAME_PREFIX}${MOZ_MACBUNDLE_NAME}"
fi

if test "$MOZ_DEBUG"; then
  MOZ_MACBUNDLE_NAME=${MOZ_MACBUNDLE_NAME}Debug.app
else
  MOZ_MACBUNDLE_NAME=${MOZ_MACBUNDLE_NAME}.app
fi


MOZ_MACBUNDLE_ID=`echo $MOZ_APP_DISPLAYNAME | tr 'A-Z' 'a-z'`
MOZ_MACBUNDLE_ID=${MOZ_DISTRIBUTION_ID}.${MOZ_MACBUNDLE_ID}
if test "$MOZ_DEBUG"; then
  MOZ_MACBUNDLE_ID=${MOZ_MACBUNDLE_ID}debug
fi

cat >> confdefs.pytmp <<EOF
    (''' MOZ_MACBUNDLE_ID ''', r''' $MOZ_MACBUNDLE_ID ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_MACBUNDLE_ID $MOZ_MACBUNDLE_ID
EOF



# The following variables are available to branding and application
# configuration ($BRANDING/configure.sh and $APPLICATION/confvars.sh):
# - MOZ_APP_VENDOR: Used for application.ini's "Vendor" field, which also
# impacts profile location and user-visible fields.
# - MOZ_APP_BASENAME: Typically stays consistent for multiple branded
# versions of a given application (e.g. Aurora and Firefox both use
# "Firefox"), but may vary for full rebrandings (e.g. Iceweasel). Used
# for application.ini's "Name" field, which controls profile location in
# the absence of a "Profile" field (see below), and various system
# integration hooks (Unix remoting, Windows MessageWindow name, etc.)
# - MOZ_APP_DISPLAYNAME: Used in user-visible fields (DLL properties,
# Mac Bundle name, Updater, Installer), it is typically used for nightly
# builds (e.g. Aurora for Firefox).
# - MOZ_APP_VERSION: Defines the application version number.
# - MOZ_APP_NAME: Used for e.g. the binary program file name. If not set,
# defaults to a lowercase form of MOZ_APP_BASENAME.
# - MOZ_APP_PROFILE: When set, used for application.ini's
# "Profile" field, which controls profile location.
# - MOZ_APP_ID: When set, used for application.ini's "ID" field, and
# crash reporter server url.
# - MOZ_PROFILE_MIGRATOR: When set, enables profile migrator.
# - MOZ_EXTENSION_MANAGER: When set, enabled extension manager.

if test -z "$MOZ_APP_NAME"; then
   MOZ_APP_NAME=`echo $MOZ_APP_BASENAME | tr A-Z a-z`
fi

# For extensions and langpacks, we require a max version that is compatible
# across security releases. MOZ_APP_MAXVERSION is our method for doing that.
# 10.0a1 and 10.0a2 aren't affected
# 10.0 becomes 10.0.*
# 10.0.1 becomes 10.0.*
IS_ALPHA=`echo $MOZ_APP_VERSION | grep a`
if test -z "$IS_ALPHA"; then
  
  MOZ_APP_MAXVERSION=`echo $MOZ_APP_VERSION | sed "s|\(^[0-9]*.[0-9]*\).*|\1|"`.*
  
else
  MOZ_APP_MAXVERSION=$MOZ_APP_VERSION
fi

MOZ_B2G_VERSION=${MOZ_B2G_VERSION:-"1.0.0"}
cat >> confdefs.pytmp <<EOF
    (''' MOZ_B2G_VERSION ''', r''' "$MOZ_B2G_VERSION" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_B2G_VERSION "$MOZ_B2G_VERSION"
EOF

cat >> confdefs.pytmp <<EOF
    (''' MOZ_B2G_OS_NAME ''', r''' "$MOZ_B2G_OS_NAME" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_B2G_OS_NAME "$MOZ_B2G_OS_NAME"
EOF












cat >> confdefs.pytmp <<EOF
    (''' MOZ_APP_UA_NAME ''', r''' "$MOZ_APP_UA_NAME" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_APP_UA_NAME "$MOZ_APP_UA_NAME"
EOF


cat >> confdefs.pytmp <<EOF
    (''' MOZ_APP_UA_VERSION ''', r''' "$MOZ_APP_VERSION" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_APP_UA_VERSION "$MOZ_APP_VERSION"
EOF



cat >> confdefs.pytmp <<EOF
    (''' FIREFOX_VERSION ''', r''' $FIREFOX_VERSION ''')
EOF
cat >> confdefs.h <<EOF
#define FIREFOX_VERSION $FIREFOX_VERSION
EOF



if test -n "$MOZ_UA_OS_AGNOSTIC"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_UA_OS_AGNOSTIC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_UA_OS_AGNOSTIC 1
EOF

fi
cat >> confdefs.pytmp <<EOF
    (''' MOZ_UA_BUILDID ''', r''' "$MOZ_UA_BUILDID" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_UA_BUILDID "$MOZ_UA_BUILDID"
EOF



# We can't use the static application.ini data when building against
# a libxul SDK.
if test -n "$LIBXUL_SDK"; then
    MOZ_APP_STATIC_INI=
fi






cat >> confdefs.pytmp <<EOF
    (''' MOZ_TELEMETRY_DISPLAY_REV ''', r''' 2 ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_TELEMETRY_DISPLAY_REV 2
EOF



if test "$MOZ_TELEMETRY_REPORTING"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TELEMETRY_REPORTING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TELEMETRY_REPORTING 1
EOF


    # Enable Telemetry by default for nightly and aurora channels
    if test "$MOZ_UPDATE_CHANNEL" = "nightly" -o \
        "$MOZ_UPDATE_CHANNEL" = "aurora"; then
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TELEMETRY_ON_BY_DEFAULT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TELEMETRY_ON_BY_DEFAULT 1
EOF

    fi
fi







CFLAGS=`echo \
	$_WARNINGS_CFLAGS \
	$CFLAGS`

CXXFLAGS=`echo \
	$_WARNINGS_CXXFLAGS \
	$CXXFLAGS`

COMPILE_CFLAGS=`echo \
    $_DEFINES_CFLAGS \
	$_DEPEND_CFLAGS \
    $COMPILE_CFLAGS`

COMPILE_CXXFLAGS=`echo \
    $_DEFINES_CXXFLAGS \
	$_DEPEND_CFLAGS \
    $COMPILE_CXXFLAGS`
























OS_CFLAGS="$CFLAGS"
OS_CXXFLAGS="$CXXFLAGS"
OS_CPPFLAGS="$CPPFLAGS"
OS_COMPILE_CFLAGS="$COMPILE_CFLAGS"
OS_COMPILE_CXXFLAGS="$COMPILE_CXXFLAGS"
OS_LDFLAGS="$LDFLAGS"
OS_LIBS="$LIBS"



















































cat >> confdefs.pytmp <<EOF
    (''' MOZ_DLL_SUFFIX ''', r''' "$DLL_SUFFIX" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_DLL_SUFFIX "$DLL_SUFFIX"
EOF


















































echo $ac_n "checking for posix_fallocate""... $ac_c" 1>&6
echo "configure:27323: checking for posix_fallocate" >&5
cat > conftest.$ac_ext <<EOF
#line 27325 "configure"
#include "confdefs.h"
#define _XOPEN_SOURCE 600
  #include <fcntl.h>
int main() {
posix_fallocate(0, 0, 0);
; return 0; }
EOF
if { (eval echo configure:27333: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv___posix_fallocate=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv___posix_fallocate=false
fi
rm -f conftest*

if test "$ac_cv___posix_fallocate" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_POSIX_FALLOCATE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_POSIX_FALLOCATE 1
EOF

  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test "$COMPILE_ENVIRONMENT"; then
if test "$MOZ_X11"; then
    if test "$WITHOUT_X11"; then
        { echo "configure: error: --without-x specified and MOZ_X11 still defined" 1>&2; exit 1; }
    fi
                _SAVE_CFLAGS=$CFLAGS
    CFLAGS="$CFLAGS $XCFLAGS"
    cat > conftest.$ac_ext <<EOF
#line 27365 "configure"
#include "confdefs.h"

        #include <stdio.h>
        #include <stdlib.h>
        #include <X11/Xlib.h>
        #include <X11/Intrinsic.h>
        #include <X11/extensions/XShm.h>
    
int main() {

        Display *dpy = 0;
        if ((dpy = XOpenDisplay(NULL)) == NULL) {
            fprintf(stderr, ": can't open %s\n", XDisplayName(NULL));
            exit(1);
        }
    
; return 0; }
EOF
if { (eval echo configure:27384: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
   { echo "configure: error: Could not compile basic X program." 1>&2; exit 1; } 
fi
rm -f conftest*
    CFLAGS="$_SAVE_CFLAGS"

    if test -n "$MISSING_X"; then
        { echo "configure: error:  Could not find the following X libraries: $MISSING_X " 1>&2; exit 1; };
    fi

fi # MOZ_X11

if test "$MOZ_GL_DEFAULT_PROVIDER" = "GLX"; then
       ac_safe=`echo "GL/glx.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for GL/glx.h""... $ac_c" 1>&6
echo "configure:27404: checking for GL/glx.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 27409 "configure"
#include "confdefs.h"

#include <GL/glx.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:27417: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    :
  else
    echo "$ac_t""no" 1>&6
    
  fi

    if test "$ac_cv_header_GL_glx_h" != "yes"; then
        { echo "configure: error: Can't find header GL/glx.h for WebGL (install mesa-common-dev (Ubuntu), mesa-libGL-devel (Fedora), or Mesa-devel (openSUSE))" 1>&2; exit 1; }
    fi
fi # MOZ_GL_DEFAULT_PROVIDER=GLX
fi # COMPILE_ENVIRONMENT


if test "$OS_ARCH" = "Darwin"; then
  cat >> confdefs.pytmp <<\EOF
    (''' XP_UNIX ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define XP_UNIX 1
EOF

elif test "$OS_ARCH" != "WINNT" -a "$OS_ARCH" != "OS2"; then
  cat >> confdefs.pytmp <<\EOF
    (''' XP_UNIX ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define XP_UNIX 1
EOF

fi

if test "$MOZ_DEBUG"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_REFLOW_PERF ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_REFLOW_PERF 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_REFLOW_PERF_DSP ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_REFLOW_PERF_DSP 1
EOF

fi

if test "$ACCESSIBILITY" -a "$MOZ_ENABLE_GTK2" ; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ACCESSIBILITY_ATK ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ACCESSIBILITY_ATK 1
EOF

    ATK_FULL_VERSION=`$PKG_CONFIG --modversion atk`
    ATK_MAJOR_VERSION=`echo ${ATK_FULL_VERSION} | $AWK -F\. '{ print $1 }'`
    ATK_MINOR_VERSION=`echo ${ATK_FULL_VERSION} | $AWK -F\. '{ print $2 }'`
    ATK_REV_VERSION=`echo ${ATK_FULL_VERSION} | $AWK -F\. '{ print $3 }'`
    cat >> confdefs.pytmp <<EOF
    (''' ATK_MAJOR_VERSION ''', r''' $ATK_MAJOR_VERSION ''')
EOF
cat >> confdefs.h <<EOF
#define ATK_MAJOR_VERSION $ATK_MAJOR_VERSION
EOF

    cat >> confdefs.pytmp <<EOF
    (''' ATK_MINOR_VERSION ''', r''' $ATK_MINOR_VERSION ''')
EOF
cat >> confdefs.h <<EOF
#define ATK_MINOR_VERSION $ATK_MINOR_VERSION
EOF

    cat >> confdefs.pytmp <<EOF
    (''' ATK_REV_VERSION ''', r''' $ATK_REV_VERSION ''')
EOF
cat >> confdefs.h <<EOF
#define ATK_REV_VERSION $ATK_REV_VERSION
EOF

fi






_NON_GLOBAL_ACDEFINES="$_NON_GLOBAL_ACDEFINES
CPP_THROW_NEW
HAVE_CPP_2BYTE_WCHAR_T
HAVE_CPP_AMBIGUITY_RESOLVING_USING
HAVE_CPP_CHAR16_T
HAVE_CPP_DYNAMIC_CAST_TO_VOID_PTR
HAVE_CPP_PARTIAL_SPECIALIZATION
HAVE_CPP_TROUBLE_COMPARING_TO_ZERO
NEED_CPP_UNUSED_IMPLEMENTATIONS
NEW_H
HAVE_GETPAGESIZE
HAVE_ICONV
HAVE_ICONV_WITH_CONST_INPUT
HAVE_MBRTOWC
HAVE_WCRTOMB
HAVE_STATVFS64
HAVE_STATVFS
HAVE_STATFS64
HAVE_STATFS
HAVE_SYS_STATVFS_H
HAVE_SYS_STATFS_H
HAVE_SYS_VFS_H
HAVE_SYS_MOUNT_H
"



# Hack around an Apple bug that affects the egrep that comes with OS X 10.7.
# "env ARCHPREFERENCE=i386,x86_64 arch egrep" first tries to use the 32-bit
# Intel part of the egrep fat binary, even on 64-bit systems, and falls back on
# the 64-bit part if it's not a fat binary, as can happen with MacPorts. We
# (apparently) only need this hack when egrep's "pattern" is particularly long
# (as in the following code) and the first egrep on our $PATH is Apple's.  See
# bug 655339.
case "$host" in
*-apple-darwin11*)
    FIXED_EGREP="env ARCHPREFERENCE=i386,x86_64 arch egrep"
    ;;
*)
    FIXED_EGREP="egrep"
    ;;
esac

. ${srcdir}/allmakefiles.sh

echo $MAKEFILES > unallmakefiles

WIN_TOP_SRC=
encoding=utf-8
case "$host_os" in
mingw*)
    WIN_TOP_SRC=`cd $srcdir; pwd -W`
    encoding=mbcs
    ;;
esac


top_srcdir=$srcdir


trap '' 1 2 15
cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, don't put newlines in cache variables' values.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  case `(ac_space=' '; set | grep ac_space) 2>&1` in
  *ac_space=\ *)
    # `set' does not quote correctly, so add quotes (double-quote substitution
    # turns \\\\ into \\, and sed turns \\ into \).
    sed -n \
      -e "s/'/'\\\\''/g" \
      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
    ;;
  *)
    # `set' quotes correctly as required by POSIX, so do not add quotes.
    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
    ;;
  esac >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache


test "x$prefix" = xNONE && prefix=$ac_default_prefix
# Let make expand exec_prefix.
test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15

: ${CONFIG_STATUS=./config.status}

echo creating $CONFIG_STATUS

extra_python_path=${COMM_BUILD:+"'mozilla', "}

cat > $CONFIG_STATUS <<EOF
#!${PYTHON}
# coding=$encoding

import os
topsrcdir = '''${WIN_TOP_SRC:-$srcdir}'''
if not os.path.isabs(topsrcdir):
    topsrcdir = os.path.normpath(os.path.join(os.path.dirname(__file__), topsrcdir))

topobjdir = os.path.dirname(__file__)

defines = [(name[1:-1], value[1:-1]) for name, value in [
EOF

sed 's/$/,/' confdefs.pytmp >> $CONFIG_STATUS
rm confdefs.pytmp confdefs.h

cat >> $CONFIG_STATUS <<\EOF
] ]

substs = [(name[1:-1], value[1:-1]) for name, value in [
EOF

sed 's/$/,/' >> $CONFIG_STATUS <<EOF
    (''' SHELL ''', r''' $SHELL ''')
    (''' CFLAGS ''', r''' $CFLAGS ''')
    (''' CPPFLAGS ''', r''' $CPPFLAGS ''')
    (''' CXXFLAGS ''', r''' $CXXFLAGS ''')
    (''' FFLAGS ''', r''' $FFLAGS ''')
    (''' DEFS ''', r''' $DEFS ''')
    (''' LDFLAGS ''', r''' $LDFLAGS ''')
    (''' LIBS ''', r''' $LIBS ''')
    (''' exec_prefix ''', r''' $exec_prefix ''')
    (''' prefix ''', r''' $prefix ''')
    (''' program_transform_name ''', r''' $program_transform_name ''')
    (''' bindir ''', r''' $bindir ''')
    (''' sbindir ''', r''' $sbindir ''')
    (''' libexecdir ''', r''' $libexecdir ''')
    (''' datadir ''', r''' $datadir ''')
    (''' sysconfdir ''', r''' $sysconfdir ''')
    (''' sharedstatedir ''', r''' $sharedstatedir ''')
    (''' localstatedir ''', r''' $localstatedir ''')
    (''' libdir ''', r''' $libdir ''')
    (''' includedir ''', r''' $includedir ''')
    (''' oldincludedir ''', r''' $oldincludedir ''')
    (''' infodir ''', r''' $infodir ''')
    (''' mandir ''', r''' $mandir ''')
    (''' host ''', r''' $host ''')
    (''' host_alias ''', r''' $host_alias ''')
    (''' host_cpu ''', r''' $host_cpu ''')
    (''' host_vendor ''', r''' $host_vendor ''')
    (''' host_os ''', r''' $host_os ''')
    (''' target ''', r''' $target ''')
    (''' target_alias ''', r''' $target_alias ''')
    (''' target_cpu ''', r''' $target_cpu ''')
    (''' target_vendor ''', r''' $target_vendor ''')
    (''' target_os ''', r''' $target_os ''')
    (''' build ''', r''' $build ''')
    (''' build_alias ''', r''' $build_alias ''')
    (''' build_cpu ''', r''' $build_cpu ''')
    (''' build_vendor ''', r''' $build_vendor ''')
    (''' build_os ''', r''' $build_os ''')
    (''' MOZ_DEB_TIMESTAMP ''', r''' $MOZ_DEB_TIMESTAMP ''')
    (''' AWK ''', r''' $AWK ''')
    (''' PYTHON ''', r''' $PYTHON ''')
    (''' CC ''', r''' $CC ''')
    (''' CXX ''', r''' $CXX ''')
    (''' COMPILE_ENVIRONMENT ''', r''' $COMPILE_ENVIRONMENT ''')
    (''' L10NBASEDIR ''', r''' $L10NBASEDIR ''')
    (''' PERL ''', r''' $PERL ''')
    (''' GAIADIR ''', r''' $GAIADIR ''')
    (''' ANDROID_VERSION ''', r''' $ANDROID_VERSION ''')
    (''' ANDROID_NDK ''', r''' $ANDROID_NDK ''')
    (''' ANDROID_TOOLCHAIN ''', r''' $ANDROID_TOOLCHAIN ''')
    (''' ANDROID_PLATFORM ''', r''' $ANDROID_PLATFORM ''')
    (''' OBJCOPY ''', r''' $OBJCOPY ''')
    (''' ANDROID_SOURCE ''', r''' $ANDROID_SOURCE ''')
    (''' ANDROID_PACKAGE_NAME ''', r''' $ANDROID_PACKAGE_NAME ''')
    (''' HOST_CC ''', r''' $HOST_CC ''')
    (''' HOST_CXX ''', r''' $HOST_CXX ''')
    (''' HOST_RANLIB ''', r''' $HOST_RANLIB ''')
    (''' HOST_AR ''', r''' $HOST_AR ''')
    (''' RANLIB ''', r''' $RANLIB ''')
    (''' AR ''', r''' $AR ''')
    (''' AS ''', r''' $AS ''')
    (''' LD ''', r''' $LD ''')
    (''' STRIP ''', r''' $STRIP ''')
    (''' WINDRES ''', r''' $WINDRES ''')
    (''' CLANG_CXX ''', r''' $CLANG_CXX ''')
    (''' CRTDLLVERSION ''', r''' $CRTDLLVERSION ''')
    (''' CRTEXPDLLVERSION ''', r''' $CRTEXPDLLVERSION ''')
    (''' MIDL ''', r''' $MIDL ''')
    (''' MAKEPRI ''', r''' $MAKEPRI ''')
    (''' CPP ''', r''' $CPP ''')
    (''' CXXCPP ''', r''' $CXXCPP ''')
    (''' MIDL_FLAGS ''', r''' $MIDL_FLAGS ''')
    (''' _MSC_VER ''', r''' $_MSC_VER ''')
    (''' GNU_AS ''', r''' $GNU_AS ''')
    (''' GNU_LD ''', r''' $GNU_LD ''')
    (''' GNU_CC ''', r''' $GNU_CC ''')
    (''' GNU_CXX ''', r''' $GNU_CXX ''')
    (''' INTEL_CC ''', r''' $INTEL_CC ''')
    (''' INTEL_CXX ''', r''' $INTEL_CXX ''')
    (''' STL_FLAGS ''', r''' $STL_FLAGS ''')
    (''' WRAP_STL_INCLUDES ''', r''' $WRAP_STL_INCLUDES ''')
    (''' MOZ_MSVC_STL_WRAP__Throw ''', r''' $MOZ_MSVC_STL_WRAP__Throw ''')
    (''' MOZ_MSVC_STL_WRAP__RAISE ''', r''' $MOZ_MSVC_STL_WRAP__RAISE ''')
    (''' INSTALL_PROGRAM ''', r''' $INSTALL_PROGRAM ''')
    (''' INSTALL_SCRIPT ''', r''' $INSTALL_SCRIPT ''')
    (''' INSTALL_DATA ''', r''' $INSTALL_DATA ''')
    (''' LN_S ''', r''' $LN_S ''')
    (''' MOZ_SYSTEM_PLY ''', r''' $MOZ_SYSTEM_PLY ''')
    (''' NSINSTALL_BIN ''', r''' $NSINSTALL_BIN ''')
    (''' DOXYGEN ''', r''' $DOXYGEN ''')
    (''' AUTOCONF ''', r''' $AUTOCONF ''')
    (''' UNZIP ''', r''' $UNZIP ''')
    (''' ZIP ''', r''' $ZIP ''')
    (''' XARGS ''', r''' $XARGS ''')
    (''' RPMBUILD ''', r''' $RPMBUILD ''')
    (''' PBBUILD_BIN ''', r''' $PBBUILD_BIN ''')
    (''' SDP ''', r''' $SDP ''')
    (''' GCC_VERSION ''', r''' $GCC_VERSION ''')
    (''' UNIVERSAL_BINARY ''', r''' $UNIVERSAL_BINARY ''')
    (''' MOZ_CAN_RUN_PROGRAMS ''', r''' $MOZ_CAN_RUN_PROGRAMS ''')
    (''' MACOSX_DEPLOYMENT_TARGET ''', r''' $MACOSX_DEPLOYMENT_TARGET ''')
    (''' MACOS_SDK_DIR ''', r''' $MACOS_SDK_DIR ''')
    (''' NEXT_ROOT ''', r''' $NEXT_ROOT ''')
    (''' GMAKE ''', r''' $GMAKE ''')
    (''' X_CFLAGS ''', r''' $X_CFLAGS ''')
    (''' X_PRE_LIBS ''', r''' $X_PRE_LIBS ''')
    (''' X_LIBS ''', r''' $X_LIBS ''')
    (''' X_EXTRA_LIBS ''', r''' $X_EXTRA_LIBS ''')
    (''' SOLARIS_SUNPRO_CC ''', r''' $SOLARIS_SUNPRO_CC ''')
    (''' SOLARIS_SUNPRO_CXX ''', r''' $SOLARIS_SUNPRO_CXX ''')
    (''' MOZ_THUMB2 ''', r''' $MOZ_THUMB2 ''')
    (''' HAVE_ARM_SIMD ''', r''' $HAVE_ARM_SIMD ''')
    (''' HAVE_ARM_NEON ''', r''' $HAVE_ARM_NEON ''')
    (''' ANDROID_CPU_ARCH ''', r''' $ANDROID_CPU_ARCH ''')
    (''' STLPORT_SOURCES ''', r''' $STLPORT_SOURCES ''')
    (''' MOZ_ASAN ''', r''' $MOZ_ASAN ''')
    (''' MOZ_NO_WLZDEFS ''', r''' $MOZ_NO_WLZDEFS ''')
    (''' MOZ_CFLAGS_NSS ''', r''' $MOZ_CFLAGS_NSS ''')
    (''' HAVE_TOOLCHAIN_SUPPORT_MSSSE3 ''', r''' $HAVE_TOOLCHAIN_SUPPORT_MSSSE3 ''')
    (''' HAVE_64BIT_OS ''', r''' $HAVE_64BIT_OS ''')
    (''' MOZ_OS2_HIGH_MEMORY ''', r''' $MOZ_OS2_HIGH_MEMORY ''')
    (''' MOZ_VALGRIND ''', r''' $MOZ_VALGRIND ''')
    (''' MOZ_DMDV ''', r''' $MOZ_DMDV ''')
    (''' AIX_OBJMODEL ''', r''' $AIX_OBJMODEL ''')
    (''' MOZ_LINKER ''', r''' $MOZ_LINKER ''')
    (''' MOZ_ENABLE_SZIP ''', r''' $MOZ_ENABLE_SZIP ''')
    (''' NO_LD_ARCHIVE_FLAGS ''', r''' $NO_LD_ARCHIVE_FLAGS ''')
    (''' LD_PRINT_ICF_SECTIONS ''', r''' $LD_PRINT_ICF_SECTIONS ''')
    (''' WRAP_SYSTEM_INCLUDES ''', r''' $WRAP_SYSTEM_INCLUDES ''')
    (''' VISIBILITY_FLAGS ''', r''' $VISIBILITY_FLAGS ''')
    (''' HAVE_GCC_ALIGN_ARG_POINTER ''', r''' $HAVE_GCC_ALIGN_ARG_POINTER ''')
    (''' HAVE_DTRACE ''', r''' $HAVE_DTRACE ''')
    (''' HAVE_LINUX_PERF_EVENT_H ''', r''' $HAVE_LINUX_PERF_EVENT_H ''')
    (''' LINUX_HEADERS_INCLUDES ''', r''' $LINUX_HEADERS_INCLUDES ''')
    (''' XCFLAGS ''', r''' $XCFLAGS ''')
    (''' XLDFLAGS ''', r''' $XLDFLAGS ''')
    (''' XLIBS ''', r''' $XLIBS ''')
    (''' XEXT_LIBS ''', r''' $XEXT_LIBS ''')
    (''' XT_LIBS ''', r''' $XT_LIBS ''')
    (''' XSS_LIBS ''', r''' $XSS_LIBS ''')
    (''' LIBOBJS ''', r''' $LIBOBJS ''')
    (''' HAVE_CLOCK_MONOTONIC ''', r''' $HAVE_CLOCK_MONOTONIC ''')
    (''' REALTIME_LIBS ''', r''' $REALTIME_LIBS ''')
    (''' LIBXUL_SDK ''', r''' $LIBXUL_SDK ''')
    (''' LIBXUL_DIST ''', r''' $LIBXUL_DIST ''')
    (''' NSPR_CONFIG ''', r''' $NSPR_CONFIG ''')
    (''' NSPR_CFLAGS ''', r''' $NSPR_CFLAGS ''')
    (''' NSPR_LIBS ''', r''' $NSPR_LIBS ''')
    (''' GRE_MILESTONE ''', r''' $GRE_MILESTONE ''')
    (''' PKG_CONFIG ''', r''' $PKG_CONFIG ''')
    (''' MOZ_LIBEVENT_CFLAGS ''', r''' $MOZ_LIBEVENT_CFLAGS ''')
    (''' MOZ_LIBEVENT_LIBS ''', r''' $MOZ_LIBEVENT_LIBS ''')
    (''' MOZ_NATIVE_LIBEVENT ''', r''' $MOZ_NATIVE_LIBEVENT ''')
    (''' NSS_CONFIG ''', r''' $NSS_CONFIG ''')
    (''' NSS_CFLAGS ''', r''' $NSS_CFLAGS ''')
    (''' NSS_LIBS ''', r''' $NSS_LIBS ''')
    (''' YASM ''', r''' $YASM ''')
    (''' MOZ_ZLIB_CFLAGS ''', r''' $MOZ_ZLIB_CFLAGS ''')
    (''' MOZ_ZLIB_LIBS ''', r''' $MOZ_ZLIB_LIBS ''')
    (''' MOZ_NATIVE_ZLIB ''', r''' $MOZ_NATIVE_ZLIB ''')
    (''' MOZ_HUNSPELL_CFLAGS ''', r''' $MOZ_HUNSPELL_CFLAGS ''')
    (''' MOZ_HUNSPELL_LIBS ''', r''' $MOZ_HUNSPELL_LIBS ''')
    (''' MOZ_NATIVE_HUNSPELL ''', r''' $MOZ_NATIVE_HUNSPELL ''')
    (''' MOZ_FFI_CFLAGS ''', r''' $MOZ_FFI_CFLAGS ''')
    (''' MOZ_FFI_LIBS ''', r''' $MOZ_FFI_LIBS ''')
    (''' XULRUNNER_STUB_NAME ''', r''' $XULRUNNER_STUB_NAME ''')
    (''' MOZ_UPDATE_CHANNEL ''', r''' $MOZ_UPDATE_CHANNEL ''')
    (''' MOZ_BUILD_APP ''', r''' $MOZ_BUILD_APP ''')
    (''' MOZ_PHOENIX ''', r''' $MOZ_PHOENIX ''')
    (''' MOZ_XULRUNNER ''', r''' $MOZ_XULRUNNER ''')
    (''' MOZ_B2G ''', r''' $MOZ_B2G ''')
    (''' ANDROID_SDK ''', r''' $ANDROID_SDK ''')
    (''' ANDROID_COMPAT_LIB ''', r''' $ANDROID_COMPAT_LIB ''')
    (''' ANDROID_PLATFORM_TOOLS ''', r''' $ANDROID_PLATFORM_TOOLS ''')
    (''' MOZ_OLD_LINKER ''', r''' $MOZ_OLD_LINKER ''')
    (''' MOZ_PDF_PRINTING ''', r''' $MOZ_PDF_PRINTING ''')
    (''' MOZ_GTK2_CFLAGS ''', r''' $MOZ_GTK2_CFLAGS ''')
    (''' MOZ_GTK2_LIBS ''', r''' $MOZ_GTK2_LIBS ''')
    (''' MOZ_FS_LAYOUT ''', r''' $MOZ_FS_LAYOUT ''')
    (''' MOZ_STARTUP_NOTIFICATION_CFLAGS ''', r''' $MOZ_STARTUP_NOTIFICATION_CFLAGS ''')
    (''' MOZ_STARTUP_NOTIFICATION_LIBS ''', r''' $MOZ_STARTUP_NOTIFICATION_LIBS ''')
    (''' MOZ_ENABLE_STARTUP_NOTIFICATION ''', r''' $MOZ_ENABLE_STARTUP_NOTIFICATION ''')
    (''' MOZ_QT_CFLAGS ''', r''' $MOZ_QT_CFLAGS ''')
    (''' MOZ_QT_LIBS ''', r''' $MOZ_QT_LIBS ''')
    (''' MOZ_QT5_CFLAGS ''', r''' $MOZ_QT5_CFLAGS ''')
    (''' MOZ_QT5_LIBS ''', r''' $MOZ_QT5_LIBS ''')
    (''' HOST_MOC ''', r''' $HOST_MOC ''')
    (''' HOST_RCC ''', r''' $HOST_RCC ''')
    (''' _QMSYSTEM2_CFLAGS ''', r''' $_QMSYSTEM2_CFLAGS ''')
    (''' _QMSYSTEM2_LIBS ''', r''' $_QMSYSTEM2_LIBS ''')
    (''' _QTNETWORK_CFLAGS ''', r''' $_QTNETWORK_CFLAGS ''')
    (''' _QTNETWORK_LIBS ''', r''' $_QTNETWORK_LIBS ''')
    (''' _QTMOBILITY_CFLAGS ''', r''' $_QTMOBILITY_CFLAGS ''')
    (''' _QTMOBILITY_LIBS ''', r''' $_QTMOBILITY_LIBS ''')
    (''' GTK_CONFIG ''', r''' $GTK_CONFIG ''')
    (''' TK_CFLAGS ''', r''' $TK_CFLAGS ''')
    (''' TK_LIBS ''', r''' $TK_LIBS ''')
    (''' MOZ_ENABLE_GTK2 ''', r''' $MOZ_ENABLE_GTK2 ''')
    (''' MOZ_ENABLE_QT ''', r''' $MOZ_ENABLE_QT ''')
    (''' MOZ_ENABLE_QTNETWORK ''', r''' $MOZ_ENABLE_QTNETWORK ''')
    (''' MOZ_ENABLE_QMSYSTEM2 ''', r''' $MOZ_ENABLE_QMSYSTEM2 ''')
    (''' MOZ_ENABLE_QTMOBILITY ''', r''' $MOZ_ENABLE_QTMOBILITY ''')
    (''' MOZ_ENABLE_XREMOTE ''', r''' $MOZ_ENABLE_XREMOTE ''')
    (''' MOZ_WIDGET_GTK ''', r''' $MOZ_WIDGET_GTK ''')
    (''' MOC ''', r''' $MOC ''')
    (''' RCC ''', r''' $RCC ''')
    (''' MOZ_X11 ''', r''' $MOZ_X11 ''')
    (''' MOZ_UI_LOCALE ''', r''' $MOZ_UI_LOCALE ''')
    (''' MOZ_OFFICIAL_BRANDING ''', r''' $MOZ_OFFICIAL_BRANDING ''')
    (''' MOZ_BRANDING_DIRECTORY ''', r''' $MOZ_BRANDING_DIRECTORY ''')
    (''' MOZ_DISTRIBUTION_ID ''', r''' $MOZ_DISTRIBUTION_ID ''')
    (''' MOZ_PANGO ''', r''' $MOZ_PANGO ''')
    (''' _PANGOCHK_CFLAGS ''', r''' $_PANGOCHK_CFLAGS ''')
    (''' _PANGOCHK_LIBS ''', r''' $_PANGOCHK_LIBS ''')
    (''' MOZ_PANGO_CFLAGS ''', r''' $MOZ_PANGO_CFLAGS ''')
    (''' MOZ_PANGO_LIBS ''', r''' $MOZ_PANGO_LIBS ''')
    (''' FT2_CFLAGS ''', r''' $FT2_CFLAGS ''')
    (''' FT2_LIBS ''', r''' $FT2_LIBS ''')
    (''' MOZ_GNOMEVFS_CFLAGS ''', r''' $MOZ_GNOMEVFS_CFLAGS ''')
    (''' MOZ_GNOMEVFS_LIBS ''', r''' $MOZ_GNOMEVFS_LIBS ''')
    (''' MOZ_ENABLE_GNOMEVFS ''', r''' $MOZ_ENABLE_GNOMEVFS ''')
    (''' _GTKCHECK_CFLAGS ''', r''' $_GTKCHECK_CFLAGS ''')
    (''' _GTKCHECK_LIBS ''', r''' $_GTKCHECK_LIBS ''')
    (''' MOZ_GIO_CFLAGS ''', r''' $MOZ_GIO_CFLAGS ''')
    (''' MOZ_GIO_LIBS ''', r''' $MOZ_GIO_LIBS ''')
    (''' MOZ_ENABLE_GIO ''', r''' $MOZ_ENABLE_GIO ''')
    (''' MOZ_GCONF_CFLAGS ''', r''' $MOZ_GCONF_CFLAGS ''')
    (''' MOZ_GCONF_LIBS ''', r''' $MOZ_GCONF_LIBS ''')
    (''' MOZ_ENABLE_GCONF ''', r''' $MOZ_ENABLE_GCONF ''')
    (''' MOZ_LIBPROXY_CFLAGS ''', r''' $MOZ_LIBPROXY_CFLAGS ''')
    (''' MOZ_LIBPROXY_LIBS ''', r''' $MOZ_LIBPROXY_LIBS ''')
    (''' MOZ_ENABLE_LIBPROXY ''', r''' $MOZ_ENABLE_LIBPROXY ''')
    (''' MOZ_ENABLE_GNOME_COMPONENT ''', r''' $MOZ_ENABLE_GNOME_COMPONENT ''')
    (''' MOZ_GNOMEUI_CFLAGS ''', r''' $MOZ_GNOMEUI_CFLAGS ''')
    (''' MOZ_GNOMEUI_LIBS ''', r''' $MOZ_GNOMEUI_LIBS ''')
    (''' MOZ_ENABLE_GNOMEUI ''', r''' $MOZ_ENABLE_GNOMEUI ''')
    (''' MOZ_DBUS_CFLAGS ''', r''' $MOZ_DBUS_CFLAGS ''')
    (''' MOZ_DBUS_LIBS ''', r''' $MOZ_DBUS_LIBS ''')
    (''' MOZ_DBUS_GLIB_CFLAGS ''', r''' $MOZ_DBUS_GLIB_CFLAGS ''')
    (''' MOZ_DBUS_GLIB_LIBS ''', r''' $MOZ_DBUS_GLIB_LIBS ''')
    (''' MOZ_ENABLE_DBUS ''', r''' $MOZ_ENABLE_DBUS ''')
    (''' MOZ_IPDL_TESTS ''', r''' $MOZ_IPDL_TESTS ''')
    (''' MOZ_WEBRTC ''', r''' $MOZ_WEBRTC ''')
    (''' MOZ_WEBRTC_LEAKING_TESTS ''', r''' $MOZ_WEBRTC_LEAKING_TESTS ''')
    (''' MOZ_WEBRTC_SIGNALING ''', r''' $MOZ_WEBRTC_SIGNALING ''')
    (''' MOZ_PEERCONNECTION ''', r''' $MOZ_PEERCONNECTION ''')
    (''' MOZ_WEBRTC_IN_LIBXUL ''', r''' $MOZ_WEBRTC_IN_LIBXUL ''')
    (''' MOZ_SCTP ''', r''' $MOZ_SCTP ''')
    (''' MOZ_SRTP ''', r''' $MOZ_SRTP ''')
    (''' MOZ_SAMPLE_TYPE_S16 ''', r''' $MOZ_SAMPLE_TYPE_S16 ''')
    (''' MOZ_SAMPLE_TYPE_FLOAT32 ''', r''' $MOZ_SAMPLE_TYPE_FLOAT32 ''')
    (''' MOZ_RAW ''', r''' $MOZ_RAW ''')
    (''' MOZ_LIBVPX_CFLAGS ''', r''' $MOZ_LIBVPX_CFLAGS ''')
    (''' MOZ_LIBVPX_LIBS ''', r''' $MOZ_LIBVPX_LIBS ''')
    (''' MOZ_NATIVE_LIBVPX ''', r''' $MOZ_NATIVE_LIBVPX ''')
    (''' MOZ_ALSA_CFLAGS ''', r''' $MOZ_ALSA_CFLAGS ''')
    (''' MOZ_ALSA_LIBS ''', r''' $MOZ_ALSA_LIBS ''')
    (''' MOZ_ALSA ''', r''' $MOZ_ALSA ''')
    (''' MOZ_PULSEAUDIO_CFLAGS ''', r''' $MOZ_PULSEAUDIO_CFLAGS ''')
    (''' MOZ_PULSEAUDIO_LIBS ''', r''' $MOZ_PULSEAUDIO_LIBS ''')
    (''' MOZ_PULSEAUDIO ''', r''' $MOZ_PULSEAUDIO ''')
    (''' GSTREAMER_CFLAGS ''', r''' $GSTREAMER_CFLAGS ''')
    (''' GSTREAMER_LIBS ''', r''' $GSTREAMER_LIBS ''')
    (''' MOZ_GSTREAMER ''', r''' $MOZ_GSTREAMER ''')
    (''' JAVA ''', r''' $JAVA ''')
    (''' JAVAC ''', r''' $JAVAC ''')
    (''' JAR ''', r''' $JAR ''')
    (''' MOZ_GTHREAD_CFLAGS ''', r''' $MOZ_GTHREAD_CFLAGS ''')
    (''' MOZ_GTHREAD_LIBS ''', r''' $MOZ_GTHREAD_LIBS ''')
    (''' LIBJPEG_TURBO_AS ''', r''' $LIBJPEG_TURBO_AS ''')
    (''' MOZ_GIO_COMPONENT ''', r''' $MOZ_GIO_COMPONENT ''')
    (''' MOZ_TREE_FREETYPE ''', r''' $MOZ_TREE_FREETYPE ''')
    (''' CAIRO_FT_CFLAGS ''', r''' $CAIRO_FT_CFLAGS ''')
    (''' MAKENSISU ''', r''' $MAKENSISU ''')
    (''' MOZ_WEBAPP_RUNTIME ''', r''' $MOZ_WEBAPP_RUNTIME ''')
    (''' TAR ''', r''' $TAR ''')
    (''' WGET ''', r''' $WGET ''')
    (''' MOZ_UPDATE_PACKAGING ''', r''' $MOZ_UPDATE_PACKAGING ''')
    (''' MOZ_DISABLE_PARENTAL_CONTROLS ''', r''' $MOZ_DISABLE_PARENTAL_CONTROLS ''')
    (''' SQLITE_CFLAGS ''', r''' $SQLITE_CFLAGS ''')
    (''' SQLITE_LIBS ''', r''' $SQLITE_LIBS ''')
    (''' MOZ_NATIVE_SQLITE ''', r''' $MOZ_NATIVE_SQLITE ''')
    (''' MOZ_SAFE_BROWSING ''', r''' $MOZ_SAFE_BROWSING ''')
    (''' MOZ_URL_CLASSIFIER ''', r''' $MOZ_URL_CLASSIFIER ''')
    (''' MOZ_ZIPWRITER ''', r''' $MOZ_ZIPWRITER ''')
    (''' LIBCONIC_CFLAGS ''', r''' $LIBCONIC_CFLAGS ''')
    (''' LIBCONIC_LIBS ''', r''' $LIBCONIC_LIBS ''')
    (''' MOZ_ENABLE_LIBCONIC ''', r''' $MOZ_ENABLE_LIBCONIC ''')
    (''' XCOMPOSITE_LIBS ''', r''' $XCOMPOSITE_LIBS ''')
    (''' LIBHILDONMIME_CFLAGS ''', r''' $LIBHILDONMIME_CFLAGS ''')
    (''' LIBHILDONMIME_LIBS ''', r''' $LIBHILDONMIME_LIBS ''')
    (''' LIBOSSO_CFLAGS ''', r''' $LIBOSSO_CFLAGS ''')
    (''' LIBOSSO_LIBS ''', r''' $LIBOSSO_LIBS ''')
    (''' LIBHILDONFM_CFLAGS ''', r''' $LIBHILDONFM_CFLAGS ''')
    (''' LIBHILDONFM_LIBS ''', r''' $LIBHILDONFM_LIBS ''')
    (''' LIBCONTENTMANAGER_CFLAGS ''', r''' $LIBCONTENTMANAGER_CFLAGS ''')
    (''' LIBCONTENTMANAGER_LIBS ''', r''' $LIBCONTENTMANAGER_LIBS ''')
    (''' MOZ_ENABLE_CONTENTMANAGER ''', r''' $MOZ_ENABLE_CONTENTMANAGER ''')
    (''' LIBCONTENTACTION_CFLAGS ''', r''' $LIBCONTENTACTION_CFLAGS ''')
    (''' LIBCONTENTACTION_LIBS ''', r''' $LIBCONTENTACTION_LIBS ''')
    (''' MOZ_ENABLE_CONTENTACTION ''', r''' $MOZ_ENABLE_CONTENTACTION ''')
    (''' MOZ_MEEGOTOUCH_CFLAGS ''', r''' $MOZ_MEEGOTOUCH_CFLAGS ''')
    (''' MOZ_MEEGOTOUCH_LIBS ''', r''' $MOZ_MEEGOTOUCH_LIBS ''')
    (''' LIBLOCATION_CFLAGS ''', r''' $LIBLOCATION_CFLAGS ''')
    (''' LIBLOCATION_LIBS ''', r''' $LIBLOCATION_LIBS ''')
    (''' MOZ_MAEMO_LIBLOCATION ''', r''' $MOZ_MAEMO_LIBLOCATION ''')
    (''' LIBMEEGOTOUCHSHARE_CFLAGS ''', r''' $LIBMEEGOTOUCHSHARE_CFLAGS ''')
    (''' LIBMEEGOTOUCHSHARE_LIBS ''', r''' $LIBMEEGOTOUCHSHARE_LIBS ''')
    (''' MOZ_ENABLE_MEEGOTOUCHSHARE ''', r''' $MOZ_ENABLE_MEEGOTOUCHSHARE ''')
    (''' MOZ_PLATFORM_MAEMO_LIBS ''', r''' $MOZ_PLATFORM_MAEMO_LIBS ''')
    (''' MOZ_PLATFORM_MAEMO_CFLAGS ''', r''' $MOZ_PLATFORM_MAEMO_CFLAGS ''')
    (''' MOZ_GL_PROVIDER ''', r''' $MOZ_GL_PROVIDER ''')
    (''' MOZ_GL_DEFAULT_PROVIDER ''', r''' $MOZ_GL_DEFAULT_PROVIDER ''')
    (''' MOZ_THEME_FASTSTRIPE ''', r''' $MOZ_THEME_FASTSTRIPE ''')
    (''' MOZ_GFX_OPTIMIZE_MOBILE ''', r''' $MOZ_GFX_OPTIMIZE_MOBILE ''')
    (''' MOZ_OPTIMIZE ''', r''' $MOZ_OPTIMIZE ''')
    (''' MOZ_FRAMEPTR_FLAGS ''', r''' $MOZ_FRAMEPTR_FLAGS ''')
    (''' MOZ_OPTIMIZE_FLAGS ''', r''' $MOZ_OPTIMIZE_FLAGS ''')
    (''' MOZ_OPTIMIZE_LDFLAGS ''', r''' $MOZ_OPTIMIZE_LDFLAGS ''')
    (''' MOZ_ALLOW_HEAP_EXECUTE_FLAGS ''', r''' $MOZ_ALLOW_HEAP_EXECUTE_FLAGS ''')
    (''' MOZ_OPTIMIZE_SIZE_TWEAK ''', r''' $MOZ_OPTIMIZE_SIZE_TWEAK ''')
    (''' MOZ_PGO_OPTIMIZE_FLAGS ''', r''' $MOZ_PGO_OPTIMIZE_FLAGS ''')
    (''' NS_TRACE_MALLOC ''', r''' $NS_TRACE_MALLOC ''')
    (''' MOZ_DMD ''', r''' $MOZ_DMD ''')
    (''' MOZ_REPLACE_MALLOC ''', r''' $MOZ_REPLACE_MALLOC ''')
    (''' MOZ_REPLACE_MALLOC_LINKAGE ''', r''' $MOZ_REPLACE_MALLOC_LINKAGE ''')
    (''' MOZ_MEMORY ''', r''' $MOZ_MEMORY ''')
    (''' MOZ_JEMALLOC3 ''', r''' $MOZ_JEMALLOC3 ''')
    (''' MOZ_NATIVE_JEMALLOC ''', r''' $MOZ_NATIVE_JEMALLOC ''')
    (''' MOZ_GLUE_LDFLAGS ''', r''' $MOZ_GLUE_LDFLAGS ''')
    (''' MOZ_GLUE_PROGRAM_LDFLAGS ''', r''' $MOZ_GLUE_PROGRAM_LDFLAGS ''')
    (''' WIN32_CRT_LIBS ''', r''' $WIN32_CRT_LIBS ''')
    (''' DLLFLAGS ''', r''' $DLLFLAGS ''')
    (''' CCACHE ''', r''' $CCACHE ''')
    (''' MOZ_USING_CCACHE ''', r''' $MOZ_USING_CCACHE ''')
    (''' DEHYDRA_PATH ''', r''' $DEHYDRA_PATH ''')
    (''' STDCXX_COMPAT ''', r''' $STDCXX_COMPAT ''')
    (''' MOZ_LIBSTDCXX_TARGET_VERSION ''', r''' $MOZ_LIBSTDCXX_TARGET_VERSION ''')
    (''' MOZ_LIBSTDCXX_HOST_VERSION ''', r''' $MOZ_LIBSTDCXX_HOST_VERSION ''')
    (''' MOZ_B2G_RIL ''', r''' $MOZ_B2G_RIL ''')
    (''' MOZ_B2G_FM ''', r''' $MOZ_B2G_FM ''')
    (''' MOZ_B2G_BT ''', r''' $MOZ_B2G_BT ''')
    (''' MOZ_SYS_MSG ''', r''' $MOZ_SYS_MSG ''')
    (''' MOZ_TIME_MANAGER ''', r''' $MOZ_TIME_MANAGER ''')
    (''' MOZ_B2G_CAMERA ''', r''' $MOZ_B2G_CAMERA ''')
    (''' MOZ_B2G_CERTDATA ''', r''' $MOZ_B2G_CERTDATA ''')
    (''' MOZ_PAY ''', r''' $MOZ_PAY ''')
    (''' MOZ_AUDIO_CHANNEL_MANAGER ''', r''' $MOZ_AUDIO_CHANNEL_MANAGER ''')
    (''' MOZ_DEMANGLE_SYMBOLS ''', r''' $MOZ_DEMANGLE_SYMBOLS ''')
    (''' OMNIJAR_NAME ''', r''' $OMNIJAR_NAME ''')
    (''' MOZ_OMNIJAR ''', r''' $MOZ_OMNIJAR ''')
    (''' MOZ_DOC_INPUT_DIRS ''', r''' $MOZ_DOC_INPUT_DIRS ''')
    (''' MOZ_DOC_INCLUDE_DIRS ''', r''' $MOZ_DOC_INCLUDE_DIRS ''')
    (''' MOZ_DOC_OUTPUT_DIR ''', r''' $MOZ_DOC_OUTPUT_DIR ''')
    (''' PROFILE_GEN_CFLAGS ''', r''' $PROFILE_GEN_CFLAGS ''')
    (''' PROFILE_GEN_LDFLAGS ''', r''' $PROFILE_GEN_LDFLAGS ''')
    (''' PROFILE_USE_CFLAGS ''', r''' $PROFILE_USE_CFLAGS ''')
    (''' PROFILE_USE_LDFLAGS ''', r''' $PROFILE_USE_LDFLAGS ''')
    (''' LIBS_DESC_SUFFIX ''', r''' $LIBS_DESC_SUFFIX ''')
    (''' EXPAND_LIBS_LIST_STYLE ''', r''' $EXPAND_LIBS_LIST_STYLE ''')
    (''' EXPAND_LIBS_ORDER_STYLE ''', r''' $EXPAND_LIBS_ORDER_STYLE ''')
    (''' CL_INCLUDES_PREFIX ''', r''' $CL_INCLUDES_PREFIX ''')
    (''' JS_SHARED_LIBRARY ''', r''' $JS_SHARED_LIBRARY ''')
    (''' LIBXUL_LIBS ''', r''' $LIBXUL_LIBS ''')
    (''' GLIB_CFLAGS ''', r''' $GLIB_CFLAGS ''')
    (''' GLIB_LIBS ''', r''' $GLIB_LIBS ''')
    (''' GLIB_GMODULE_LIBS ''', r''' $GLIB_GMODULE_LIBS ''')
    (''' _FONTCONFIG_CFLAGS ''', r''' $_FONTCONFIG_CFLAGS ''')
    (''' _FONTCONFIG_LIBS ''', r''' $_FONTCONFIG_LIBS ''')
    (''' PIXMAN_CFLAGS ''', r''' $PIXMAN_CFLAGS ''')
    (''' PIXMAN_LIBS ''', r''' $PIXMAN_LIBS ''')
    (''' MOZ_PIXMAN_CFLAGS ''', r''' $MOZ_PIXMAN_CFLAGS ''')
    (''' MOZ_PIXMAN_LIBS ''', r''' $MOZ_PIXMAN_LIBS ''')
    (''' MOZ_ENABLE_CAIRO_FT ''', r''' $MOZ_ENABLE_CAIRO_FT ''')
    (''' MOZ_ENABLE_DWRITE_FONT ''', r''' $MOZ_ENABLE_DWRITE_FONT ''')
    (''' MOZ_ENABLE_D2D_SURFACE ''', r''' $MOZ_ENABLE_D2D_SURFACE ''')
    (''' MOZ_ENABLE_D3D9_LAYER ''', r''' $MOZ_ENABLE_D3D9_LAYER ''')
    (''' MOZ_ENABLE_D3D10_LAYER ''', r''' $MOZ_ENABLE_D3D10_LAYER ''')
    (''' PS_SURFACE_FEATURE ''', r''' $PS_SURFACE_FEATURE ''')
    (''' PDF_SURFACE_FEATURE ''', r''' $PDF_SURFACE_FEATURE ''')
    (''' SVG_SURFACE_FEATURE ''', r''' $SVG_SURFACE_FEATURE ''')
    (''' XLIB_SURFACE_FEATURE ''', r''' $XLIB_SURFACE_FEATURE ''')
    (''' XLIB_XRENDER_SURFACE_FEATURE ''', r''' $XLIB_XRENDER_SURFACE_FEATURE ''')
    (''' QUARTZ_SURFACE_FEATURE ''', r''' $QUARTZ_SURFACE_FEATURE ''')
    (''' QUARTZ_IMAGE_SURFACE_FEATURE ''', r''' $QUARTZ_IMAGE_SURFACE_FEATURE ''')
    (''' WIN32_SURFACE_FEATURE ''', r''' $WIN32_SURFACE_FEATURE ''')
    (''' OS2_SURFACE_FEATURE ''', r''' $OS2_SURFACE_FEATURE ''')
    (''' DIRECTFB_SURFACE_FEATURE ''', r''' $DIRECTFB_SURFACE_FEATURE ''')
    (''' FT_FONT_FEATURE ''', r''' $FT_FONT_FEATURE ''')
    (''' FC_FONT_FEATURE ''', r''' $FC_FONT_FEATURE ''')
    (''' WIN32_FONT_FEATURE ''', r''' $WIN32_FONT_FEATURE ''')
    (''' WIN32_DWRITE_FONT_FEATURE ''', r''' $WIN32_DWRITE_FONT_FEATURE ''')
    (''' WIN32_D2D_SURFACE_FEATURE ''', r''' $WIN32_D2D_SURFACE_FEATURE ''')
    (''' QUARTZ_FONT_FEATURE ''', r''' $QUARTZ_FONT_FEATURE ''')
    (''' PNG_FUNCTIONS_FEATURE ''', r''' $PNG_FUNCTIONS_FEATURE ''')
    (''' QT_SURFACE_FEATURE ''', r''' $QT_SURFACE_FEATURE ''')
    (''' TEE_SURFACE_FEATURE ''', r''' $TEE_SURFACE_FEATURE ''')
    (''' CAIRO_CFLAGS ''', r''' $CAIRO_CFLAGS ''')
    (''' CAIRO_LIBS ''', r''' $CAIRO_LIBS ''')
    (''' CAIRO_TEE_CFLAGS ''', r''' $CAIRO_TEE_CFLAGS ''')
    (''' CAIRO_TEE_LIBS ''', r''' $CAIRO_TEE_LIBS ''')
    (''' CAIRO_XRENDER_CFLAGS ''', r''' $CAIRO_XRENDER_CFLAGS ''')
    (''' CAIRO_XRENDER_LIBS ''', r''' $CAIRO_XRENDER_LIBS ''')
    (''' MOZ_TREE_CAIRO ''', r''' $MOZ_TREE_CAIRO ''')
    (''' MOZ_CAIRO_CFLAGS ''', r''' $MOZ_CAIRO_CFLAGS ''')
    (''' MOZ_CAIRO_LIBS ''', r''' $MOZ_CAIRO_LIBS ''')
    (''' MOZ_CAIRO_OSLIBS ''', r''' $MOZ_CAIRO_OSLIBS ''')
    (''' MOZ_TREE_PIXMAN ''', r''' $MOZ_TREE_PIXMAN ''')
    (''' QCMS_LIBS ''', r''' $QCMS_LIBS ''')
    (''' MOZ_HARFBUZZ_LIBS ''', r''' $MOZ_HARFBUZZ_LIBS ''')
    (''' MOZ_GRAPHITE ''', r''' $MOZ_GRAPHITE ''')
    (''' MOZ_GRAPHITE_LIBS ''', r''' $MOZ_GRAPHITE_LIBS ''')
    (''' MOZ_OTS_LIBS ''', r''' $MOZ_OTS_LIBS ''')
    (''' MOZ_ENABLE_SKIA ''', r''' $MOZ_ENABLE_SKIA ''')
    (''' MOZ_SKIA_LIBS ''', r''' $MOZ_SKIA_LIBS ''')
    (''' MOZ_XUL ''', r''' $MOZ_XUL ''')
    (''' NECKO_PROTOCOLS ''', r''' $NECKO_PROTOCOLS ''')
    (''' NECKO_WIFI ''', r''' $NECKO_WIFI ''')
    (''' NECKO_COOKIES ''', r''' $NECKO_COOKIES ''')
    (''' BUILD_CTYPES ''', r''' $BUILD_CTYPES ''')
    (''' MOZ_SERVICES_AITC ''', r''' $MOZ_SERVICES_AITC ''')
    (''' MOZ_SERVICES_COMMON ''', r''' $MOZ_SERVICES_COMMON ''')
    (''' MOZ_SERVICES_CRYPTO ''', r''' $MOZ_SERVICES_CRYPTO ''')
    (''' MOZ_SERVICES_HEALTHREPORT ''', r''' $MOZ_SERVICES_HEALTHREPORT ''')
    (''' MOZ_SERVICES_METRICS ''', r''' $MOZ_SERVICES_METRICS ''')
    (''' MOZ_SERVICES_NOTIFICATIONS ''', r''' $MOZ_SERVICES_NOTIFICATIONS ''')
    (''' MOZ_SERVICES_SYNC ''', r''' $MOZ_SERVICES_SYNC ''')
    (''' AR_FLAGS ''', r''' $AR_FLAGS ''')
    (''' AR_LIST ''', r''' $AR_LIST ''')
    (''' AR_EXTRACT ''', r''' $AR_EXTRACT ''')
    (''' AR_DELETE ''', r''' $AR_DELETE ''')
    (''' ASFLAGS ''', r''' $ASFLAGS ''')
    (''' AS_DASH_C_FLAG ''', r''' $AS_DASH_C_FLAG ''')
    (''' RC ''', r''' $RC ''')
    (''' RCFLAGS ''', r''' $RCFLAGS ''')
    (''' MC ''', r''' $MC ''')
    (''' IMPLIB ''', r''' $IMPLIB ''')
    (''' FILTER ''', r''' $FILTER ''')
    (''' BIN_FLAGS ''', r''' $BIN_FLAGS ''')
    (''' MOZ_WIDGET_TOOLKIT ''', r''' $MOZ_WIDGET_TOOLKIT ''')
    (''' MOZ_UPDATE_XTERM ''', r''' $MOZ_UPDATE_XTERM ''')
    (''' MOZ_PLATFORM_MAEMO ''', r''' $MOZ_PLATFORM_MAEMO ''')
    (''' MOZ_AUTH_EXTENSION ''', r''' $MOZ_AUTH_EXTENSION ''')
    (''' MOZ_PERMISSIONS ''', r''' $MOZ_PERMISSIONS ''')
    (''' MOZ_PREF_EXTENSIONS ''', r''' $MOZ_PREF_EXTENSIONS ''')
    (''' MOZ_JS_LIBS ''', r''' $MOZ_JS_LIBS ''')
    (''' MOZ_PSM ''', r''' $MOZ_PSM ''')
    (''' MOZ_DEBUG ''', r''' $MOZ_DEBUG ''')
    (''' MOZ_DEBUG_SYMBOLS ''', r''' $MOZ_DEBUG_SYMBOLS ''')
    (''' MOZ_DEBUG_ENABLE_DEFS ''', r''' $MOZ_DEBUG_ENABLE_DEFS ''')
    (''' MOZ_DEBUG_DISABLE_DEFS ''', r''' $MOZ_DEBUG_DISABLE_DEFS ''')
    (''' MOZ_DEBUG_FLAGS ''', r''' $MOZ_DEBUG_FLAGS ''')
    (''' MOZ_DEBUG_LDFLAGS ''', r''' $MOZ_DEBUG_LDFLAGS ''')
    (''' WARNINGS_AS_ERRORS ''', r''' $WARNINGS_AS_ERRORS ''')
    (''' MOZ_EXTENSIONS ''', r''' $MOZ_EXTENSIONS ''')
    (''' MOZ_JSDEBUGGER ''', r''' $MOZ_JSDEBUGGER ''')
    (''' MOZ_ENABLE_PROFILER_SPS ''', r''' $MOZ_ENABLE_PROFILER_SPS ''')
    (''' MOZ_JPROF ''', r''' $MOZ_JPROF ''')
    (''' MOZ_SHARK ''', r''' $MOZ_SHARK ''')
    (''' MOZ_CALLGRIND ''', r''' $MOZ_CALLGRIND ''')
    (''' MOZ_VTUNE ''', r''' $MOZ_VTUNE ''')
    (''' MOZ_ETW ''', r''' $MOZ_ETW ''')
    (''' MOZ_PROFILING ''', r''' $MOZ_PROFILING ''')
    (''' LIBICONV ''', r''' $LIBICONV ''')
    (''' MOZ_PLACES ''', r''' $MOZ_PLACES ''')
    (''' MOZ_TOOLKIT_SEARCH ''', r''' $MOZ_TOOLKIT_SEARCH ''')
    (''' MOZ_FEEDS ''', r''' $MOZ_FEEDS ''')
    (''' NS_PRINTING ''', r''' $NS_PRINTING ''')
    (''' MOZ_WEBGL ''', r''' $MOZ_WEBGL ''')
    (''' MOZ_HELP_VIEWER ''', r''' $MOZ_HELP_VIEWER ''')
    (''' TOOLCHAIN_PREFIX ''', r''' $TOOLCHAIN_PREFIX ''')
    (''' MOZ_PROFILELOCKING ''', r''' $MOZ_PROFILELOCKING ''')
    (''' ENABLE_TESTS ''', r''' $ENABLE_TESTS ''')
    (''' ENABLE_MARIONETTE ''', r''' $ENABLE_MARIONETTE ''')
    (''' IBMBIDI ''', r''' $IBMBIDI ''')
    (''' MOZ_UNIVERSALCHARDET ''', r''' $MOZ_UNIVERSALCHARDET ''')
    (''' ACCESSIBILITY ''', r''' $ACCESSIBILITY ''')
    (''' MOZ_SPELLCHECK ''', r''' $MOZ_SPELLCHECK ''')
    (''' MOZ_ANDROID_OMTC ''', r''' $MOZ_ANDROID_OMTC ''')
    (''' MOZ_ONLY_TOUCH_EVENTS ''', r''' $MOZ_ONLY_TOUCH_EVENTS ''')
    (''' MOZ_CRASHREPORTER ''', r''' $MOZ_CRASHREPORTER ''')
    (''' MOZ_CRASHREPORTER_INJECTOR ''', r''' $MOZ_CRASHREPORTER_INJECTOR ''')
    (''' MOZ_MAINTENANCE_SERVICE ''', r''' $MOZ_MAINTENANCE_SERVICE ''')
    (''' MOZ_STUB_INSTALLER ''', r''' $MOZ_STUB_INSTALLER ''')
    (''' MOZ_VERIFY_MAR_SIGNATURE ''', r''' $MOZ_VERIFY_MAR_SIGNATURE ''')
    (''' MOZ_ENABLE_SIGNMAR ''', r''' $MOZ_ENABLE_SIGNMAR ''')
    (''' MOZ_UPDATER ''', r''' $MOZ_UPDATER ''')
    (''' MOZ_ANGLE_RENDERER ''', r''' $MOZ_ANGLE_RENDERER ''')
    (''' MOZ_DIRECTX_SDK_PATH ''', r''' $MOZ_DIRECTX_SDK_PATH ''')
    (''' MOZ_DIRECTX_SDK_CPU_SUFFIX ''', r''' $MOZ_DIRECTX_SDK_CPU_SUFFIX ''')
    (''' MOZ_D3DX9_VERSION ''', r''' $MOZ_D3DX9_VERSION ''')
    (''' MOZ_D3DX9_CAB ''', r''' $MOZ_D3DX9_CAB ''')
    (''' MOZ_D3DCOMPILER_CAB ''', r''' $MOZ_D3DCOMPILER_CAB ''')
    (''' MOZ_D3DX9_DLL ''', r''' $MOZ_D3DX9_DLL ''')
    (''' MOZ_D3DCOMPILER_DLL ''', r''' $MOZ_D3DCOMPILER_DLL ''')
    (''' MOZ_METRO ''', r''' $MOZ_METRO ''')
    (''' MOZ_ANDROID_HISTORY ''', r''' $MOZ_ANDROID_HISTORY ''')
    (''' MOZ_WEBSMS_BACKEND ''', r''' $MOZ_WEBSMS_BACKEND ''')
    (''' ENABLE_STRIP ''', r''' $ENABLE_STRIP ''')
    (''' PKG_SKIP_STRIP ''', r''' $PKG_SKIP_STRIP ''')
    (''' STRIP_FLAGS ''', r''' $STRIP_FLAGS ''')
    (''' USE_ELF_DYNSTR_GC ''', r''' $USE_ELF_DYNSTR_GC ''')
    (''' USE_ELF_HACK ''', r''' $USE_ELF_HACK ''')
    (''' INCREMENTAL_LINKER ''', r''' $INCREMENTAL_LINKER ''')
    (''' MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS ''', r''' $MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS ''')
    (''' MOZ_COMPONENT_NSPR_LIBS ''', r''' $MOZ_COMPONENT_NSPR_LIBS ''')
    (''' MOZ_FIX_LINK_PATHS ''', r''' $MOZ_FIX_LINK_PATHS ''')
    (''' XPCOM_LIBS ''', r''' $XPCOM_LIBS ''')
    (''' XPCOM_FROZEN_LDOPTS ''', r''' $XPCOM_FROZEN_LDOPTS ''')
    (''' XPCOM_GLUE_LDOPTS ''', r''' $XPCOM_GLUE_LDOPTS ''')
    (''' XPCOM_STANDALONE_GLUE_LDOPTS ''', r''' $XPCOM_STANDALONE_GLUE_LDOPTS ''')
    (''' XPCOM_STATICRUNTIME_GLUE_LDOPTS ''', r''' $XPCOM_STATICRUNTIME_GLUE_LDOPTS ''')
    (''' XPCOM_STANDALONE_STATICRUNTIME_GLUE_LDOPTS ''', r''' $XPCOM_STANDALONE_STATICRUNTIME_GLUE_LDOPTS ''')
    (''' USE_DEPENDENT_LIBS ''', r''' $USE_DEPENDENT_LIBS ''')
    (''' MOZ_BUILD_ROOT ''', r''' $MOZ_BUILD_ROOT ''')
    (''' MOZ_OS2_TOOLS ''', r''' $MOZ_OS2_TOOLS ''')
    (''' MOZ_POST_DSO_LIB_COMMAND ''', r''' $MOZ_POST_DSO_LIB_COMMAND ''')
    (''' MOZ_POST_PROGRAM_COMMAND ''', r''' $MOZ_POST_PROGRAM_COMMAND ''')
    (''' MOZ_LINKER_EXTRACT ''', r''' $MOZ_LINKER_EXTRACT ''')
    (''' MOZ_PER_WINDOW_PRIVATE_BROWSING ''', r''' $MOZ_PER_WINDOW_PRIVATE_BROWSING ''')
    (''' MOZ_MACBUNDLE_NAME ''', r''' $MOZ_MACBUNDLE_NAME ''')
    (''' MOZ_MACBUNDLE_ID ''', r''' $MOZ_MACBUNDLE_ID ''')
    (''' MOZ_APP_NAME ''', r''' $MOZ_APP_NAME ''')
    (''' MOZ_APP_DISPLAYNAME ''', r''' $MOZ_APP_DISPLAYNAME ''')
    (''' MOZ_APP_BASENAME ''', r''' $MOZ_APP_BASENAME ''')
    (''' MOZ_APP_VENDOR ''', r''' $MOZ_APP_VENDOR ''')
    (''' MOZ_APP_PROFILE ''', r''' $MOZ_APP_PROFILE ''')
    (''' MOZ_APP_ID ''', r''' $MOZ_APP_ID ''')
    (''' MAR_CHANNEL_ID ''', r''' $MAR_CHANNEL_ID ''')
    (''' ACCEPTED_MAR_CHANNEL_IDS ''', r''' $ACCEPTED_MAR_CHANNEL_IDS ''')
    (''' MOZ_PROFILE_MIGRATOR ''', r''' $MOZ_PROFILE_MIGRATOR ''')
    (''' MOZ_EXTENSION_MANAGER ''', r''' $MOZ_EXTENSION_MANAGER ''')
    (''' MOZ_APP_UA_NAME ''', r''' $MOZ_APP_UA_NAME ''')
    (''' MOZ_APP_VERSION ''', r''' $MOZ_APP_VERSION ''')
    (''' MOZ_APP_MAXVERSION ''', r''' $MOZ_APP_MAXVERSION ''')
    (''' FIREFOX_VERSION ''', r''' $FIREFOX_VERSION ''')
    (''' MOZ_UA_OS_AGNOSTIC ''', r''' $MOZ_UA_OS_AGNOSTIC ''')
    (''' MOZ_UA_BUILDID ''', r''' $MOZ_UA_BUILDID ''')
    (''' MOZ_APP_STATIC_INI ''', r''' $MOZ_APP_STATIC_INI ''')
    (''' MOZ_PKG_SPECIAL ''', r''' $MOZ_PKG_SPECIAL ''')
    (''' MOZILLA_OFFICIAL ''', r''' $MOZILLA_OFFICIAL ''')
    (''' MOZ_TELEMETRY_DISPLAY_REV ''', r''' $MOZ_TELEMETRY_DISPLAY_REV ''')
    (''' MOZ_MAPINFO ''', r''' $MOZ_MAPINFO ''')
    (''' MOZ_BROWSE_INFO ''', r''' $MOZ_BROWSE_INFO ''')
    (''' MOZ_TOOLS_DIR ''', r''' $MOZ_TOOLS_DIR ''')
    (''' WIN32_REDIST_DIR ''', r''' $WIN32_REDIST_DIR ''')
    (''' SYSTEM_LIBXUL ''', r''' $SYSTEM_LIBXUL ''')
    (''' MOZ_NATIVE_JPEG ''', r''' $MOZ_NATIVE_JPEG ''')
    (''' MOZ_NATIVE_PNG ''', r''' $MOZ_NATIVE_PNG ''')
    (''' MOZ_NATIVE_BZ2 ''', r''' $MOZ_NATIVE_BZ2 ''')
    (''' MOZ_FLEXBOX ''', r''' $MOZ_FLEXBOX ''')
    (''' MOZ_JPEG_CFLAGS ''', r''' $MOZ_JPEG_CFLAGS ''')
    (''' MOZ_JPEG_LIBS ''', r''' $MOZ_JPEG_LIBS ''')
    (''' MOZ_BZ2_CFLAGS ''', r''' $MOZ_BZ2_CFLAGS ''')
    (''' MOZ_BZ2_LIBS ''', r''' $MOZ_BZ2_LIBS ''')
    (''' MOZ_PNG_CFLAGS ''', r''' $MOZ_PNG_CFLAGS ''')
    (''' MOZ_PNG_LIBS ''', r''' $MOZ_PNG_LIBS ''')
    (''' MOZ_NATIVE_NSPR ''', r''' $MOZ_NATIVE_NSPR ''')
    (''' NSS_DEP_LIBS ''', r''' $NSS_DEP_LIBS ''')
    (''' MOZ_NATIVE_NSS ''', r''' $MOZ_NATIVE_NSS ''')
    (''' NSS_DISABLE_DBM ''', r''' $NSS_DISABLE_DBM ''')
    (''' OS_CFLAGS ''', r''' $OS_CFLAGS ''')
    (''' OS_CXXFLAGS ''', r''' $OS_CXXFLAGS ''')
    (''' OS_CPPFLAGS ''', r''' $OS_CPPFLAGS ''')
    (''' OS_COMPILE_CFLAGS ''', r''' $OS_COMPILE_CFLAGS ''')
    (''' OS_COMPILE_CXXFLAGS ''', r''' $OS_COMPILE_CXXFLAGS ''')
    (''' OS_LDFLAGS ''', r''' $OS_LDFLAGS ''')
    (''' OS_LIBS ''', r''' $OS_LIBS ''')
    (''' CROSS_COMPILE ''', r''' $CROSS_COMPILE ''')
    (''' LIBGCC_PATH ''', r''' $LIBGCC_PATH ''')
    (''' WCHAR_CFLAGS ''', r''' $WCHAR_CFLAGS ''')
    (''' HOST_CFLAGS ''', r''' $HOST_CFLAGS ''')
    (''' HOST_CXXFLAGS ''', r''' $HOST_CXXFLAGS ''')
    (''' HOST_LDFLAGS ''', r''' $HOST_LDFLAGS ''')
    (''' HOST_OPTIMIZE_FLAGS ''', r''' $HOST_OPTIMIZE_FLAGS ''')
    (''' HOST_AR_FLAGS ''', r''' $HOST_AR_FLAGS ''')
    (''' HOST_LD ''', r''' $HOST_LD ''')
    (''' HOST_NSPR_MDCPUCFG ''', r''' $HOST_NSPR_MDCPUCFG ''')
    (''' HOST_BIN_SUFFIX ''', r''' $HOST_BIN_SUFFIX ''')
    (''' HOST_OS_ARCH ''', r''' $HOST_OS_ARCH ''')
    (''' TARGET_CPU ''', r''' $TARGET_CPU ''')
    (''' TARGET_VENDOR ''', r''' $TARGET_VENDOR ''')
    (''' TARGET_OS ''', r''' $TARGET_OS ''')
    (''' TARGET_NSPR_MDCPUCFG ''', r''' $TARGET_NSPR_MDCPUCFG ''')
    (''' TARGET_MD_ARCH ''', r''' $TARGET_MD_ARCH ''')
    (''' TARGET_XPCOM_ABI ''', r''' $TARGET_XPCOM_ABI ''')
    (''' OS_TARGET ''', r''' $OS_TARGET ''')
    (''' OS_ARCH ''', r''' $OS_ARCH ''')
    (''' OS_RELEASE ''', r''' $OS_RELEASE ''')
    (''' OS_TEST ''', r''' $OS_TEST ''')
    (''' CPU_ARCH ''', r''' $CPU_ARCH ''')
    (''' INTEL_ARCHITECTURE ''', r''' $INTEL_ARCHITECTURE ''')
    (''' MOZ_CHROME_FILE_FORMAT ''', r''' $MOZ_CHROME_FILE_FORMAT ''')
    (''' WRAP_LDFLAGS ''', r''' $WRAP_LDFLAGS ''')
    (''' MKSHLIB ''', r''' $MKSHLIB ''')
    (''' MKCSHLIB ''', r''' $MKCSHLIB ''')
    (''' MKSHLIB_FORCE_ALL ''', r''' $MKSHLIB_FORCE_ALL ''')
    (''' MKSHLIB_UNFORCE_ALL ''', r''' $MKSHLIB_UNFORCE_ALL ''')
    (''' DSO_CFLAGS ''', r''' $DSO_CFLAGS ''')
    (''' DSO_PIC_CFLAGS ''', r''' $DSO_PIC_CFLAGS ''')
    (''' DSO_LDOPTS ''', r''' $DSO_LDOPTS ''')
    (''' LIB_PREFIX ''', r''' $LIB_PREFIX ''')
    (''' DLL_PREFIX ''', r''' $DLL_PREFIX ''')
    (''' DLL_SUFFIX ''', r''' $DLL_SUFFIX ''')
    (''' LIB_SUFFIX ''', r''' $LIB_SUFFIX ''')
    (''' OBJ_SUFFIX ''', r''' $OBJ_SUFFIX ''')
    (''' BIN_SUFFIX ''', r''' $BIN_SUFFIX ''')
    (''' ASM_SUFFIX ''', r''' $ASM_SUFFIX ''')
    (''' IMPORT_LIB_SUFFIX ''', r''' $IMPORT_LIB_SUFFIX ''')
    (''' USE_N32 ''', r''' $USE_N32 ''')
    (''' CC_VERSION ''', r''' $CC_VERSION ''')
    (''' CXX_VERSION ''', r''' $CXX_VERSION ''')
    (''' MSMANIFEST_TOOL ''', r''' $MSMANIFEST_TOOL ''')
    (''' NS_ENABLE_TSF ''', r''' $NS_ENABLE_TSF ''')
    (''' MOZ_NSS_PATCH ''', r''' $MOZ_NSS_PATCH ''')
    (''' MOZ_APP_COMPONENT_LIBS ''', r''' $MOZ_APP_COMPONENT_LIBS ''')
    (''' MOZ_APP_EXTRA_LIBS ''', r''' $MOZ_APP_EXTRA_LIBS ''')
    (''' MOZ_MEDIA ''', r''' $MOZ_MEDIA ''')
    (''' MOZ_SYDNEYAUDIO ''', r''' $MOZ_SYDNEYAUDIO ''')
    (''' MOZ_SPEEX_RESAMPLER ''', r''' $MOZ_SPEEX_RESAMPLER ''')
    (''' MOZ_SOUNDTOUCH ''', r''' $MOZ_SOUNDTOUCH ''')
    (''' MOZ_CUBEB ''', r''' $MOZ_CUBEB ''')
    (''' MOZ_WAVE ''', r''' $MOZ_WAVE ''')
    (''' MOZ_VORBIS ''', r''' $MOZ_VORBIS ''')
    (''' MOZ_TREMOR ''', r''' $MOZ_TREMOR ''')
    (''' MOZ_OPUS ''', r''' $MOZ_OPUS ''')
    (''' MOZ_WEBM ''', r''' $MOZ_WEBM ''')
    (''' MOZ_DASH ''', r''' $MOZ_DASH ''')
    (''' MOZ_WMF ''', r''' $MOZ_WMF ''')
    (''' MOZ_MEDIA_PLUGINS ''', r''' $MOZ_MEDIA_PLUGINS ''')
    (''' MOZ_OMX_PLUGIN ''', r''' $MOZ_OMX_PLUGIN ''')
    (''' MOZ_VP8_ERROR_CONCEALMENT ''', r''' $MOZ_VP8_ERROR_CONCEALMENT ''')
    (''' MOZ_VP8_ENCODER ''', r''' $MOZ_VP8_ENCODER ''')
    (''' MOZ_VP8 ''', r''' $MOZ_VP8 ''')
    (''' MOZ_OGG ''', r''' $MOZ_OGG ''')
    (''' VPX_AS ''', r''' $VPX_AS ''')
    (''' VPX_ASFLAGS ''', r''' $VPX_ASFLAGS ''')
    (''' VPX_DASH_C_FLAG ''', r''' $VPX_DASH_C_FLAG ''')
    (''' VPX_AS_CONVERSION ''', r''' $VPX_AS_CONVERSION ''')
    (''' VPX_ASM_SUFFIX ''', r''' $VPX_ASM_SUFFIX ''')
    (''' VPX_X86_ASM ''', r''' $VPX_X86_ASM ''')
    (''' VPX_ARM_ASM ''', r''' $VPX_ARM_ASM ''')
    (''' VPX_NEED_OBJ_INT_EXTRACT ''', r''' $VPX_NEED_OBJ_INT_EXTRACT ''')
    (''' MOZ_INSTRUMENT_EVENT_LOOP ''', r''' $MOZ_INSTRUMENT_EVENT_LOOP ''')
    (''' LIBJPEG_TURBO_ASFLAGS ''', r''' $LIBJPEG_TURBO_ASFLAGS ''')
    (''' LIBJPEG_TURBO_X86_ASM ''', r''' $LIBJPEG_TURBO_X86_ASM ''')
    (''' LIBJPEG_TURBO_X64_ASM ''', r''' $LIBJPEG_TURBO_X64_ASM ''')
    (''' LIBJPEG_TURBO_ARM_ASM ''', r''' $LIBJPEG_TURBO_ARM_ASM ''')
    (''' MOZ_PACKAGE_JSSHELL ''', r''' $MOZ_PACKAGE_JSSHELL ''')
    (''' MOZILLA_VERSION ''', r''' $MOZILLA_VERSION ''')
    (''' ac_configure_args ''', r''' $ac_configure_args ''')
    (''' WIN_TOP_SRC ''', r''' $WIN_TOP_SRC ''')
    (''' top_srcdir ''', r''' $top_srcdir ''')
EOF

cat >> $CONFIG_STATUS <<\EOF
] ]

files = [
EOF

for out in $MAKEFILES; do
  echo "    '$out'," >> $CONFIG_STATUS
done

cat >> $CONFIG_STATUS <<\EOF
]

headers = [
EOF


HEADERS="netwerk/necko-config.h
xpcom/xpcom-config.h
xpcom/xpcom-private.h
"
for header in $HEADERS; do
  echo "    '$header'," >> $CONFIG_STATUS
done

cat >> $CONFIG_STATUS <<\EOF
]

non_global_defines = [
EOF

if test -n "$_NON_GLOBAL_ACDEFINES"; then
  for var in $_NON_GLOBAL_ACDEFINES; do
    echo "    '$var'," >> $CONFIG_STATUS
  done
fi

cat >> $CONFIG_STATUS <<EOF
]

__all__ = ['topobjdir', 'topsrcdir', 'defines', 'non_global_defines', 'substs', 'files', 'headers']

if __name__ == '__main__':
    args = dict([(name, globals()[name]) for name in __all__])
    import sys
    sys.path.append(os.path.join(topsrcdir, ${extra_python_path}'build'))
    from ConfigStatus import config_status
    config_status(**args)
EOF

chmod +x $CONFIG_STATUS
rm -fr confdefs* $ac_clean_files
test "$no_create" = yes || ${PYTHON} $CONFIG_STATUS || exit 1


# target_arch is from {ia32|x64|arm}
case "$CPU_ARCH" in
x86_64 | ia64)
    WEBRTC_TARGET_ARCH=x64
    ;;

arm*)
    WEBRTC_TARGET_ARCH=arm
    ;;

x86)
    WEBRTC_TARGET_ARCH=ia32
    ;;

*)
# unsupported arch for webrtc
    WEBRTC_TARGET_ARCH=unknown
    MOZ_WEBRTC=
    ;;

esac

# Generate Makefiles for WebRTC directly from .gyp files
if test "${OS_TARGET}" = "WINNT"; then
   if test "$HAVE_64BIT_OS"; then
      OS_BITS=64
   else
      OS_BITS=32
   fi
   EXTRA_GYP_DEFINES="-D MSVS_VERSION=${_MSVS_VERSION} -D MSVS_OS_BITS=${OS_BITS}"

elif test "${OS_TARGET}" = "Android"; then
   EXTRA_GYP_DEFINES="-D gtest_target_type=executable -D android_toolchain=${android_toolchain} -G os=android "
   if test -n "$ARM_ARCH" && test "$ARM_ARCH" -lt 7; then
      EXTRA_GYP_DEFINES+=" -D armv7=0 "
   else
      EXTRA_GYP_DEFINES+=" -D armv7=1 "
   fi
fi

if test -n "$MOZ_WEBRTC"; then
   echo "$ac_t"""generating WebRTC Makefiles..."" 1>&6

   WEBRTC_CONFIG="-D build_with_mozilla=1 --include ${srcdir}/media/webrtc/webrtc_config.gypi -D FORCED_INCLUDE_FILE=${srcdir}/media/webrtc/webrtc_config.gypi"

   GYP_WEBRTC_OPTIONS="--format=mozmake ${WEBRTC_CONFIG} -D target_arch=${WEBRTC_TARGET_ARCH} ${EXTRA_GYP_DEFINES} --depth=${srcdir}/media/webrtc/trunk --toplevel-dir=${srcdir} -G OBJDIR=${_objdir}"

   $PYTHON ${srcdir}/media/webrtc/trunk/build/gyp_chromium \
     $GYP_WEBRTC_OPTIONS \
     --generator-output=${_objdir}/media/webrtc/trunk \
     ${srcdir}/media/webrtc/trunk/peerconnection.gyp
   if test "$?" != 0; then
      { echo "configure: error: failed to generate WebRTC Makefiles" 1>&2; exit 1; }
   fi

   # XXX disable until we land the tranche with signaling
   if test -n "$MOZ_WEBRTC_SIGNALING"; then
     echo "$ac_t"""generating WebRTC/Signaling Makefiles..."" 1>&6
     $PYTHON ${srcdir}/media/webrtc/trunk/build/gyp_chromium \
       $GYP_WEBRTC_OPTIONS \
       -D build_for_test=0 \
       --generator-output=${_objdir}/media/webrtc/signaling \
       ${srcdir}/media/webrtc/signaling/signaling.gyp
     if test "$?" != 0; then
        { echo "configure: error: failed to generate WebRTC/Signaling Makefiles" 1>&2; exit 1; }
     fi

     echo "$ac_t"""generating WebRTC/SignalingTest Makefiles..."" 1>&6
     $PYTHON ${srcdir}/media/webrtc/trunk/build/gyp_chromium --format=mozmake \
       $GYP_WEBRTC_OPTIONS \
       -D build_for_test=1 \
       --generator-output=${_objdir}/media/webrtc/signalingtest \
       ${srcdir}/media/webrtc/signaling/signaling.gyp
     if test "$?" != 0; then
       { echo "configure: error: failed to generate WebRTC/SignalingTest Makefiles" 1>&2; exit 1; }
     fi
   fi

   echo "$ac_t"""generating gtest Makefiles..."" 1>&6
   # Ok to pass some extra -D's that are ignored here
   $PYTHON ${srcdir}/media/webrtc/trunk/build/gyp_chromium \
     $GYP_WEBRTC_OPTIONS \
     --generator-output=${_objdir}/media/webrtc/trunk/testing/ \
     ${srcdir}/media/webrtc/trunk/testing/gtest.gyp
   if test "$?" != 0; then
      { echo "configure: error: failed to generate gtest Makefiles" 1>&2; exit 1; }
   fi

   echo "$ac_t"""generating nrappkit Makefiles..."" 1>&6
   $PYTHON ${srcdir}/media/webrtc/trunk/build/gyp_chromium --format=mozmake \
     $GYP_WEBRTC_OPTIONS \
     --generator-output=${_objdir}/media/mtransport/third_party/nrappkit \
     ${srcdir}/media/mtransport/third_party/nrappkit/nrappkit.gyp
   if test "$?" != 0; then
      { echo "configure: error: failed to generate nrappkit Makefiles" 1>&2; exit 1; }
   fi

   echo "$ac_t"""generating nICEr Makefiles..."" 1>&6
   $PYTHON ${srcdir}/media/webrtc/trunk/build/gyp_chromium --format=mozmake \
     $GYP_WEBRTC_OPTIONS \
     --generator-output=${_objdir}/media/mtransport/third_party/nICEr \
     ${srcdir}/media/mtransport/third_party/nICEr/nicer.gyp
   if test "$?" != 0; then
      { echo "configure: error: failed to generate nICEr Makefiles" 1>&2; exit 1; }
   fi
fi

# Generate a JSON config file for unittest harnesses etc to read
# build configuration details from in a standardized way.
OS_TARGET=${OS_TARGET} \
TARGET_CPU=${TARGET_CPU} \
MOZ_DEBUG=${MOZ_DEBUG} \
MOZ_WIDGET_TOOLKIT=${MOZ_WIDGET_TOOLKIT} \
UNIVERSAL_BINARY=${UNIVERSAL_BINARY} \
MOZ_CRASHREPORTER=${MOZ_CRASHREPORTER} \
MOZ_APP_NAME=${MOZ_APP_NAME} \
MOZ_PER_WINDOW_PRIVATE_BROWSING=${MOZ_PER_WINDOW_PRIVATE_BROWSING} \
  $PYTHON ${_topsrcdir}/config/writemozinfo.py ./mozinfo.json.tmp
if cmp -s ./mozinfo.json.tmp ./mozinfo.json; then
  rm ./mozinfo.json.tmp
else
  mv -f ./mozinfo.json.tmp ./mozinfo.json
fi

# Run jemalloc configure script

if test -z "$MOZ_NATIVE_JEMALLOC" -a "$MOZ_MEMORY" && test -n "$MOZ_JEMALLOC3" -o -n "$MOZ_REPLACE_MALLOC"; then
  ac_configure_args="$_SUBDIR_CONFIG_ARGS --build=$build --host=$target --enable-stats --with-jemalloc-prefix=je_"
  if test -n "$MOZ_REPLACE_MALLOC"; then
    # When using replace_malloc, we always want memalign and valloc exported from jemalloc.
    ac_configure_args="$ac_configure_args ac_cv_func_memalign=yes"
    ac_configure_args="$ac_configure_args ac_cv_func_valloc=yes"
  fi
  if test -n "$MOZ_JEMALLOC3"; then
    case "${OS_ARCH}" in
      WINNT|Darwin)
        # We want jemalloc functions to be kept hidden on both Mac and Windows
        # See memory/build/mozmemory_wrap.h for details.
        ac_configure_args="$ac_configure_args --without-export"
        ;;
    esac
  elif test "${OS_ARCH}" = Darwin; then
    # When building as a replace-malloc lib, disabling the zone allocator
    # forces to use pthread_atfork.
    ac_configure_args="$ac_configure_args --disable-zone-allocator"
  fi
  _MANGLE="malloc posix_memalign aligned_alloc calloc realloc free memalign valloc malloc_usable_size"
  JEMALLOC_WRAPPER=
  if test -z "$MOZ_REPLACE_MALLOC"; then
    case "$OS_ARCH" in
      Linux|DragonFly|FreeBSD|NetBSD|OpenBSD)
        MANGLE=$_MANGLE
        ;;
    esac
  elif test -z "$MOZ_JEMALLOC3"; then
    MANGLE=$_MANGLE
    JEMALLOC_WRAPPER=replace_
  fi
  if test -n "$MANGLE"; then
    MANGLED=
    if test -n "$_WRAP_MALLOC" -a -z "$JEMALLOC_WRAPPER"; then
      JEMALLOC_WRAPPER=__wrap_
    fi
    for mangle in ${MANGLE}; do
      if test -n "$MANGLED"; then
        MANGLED="$mangle:$JEMALLOC_WRAPPER$mangle,$MANGLED"
      else
        MANGLED="$mangle:$JEMALLOC_WRAPPER$mangle"
      fi
    done
    ac_configure_args="$ac_configure_args --with-mangling=$MANGLED"
  fi
  unset CONFIG_FILES
  if test -z "$MOZ_TLS"; then
    ac_configure_args="$ac_configure_args --disable-tls"
  fi
  EXTRA_CFLAGS="$CFLAGS"
  for var in AS CC CXX CPP LD AR RANLIB STRIP CPPFLAGS EXTRA_CFLAGS LDFLAGS; do
    ac_configure_args="$ac_configure_args $var='`eval echo \\${${var}}`'"
  done
  if test "$CROSS_COMPILE"; then
    ac_configure_args="$ac_configure_args je_cv_static_page_shift=12"
  fi
  _save_cache_file="$cache_file"
  cache_file=$_objdir/memory/jemalloc/src/config.cache
  

if test "$no_recursion" != yes; then

  # Remove --cache-file and --srcdir arguments so they do not pile up.
  ac_sub_configure_args=
  ac_prev=
  for ac_arg in $ac_configure_args; do
    if test -n "$ac_prev"; then
      ac_prev=
      continue
    fi
    case "$ac_arg" in
    -cache-file | --cache-file | --cache-fil | --cache-fi \
    | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
      ac_prev=cache_file ;;
    -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
    | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
      ;;
    -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
      ac_prev=srcdir ;;
    -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
      ;;
    *) ac_sub_configure_args="$ac_sub_configure_args $ac_arg" ;;
    esac
  done

  for ac_config_dir in memory/jemalloc/src; do

    # Do not complain, so a configure script can configure whichever
    # parts of a large source tree are present.
    if test ! -d $srcdir/$ac_config_dir; then
      continue
    fi

    echo configuring in $ac_config_dir

    case "$srcdir" in
    .) ;;
    *)
      if test -d ./$ac_config_dir || mkdir ./$ac_config_dir; then :;
      else
        { echo "configure: error: can not create `pwd`/$ac_config_dir" 1>&2; exit 1; }
      fi
      ;;
    esac

    ac_popdir=`pwd`
    cd $ac_config_dir

      # A "../" for each directory in /$ac_config_dir.
      ac_dots=`echo $ac_config_dir|sed -e 's%^\./%%' -e 's%[^/]$%&/%' -e 's%[^/]*/%../%g'`

    case "$srcdir" in
    .) # No --srcdir option.  We are building in place.
      ac_sub_srcdir=$srcdir ;;
    /* | ?:/*) # Absolute path.
      ac_sub_srcdir=$srcdir/$ac_config_dir ;;
    *) # Relative path.
      ac_sub_srcdir=$ac_dots$srcdir/$ac_config_dir ;;
    esac

    # Check for guested configure; otherwise get Cygnus style configure.
    if test -f $ac_sub_srcdir/configure; then
      ac_sub_configure=$ac_sub_srcdir/configure
    elif test -f $ac_sub_srcdir/configure.in; then
      ac_sub_configure=$ac_configure
    else
      echo "configure: warning: no configuration information is in $ac_config_dir" 1>&2
      ac_sub_configure=
    fi

    # The recursion is here.
    if test -n "$ac_sub_configure"; then

      # Make the cache file name correct relative to the subdirectory.
      case "$cache_file" in
      /* | ?:/*) ac_sub_cache_file=$cache_file ;;
      *) # Relative path.
        ac_sub_cache_file="$ac_dots$cache_file" ;;
      esac
  case "$ac_given_INSTALL" in
        [/$]*) INSTALL="$ac_given_INSTALL" ;;
        *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
        esac

      echo "running ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir"
      # The eval makes quoting arguments work.
      if eval ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir
      then :
      else
        { echo "configure: error: $ac_sub_configure failed for $ac_config_dir" 1>&2; exit 1; }
      fi
    fi

    cd $ac_popdir
  done
fi


  cache_file="$_save_cache_file"
  ac_configure_args="$_SUBDIR_CONFIG_ARGS"
fi

# Run freetype configure script

if test "$MOZ_TREE_FREETYPE"; then
   export CFLAGS="$CFLAGS $MOZ_DEBUG_FLAGS -std=c99"
   export CPPFLAGS="$CPPFLAGS $MOZ_DEBUG_FLAGS"
   export CXXFLAGS="$CXXFLAGS $MOZ_DEBUG_FLAGS"
   export LDFLAGS="$LDFLAGS $MOZ_DEBUG_LDFLAGS"
   export CONFIG_FILES="unix-cc.mk:unix-cc.in unix-def.mk:unix-def.in freetype-config freetype2.pc:freetype2.in"
   ac_configure_args="$ac_configure_args --host=$target --disable-shared --with-pic=yes"
   

if test "$no_recursion" != yes; then

  # Remove --cache-file and --srcdir arguments so they do not pile up.
  ac_sub_configure_args=
  ac_prev=
  for ac_arg in $ac_configure_args; do
    if test -n "$ac_prev"; then
      ac_prev=
      continue
    fi
    case "$ac_arg" in
    -cache-file | --cache-file | --cache-fil | --cache-fi \
    | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
      ac_prev=cache_file ;;
    -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
    | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
      ;;
    -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
      ac_prev=srcdir ;;
    -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
      ;;
    *) ac_sub_configure_args="$ac_sub_configure_args $ac_arg" ;;
    esac
  done

  for ac_config_dir in modules/freetype2; do

    # Do not complain, so a configure script can configure whichever
    # parts of a large source tree are present.
    if test ! -d $srcdir/$ac_config_dir; then
      continue
    fi

    echo configuring in $ac_config_dir

    case "$srcdir" in
    .) ;;
    *)
      if test -d ./$ac_config_dir || mkdir ./$ac_config_dir; then :;
      else
        { echo "configure: error: can not create `pwd`/$ac_config_dir" 1>&2; exit 1; }
      fi
      ;;
    esac

    ac_popdir=`pwd`
    cd $ac_config_dir

      # A "../" for each directory in /$ac_config_dir.
      ac_dots=`echo $ac_config_dir|sed -e 's%^\./%%' -e 's%[^/]$%&/%' -e 's%[^/]*/%../%g'`

    case "$srcdir" in
    .) # No --srcdir option.  We are building in place.
      ac_sub_srcdir=$srcdir ;;
    /* | ?:/*) # Absolute path.
      ac_sub_srcdir=$srcdir/$ac_config_dir ;;
    *) # Relative path.
      ac_sub_srcdir=$ac_dots$srcdir/$ac_config_dir ;;
    esac

    # Check for guested configure; otherwise get Cygnus style configure.
    if test -f $ac_sub_srcdir/configure; then
      ac_sub_configure=$ac_sub_srcdir/configure
    elif test -f $ac_sub_srcdir/configure.in; then
      ac_sub_configure=$ac_configure
    else
      echo "configure: warning: no configuration information is in $ac_config_dir" 1>&2
      ac_sub_configure=
    fi

    # The recursion is here.
    if test -n "$ac_sub_configure"; then

      # Make the cache file name correct relative to the subdirectory.
      case "$cache_file" in
      /* | ?:/*) ac_sub_cache_file=$cache_file ;;
      *) # Relative path.
        ac_sub_cache_file="$ac_dots$cache_file" ;;
      esac
  case "$ac_given_INSTALL" in
        [/$]*) INSTALL="$ac_given_INSTALL" ;;
        *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
        esac

      echo "running ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir"
      # The eval makes quoting arguments work.
      if eval ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir
      then :
      else
        { echo "configure: error: $ac_sub_configure failed for $ac_config_dir" 1>&2; exit 1; }
      fi
    fi

    cd $ac_popdir
  done
fi


fi

if test -z "$direct_nspr_config"; then
                    CC="$_SUBDIR_CC"
    CXX="$_SUBDIR_CXX"
    CFLAGS="$_SUBDIR_CFLAGS"
    CPPFLAGS="$_SUBDIR_CPPFLAGS"
    CXXFLAGS="$_SUBDIR_CXXFLAGS"
    LDFLAGS="$_SUBDIR_LDFLAGS"
    HOST_CC="$_SUBDIR_HOST_CC"
    HOST_CFLAGS="$_SUBDIR_HOST_CFLAGS"
    HOST_LDFLAGS="$_SUBDIR_HOST_LDFLAGS"
    RC=
fi

unset MAKEFILES
unset CONFIG_FILES

# No need to run subconfigures when building with LIBXUL_SDK_DIR
if test "$COMPILE_ENVIRONMENT" -a -z "$LIBXUL_SDK_DIR"; then

export WRAP_LDFLAGS

if test -n "$_WRAP_MALLOC"; then
    # Avoid doubling wrap malloc arguments
    _SUBDIR_CONFIG_ARGS="`echo $_SUBDIR_CONFIG_ARGS | sed -e 's/--enable-wrap-malloc *//'`"
fi

if test -z "$MOZ_NATIVE_NSPR"; then
    ac_configure_args="$_SUBDIR_CONFIG_ARGS --with-dist-prefix=$MOZ_BUILD_ROOT/dist --with-mozilla"
    if test -z "$MOZ_DEBUG"; then
        ac_configure_args="$ac_configure_args --disable-debug"
    else
        ac_configure_args="$ac_configure_args --enable-debug"
    fi
    if test "$MOZ_OPTIMIZE" = "1"; then
        ac_configure_args="$ac_configure_args --enable-optimize"
    elif test -z "$MOZ_OPTIMIZE"; then
        ac_configure_args="$ac_configure_args --disable-optimize"
    fi
    if test -n "$HAVE_64BIT_OS"; then
        ac_configure_args="$ac_configure_args --enable-64bit"
    fi
    if test -n "$USE_ARM_KUSER"; then
        ac_configure_args="$ac_configure_args --with-arm-kuser"
    fi
    ac_configure_args="$ac_configure_args $NSPR_CONFIGURE_ARGS"
    if test -n "$MOZ_LINKER" -a -z "$MOZ_OLD_LINKER" -a "$ac_cv_func_dladdr" = no ; then
      # dladdr is supported by the new linker, even when the system linker doesn't
      # support it. Trick nspr into using dladdr when it's not supported.
      _SAVE_CPPFLAGS="$CPPFLAGS"
      export CPPFLAGS="-include $_topsrcdir/mozglue/linker/dladdr.h $CPPFLAGS"
    fi
    _SAVE_LDFLAGS="$LDFLAGS"
    export LDFLAGS="$LDFLAGS $NSPR_LDFLAGS"
    

if test "$no_recursion" != yes; then

  # Remove --cache-file and --srcdir arguments so they do not pile up.
  ac_sub_configure_args=
  ac_prev=
  for ac_arg in $ac_configure_args; do
    if test -n "$ac_prev"; then
      ac_prev=
      continue
    fi
    case "$ac_arg" in
    -cache-file | --cache-file | --cache-fil | --cache-fi \
    | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
      ac_prev=cache_file ;;
    -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
    | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
      ;;
    -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
      ac_prev=srcdir ;;
    -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
      ;;
    *) ac_sub_configure_args="$ac_sub_configure_args $ac_arg" ;;
    esac
  done

  for ac_config_dir in nsprpub; do

    # Do not complain, so a configure script can configure whichever
    # parts of a large source tree are present.
    if test ! -d $srcdir/$ac_config_dir; then
      continue
    fi

    echo configuring in $ac_config_dir

    case "$srcdir" in
    .) ;;
    *)
      if test -d ./$ac_config_dir || mkdir ./$ac_config_dir; then :;
      else
        { echo "configure: error: can not create `pwd`/$ac_config_dir" 1>&2; exit 1; }
      fi
      ;;
    esac

    ac_popdir=`pwd`
    cd $ac_config_dir

      # A "../" for each directory in /$ac_config_dir.
      ac_dots=`echo $ac_config_dir|sed -e 's%^\./%%' -e 's%[^/]$%&/%' -e 's%[^/]*/%../%g'`

    case "$srcdir" in
    .) # No --srcdir option.  We are building in place.
      ac_sub_srcdir=$srcdir ;;
    /* | ?:/*) # Absolute path.
      ac_sub_srcdir=$srcdir/$ac_config_dir ;;
    *) # Relative path.
      ac_sub_srcdir=$ac_dots$srcdir/$ac_config_dir ;;
    esac

    # Check for guested configure; otherwise get Cygnus style configure.
    if test -f $ac_sub_srcdir/configure; then
      ac_sub_configure=$ac_sub_srcdir/configure
    elif test -f $ac_sub_srcdir/configure.in; then
      ac_sub_configure=$ac_configure
    else
      echo "configure: warning: no configuration information is in $ac_config_dir" 1>&2
      ac_sub_configure=
    fi

    # The recursion is here.
    if test -n "$ac_sub_configure"; then

      # Make the cache file name correct relative to the subdirectory.
      case "$cache_file" in
      /* | ?:/*) ac_sub_cache_file=$cache_file ;;
      *) # Relative path.
        ac_sub_cache_file="$ac_dots$cache_file" ;;
      esac
  case "$ac_given_INSTALL" in
        [/$]*) INSTALL="$ac_given_INSTALL" ;;
        *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
        esac

      echo "running ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir"
      # The eval makes quoting arguments work.
      if eval ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir
      then :
      else
        { echo "configure: error: $ac_sub_configure failed for $ac_config_dir" 1>&2; exit 1; }
      fi
    fi

    cd $ac_popdir
  done
fi


    LDFLAGS="$_SAVE_LDFLAGS"
    if test -n "$MOZ_LINKER" -a -z "$MOZ_OLD_LINKER" -a "$ac_cv_func_dladdr" = no; then
      unset CPPFLAGS
      CPPFLAGS="$_SAVE_CFLAGS"
    fi
    ac_configure_args="$_SUBDIR_CONFIG_ARGS"
fi

CC="$_SUBDIR_CC"
CXX="$_SUBDIR_CXX"
CFLAGS="$_SUBDIR_CFLAGS"
CPPFLAGS="$_SUBDIR_CPPFLAGS"
CXXFLAGS="$_SUBDIR_CXXFLAGS"
LDFLAGS="$_SUBDIR_LDFLAGS"
HOST_CC="$_SUBDIR_HOST_CC"
HOST_CFLAGS="$_SUBDIR_HOST_CFLAGS"
HOST_LDFLAGS="$_SUBDIR_HOST_LDFLAGS"
RC=

# Run the SpiderMonkey 'configure' script.
dist=$MOZ_BUILD_ROOT/dist
ac_configure_args="$_SUBDIR_CONFIG_ARGS"
ac_configure_args="$ac_configure_args --enable-threadsafe"
if test "$BUILD_CTYPES"; then
    # Build js-ctypes on the platforms we can.
    ac_configure_args="$ac_configure_args --enable-ctypes"
fi
if test -z "$JS_SHARED_LIBRARY" ; then
    ac_configure_args="$ac_configure_args --disable-shared-js"
fi
if test -z "$MOZ_NATIVE_NSPR"; then
    ac_configure_args="$ac_configure_args --with-nspr-cflags='$NSPR_CFLAGS'"
    ac_configure_args="$ac_configure_args --with-nspr-libs='$NSPR_LIBS'"
fi
ac_configure_args="$ac_configure_args --with-dist-dir=../../dist"
ac_configure_args="$ac_configure_args --prefix=$dist"
if test "$MOZ_MEMORY"; then
   ac_configure_args="$ac_configure_args --enable-jemalloc"
fi
if test -n "$MOZ_GLUE_LDFLAGS"; then
   export MOZ_GLUE_LDFLAGS
fi
if test -n "$MOZ_GLUE_PROGRAM_LDFLAGS"; then
   export MOZ_GLUE_PROGRAM_LDFLAGS
fi
if test "$MOZ_NATIVE_ZLIB" != 1 -a "$OS_ARCH" = "WINNT"; then
   MOZ_ZLIB_LIBS=
fi
export MOZ_NATIVE_ZLIB
export MOZ_ZLIB_CFLAGS
export MOZ_ZLIB_LIBS
export MOZ_APP_NAME
export STLPORT_CPPFLAGS
export STLPORT_LDFLAGS
export STLPORT_LIBS


if test "$no_recursion" != yes; then

  # Remove --cache-file and --srcdir arguments so they do not pile up.
  ac_sub_configure_args=
  ac_prev=
  for ac_arg in $ac_configure_args; do
    if test -n "$ac_prev"; then
      ac_prev=
      continue
    fi
    case "$ac_arg" in
    -cache-file | --cache-file | --cache-fil | --cache-fi \
    | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
      ac_prev=cache_file ;;
    -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
    | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
      ;;
    -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
      ac_prev=srcdir ;;
    -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
      ;;
    *) ac_sub_configure_args="$ac_sub_configure_args $ac_arg" ;;
    esac
  done

  for ac_config_dir in js/src; do

    # Do not complain, so a configure script can configure whichever
    # parts of a large source tree are present.
    if test ! -d $srcdir/$ac_config_dir; then
      continue
    fi

    echo configuring in $ac_config_dir

    case "$srcdir" in
    .) ;;
    *)
      if test -d ./$ac_config_dir || mkdir ./$ac_config_dir; then :;
      else
        { echo "configure: error: can not create `pwd`/$ac_config_dir" 1>&2; exit 1; }
      fi
      ;;
    esac

    ac_popdir=`pwd`
    cd $ac_config_dir

      # A "../" for each directory in /$ac_config_dir.
      ac_dots=`echo $ac_config_dir|sed -e 's%^\./%%' -e 's%[^/]$%&/%' -e 's%[^/]*/%../%g'`

    case "$srcdir" in
    .) # No --srcdir option.  We are building in place.
      ac_sub_srcdir=$srcdir ;;
    /* | ?:/*) # Absolute path.
      ac_sub_srcdir=$srcdir/$ac_config_dir ;;
    *) # Relative path.
      ac_sub_srcdir=$ac_dots$srcdir/$ac_config_dir ;;
    esac

    # Check for guested configure; otherwise get Cygnus style configure.
    if test -f $ac_sub_srcdir/configure; then
      ac_sub_configure=$ac_sub_srcdir/configure
    elif test -f $ac_sub_srcdir/configure.in; then
      ac_sub_configure=$ac_configure
    else
      echo "configure: warning: no configuration information is in $ac_config_dir" 1>&2
      ac_sub_configure=
    fi

    # The recursion is here.
    if test -n "$ac_sub_configure"; then

      # Make the cache file name correct relative to the subdirectory.
      case "$cache_file" in
      /* | ?:/*) ac_sub_cache_file=$cache_file ;;
      *) # Relative path.
        ac_sub_cache_file="$ac_dots$cache_file" ;;
      esac
  case "$ac_given_INSTALL" in
        [/$]*) INSTALL="$ac_given_INSTALL" ;;
        *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
        esac

      echo "running ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir"
      # The eval makes quoting arguments work.
      if eval ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir
      then :
      else
        { echo "configure: error: $ac_sub_configure failed for $ac_config_dir" 1>&2; exit 1; }
      fi
    fi

    cd $ac_popdir
  done
fi


ac_configure_args="$_SUBDIR_CONFIG_ARGS"

fi # COMPILE_ENVIRONMENT && !LIBXUL_SDK_DIR
