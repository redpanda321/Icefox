<!DOCTYPE HTML>
<html class="reftest-wait">
<!-- Test: Create video, load, wait for video frame to show, add poster
     attribute, poster should show. -->
<script>
function runTest() {
  var v = document.createElement('video');
  
  var loadeddata = 
    function() {
      setTimeout(function() {v.poster = "blue250x200.png";}, 100);
      setTimeout(function() {document.documentElement.className = '';}, 150);
    };

  v.addEventListener('loadeddata',
                     loadeddata,
                     false);
  v.id = 'v';
  v.src = "black140x100.ogv";
  v.preload = "auto";
  document.body.appendChild(v);
  
}

</script>
<body style="background:white;" onload="runTest();">
</body>
</html>
