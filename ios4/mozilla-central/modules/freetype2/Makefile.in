# ***** BEGIN LICENSE BLOCK *****
# Version: MPL 1.1/GPL 2.0/LGPL 2.1
#
# The contents of this file are subject to the Mozilla Public License Version
# 1.1 (the "License"); you may not use this file except in compliance with
# the License. You may obtain a copy of the License at
# http://www.mozilla.org/MPL/
#
# Software distributed under the License is distributed on an "AS IS" basis,
# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
# for the specific language governing rights and limitations under the
# License.
#
# The Original Code is mozilla.org code.
#
# The Initial Developer of the Original Code is
# 
# Portions created by the Initial Developer are Copyright (C) 2005
# the Initial Developer. All Rights Reserved.
#
# Contributor(s):
#  Brad Lassey <blassey@mozilla.com>
#
# Alternatively, the contents of this file may be used under the terms of
# either of the GNU General Public License Version 2 or later (the "GPL"),
# or the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
# in which case the provisions of the GPL or the LGPL are applicable instead
# of those above. If you wish to allow use of your version of this file only
# under the terms of either the GPL or the LGPL, and not to allow others to
# use your version of this file under the terms of the MPL, indicate your
# decision by deleting the provisions above and replace them with the notice
# and other provisions required by the GPL or the LGPL. If you do not delete
# the provisions above, a recipient may use your version of this file under
# the terms of any one of the MPL, the GPL or the LGPL.
#
# ***** END LICENSE BLOCK *****

DEPTH		= ../..
topsrcdir	= @top_srcdir@
srcdir		= @srcdir@
VPATH		= @srcdir@

include $(DEPTH)/config/autoconf.mk

MODULE	= freetype2
LIBRARY_NAME	= freetype2
GRE_MODULE	= 1
LIBXUL_LIBRARY = 1
DIST_INSTALL = 1
FORCE_STATIC_LIB = 1

VPATH += @srcdir@/src/autofit 	\
	@srcdir@/src/base 	\
	@srcdir@/src/bdf/ 	\
	@srcdir@/src/cache	\
	@srcdir@/src/cff 	\
	@srcdir@/src/cid 	\
	@srcdir@/src/lzw 	\
	@srcdir@/src/pcf 	\
	@srcdir@/src/pfr 	\
	@srcdir@/src/psaux 	\
	@srcdir@/src/pshinter 	\
	@srcdir@/src/psnames 	\
	@srcdir@/src/raster 	\
	@srcdir@/src/smooth 	\
	@srcdir@/src/truetype 	\
	@srcdir@/src/type1 	\
	@srcdir@/src/type42 	\
	@srcdir@/src/winfonts 	\
	@srcdir@/src/gzip	\
	@srcdir@/src/sfnt 	\
	@srcdir@/src/autofit 	\
	@srcdir@/src/sfnt 	\
	$(NULL)

CSRCS = \
	afangles.c	\
	ftbase.c	\
	ftbbox.c	\
	ftbitmap.c	\
	ftdebug.c	\
	ftgasp.c	\
	ftgloadr.c	\
	ftglyph.c	\
	ftinit.c	\
	ftmm.c		\
	ftpfr.c		\
	ftstroke.c	\
	ftsynth.c	\
	ftsystem.c	\
	fttype1.c	\
	ftwinfnt.c	\
	bdf.c		\
	ftcache.c	\
	cff.c		\
	type1cid.c	\
	ftlzw.c		\
	pcf.c		\
	pfr.c		\
	psaux.c		\
	pshinter.c	\
	psmodule.c	\
	raster.c	\
	smooth.c	\
	truetype.c	\
	type1.c		\
	type42.c	\
	winfnt.c	\
	ftgzip.c	\
	sfdriver.c	\
	afmodule.c	\
	ttmtx.c		\
	sfobjs.c	\
	afloader.c	\
	ttsbit.c	\
	ttload.c	\
	ttbdf.c		\
	afhints.c	\
	afglobal.c	\
	ttpost.c	\
	ttkern.c	\
	ttcmap.c	\
	afindic.c	\
	aflatin.c	\
	aflatin2.c	\
	afcjk.c		\
	afdummy.c	\
	afpic.c		\
	basepic.c	\
	ftadvanc.c	\
	ftfstype.c	\
	ftpic.c		\
	ftsnames.c	\
	cffpic.c	\
	pshpic.c	\
	pspic.c		\
	rastpic.c	\
	sfntpic.c	\
	ftspic.c	\
	ttpic.c		\
	moz_ft_shim.c   \
	$(NULL)


DEFINES += -DFT2_BUILD_LIBRARY -DFT_OPTION_AUTOFIT2

ifdef _MSC_VER
DEFINES += -FI $(srcdir)/include/freetype/config/ftstdlib.h
DEFINES += -FI $(srcdir)/include/freetype/config/ftheader.h
else
DEFINES += -include $(srcdir)/include/freetype/config/ftstdlib.h
DEFINES += -include $(srcdir)/include/freetype/config/ftheader.h
endif

ifdef WINCE
DEFINES += -DCHAR_BIT=8
endif

LOCAL_INCLUDES = -I @srcdir@/include

include $(topsrcdir)/config/rules.mk

